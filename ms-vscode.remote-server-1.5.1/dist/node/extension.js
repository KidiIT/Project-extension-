/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e,t={2729:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=2729,e.exports=t},9668:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=9668,e.exports=t},3329:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionStatus=void 0,(n=t.ConnectionStatus||(t.ConnectionStatus={})).None="none",n.Connecting="connecting",n.RefreshingTunnelAccessToken="refreshingTunnelAccessToken",n.Connected="connected",n.Disconnected="disconnected",n.RefreshingTunnelHostPublicKey="refreshingTunnelHostPublicKey"},1480:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionStatusChangedEventArgs=void 0,t.ConnectionStatusChangedEventArgs=class{constructor(e,t,n){this.previousStatus=e,this.status=t,this.disconnectError=n}}},6589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTunnelRelayStreamFactory=void 0;const r=n(9696);t.DefaultTunnelRelayStreamFactory=class{async createRelayStream(e,t,n,s){if((0,r.isNode)()){const i=await r.SshHelpers.openConnection(e,t,Object.assign({},n&&{Authorization:`tunnel ${n}`}),s);return{stream:i,protocol:i.protocol}}{n&&(t=[...t,n]);const s=await r.SshHelpers.openConnection(e,t);return{stream:s,protocol:s.protocol}}}}},1139:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.maxReconnectDelayMs=void 0,s(n(4736),t),s(n(1194),t),s(n(9470),t),s(n(2616),t),s(n(7449),t),s(n(3226),t),s(n(9696),t),s(n(4736),t),s(n(1194),t),s(n(1306),t),s(n(6589),t),s(n(3559),t),s(n(82),t),s(n(5368),t),s(n(4513),t),s(n(3329),t),s(n(1480),t);var i=n(3831);Object.defineProperty(t,"maxReconnectDelayMs",{enumerable:!0,get:function(){return i.maxReconnectDelayMs}}),s(n(7455),t),s(n(2008),t),s(n(7511),t),s(n(5485),t),s(n(3390),t)},2040:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortRelayConnectRequestMessage=void 0;const r=n(9361);class s extends r.PortForwardChannelOpenMessage{constructor(){super(...arguments),this.isE2EEncryptionRequested=!1}onWrite(e){var t;super.onWrite(e),e.writeString(null!==(t=this.accessToken)&&void 0!==t?t:"","utf8"),e.writeBoolean(this.isE2EEncryptionRequested)}onRead(e){super.onRead(e),this.accessToken=e.readString("utf8"),this.isE2EEncryptionRequested=e.readBoolean()}}t.PortRelayConnectRequestMessage=s},7752:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortRelayConnectResponseMessage=void 0;const r=n(2727);class s extends r.ChannelOpenConfirmationMessage{constructor(){super(...arguments),this.isE2EEncryptionEnabled=!1}onWrite(e){super.onWrite(e),e.writeBoolean(this.isE2EEncryptionEnabled)}onRead(e){super.onRead(e),this.isE2EEncryptionEnabled=e.readBoolean()}}t.PortRelayConnectResponseMessage=s},7012:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortRelayRequestMessage=void 0;const r=n(9361);class s extends r.PortForwardRequestMessage{onWrite(e){if(super.onWrite(e),!this.accessToken)throw new Error("An access token is required.");e.writeString(this.accessToken,"utf8")}onRead(e){super.onRead(e),this.accessToken=e.readString("utf8")}}t.PortRelayRequestMessage=s},9470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiModeTunnelClient=void 0;const r=n(3399),s=n(4513);class i extends s.TunnelConnectionBase{constructor(){super(r.TunnelAccessScopes.Connect),this.clients=[],this.connectionModes=this.clients?[...new Set(...this.clients.map((e=>e.connectionModes)))]:[]}get acceptLocalConnectionsForForwardedPorts(){return!!this.clients.find((e=>e.acceptLocalConnectionsForForwardedPorts))}set acceptLocalConnectionsForForwardedPorts(e){this.clients.forEach((t=>t.acceptLocalConnectionsForForwardedPorts=e))}get localForwardingHostAddress(){var e;return null===(e=this.clients[0])||void 0===e?void 0:e.localForwardingHostAddress}set localForwardingHostAddress(e){this.clients.forEach((t=>t.localForwardingHostAddress=e))}connect(e,t,n){if(!e)throw new Error("Tunnel cannot be null");return new Promise((e=>{}))}get portForwarding(){throw new Error("Not supported.")}connectToForwardedPort(e,t){throw new Error("Method not implemented.")}waitForForwardedPort(e,t){throw new Error("Method not implemented.")}async refreshPorts(){throw new Error("Method not implemented.")}async dispose(){await super.dispose(),await Promise.all(this.clients.map((e=>e.dispose())))}}t.MultiModeTunnelClient=i},2616:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiModeTunnelHost=void 0;const r=n(3399),s=n(1328),i=n(4513);class o extends i.TunnelConnectionBase{constructor(){super(r.TunnelAccessScopes.Host),this.hosts=[]}async start(e){await this.connect(e)}async connect(e,t,n){const r=[];this.hosts.forEach((s=>{r.push(s.connect(e,t,n))})),await Promise.all(r)}async refreshPorts(){const e=[];this.hosts.forEach((t=>{e.push(t.refreshPorts())})),await Promise.all(e)}async dispose(){await Promise.all(this.hosts.map((e=>e.dispose()))),await super.dispose()}}t.MultiModeTunnelHost=o,o.hostId=(0,s.v4)()},5485:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortForwardingEventArgs=void 0,t.PortForwardingEventArgs=class{constructor(e){this.portNumber=e,this.cancel=!1}}},7455:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshingTunnelAccessTokenEventArgs=void 0,t.RefreshingTunnelAccessTokenEventArgs=class{constructor(e,t){this.tunnelAccessScope=e,this.cancellation=t}}},2008:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshingTunnelEventArgs=void 0,t.RefreshingTunnelEventArgs=class{constructor(e,t,n,r,s){this.tunnelAccessScope=e,this.tunnel=t,this.includePorts=n,this.managementClient=r,this.cancellation=s}}},3831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayTunnelConnector=t.maxReconnectDelayMs=void 0;const r=n(2727),s=n(4327),i=n(9696),o=n(7511);t.maxReconnectDelayMs=13e3,t.RelayTunnelConnector=class{constructor(e){this.tunnelSession=e}get trace(){return this.tunnelSession.trace}async connectSession(e,n,c){var l,u;let p,h;function d(e){if(e instanceof r.CancellationError&&(null==c?void 0:c.isCancellationRequested)||e instanceof r.ObjectDisposedError)throw h=void 0,p=r.SshDisconnectReason.byApplication,e}function f(e){throw h?h.message=e:h=new Error(e),h}let m,g=0,v=100,y=!1,b=!0;this.tunnelSession.startConnecting();try{for(let w=0;;w++){if(null==c?void 0:c.isCancellationRequested)throw new r.CancellationError;if(w>0){if(h){if(null!==(l=null==n?void 0:n.enableRetry)&&void 0!==l&&!l)throw h;const e=new o.RetryingTunnelConnectionEventArgs(h,v);if(this.tunnelSession.onRetrying(e),!e.retry)throw h;e.delayMs>=100?v=e.delayMs:b=!1}const e=b?" in "+(v<1e3?`0.${v/100}s`:v/1e3+"s"):"";if(this.trace(r.TraceLevel.Verbose,0,`Error connecting to tunnel SSH session, retrying${e}${m?`: ${m}`:""}`),b){try{await(0,s.delay)(v,c)}catch(e){throw d(e),e}v<t.maxReconnectDelayMs&&(v<<=1)}}let S;b=!0,m=void 0,p=r.SshDisconnectReason.connectionLost,h=void 0;try{const t=await this.tunnelSession.createSessionStream(n,c);return S=t.stream,await this.tunnelSession.configureSession(S,t.protocol,e,c),S=void 0,void(p=void 0)}catch(n){if(n instanceof Error||f(`Failed to connect to the tunnel service and start tunnel SSH session: ${n}`),d(n),h=n,m=h.message,n instanceof i.BrowserWebSocketRelayError){if(g++>=5)throw n;continue}if(n instanceof r.SshReconnectError){p=r.SshDisconnectReason.protocolError,b=!1,e=!1;continue}if(n instanceof r.SshConnectionError){const e=n.reason;if(e===r.SshDisconnectReason.connectionLost)continue;p=e||r.SshDisconnectReason.byApplication,f(`Failed to start tunnel SSH session: ${m}`)}if(n instanceof i.RelayConnectionError){const e=null===(u=n.errorContext)||void 0===u?void 0:u.statusCode,i=e?` (${e})`:"";switch(m){case"error.relayClientUnauthorized":{const e="Not authorized"+i;p=r.SshDisconnectReason.authCancelledByUser,y&&f(`${e}. Refreshed tunnel access token also does not work.`);try{y=await this.tunnelSession.refreshTunnelAccessToken(c)}catch(t){d(t),f(`${e}. Refreshing tunnel access token failed with error ${(0,s.getErrorMessage)(t)}`)}y||f(`${e}. Provide a fresh tunnel access token with '${this.tunnelSession.tunnelAccessScope}' scope.`),b=!1,m="The tunnel access token was no longer valid and had just been refreshed.";continue}case"error.relayClientForbidden":p=r.SshDisconnectReason.authCancelledByUser,f(`Forbidden${i}. Provide a fresh tunnel access token with '${this.tunnelSession.tunnelAccessScope}' scope.`);break;case"error.tunnelPortNotFound":f(`The tunnel or port is not found${i}`);break;case"error.badGateway":case"error.serviceUnavailable":case"error.tooManyRequests":m="error.tooManyRequests"===m?`Rate limit exceeded${i}. Too many requests in a given amount of time.`:`Service temporarily unavailable${i}`,p=r.SshDisconnectReason.serviceNotAvailable,w>3&&f(m),v<t.maxReconnectDelayMs/2&&(v=t.maxReconnectDelayMs/2);continue;default:if(null==m?void 0:m.startsWith("error.relayConnectionError ")){const e=a.find((e=>m.includes(e)));if(e){m=`Failed to connect to Relay server: ${e}`;continue}}}}throw n}finally{h&&p&&!h.reason&&(h.reason=p),p&&await this.tunnelSession.closeSession(p,h),S&&await S.close(h)}}}finally{this.tunnelSession.finishConnecting(p,h)}}};const a=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN","EBUSY"]},7449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryTcpListenerFactory=void 0;const r=n(1808);t.RetryTcpListenerFactory=class{constructor(e){this.localAddress=e}async createTcpListener(e,t,n,s){e.indexOf(":")>=0?"0.0.0.0"===this.localAddress?e="::":"127.0.0.1"===this.localAddress&&(e="::1"):e=this.localAddress;const i=r.createServer();for(let n=0;;n++){const s=10===n?0:t+n;try{return await new Promise(((t,n)=>{i.listen({host:e,port:s,ipv6Only:r.isIPv6(e)}),i.on("listening",(()=>{t(i)})),i.on("error",(e=>{n(e)}))}))}catch(e){console.log("Listening on port "+s+" failed: "+e),console.log("Incrementing port and trying again");continue}}}}},7511:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingTunnelConnectionEventArgs=void 0,t.RetryingTunnelConnectionEventArgs=class{constructor(e,t){this.error=e,this.delayMs=t,this.retry=!0}}},3226:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionPortKey=void 0,t.SessionPortKey=class{constructor(e,t){this.sessionId=null!=e?e:null,this.port=t}equals(e){return this.port===e.port&&(!this.sessionId&&!e.sessionId||this.sessionId&&e.sessionId&&this.sessionId===e.sessionId)}toString(){return this.port+(this.sessionId?"_"+this.sessionId.toString("base64"):"")}}},9696:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayConnectionError=t.RelayErrorType=t.isNode=t.SshHelpers=t.BrowserWebSocketRelayError=void 0;const r=n(2727),s=n(8766);class i extends Error{constructor(e){super(e)}}t.BrowserWebSocketRelayError=i;class o{static openConnection(e,n,r,s){return(0,t.isNode)()?o.nodeSshStreamFactory(e,n,r,s):o.webSshStreamFactory(new WebSocket(e,n))}static createSshClientSession(e){return o.createSshSession((t=>(e&&e(t),new r.SshClientSession(t))))}static createSshServerSession(e,t){return o.createSshSession((n=>(t&&t(n),new r.SshServerSession(n,e))))}static createWebSocketStreamAdapter(e){return new r.WebSocketStream(new a(e))}static webSshStreamFactory(e){return e.binaryType="arraybuffer",new Promise(((t,n)=>{e.onopen=()=>{t(new r.WebSocketStream(e))},e.onerror=e=>{n(new i("Failed to connect to relay url"))}}))}static createSshSession(e){const t=new r.SshSessionConfiguration;return t.keyExchangeAlgorithms.splice(0),t.keyExchangeAlgorithms.push(r.SshAlgorithms.keyExchange.ecdhNistp384Sha384),t.keyExchangeAlgorithms.push(r.SshAlgorithms.keyExchange.ecdhNistp256Sha256),t.keyExchangeAlgorithms.push(r.SshAlgorithms.keyExchange.dhGroup14Sha256),e(t)}static nodeSshStreamFactory(e,t,n,i){const o=new s.client(i);return new Promise(((s,i)=>{o.on("connect",(e=>{s(new r.WebSocketStream(new a(e)))})),o.on("httpResponse",(({statusCode:e,statusMessage:t})=>{var n;const r=null!==(n=u.find((t=>t.statusCode===e)))&&void 0!==n?n:{statusCode:e,errorType:c.ServerError,error:`relayConnectionError Server responded with a non-101 status: ${e} ${t}`};i(new l(`error.${r.error}`,r))})),o.on("connectFailed",(({message:e})=>{var t;e&&e.startsWith("Error: ")&&(e=e.substr(7));const n=null!==(t=u.find((t=>t.regex&&t.regex.test(e))))&&void 0!==t?t:{errorType:c.ServerError,error:`relayConnectionError ${e}`};i(new l(`error.${n.error}`,n))})),o.connect(e,t,void 0,n)}))}}t.SshHelpers=o;class a{constructor(e){this.connection=e}get protocol(){return this.connection.protocol}set onmessage(e){e&&this.connection.on("message",(t=>{e({data:t.binaryData})}))}set onclose(e){e&&this.connection.on("close",((t,n)=>{e({code:t,reason:n,wasClean:!(t||n)})}))}send(e){Buffer.isBuffer(e)?this.connection.sendBytes(e):this.connection.sendBytes(Buffer.from(e))}close(e,t){e||t?this.connection.drop(e,t):this.connection.close()}}var c;t.isNode=()=>"undefined"!=typeof process&&void 0!==process.release&&"node"===process.release.name,function(e){e[e.ConnectionError=1]="ConnectionError",e[e.Unauthorized=2]="Unauthorized",e[e.EndpointNotFound=3]="EndpointNotFound",e[e.ListenerOffline=4]="ListenerOffline",e[e.ServerError=5]="ServerError",e[e.TunnelPortNotFound=6]="TunnelPortNotFound",e[e.TooManyRequests=7]="TooManyRequests",e[e.ServiceUnavailable=8]="ServiceUnavailable",e[e.BadGateway=9]="BadGateway"}(c=t.RelayErrorType||(t.RelayErrorType={}));class l extends Error{constructor(e,t){super(e),this.errorContext=t}}t.RelayConnectionError=l;const u=[{regex:/status: 401/,statusCode:401,error:"relayClientUnauthorized",errorType:c.Unauthorized},{regex:/status: 403/,statusCode:403,error:"relayClientForbidden",errorType:c.Unauthorized},{regex:/status: 404/,statusCode:404,error:"tunnelPortNotFound",errorType:c.TunnelPortNotFound},{regex:/status: 429/,statusCode:429,error:"tooManyRequests",errorType:c.TooManyRequests},{regex:/status: 500/,statusCode:500,error:"relayServerError",errorType:c.ServerError},{regex:/status: 502/,statusCode:502,error:"badGateway",errorType:c.BadGateway},{regex:/status: 503/,statusCode:503,error:"serviceUnavailable",errorType:c.ServiceUnavailable}]},4736:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5368:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4513:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelConnectionBase=void 0;const r=n(2727),s=n(5844),i=n(3329),o=n(1480),a=n(7455),c=n(5927),l=n(4327);t.TunnelConnectionBase=class{constructor(e){this.tunnelAccessScope=e,this.disposeCts=new s.CancellationTokenSource,this.status=i.ConnectionStatus.None,this.refreshingTunnelAccessTokenEmitter=new l.TrackingEmitter,this.connectionStatusChangedEmitter=new s.Emitter,this.retryingTunnelConnectionEmitter=new s.Emitter,this.forwardedPortConnectingEmitter=new s.Emitter,this.refreshingTunnelAccessToken=this.refreshingTunnelAccessTokenEmitter.event,this.connectionStatusChanged=this.connectionStatusChangedEmitter.event,this.retryingTunnelConnection=this.retryingTunnelConnectionEmitter.event,this.forwardedPortConnecting=this.forwardedPortConnectingEmitter.event}get isDisposed(){return this.disposeCts.token.isCancellationRequested}get isRefreshingTunnelAccessTokenEventHandled(){return this.refreshingTunnelAccessTokenEmitter.isSubscribed}get disposeToken(){return this.disposeCts.token}get connectionStatus(){return this.status}set connectionStatus(e){if(this.isDisposed&&e!==i.ConnectionStatus.Disconnected&&this.throwIfDisposed(),e===i.ConnectionStatus.RefreshingTunnelAccessToken&&this.status!==i.ConnectionStatus.Connecting)throw new Error("Refreshing tunnel access token is allowed only when connecting.");if(e!==this.status){const t=this.connectionStatus;this.status=e,this.onConnectionStatusChanged(t,e)}}get disconnectError(){return this.error}set disconnectError(e){this.error=e}onForwardedPortConnecting(e){this.forwardedPortConnectingEmitter.fire(e)}dispose(){return this.disposeCts.cancel(),this.connectionStatus=i.ConnectionStatus.Disconnected,Promise.resolve()}onRetrying(e){this.retryingTunnelConnectionEmitter.fire(e)}async getFreshTunnelAccessToken(e){const t=new a.RefreshingTunnelAccessTokenEventArgs(this.tunnelAccessScope,e);this.refreshingTunnelAccessTokenEmitter.fire(t);const n=t.tunnelAccessToken?await t.tunnelAccessToken:void 0;return n&&c.TunnelAccessTokenProperties.validateTokenExpiration(n),n}onConnectionStatusChanged(e,t){const n=this.connectionStatus!==i.ConnectionStatus.Disconnected||this.isDisposed?void 0:this.disconnectError,r=new o.ConnectionStatusChangedEventArgs(e,t,n);this.connectionStatusChangedEmitter.fire(r)}throwIfDisposed(){if(this.isDisposed)throw new r.ObjectDisposedError("The tunnel connection is disposed.")}}},4966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelConnectionSession=void 0;const r=n(3399),s=n(5927),i=n(2727),o=n(5844),a=n(3329),c=n(3831),l=n(4327),u=n(4513),p=n(9361),h=n(7012),d=n(2040),f=n(2008),m=n(6589);class g extends u.TunnelConnectionBase{get connectionProtocol(){return this.connectionProtocolValue}set connectionProtocol(e){this.connectionProtocolValue=e}get isClientConnection(){return this.tunnelAccessScope===r.TunnelAccessScopes.Connect}get connectionRole(){return this.isClientConnection?"client":"host"}constructor(e,t,n,r){super(e),this.connectionProtocols=t,this.managementClient=r,this.connectedTunnel=null,this.refreshingTunnelEmitter=new l.TrackingEmitter,this.reportProgressEmitter=new o.Emitter,this.onReportProgress=this.reportProgressEmitter.event,this.streamFactory=new m.DefaultTunnelRelayStreamFactory,this.sshSessionDisposables=[],this.refreshingTunnel=this.refreshingTunnelEmitter.event,this.enableE2EEncryption=!0,this.trace=null!=n?n:()=>{},this.httpAgent=null==r?void 0:r.httpsAgent}raiseReportProgress(e,t){const n=new i.SshReportProgressEventArgs(e,t);this.reportProgressEmitter.fire(n)}get tunnel(){return this.connectedTunnel}set tunnel(e){e!==this.connectedTunnel&&(this.connectedTunnel=e,this.tunnelChanged())}tunnelChanged(){this.tunnel?this.accessToken=s.TunnelAccessTokenProperties.getTunnelAccessToken(this.tunnel,this.tunnelAccessScope):this.accessToken=void 0}get isReconnectable(){return!!this.connector}get disconnectReason(){return this.disconnectionReason}set disconnectReason(e){this.disconnectionReason=e}async createSessionStream(e,t){if(!this.relayUri)throw new Error("Cannot create tunnel session stream. Tunnel relay endpoint URI is missing");this.isClientConnection?this.raiseReportProgress(i.Progress.OpeningClientConnectionToRelay):this.raiseReportProgress(i.Progress.OpeningHostConnectionToRelay);const n=this.validateAccessToken();if(this.trace(i.TraceLevel.Info,0,`Connecting to ${this.connectionRole} tunnel relay ${this.relayUri}`),this.trace(i.TraceLevel.Verbose,0,`Sec-WebSocket-Protocol: ${this.connectionProtocols.join(", ")}`),n){const e=s.TunnelAccessTokenProperties.getTokenTrace(n);this.trace(i.TraceLevel.Verbose,0,`Authorization: tunnel <${e}>`)}const r={tlsOptions:{agent:this.httpAgent}},o=await this.streamFactory.createRelayStream(this.relayUri,this.connectionProtocols,n,r);return this.trace(i.TraceLevel.Verbose,0,`Connected with subprotocol '${o.protocol}'`),this.isClientConnection?this.raiseReportProgress(i.Progress.OpenedClientConnectionToRelay):this.raiseReportProgress(i.Progress.OpenedHostConnectionToRelay),o}configureSession(e,t,n,r){throw new Error("Not implemented")}async closeSession(e,t){this.unsubscribeSessionEvents();const n=this.sshSession;n&&(n.isClosed?this.sshSession=void 0:await n.close(e||i.SshDisconnectReason.none,void 0,t),n.dispose())}async dispose(){this.disconnectReason!==i.SshDisconnectReason.none&&void 0!==this.disconnectReason||(this.disconnectReason=i.SshDisconnectReason.byApplication),await super.dispose();try{await this.closeSession(this.disconnectReason,this.disconnectError)}catch(e){if(!(e instanceof i.ObjectDisposedError))throw e}}async refreshTunnelAccessToken(e){var t;if(this.isDisposed)return!1;if(!this.isRefreshingTunnelAccessTokenEventHandled&&!this.canRefreshTunnel)return!1;this.connectionStatus=a.ConnectionStatus.RefreshingTunnelAccessToken;try{return this.traceVerbose(`Refreshing tunnel access token. Current token: ${s.TunnelAccessTokenProperties.getTokenTrace(this.accessToken)}`),this.isRefreshingTunnelAccessTokenEventHandled?this.accessToken=null!==(t=await this.getFreshTunnelAccessToken(e))&&void 0!==t?t:void 0:await this.refreshTunnel(!1,e),this.accessToken&&s.TunnelAccessTokenProperties.validateTokenExpiration(this.accessToken),this.traceVerbose(`Refreshed tunnel access token. New token: ${s.TunnelAccessTokenProperties.getTokenTrace(this.accessToken)}`),!0}finally{this.connectionStatus=a.ConnectionStatus.Connecting}}startConnecting(){this.connectionStatus=a.ConnectionStatus.Connecting}finishConnecting(e,t){void 0===e||e===i.SshDisconnectReason.none?(this.connectionStatus===a.ConnectionStatus.Connecting&&(this.disconnectError=void 0,this.disconnectReason=void 0),this.connectionStatus=a.ConnectionStatus.Connected):this.connectionStatus!==a.ConnectionStatus.Disconnected&&(this.disconnectReason=e,t&&(this.disconnectError=t),this.connectionStatus=a.ConnectionStatus.Disconnected)}get canRefreshTunnel(){return this.tunnel&&this.managementClient||this.refreshingTunnelEmitter.isSubscribed}async refreshTunnel(e,t){this.traceInfo("Refreshing tunnel.");let n=!1;const r=new f.RefreshingTunnelEventArgs(this.tunnelAccessScope,this.tunnel,!!e,this.managementClient,t);if(this.refreshingTunnelEmitter.fire(r),r.tunnelPromise&&(this.tunnel=await r.tunnelPromise,n=!0),!n&&this.tunnel&&this.managementClient){const r={tokenScopes:[this.tunnelAccessScope],includePorts:e};this.tunnel=await(0,l.withCancellation)(this.managementClient.getTunnel(this.tunnel,r),t),n=!0}return n&&(this.tunnel?this.traceInfo("Refreshed tunnel."):this.traceInfo("Tunnel not found.")),!0}createTunnelConnector(){return new c.RelayTunnelConnector(this)}traceInfo(e){this.trace(i.TraceLevel.Info,0,e)}traceVerbose(e){this.trace(i.TraceLevel.Verbose,0,e)}traceWarning(e,t){this.trace(i.TraceLevel.Warning,0,e,t)}traceError(e,t){this.trace(i.TraceLevel.Error,0,e,t)}onSshSessionClosed(e){this.unsubscribeSessionEvents(),this.sshSession=void 0,this.maybeStartReconnecting(e.reason,e.message,e.error)}maybeStartReconnecting(e,t,n){var r,s;const o=`Connection to ${this.connectionRole} tunnel relay closed.${this.getDisconnectReason(e,t,n)}`;this.isDisposed||this.connectionStatus===a.ConnectionStatus.Disconnected?this.traceInfo(o):(n&&(this.disconnectError=n,this.disconnectReason=e),this.connectionStatus!==a.ConnectionStatus.Connected||this.reconnectPromise?this.traceInfo(o):(null===(s=null===(r=this.connectionOptions)||void 0===r?void 0:r.enableReconnect)||void 0===s||s)&&e===i.SshDisconnectReason.connectionLost&&this.connector?(this.traceInfo(`${o} Reconnecting.`),this.reconnectPromise=(async()=>{try{await this.connectTunnelSession()}catch(e){}this.reconnectPromise=void 0})()):(this.traceInfo(o),this.connectionStatus=a.ConnectionStatus.Disconnected))}getDisconnectReason(e,t,n){switch(e){case i.SshDisconnectReason.connectionLost:return` ${t||(null==n?void 0:n.message)||"Connection lost."}`;case i.SshDisconnectReason.authCancelledByUser:case i.SshDisconnectReason.noMoreAuthMethodsAvailable:case i.SshDisconnectReason.hostNotAllowedToConnect:case i.SshDisconnectReason.illegalUserName:return" Not authorized.";case i.SshDisconnectReason.serviceNotAvailable:return" Service not available.";case i.SshDisconnectReason.compressionError:case i.SshDisconnectReason.keyExchangeFailed:case i.SshDisconnectReason.macError:case i.SshDisconnectReason.protocolError:return" Protocol error.";case i.SshDisconnectReason.tooManyConnections:return this.isClientConnection?" Too many client connections.":" Another host for the tunnel has connected.";default:return""}}async connectSession(e){try{await e()}catch(e){if(!(e instanceof i.CancellationError))if(e instanceof Error)this.traceError(`Error connecting ${this.connectionRole} tunnel session: ${e.message}`,e);else{const t=`Error connecting ${this.connectionRole} tunnel session: ${e}`;this.traceError(t)}throw e}}async connectTunnelSession(e,t,n){var r;e&&(this.tunnel=e),t&&(this.connectionOptions=t,null!==(r=this.httpAgent)&&void 0!==r||(this.httpAgent=null==t?void 0:t.httpAgent)),await this.connectSession((async()=>{const r=this.isReconnectable&&!e;await this.onConnectingToTunnel(),this.connector||(this.connector=this.createTunnelConnector());const s=[];if(n){const e=new o.CancellationTokenSource;s.push(e,n.onCancellationRequested((()=>e.cancel())),this.disposeToken.onCancellationRequested((()=>e.cancel()))),n=e.token}else n=this.disposeToken;try{await this.connector.connectSession(r,t,n)}catch(e){throw e instanceof i.CancellationError&&this.throwIfDisposed(),e}finally{for(const e of s)e.dispose()}}))}onConnectingToTunnel(){return Promise.resolve()}validateAccessToken(){if(this.accessToken)return s.TunnelAccessTokenProperties.validateTokenExpiration(this.accessToken),this.accessToken}createRequestMessageAsync(e){const t=new h.PortRelayRequestMessage;return t.accessToken=this.accessToken,Promise.resolve(t)}createSuccessMessageAsync(e){const t=new p.PortForwardSuccessMessage;return Promise.resolve(t)}createChannelOpenMessageAsync(e){const t=new d.PortRelayConnectRequestMessage;return t.accessToken=this.accessToken,t.isE2EEncryptionRequested=this.enableE2EEncryption,Promise.resolve(t)}unsubscribeSessionEvents(){this.sshSessionDisposables.forEach((e=>e.dispose())),this.sshSessionDisposables=[]}}t.TunnelConnectionSession=g},3390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1306:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3559:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelRelayTunnelClient=t.webSocketSubProtocolv2=t.webSocketSubProtocol=void 0;const r=n(3399),s=n(2727),i=n(9361),o=n(7449),a=n(9696),c=n(4327),l=n(5844),u=n(7752),p=n(4966),h=n(5485);t.webSocketSubProtocol="tunnel-relay-client",t.webSocketSubProtocolv2="tunnel-relay-client-v2-dev";const d=(null===process||void 0===process?void 0:process.env)&&process.env.DEVTUNNELS_PROTOCOL_VERSION,f="1"===d?[t.webSocketSubProtocol]:"2"===d?[t.webSocketSubProtocolv2]:[t.webSocketSubProtocolv2,t.webSocketSubProtocol];class m extends p.TunnelConnectionSession{constructor(e,t){super(r.TunnelAccessScopes.Connect,f,e,t),this.portForwardingEmitter=new l.Emitter,this.sshSessionClosedEmitter=new l.Emitter,this.acceptLocalConnectionsForForwardedPortsValue=(0,a.isNode)(),this.localForwardingHostAddressValue="127.0.0.1",this.disconnectedStreams=new Map,this.connectionModes=[],this.portForwarding=this.portForwardingEmitter.event,this.sshSessionClosed=this.sshSessionClosedEmitter.event}get isSshSessionActive(){var e;return!!(null===(e=this.sshSession)||void 0===e?void 0:e.isConnected)}hasForwardedChannels(e){var t;if(!this.isSshSessionActive)return!1;const n=null===(t=this.sshSession)||void 0===t?void 0:t.activateService(i.PortForwardingService),r=null==n?void 0:n.remoteForwardedPorts,s=null==r?void 0:r.find((t=>t.remotePort===e));return!!s&&r.getChannels(s).length>0}get acceptLocalConnectionsForForwardedPorts(){return this.acceptLocalConnectionsForForwardedPortsValue}set acceptLocalConnectionsForForwardedPorts(e){if(e!==this.acceptLocalConnectionsForForwardedPortsValue){if(e&&!(0,a.isNode)())throw new Error("Cannot accept local connections for forwarded ports on this platform.");this.acceptLocalConnectionsForForwardedPortsValue=e,this.configurePortForwardingService()}}get localForwardingHostAddress(){return this.localForwardingHostAddressValue}set localForwardingHostAddress(e){e!==this.localForwardingHostAddressValue&&(this.localForwardingHostAddressValue=e,this.configurePortForwardingService())}get forwardedPorts(){var e;const t=null===(e=this.sshSession)||void 0===e?void 0:e.activateService(i.PortForwardingService);return null==t?void 0:t.remoteForwardedPorts}async connect(e,t,n){this.hostId=null==t?void 0:t.hostId,await this.connectTunnelSession(e,t,n)}tunnelChanged(){if(super.tunnelChanged(),this.endpoints=void 0,this.tunnel){if(!this.tunnel.endpoints)throw new Error("Tunnel endpoints cannot be null");if(0===this.tunnel.endpoints.length)throw new Error("No hosts are currently accepting connections for the tunnel.");const e=c.List.groupBy(this.tunnel.endpoints,(e=>e.hostId));if(this.hostId){if(this.endpoints=e.get(this.hostId),!this.endpoints)throw new Error("The specified host is not currently accepting connections to the tunnel.")}else{if(e.size>1)throw new Error("There are multiple hosts for the tunnel. Specify a host ID to connect to.");this.endpoints=e.entries().next().value[1]}const t=this.endpoints.filter((e=>e.connectionMode===r.TunnelConnectionMode.TunnelRelay));if(0===t.length)throw new Error("The host is not currently accepting Tunnel relay connections.");const n=t[0];this.hostPublicKeys=n.hostPublicKeys,this.relayUri=n.clientRelayUri}else this.relayUri=void 0}onRequest(e){if(e.request.requestType===i.PortForwardingService.portForwardRequestType){const t=e.request,n=new h.PortForwardingEventArgs(t.port);this.portForwardingEmitter.fire(n),e.isAuthorized=!n.cancel}else e.request.requestType===i.PortForwardingService.cancelPortForwardRequestType&&(e.isAuthorized=!0)}async configureSession(e,t,n,r){this.connectionProtocol=t,n&&this.sshSession&&!this.sshSession.isClosed?await this.sshSession.reconnect(e,r):await this.startSshSession(e,r)}startSshSession(e,n){return this.connectSession((async()=>{this.sshSession=a.SshHelpers.createSshClientSession((e=>{e.addService(i.PortForwardingService),this.connectionProtocol===t.webSocketSubProtocol?e.protocolExtensions.push(s.SshProtocolExtensionNames.sessionReconnect):e.keyExchangeAlgorithms.splice(0,0,s.SshAlgorithms.keyExchange.none)})),this.sshSession.trace=this.trace,this.sshSession.onReportProgress((e=>this.raiseReportProgress(e.progress,e.sessionNumber)),this,this.sshSessionDisposables),this.sshSession.onClosed(this.onSshSessionClosed,this,this.sshSessionDisposables),this.sshSession.onAuthenticating(this.onSshServerAuthenticating,this,this.sshSessionDisposables),this.sshSession.onDisconnected(this.onSshSessionDisconnected,this,this.sshSessionDisposables),this.sshSession.onRequest(this.onRequest,this,this.sshSessionDisposables);const r=this.sshSession.activateService(i.PortForwardingService);if(this.connectionProtocol===t.webSocketSubProtocolv2&&(r.messageFactory=this,r.onForwardedPortConnecting(this.onForwardedPortConnecting,this,this.sshSessionDisposables),r.remoteForwardedPorts.onPortAdded((e=>this.onForwardedPortAdded(r,e)),this,this.sshSessionDisposables),r.remoteForwardedPorts.onPortUpdated((e=>this.onForwardedPortAdded(r,e)),this,this.sshSessionDisposables)),this.configurePortForwardingService(),await this.sshSession.connect(e,n),this.sshSession.sessionId){const e=this.sshSession,t={username:"tunnel"};if(!await e.authenticate(t,n))throw new Error(e.principal?"SSH client authentication failed.":"SSH server authentication failed.")}}))}configurePortForwardingService(){const e=this.getSshSessionPfs();e&&(this.acceptLocalConnectionsForForwardedPortsValue&&(0,a.isNode)()?e.tcpListenerFactory=new o.RetryTcpListenerFactory(this.localForwardingHostAddressValue):e.acceptLocalConnectionsForForwardedPorts=!1)}onForwardedPortAdded(e,t){var n,r;const i=t.port.remotePort;if("number"!=typeof i)return;const o=null!==(r=null===(n=this.disconnectedStreams.get(i))||void 0===n?void 0:n.length)&&void 0!==r?r:0;for(let t=0;t<o;t++)e.connectToForwardedPort(i).then((()=>{this.trace(s.TraceLevel.Verbose,0,`Reconnected stream to fowarded port ${i}`)})).catch((e=>{this.trace(s.TraceLevel.Warning,0,`Failed to reconnect to forwarded port ${i}: ${e}`);const t=this.disconnectedStreams.get(i);if(t)for(;t.length>0;)t.pop().dispose()}))}onForwardedPortConnecting(e){if(e.stream.channel.openConfirmationMessage.convertTo(new u.PortRelayConnectResponseMessage).isE2EEncryptionEnabled){const t={username:"tunnel"};e.transformPromise=new Promise(((n,r)=>{var i;let o=null===(i=this.disconnectedStreams.get(e.port))||void 0===i?void 0:i.shift();o?(this.trace(s.TraceLevel.Verbose,0,`Reconnecting encrypted stream for port ${e.port}...`),o.reconnect(e.stream).then((()=>{this.trace(s.TraceLevel.Verbose,0,`Reconnecting encrypted stream for port ${e.port} succeeded.`),n(o)})).catch(r)):(o=new s.SecureStream(e.stream,t),o.trace=this.trace,o.onAuthenticating((e=>e.authenticationPromise=this.onHostAuthenticating(e).catch())),o.onDisconnected((()=>this.onSecureStreamDisconnected(e.port,o))),o.connect().then((()=>n(o))).catch(r))}))}super.onForwardedPortConnecting(e)}onSecureStreamDisconnected(e,t){this.trace(s.TraceLevel.Verbose,0,`Encrypted stream for port ${e} disconnected.`);const n=this.disconnectedStreams.get(e);n?n.push(t):this.disconnectedStreams.set(e,[t])}async onHostAuthenticating(e){var t,n;if(e.authenticationType!==s.SshAuthenticationType.serverPublicKey||!e.publicKey)return this.traceWarning("Invalid host authenticating event."),null;const r=null!==(n=null===(t=await e.publicKey.getPublicKeyBytes(e.publicKey.keyAlgorithmName))||void 0===t?void 0:t.toString("base64"))&&void 0!==n?n:"";return this.hostPublicKeys?this.hostPublicKeys.includes(r)?(this.traceVerbose(`Verified host identity with public key ${r}`),{}):!this.disposeToken.isCancellationRequested&&await this.refreshTunnel(!1,this.disposeToken)&&this.hostPublicKeys.includes(r)?(this.traceVerbose("Verified host identity with public key "+r),{}):(this.traceError("Host public key verification failed."),this.traceVerbose(`Host key: ${r}`),this.traceVerbose(`Expected key(s): ${this.hostPublicKeys.join(", ")}`),null):(this.traceWarning("Host identity could not be verified because no public keys were provided."),this.traceVerbose(`Host key: ${r}`),{})}onSshServerAuthenticating(e){this.connectionProtocol===t.webSocketSubProtocol?e.authenticationPromise=this.onHostAuthenticating(e):e.authenticationPromise=Promise.resolve({})}async connectToForwardedPort(e,t){const n=this.getSshSessionPfs();if(!n)throw new Error("Failed to connect to remote port. Ensure that the client has connected by calling connectClient.");return n.connectToForwardedPort(e,t)}async waitForForwardedPort(e,t){const n=this.getSshSessionPfs();if(!n)throw new Error("Port forwarding has not been started. Ensure that the client has connected by calling connectClient.");this.trace(s.TraceLevel.Verbose,0,"Waiting for forwarded port "+e),await n.waitForForwardedPort(e,t),this.trace(s.TraceLevel.Verbose,0,"Forwarded port "+e+" is ready.")}getSshSessionPfs(){var e,t;return null!==(t=null===(e=this.sshSession)||void 0===e?void 0:e.getService(i.PortForwardingService))&&void 0!==t?t:void 0}async refreshPorts(){if(!this.sshSession||this.sshSession.isClosed)throw new Error("Not connected.");const e=new s.SessionRequestMessage;e.requestType="RefreshPorts",e.wantReply=!0,await this.sshSession.request(e)}async closeSession(e,t){this.isSshSessionActive&&this.sshSessionClosedEmitter.fire(this),await super.closeSession(e,t)}onSshSessionClosed(e){this.sshSessionClosedEmitter.fire(this),super.onSshSessionClosed(e)}onSshSessionDisconnected(){this.sshSessionClosedEmitter.fire(this);const e=s.SshDisconnectReason.connectionLost,t=new s.SshConnectionError("Connection lost.",s.SshDisconnectReason.connectionLost);this.maybeStartReconnecting(e,void 0,t)}async connectClientToRelayServer(e,t){if(!e)throw new Error("Client relay URI must be a non-empty string");this.relayUri=e,this.accessToken=t,await this.connectTunnelSession()}}t.TunnelRelayTunnelClient=m,m.webSocketSubProtocol=t.webSocketSubProtocol,m.webSocketSubProtocolv2=t.webSocketSubProtocolv2},82:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelRelayTunnelHost=void 0;const r=n(3399),s=n(2727),i=n(9361),o=n(9696),a=n(2616),c=n(3226),l=n(2040),u=n(7752),p=n(1328),h=n(9696),d=n(4966),f="tunnel-relay-host",m="tunnel-relay-host-v2-dev",g=(null===process||void 0===process?void 0:process.env)&&process.env.DEVTUNNELS_PROTOCOL_VERSION,v="1"===g?[f]:"2"===g?[m]:[m,f];class y extends d.TunnelConnectionSession{constructor(e,t){super(r.TunnelAccessScopes.Host,v,t,e),this.clientSessionPromises=[],this.reconnectableSessions=[],this.sshSessions=[],this.remoteForwarders=new Map,this.loopbackIp="127.0.0.1",this.forwardConnectionsToLocalPortsValue=(0,h.isNode)();const n=s.SshAlgorithms.publicKey.ecdsaSha2Nistp384;n&&(this.hostPrivateKeyPromise=n.generateKeyPair()),this.hostId=a.MultiModeTunnelHost.hostId,this.id=(0,p.v4)()+"-relay"}get forwardConnectionsToLocalPorts(){return this.forwardConnectionsToLocalPortsValue}set forwardConnectionsToLocalPorts(e){if(e!==this.forwardConnectionsToLocalPortsValue){if(e&&!(0,h.isNode)())throw new Error("Cannot forward connections to local TCP sockets on this platform.");this.forwardConnectionsToLocalPortsValue=e}}async start(e){await this.connect(e)}async connect(e,t,n){await this.connectTunnelSession(e,t,n)}async connectTunnelSession(e,t,n){if(this.disconnectReason===s.SshDisconnectReason.tooManyConnections)throw new s.SshConnectionError("Cannot retry connection because another host for this tunnel has connected. Only one host connection at a time is supported.",s.SshDisconnectReason.tooManyConnections);await super.connectTunnelSession(e,t,n)}async configureSession(e,t,n,r){let a;if(this.connectionProtocol=t,this.connectionProtocol===f)a=new s.SshClientSession(new s.SshSessionConfiguration(!1));else{a=o.SshHelpers.createSshClientSession((e=>{e.keyExchangeAlgorithms.splice(0,0,s.SshAlgorithms.keyExchange.none),e.addService(i.PortForwardingService)}));const e=a.activateService(i.PortForwardingService);e.messageFactory=this,e.onForwardedPortConnecting(this.onForwardedPortConnecting,this,this.sshSessionDisposables)}a.onChannelOpening(this.hostSession_ChannelOpening,this,this.sshSessionDisposables),a.onClosed(this.onSshSessionClosed,this,this.sshSessionDisposables),a.trace=this.trace,a.onReportProgress((e=>this.raiseReportProgress(e.progress,e.sessionNumber)),this,this.sshSessionDisposables),this.sshSession=a,await a.connect(e,r),a.sessionId&&await a.authenticate({username:"tunnel"}),this.connectionProtocol===m&&await this.startForwardingExistingPorts(a)}async onConnectingToTunnel(){var e,t,n,s,i;if(!this.hostPrivateKey||!this.hostPublicKeys){if(!this.hostPrivateKeyPromise)throw new Error("Cannot create host keys");this.hostPrivateKey=await this.hostPrivateKeyPromise;const e=await this.hostPrivateKey.getPublicKeyBytes(this.hostPrivateKey.keyAlgorithmName);if(!e)throw new Error("Host private key public key bytes is not initialized");this.hostPublicKeys=[e.toString("base64")]}const o=null!=(null===(e=this.tunnel)||void 0===e?void 0:e.ports)&&this.tunnel.ports.find((e=>e.protocol===r.TunnelProtocol.Ssh)),a=`${null===(t=this.tunnel)||void 0===t?void 0:t.tunnelId}.${null===(n=this.tunnel)||void 0===n?void 0:n.clusterId}:${null===(s=this.tunnel)||void 0===s?void 0:s.name}.${null===(i=this.tunnel)||void 0===i?void 0:i.domain}:${o}:${this.hostId}:${this.hostPublicKeys}`;if(!this.relayUri||this.endpointSignature!==a){if(!this.tunnel)throw new Error("Tunnel is required");let e,t={id:this.id,hostId:this.hostId,hostPublicKeys:this.hostPublicKeys,connectionMode:r.TunnelConnectionMode.TunnelRelay};o&&(e={includeSshGatewayPublicKey:"true"}),t=await this.managementClient.updateTunnelEndpoint(this.tunnel,t,{additionalQueryParameters:e}),this.relayUri=t.hostRelayUri,this.endpointSignature=a}}async dispose(){await super.dispose();const e=Object.assign([],this.clientSessionPromises);if(this.clientSessionPromises.length=0,this.tunnel&&this.endpointSignature&&this.disconnectReason!==s.SshDisconnectReason.tooManyConnections){const t=this.managementClient.deleteTunnelEndpoints(this.tunnel,this.id);e.push(t)}for(const e of this.remoteForwarders.values())e.dispose();await Promise.all(e)}hostSession_ChannelOpening(e){if(!e.isRemoteRequest)return;if(this.connectionProtocol===m&&"forwarded-tcpip"===e.channel.channelType){const t=e.channel.openMessage.convertTo(new l.PortRelayConnectRequestMessage),n=new u.PortRelayConnectResponseMessage;return n.isE2EEncryptionEnabled=this.enableE2EEncryption&&t.isE2EEncryptionRequested,void(e.openingPromise=Promise.resolve(n))}if(e.channel.channelType!==y.clientStreamChannelType)return e.failureDescription=`Unknown channel type: ${e.channel.channelType}`,void(e.failureReason=s.SshChannelOpenFailureReason.unknownChannelType);if(e.channel.maxWindowSize=5*s.SshChannel.defaultMaxWindowSize,this.isDisposed)return e.failureDescription="The host is disconnecting.",void(e.failureReason=s.SshChannelOpenFailureReason.connectFailed);const t=this.acceptClientSession(e.channel,this.disposeToken);this.clientSessionPromises.push(t),t.then((()=>{const e=this.clientSessionPromises.indexOf(t);this.clientSessionPromises.splice(e,1)}))}onForwardedPortConnecting(e){const t=e.stream.channel,n=t.openMessage.convertTo(new l.PortRelayConnectRequestMessage);if(this.enableE2EEncryption&&n.isE2EEncryptionRequested){t.maxWindowSize=2*s.SshChannel.defaultMaxWindowSize;const n={publicKeys:[this.hostPrivateKey]},r=new s.SecureStream(e.stream,n,this.reconnectableSessions);r.trace=this.trace,r.onAuthenticating((e=>e.authenticationPromise=Promise.resolve({}))),r.connect().catch((e=>{this.trace(s.TraceLevel.Error,0,`Error connecting encrypted channel: ${e}`)})),e.transformPromise=Promise.resolve(r)}super.onForwardedPortConnecting(e)}async acceptClientSession(e,t){try{const n=new s.SshStream(e);await this.connectAndRunClientSession(n,t)}catch(e){e instanceof s.CancellationError&&t.isCancellationRequested||this.trace(s.TraceLevel.Error,0,`Error running client SSH session: ${e}`)}}async connectAndRunClientSession(e,t){if(t.isCancellationRequested)throw e.destroy(),new s.CancellationError;const n=o.SshHelpers.createSshServerSession(this.reconnectableSessions,(e=>{e.protocolExtensions.push(s.SshProtocolExtensionNames.sessionReconnect),e.addService(i.PortForwardingService)}));n.trace=this.trace,n.onReportProgress((e=>this.raiseReportProgress(e.progress,e.sessionNumber)),this,this.sshSessionDisposables),n.credentials={publicKeys:[this.hostPrivateKey]};const r=new s.PromiseCompletionSource,a=n.onAuthenticating((e=>{this.onSshClientAuthenticating(e)}));n.onClientAuthenticated((()=>{this.onSshClientAuthenticated(n)}));const c=n.onRequest((e=>{this.onSshSessionRequest(e,n)})),l=n.onChannelOpening((e=>{this.onSshChannelOpening(e,n)})),u=n.onClosed((e=>{this.session_Closed(n,e,t),r.resolve()}));try{const i=new s.NodeStream(e);await n.connect(i),this.sshSessions.push(n),t.onCancellationRequested((e=>{r.reject(new s.CancellationError)})),await r.promise}finally{a.dispose(),c.dispose(),l.dispose(),u.dispose(),await n.close(s.SshDisconnectReason.byApplication),n.dispose()}}onSshClientAuthenticating(e){e.authenticationType===s.SshAuthenticationType.clientNone&&(e.authenticationPromise=Promise.resolve({}))}async onSshClientAuthenticated(e){this.startForwardingExistingPorts(e)}async startForwardingExistingPorts(e){var t,n;const r=e.activateService(i.PortForwardingService);r.forwardConnectionsToLocalPorts=this.forwardConnectionsToLocalPorts;for(const e of null!==(n=null===(t=this.tunnel)||void 0===t?void 0:t.ports)&&void 0!==n?n:[]){this.trace(s.TraceLevel.Verbose,0,`Forwarding port ${e.portNumber}`);try{await this.forwardPort(r,e)}catch(t){this.traceError(`Error forwarding port ${e.portNumber}: ${t}`)}}}onSshSessionRequest(e,t){"RefreshPorts"===e.requestType&&(e.responsePromise=(async()=>(await this.refreshPorts(),new s.SessionRequestSuccessMessage))())}onSshChannelOpening(e,t){if(!(e.request instanceof i.PortForwardChannelOpenMessage)){if(e.request.channelType===s.SshChannel.sessionChannelType)return;return this.trace(s.TraceLevel.Warning,0,"Rejecting request to open non-portforwarding channel."),void(e.failureReason=s.SshChannelOpenFailureReason.administrativelyProhibited)}const n=e.request;if("direct-tcpip"===n.channelType)this.tunnel.ports.some((e=>e.portNumber===n.port))||(this.trace(s.TraceLevel.Warning,0,"Rejecting request to connect to non-forwarded port:"+n.port),e.failureReason=s.SshChannelOpenFailureReason.administrativelyProhibited);else if("forwarded-tcpip"===n.channelType){const t=new i.ForwardedPortConnectingEventArgs(n.port,!1,new s.SshStream(e.channel));super.onForwardedPortConnecting(t)}else this.trace(s.TraceLevel.Warning,0,"Nonrecognized channel type "+n.channelType),e.failureReason=s.SshChannelOpenFailureReason.unknownChannelType}session_Closed(e,t,n){t.reason===s.SshDisconnectReason.byApplication?this.traceInfo("Client ssh session closed."):n.isCancellationRequested?this.traceInfo("Client ssh session cancelled."):t.reason!==s.SshDisconnectReason.none&&this.traceError(`Client ssh session closed unexpectedly due to ${t.reason}, "${t.message}"\n${t.error}`);for(const[t,n]of this.remoteForwarders.entries())n.session===e&&(n.dispose(),this.remoteForwarders.delete(t));const r=this.sshSessions.indexOf(e);r>=0&&this.sshSessions.splice(r,1)}async refreshPorts(e){var t,n;if(!await this.refreshTunnel(!0,e))return;const r=null!==(n=null===(t=this.tunnel)||void 0===t?void 0:t.ports)&&void 0!==n?n:[];let s=this.sshSessions;this.connectionProtocol===m&&this.sshSession&&(s=[...s,this.sshSession]);const o=[];for(const e of r)for(const t of s.filter((e=>e.isConnected&&(!e.sessionId||e.principal)))){const n=new c.SessionPortKey(t.sessionId,Number(e.portNumber));if(!this.remoteForwarders.get(n.toString())){const n=t.getService(i.PortForwardingService);o.push(this.forwardPort(n,e))}}for(const[e,t]of Object.entries(this.remoteForwarders))r.some((e=>e.portNumber===t.localPort))||(this.remoteForwarders.delete(e),t.dispose());await Promise.all(o)}async forwardPort(e,t){const n=Number(t.portNumber);if(e.localForwardedPorts.find((e=>e.localPort===n)))return;const r=await e.forwardFromRemotePort(this.loopbackIp,n,"localhost",n);if(!r)return;const s=new c.SessionPortKey(e.session.sessionId,Number(r.localPort));this.remoteForwarders.set(s.toString(),r)}}t.TunnelRelayTunnelHost=y,y.webSocketSubProtocol=f,y.webSocketSubProtocolv2=m,y.clientStreamChannelType="client-ssh-session-stream"},4327:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingEmitter=t.withCancellation=t.getError=t.getErrorMessage=t.delay=t.List=void 0;const r=n(2727),s=n(5844);t.List=class{static groupBy(e,t){const n=new Map;return e.forEach((e=>{const r=t(e),s=n.get(r);s?s.push(e):n.set(r,[e])})),n}},t.delay=function(e,t){return new Promise(((n,s)=>{let i,o;if(t){if(t.isCancellationRequested)return void s(new r.CancellationError);i=t.onCancellationRequested((()=>{o&&clearTimeout(o),null==i||i.dispose(),s(new r.CancellationError)}))}o=setTimeout((()=>{null==i||i.dispose(),n()}),e)}))},t.getErrorMessage=function(e){var t;return String(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:e)},t.getError=function(e,t){return e instanceof Error?e:new Error(`${null!=t?t:""}${e}`)},t.withCancellation=function(e,t){return t?Promise.race([e,new Promise(((e,n)=>{t.isCancellationRequested?n(new r.CancellationError):t.onCancellationRequested((()=>{n(new r.CancellationError)}))}))]):e};class i extends s.Emitter{constructor(){super({onFirstListenerAdd:()=>this.subscribed=!0,onLastListenerRemove:()=>this.subscribed=!1}),this.subscribed=!1}get isSubscribed(){return this.subscribed}}t.TrackingEmitter=i},3399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelConstraints=t.TunnelServiceProperties=t.TunnelProtocol=t.TunnelHeaderNames=t.TunnelEndpoint=t.TunnelConnectionMode=t.TunnelAccessScopes=t.TunnelAccessControlEntryType=t.TunnelAccessControlEntry=t.TunnelAccessControl=void 0;var r=n(6056);Object.defineProperty(t,"TunnelAccessControl",{enumerable:!0,get:function(){return r.TunnelAccessControl}});var s=n(5339);Object.defineProperty(t,"TunnelAccessControlEntry",{enumerable:!0,get:function(){return s.TunnelAccessControlEntry}});var i=n(4318);Object.defineProperty(t,"TunnelAccessControlEntryType",{enumerable:!0,get:function(){return i.TunnelAccessControlEntryType}});var o=n(8401);Object.defineProperty(t,"TunnelAccessScopes",{enumerable:!0,get:function(){return o.TunnelAccessScopes}});var a=n(2491);Object.defineProperty(t,"TunnelConnectionMode",{enumerable:!0,get:function(){return a.TunnelConnectionMode}});var c=n(5301);Object.defineProperty(t,"TunnelEndpoint",{enumerable:!0,get:function(){return c.TunnelEndpoint}});var l=n(113);Object.defineProperty(t,"TunnelHeaderNames",{enumerable:!0,get:function(){return l.TunnelHeaderNames}});var u=n(4856);Object.defineProperty(t,"TunnelProtocol",{enumerable:!0,get:function(){return u.TunnelProtocol}});var p=n(736);Object.defineProperty(t,"TunnelServiceProperties",{enumerable:!0,get:function(){return p.TunnelServiceProperties}});var h=n(9722);Object.defineProperty(t,"TunnelConstraints",{enumerable:!0,get:function(){return h.TunnelConstraints}})},6056:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAccessControl=void 0;const r=n(6538);t.TunnelAccessControl={validateScopes:r.validateScopes}},5339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAccessControlEntry=void 0,function(e){let t;!function(e){e.Microsoft="microsoft",e.GitHub="github",e.Ssh="ssh",e.IPv4="ipv4",e.IPv6="ipv6",e.ServiceTag="service-tag"}(t=e.Providers||(e.Providers={}))}(t.TunnelAccessControlEntry||(t.TunnelAccessControlEntry={}))},4318:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAccessControlEntryType=void 0,(n=t.TunnelAccessControlEntryType||(t.TunnelAccessControlEntryType={})).None="None",n.Anonymous="Anonymous",n.Users="Users",n.Groups="Groups",n.Organizations="Organizations",n.Repositories="Repositories",n.PublicKeys="PublicKeys",n.IPAddressRanges="IPAddressRanges"},6538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateScopes=void 0;const r=n(8401),s=[r.TunnelAccessScopes.Manage,r.TunnelAccessScopes.ManagePorts,r.TunnelAccessScopes.Host,r.TunnelAccessScopes.Inspect,r.TunnelAccessScopes.Connect];t.validateScopes=function(e,t,n){if(!Array.isArray(e))throw new TypeError("A scopes array was expected.");n&&(e=e.map((e=>e.split(" "))).reduce(((e,t)=>e.concat(t)),[])),e.forEach((e=>{if(!e)throw new Error("Tunnel access scopes include a null/empty item.");if(!s.includes(e))throw new Error("Invalid tunnel access scope: "+e)})),Array.isArray(t)&&e.forEach((e=>{if(!t.includes(e))throw new Error("Tunnel access scope is invalid for current request: scope")}))}},8401:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAccessScopes=void 0,(n=t.TunnelAccessScopes||(t.TunnelAccessScopes={})).Create="create",n.Manage="manage",n.ManagePorts="manage:ports",n.Host="host",n.Inspect="inspect",n.Connect="connect"},2491:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelConnectionMode=void 0,(n=t.TunnelConnectionMode||(t.TunnelConnectionMode={})).LocalNetwork="LocalNetwork",n.TunnelRelay="TunnelRelay"},9722:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelConstraints=void 0,(n=t.TunnelConstraints||(t.TunnelConstraints={})).clusterIdMinLength=3,n.clusterIdMaxLength=12,n.oldTunnelIdLength=8,n.newTunnelIdMinLength=3,n.newTunnelIdMaxLength=60,n.tunnelAliasLength=8,n.tunnelNameMinLength=3,n.tunnelNameMaxLength=60,n.descriptionMaxLength=400,n.labelMinLength=1,n.labelMaxLength=50,n.maxLabels=100,n.tunnelDomainMinLength=4,n.tunnelDomainMaxLength=180,n.tunnelMaxPorts=1e3,n.accessControlMaxEntries=40,n.accessControlMaxSubjects=100,n.accessControlSubjectMaxLength=200,n.accessControlSubjectNameMaxLength=200,n.accessControlMaxScopes=10,n.clusterIdPattern="^(([a-z]{3,4}[0-9]{1,3})|asse|aue|brs|euw|use)$",n.clusterIdRegex=new RegExp(n.clusterIdPattern),n.oldTunnelIdChars="0123456789bcdfghjklmnpqrstvwxz",n.oldTunnelIdPattern="["+n.oldTunnelIdChars+"]{8}",n.oldTunnelIdRegex=new RegExp(n.oldTunnelIdPattern),n.newTunnelIdChars="0123456789abcdefghijklmnopqrstuvwxyz-",n.newTunnelIdPattern="[a-z0-9][a-z0-9-]{1,58}[a-z0-9]",n.newTunnelIdRegex=new RegExp(n.newTunnelIdPattern),n.tunnelAliasChars="0123456789bcdfghjklmnpqrstvwxz",n.tunnelAliasPattern="["+n.tunnelAliasChars+"]{3,60}",n.tunnelAliasRegex=new RegExp(n.tunnelAliasPattern),n.tunnelNamePattern="([a-z0-9][a-z0-9-]{1,58}[a-z0-9])|(^$)",n.tunnelNameRegex=new RegExp(n.tunnelNamePattern),n.labelPattern="[\\w-=]{1,50}",n.labelRegex=new RegExp(n.labelPattern),n.tunnelDomainPattern="[0-9a-z][0-9a-z-.]{1,158}[0-9a-z]|(^$)",n.tunnelDomainRegex=new RegExp(n.tunnelDomainPattern),n.accessControlSubjectPattern="[0-9a-zA-Z-._:/@]{0,200}",n.accessControlSubjectRegex=new RegExp(n.accessControlSubjectPattern),n.accessControlSubjectNamePattern="[ \\w\\d-.,/'\"_@()<>]{0,200}",n.accessControlSubjectNameRegex=new RegExp(n.accessControlSubjectNamePattern)},5301:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelEndpoint=t.portToken=void 0,t.portToken="{port}";const r=n(6729);t.TunnelEndpoint={portToken:t.portToken,getPortUri:r.getPortUri,getPortSshCommand:r.getPortSshCommand}},6729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPortSshCommand=t.getPortUri=void 0;const r=n(5301);t.getPortUri=function(e,t){if(!e)throw new TypeError("A tunnel endpoint is required.");return"number"==typeof t||e.tunnelUri?"number"==typeof t&&e.portUriFormat?e.portUriFormat.replace(r.portToken,t.toString()):void 0:e.tunnelUri},t.getPortSshCommand=function(e,t){if(!e)throw new TypeError("A tunnel endpoint is required.");return"number"==typeof t||e.tunnelSshCommand?"number"==typeof t&&e.portSshCommandFormat?e.portSshCommandFormat.replace(r.portToken,t.toString()):void 0:e.tunnelSshCommand}},113:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelHeaderNames=void 0,(n=t.TunnelHeaderNames||(t.TunnelHeaderNames={})).XTunnelAuthorization="X-Tunnel-Authorization",n.XRequestID="X-Request-ID",n.XGithubSshKey="X-Github-Ssh-Key",n.XTunnelSkipAntiPhishingPage="X-Tunnel-Skip-AntiPhishing-Page"},4856:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelProtocol=void 0,(n=t.TunnelProtocol||(t.TunnelProtocol={})).Auto="auto",n.Tcp="tcp",n.Udp="udp",n.Ssh="ssh",n.Rdp="rdp",n.Http="http",n.Https="https"},736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelServiceProperties=t.nonProdGitHubAppClientId=t.prodGitHubAppClientId=t.devThirdPartyAppId=t.ppeThirdPartyAppId=t.prodThirdPartyAppId=t.nonProdFirstPartyAppId=t.prodFirstPartyAppId=t.devDnsName=t.ppeDnsName=t.prodDnsName=void 0,t.prodDnsName="global.rel.tunnels.api.visualstudio.com",t.ppeDnsName="global.rel.tunnels.ppe.api.visualstudio.com",t.devDnsName="global.ci.tunnels.dev.api.visualstudio.com",t.prodFirstPartyAppId="46da2f7e-b5ef-422a-88d4-2a7f9de6a0b2",t.nonProdFirstPartyAppId="54c45752-bacd-424a-b928-652f3eca2b18",t.prodThirdPartyAppId="ce65d243-a913-4cae-a7dd-cb52e9f77647",t.ppeThirdPartyAppId="544167a6-f431-4518-aac6-2fd50071928e",t.devThirdPartyAppId="a118c979-0249-44bb-8f95-eb0457127aeb",t.prodGitHubAppClientId="Iv1.e7b89e013f801f03",t.nonProdGitHubAppClientId="Iv1.b231c327f1eaa229";const r=n(7193);t.TunnelServiceProperties={production:r.production,staging:r.staging,development:r.development,environment:r.environment}},7193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment=t.development=t.staging=t.production=void 0;const r=n(736);t.production={serviceUri:`https://${r.prodDnsName}/`,serviceAppId:r.prodFirstPartyAppId,serviceInternalAppId:r.prodThirdPartyAppId,gitHubAppClientId:r.prodGitHubAppClientId},t.staging={serviceUri:`https://${r.ppeDnsName}/`,serviceAppId:r.nonProdFirstPartyAppId,serviceInternalAppId:r.ppeThirdPartyAppId,gitHubAppClientId:r.nonProdGitHubAppClientId},t.development={serviceUri:`https://${r.devDnsName}/`,serviceAppId:r.nonProdFirstPartyAppId,serviceInternalAppId:r.devThirdPartyAppId,gitHubAppClientId:r.nonProdGitHubAppClientId},t.environment=function(e){if(!e)throw new Error(`Invalid argument: ${e}`);switch(e.toLowerCase()){case"prod":case"production":return t.production;case"ppe":case"preprod":return t.staging;case"dev":case"development":return t.development;default:throw new Error(`Invalid service environment: ${e}`)}}},6950:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdGeneration=void 0;const r=n(3399);class s{static generateTunnelId(){let e="";e+=this.adjectives[Math.floor(Math.random()*this.adjectives.length)]+"-",e+=this.nouns[Math.floor(Math.random()*this.nouns.length)]+"-";for(let t=0;t<7;t++)e+=r.TunnelConstraints.oldTunnelIdChars[Math.floor(Math.random()*r.TunnelConstraints.oldTunnelIdChars.length)];return e}}t.IdGeneration=s,s.nouns=["pond","hill","mountain","field","fog","ant","dog","cat","shoe","plane","chair","book","ocean","lake","river","horse"],s.adjectives=["fun","happy","interesting","neat","peaceful","puzzled","kind","joyful","new","giant","sneaky","quick","majestic","jolly","fancy","tidy","swift","silent","amusing","spiffy"]},5927:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(153),t),s(n(1005),t),s(n(9146),t),s(n(7021),t)},7021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAccessTokenProperties=void 0;class n{constructor(e,t,n,r,s,i){this.clusterId=e,this.tunnelId=t,this.tunnelPorts=n,this.scopes=r,this.issuer=s,this.expiration=i}toString(){let e="";return this.tunnelId&&(e+="tunnel=",e+=this.tunnelId,this.clusterId&&(e+=".",e+=this.clusterId)),this.tunnelPorts&&this.tunnelPorts.length>0&&(e.length>0&&(e+=", "),1===this.tunnelPorts.length?e+=`port=${this.tunnelPorts[0]}`:e+=`ports=[${this.tunnelPorts.join(", ")}]`),this.scopes&&(e.length>0&&(e+=", "),e+=`scopes=[${this.scopes.join(", ")}]`),this.issuer&&(e.length>0&&(e+=", "),e+="issuer=",e+=this.issuer),this.expiration&&(e.length>0&&(e+=", "),e+=`expiration=${this.expiration.toString().replace(".000Z","Z")}`),e}static validateTokenExpiration(e){const t=n.tryParse(e);if((null==t?void 0:t.expiration)&&t.expiration<new Date)throw new Error("The access token is expired: "+t)}static tryParse(e){if("string"!=typeof e)throw new TypeError("Token string expected.");const t=e.split(".");if(3!==t.length)return null;const r=n.base64UrlDecode(t[1]);if(!r)return null;try{const e=JSON.parse(r),t=e.clusterId,s=e.tunnelId,i=e.tunnelPorts,o=e.scp,a=e.iss,c=e.exp;return new n(t,s,"number"==typeof i?[i]:i,null==o?void 0:o.split(" "),a,"number"==typeof c?new Date(1e3*c):void 0)}catch(e){return null}}static getTokenTrace(e){var t,r;return e?null!==(r=null===(t=n.tryParse(e))||void 0===t?void 0:t.toString())&&void 0!==r?r:"token":"none"}static getTunnelAccessToken(e,t){if((null==e?void 0:e.accessTokens)&&t){Array.isArray(t)||(t=[t]);for(const r of t)for(const[t,s]of Object.entries(e.accessTokens))if(s&&t.split(" ").includes(r))return n.validateTokenExpiration(s),s}}static base64UrlDecode(e){for(e=e.replace("-","+");e.length%4!=0;)e+="=";try{return atob(e)}catch(e){return null}}}t.TunnelAccessTokenProperties=n},1005:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAuthenticationSchemes=void 0;class n{}t.TunnelAuthenticationSchemes=n,n.aad="aad",n.github="github",n.tunnel="tunnel"},153:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelManagementHttpClient=void 0;const r=n(3399),s=n(1005),i=n(7021),o=n(8534),a=n(3315),c=n(5566),l=n(6950),u="Authorization";function p(e,t){var n,r;return(null!==(n=e.portNumber)&&void 0!==n?n:Number.MAX_SAFE_INTEGER)-(null!==(r=t.portNumber)&&void 0!==r?r:Number.MAX_SAFE_INTEGER)}function h(e){return"string"==typeof e?new Date(Date.parse(e)):e}function d(e){e&&(e.created=h(e.created),e.status&&(e.status.lastHostConnectionTime=h(e.status.lastHostConnectionTime),e.status.lastClientConnectionTime=h(e.status.lastClientConnectionTime)))}function f(e){e&&e.status&&(e.status.lastClientConnectionTime=h(e.status.lastClientConnectionTime))}function m(e,t){var n;if(e.accessTokens&&t){null!==(n=t.accessTokens)&&void 0!==n||(t.accessTokens={});for(const n of Object.entries(e.accessTokens))t.accessTokens[n[0]]||(t.accessTokens[n[0]]=n[1])}}const g=[r.TunnelAccessScopes.Manage],v=[r.TunnelAccessScopes.Host],y=[r.TunnelAccessScopes.Manage,r.TunnelAccessScopes.ManagePorts,r.TunnelAccessScopes.Host],b=[r.TunnelAccessScopes.Manage,r.TunnelAccessScopes.ManagePorts,r.TunnelAccessScopes.Host,r.TunnelAccessScopes.Connect],w=["2023-09-27-preview"];class S{constructor(e,t,n,s,i,o){var a;if(this.httpsAgent=i,this.adapter=o,this.trace=e=>{},-1===w.indexOf(t))throw new TypeError(`Invalid API version: ${t}, must be one of ${w}`);if(this.apiVersion=t,!e)throw new TypeError("User agent must be provided.");if(Array.isArray(e)){if(0===e.length)throw new TypeError("User agents cannot be empty.");let t="";e.forEach((e=>{var n;if("string"!=typeof e){if(!e.name)throw new TypeError("Invalid user agent. The name must be provided.");if("string"!=typeof e.name)throw new TypeError("Invalid user agent. The name must be a string.");if(e.version&&"string"!=typeof e.version)throw new TypeError("Invalid user agent. The version must be a string.");t=`${t}${e.name}/${null!==(n=e.version)&&void 0!==n?n:"unknown"} `}else t=`${t}${e} `})),this.userAgents=t.trim()}else if("string"!=typeof e){if(!e.name)throw new TypeError("Invalid user agent. The name must be provided.");if("string"!=typeof e.name)throw new TypeError("Invalid user agent. The name must be a string.");if(e.version&&"string"!=typeof e.version)throw new TypeError("Invalid user agent. The version must be a string.");this.userAgents=`${e.name}/${null!==(a=e.version)&&void 0!==a?a:"unknown"}`}else this.userAgents=e;this.userTokenCallback=null!=n?n:()=>Promise.resolve(null),s||(s=r.TunnelServiceProperties.production.serviceUri);const c=new URL(s);if(!c||"/"!==c.pathname)throw new TypeError(`Invalid tunnel service URI: ${s}`);this.baseAddress=s}async listTunnels(e,t,n){const r=[e?null:"global=true",t?`domain=${t}`:null].filter((e=>!!e)).join("&"),s=await this.sendRequest("GET",e,"/tunnels",r,n);let i=new Array;if(s.value)for(const e of s.value)e.value&&(i=i.concat(e.value));return i.forEach(d),i}async getTunnel(e,t){const n=await this.sendTunnelRequest("GET",e,b,void 0,void 0,t);return m(e,n),d(n),n}async createTunnel(e,t){const n=e.tunnelId,r=null==n||""===n;(t=t||{}).additionalHeaders=t.additionalHeaders||{},t.additionalHeaders["If-Not-Match"]="*",r&&(e.tunnelId=l.IdGeneration.generateTunnelId());for(let n=0;n<=3;n++)try{const n=await this.sendTunnelRequest("PUT",e,g,void 0,void 0,t,this.convertTunnelForRequest(e),void 0,!0);return m(e,n),d(n),n}catch(t){if(!r)throw t;e.tunnelId=l.IdGeneration.generateTunnelId()}const s=await this.sendTunnelRequest("PUT",e,g,void 0,void 0,t,this.convertTunnelForRequest(e),void 0,!0);return m(e,s),d(s),s}async createOrUpdateTunnel(e,t){const n=e.tunnelId,r=null==n||""===n;r&&(e.tunnelId=l.IdGeneration.generateTunnelId());for(let n=0;n<=3;n++)try{const n=await this.sendTunnelRequest("PUT",e,g,void 0,void 0,t,this.convertTunnelForRequest(e),void 0,!0);return m(e,n),d(n),n}catch(t){if(!r)throw t;e.tunnelId=l.IdGeneration.generateTunnelId()}const s=await this.sendTunnelRequest("PUT",e,g,void 0,"forceCreate=true",t,this.convertTunnelForRequest(e),void 0,!0);return m(e,s),d(s),s}async updateTunnel(e,t){(t=t||{}).additionalHeaders=t.additionalHeaders||{},t.additionalHeaders["If-Match"]="*";const n=await this.sendTunnelRequest("PUT",e,g,void 0,void 0,t,this.convertTunnelForRequest(e));return m(e,n),d(n),n}async deleteTunnel(e,t){return await this.sendTunnelRequest("DELETE",e,g,void 0,void 0,t,void 0,!0)}async updateTunnelEndpoint(e,t,n){if(null==t.id)throw new Error("Endpoint ID must be specified when updating an endpoint.");const r=`/endpoints/${t.id}`,s=await this.sendTunnelRequest("PUT",e,v,r,"connectionMode="+t.connectionMode,n,t);return e.endpoints&&(e.endpoints=e.endpoints.filter((e=>e.hostId!==t.hostId||e.connectionMode!==t.connectionMode)).concat(s)),s}async deleteTunnelEndpoints(e,t,n){const r=`/endpoints/${t}`,s=await this.sendTunnelRequest("DELETE",e,v,r,void 0,n,void 0,!0);return s&&e.endpoints&&(e.endpoints=e.endpoints.filter((e=>e.id!==t))),s}async listUserLimits(){return await this.sendRequest("GET",void 0,"/userlimits",void 0,void 0)||[]}async listTunnelPorts(e,t){const n=await this.sendTunnelRequest("GET",e,b,"/ports",void 0,t);return n.value&&n.value.forEach(f),n.value}async getTunnelPort(e,t,n){const r=`/ports/${t}`,s=await this.sendTunnelRequest("GET",e,b,r,void 0,n);return f(s),s}async createTunnelPort(e,t,n){const r=`/ports/${(t=this.convertTunnelPortForRequest(e,t)).portNumber}`;(n=n||{}).additionalHeaders=n.additionalHeaders||{},n.additionalHeaders["If-Not-Match"]="*";const s=await this.sendTunnelRequest("PUT",e,y,r,void 0,n,t);return e.ports=e.ports||[],e.ports=e.ports.filter((e=>e.portNumber!==t.portNumber)).concat(s).sort(p),f(s),s}async updateTunnelPort(e,t,n){if(t.clusterId&&e.clusterId&&t.clusterId!==e.clusterId)throw new Error("Tunnel port cluster ID is not consistent.");(n=n||{}).additionalHeaders=n.additionalHeaders||{},n.additionalHeaders["If-Match"]="*";const r=`/ports/${t.portNumber}`;t=this.convertTunnelPortForRequest(e,t);const s=await this.sendTunnelRequest("PUT",e,y,r,void 0,n,t);return m(t,s),f(s),e.ports=e.ports||[],e.ports=e.ports.filter((e=>e.portNumber!==t.portNumber)).concat(s).sort(p),s}async createOrUpdateTunnelPort(e,t,n){const r=`/ports/${(t=this.convertTunnelPortForRequest(e,t)).portNumber}`,s=await this.sendTunnelRequest("PUT",e,y,r,void 0,n,t);return e.ports=e.ports||[],e.ports=e.ports.filter((e=>e.portNumber!==t.portNumber)).concat(s).sort(p),f(s),s}async deleteTunnelPort(e,t,n){const r=`/ports/${t}`,s=await this.sendTunnelRequest("DELETE",e,y,r,void 0,n,void 0,!0);return s&&e.ports&&(e.ports=e.ports.filter((e=>e.portNumber!==t)).sort(p)),s}async listClusters(){return await this.sendRequest("GET",void 0,"/clusters",void 0,void 0,void 0,!1)}async sendTunnelRequest(e,t,n,r,s,i,o,a,c=!1){const l=await this.buildUriForTunnel(t,r,s,i,c),u=await this.getAxiosRequestConfig(t,i,n);return await this.request(e,l,o,u,a)}async sendRequest(e,t,n,r,s,i,o){const a=await this.buildUri(t,n,r,s),c=await this.getAxiosRequestConfig(void 0,s);return await this.request(e,a,i,c,o)}async checkNameAvailablility(e){e=encodeURI(e);const t=await this.buildUri(void 0,`/tunnels/${e}:checkNameAvailability`),n={httpsAgent:this.httpsAgent,adapter:this.adapter};return await this.request("GET",t,void 0,n)}getResponseErrorMessage(e){var t,n,r,s;let i="";if(null===(t=e.response)||void 0===t?void 0:t.data){const t=e.response.data;(t.title||t.detail)&&(i=`Tunnel service error: ${t.title}`,t.detail&&(i+=" "+t.detail),t.errors&&(i+=JSON.stringify(t.errors)))}i||(i=(null==e?void 0:e.response)?`Tunnel service returned status code: ${e.response.status} ${e.response.statusText}`:null!==(r=null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e)&&void 0!==r?r:"Unknown tunnel service request error.");const o="VsSaaS-Request-Id";return(null===(s=e.response)||void 0===s?void 0:s.headers)&&e.response.headers[o]&&(i+=`\nRequest ID: ${e.response.headers[o]}`),i}async buildUri(e,t,n,r){if(void 0===e&&this.userTokenCallback){let t=await this.userTokenCallback();if(t&&t.startsWith("tunnelplan")){t=t.replace("tunnelplan ","");const n=c.TunnelPlanTokenProperties.tryParse(t);null!==n&&n.clusterId&&(e=n.clusterId)}}let s=this.baseAddress;if(e){const t=new URL(s),n=parseInt(t.port,10);if("localhost"===t.hostname||t.hostname.startsWith(`${e}.`)){if("https:"===t.protocol&&e.startsWith("localhost")&&n%10>0){const r=parseInt(e.substring("localhost".length),10);r>0&&r<10&&(t.port=(n-n%10+r).toString(),s=t.toString())}}else t.hostname=`${e}.${t.hostname}`.replace("global.",""),s=t.toString()}s=`${s.replace(/\/$/,"")}${t}`;const i=this.tunnelRequestOptionsToQueryString(r,n);return i&&(s+=`?${i}`),s}buildUriForTunnel(e,t,n,r,s=!1){let i="";if(!e.clusterId&&!s||!e.tunnelId)throw new Error("Tunnel object must include a tunnel ID always and cluster ID for non creates.");if(i=`/tunnels/${e.tunnelId}`,null==r?void 0:r.additionalQueryParameters)for(const[e,t]of Object.entries(r.additionalQueryParameters))n?n+=`&${e}=${t}`:n=`${e}=${t}`;return this.buildUri(e.clusterId,i+(t||""),n,r)}async getAxiosRequestConfig(e,t,n){const r={};if(t&&t.accessToken&&(i.TunnelAccessTokenProperties.validateTokenExpiration(t.accessToken),r.Authorization=`${s.TunnelAuthenticationSchemes.tunnel} ${t.accessToken}`),!(u in r)&&this.userTokenCallback){const e=await this.userTokenCallback();e&&(r.Authorization=e)}if(!(u in r)){const t=i.TunnelAccessTokenProperties.getTunnelAccessToken(e,n);t&&(r.Authorization=`${s.TunnelAuthenticationSchemes.tunnel} ${t}`)}const a=e=>{if(e)for(const[t,n]of Object.entries(e))r[t]=n};a(this.additionalRequestHeaders),a(null==t?void 0:t.additionalHeaders);const c=r["User-Agent"]?r["User-Agent"]+" ":"";r["User-Agent"]=`${c}${this.userAgents} ${o.tunnelSdkUserAgent}`;const l=Object.assign(Object.assign({headers:r},this.httpsAgent&&{httpsAgent:this.httpsAgent}),this.adapter&&{adapter:this.adapter});return!1===(null==t?void 0:t.followRedirects)&&(l.maxRedirects=0),l}convertTunnelForRequest(e){var t;return{tunnelId:e.tunnelId,name:e.name,domain:e.domain,description:e.description,labels:e.labels,options:e.options,customExpiration:e.customExpiration,accessControl:e.accessControl?{entries:e.accessControl.entries.filter((e=>!e.isInherited))}:void 0,endpoints:e.endpoints,ports:null===(t=e.ports)||void 0===t?void 0:t.map((t=>this.convertTunnelPortForRequest(e,t)))}}convertTunnelPortForRequest(e,t){if(t.clusterId&&e.clusterId&&t.clusterId!==e.clusterId)throw new Error("Tunnel port cluster ID does not match tunnel.");if(t.tunnelId&&e.tunnelId&&t.tunnelId!==e.tunnelId)throw new Error("Tunnel port tunnel ID does not match tunnel.");return{portNumber:t.portNumber,protocol:t.protocol,isDefault:t.isDefault,description:t.description,labels:t.labels,sshUser:t.sshUser,options:t.options,accessControl:t.accessControl?{entries:t.accessControl.entries.filter((e=>!e.isInherited))}:void 0}}tunnelRequestOptionsToQueryString(e,t){const n={},s=[];return e&&(e.includePorts&&(n.includePorts=["true"]),e.includeAccessControl&&(n.includeAccessControl=["true"]),e.tokenScopes&&(r.TunnelAccessControl.validateScopes(e.tokenScopes,void 0,!0),n.tokenScopes=e.tokenScopes),e.forceRename&&(n.forceRename=["true"]),e.labels&&(n.labels=e.labels,e.requireAllLabels&&(n.allLabels=["true"])),e.limit&&(n.limit=[e.limit.toString()]),s.push(...Object.keys(n).map((e=>`${e}=${n[e].map(encodeURIComponent).join(",")}`)))),t&&s.push(t),s.push(`api-version=${this.apiVersion}`),s.join("&")}async request(e,t,n,r,s){var i,o;this.trace(`${e} ${t}`),r.headers&&this.traceHeaders(r.headers),this.traceContent(n);const c=e=>{this.trace(`${e.status} ${e.statusText}`),this.traceHeaders(e.headers),this.traceContent(e.data)};try{r.url=t,r.method=e,r.data=n;const s=await a.default.request(r);return c(s),"DELETE"===e||s.data}catch(t){if(!(t instanceof Error&&t.isAxiosError))throw t;const n=t;if(n.response&&(c(n.response),s&&404===n.response.status))return"DELETE"!==e&&null;throw n.message=this.getResponseErrorMessage(n),delete n.request,n.response&&(null===(i=n.config)||void 0===i||delete i.httpAgent,null===(o=n.config)||void 0===o||delete o.httpsAgent,delete n.response.request),n}}traceHeaders(e){for(const[t,n]of Object.entries(e)){if("Authorization"===t)return void this.traceAuthorizationHeader(t,n);this.trace(`${t}: ${null!=n?n:""}`)}}traceAuthorizationHeader(e,t){if("string"!=typeof t)return;const n=t.indexOf(" ");if(n<0)return void this.trace(`${e}: [${t.length}]`);const r=t.substring(0,n),o=t.substring(n+1);if(r.toLowerCase()===s.TunnelAuthenticationSchemes.tunnel.toLowerCase()){const t=i.TunnelAccessTokenProperties.tryParse(o);if(t)return void this.trace(`${e}: ${r} <${t}>`)}this.trace(`${e}: ${r} <token>`)}traceContent(e){"object"==typeof e&&(e=JSON.stringify(e,void 0,"  ")),"string"==typeof e&&this.trace(S.replaceTokensInContent(e))}static replaceTokensInContent(e){var t;const n=/"(eyJ[a-zA-z0-9\-_]+\.[a-zA-z0-9\-_]+\.[a-zA-z0-9\-_]+)"/;let r=n.exec(e);for(;r;){let s=r[1];const o=i.TunnelAccessTokenProperties.tryParse(s);s=null!==(t=null==o?void 0:o.toString())&&void 0!==t?t:"token",e=e.substring(0,r.index+1)+"<"+s+">"+e.substring(r.index+r[0].length-1),r=n.exec(e)}return e}}t.TunnelManagementHttpClient=S},5566:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelPlanTokenProperties=void 0;class n{constructor(e,t,n,r,s,i,o){this.clusterId=e,this.issuer=t,this.expiration=n,this.userEmail=r,this.tunnelPlanId=s,this.subscriptionId=i,this.scopes=o}static validateTokenExpiration(e){const t=n.tryParse(e);if((null==t?void 0:t.expiration)&&t.expiration<new Date)throw new Error("The access token is expired: "+t)}static tryParse(e){if("string"!=typeof e)throw new TypeError("Token string expected.");const t=e.split(".");if(3!==t.length)return null;const r=n.base64UrlDecode(t[1]);if(!r)return null;try{const e=JSON.parse(r),t=e.clusterId,s=e.subscriptionId,i=e.tunnelPlanId,o=e.userEmail,a=e.scp,c=e.iss,l=e.exp;return new n(t,c,"number"==typeof l?new Date(1e3*l):void 0,o,i,s,null==a?void 0:a.split(" "))}catch(e){return null}}static getTokenTrace(e){var t,r;return e?null!==(r=null===(t=n.tryParse(e))||void 0===t?void 0:t.toString())&&void 0!==r?r:"token":"none"}static base64UrlDecode(e){for(e=e.replace("-","+");e.length%4!=0;)e+="=";try{return atob(e)}catch(e){return null}}}t.TunnelPlanTokenProperties=n},9146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8534:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tunnelSdkUserAgent=void 0;const r=n(8492).version;t.tunnelSdkUserAgent=`Dev-Tunnels-Service-TypeScript-SDK/${r}`},3817:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedPort=void 0,t.ForwardedPort=class{constructor(e,t,n){if(null===e&&null===t)throw new TypeError("Local and remote ports cannot both be null.");if(!n&&null===t)throw new TypeError("The report port number must not be null for locally forwarded ports.");if(null!==e&&("number"!=typeof e||e<=0))throw new TypeError("Local port must be a positive integer.");if(null!==t&&("number"!=typeof t||t<=0))throw new TypeError("Remote port must be a positive integer: "+t);this.localPort=e,this.remotePort=t;const r=n?"->":"<-";null===this.localPort?this.str=`${r}${this.remotePort}`:null==this.remotePort?this.str=`${this.localPort}${r}`:this.str=`${this.localPort}${r}${this.remotePort}`}toString(){return this.str}}},1074:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedPortConnectingEventArgs=t.ForwardedPortChannelEventArgs=t.ForwardedPortEventArgs=void 0;class n{constructor(e){this.port=e}toString(){return this.port.toString()}}t.ForwardedPortEventArgs=n,t.ForwardedPortChannelEventArgs=class extends n{constructor(e,t){super(e),this.port=e,this.channel=t}toString(){return`${this.port} ${this.channel}`}},t.ForwardedPortConnectingEventArgs=class{constructor(e,t,n,r){this.port=e,this.isIncoming=t,this.stream=n,this.cancellation=r}toString(){return`${this.port} isIncoming=${this.isIncoming}`}}},1678:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedPortsCollection=void 0;const r=n(5844),s=n(1074);class i{constructor(){this.portChannelMap=new Map,this.portAddedEmitter=new r.Emitter,this.onPortAdded=this.portAddedEmitter.event,this.portUpdatedEmitter=new r.Emitter,this.onPortUpdated=this.portUpdatedEmitter.event,this.portRemovedEmitter=new r.Emitter,this.onPortRemoved=this.portRemovedEmitter.event,this.portChannelAddedEmitter=new r.Emitter,this.onPortChannelAdded=this.portChannelAddedEmitter.event,this.portChannelRemovedEmitter=new r.Emitter,this.onPortChannelRemoved=this.portChannelRemovedEmitter.event}get size(){return this.portChannelMap.size}has(e){return this.portChannelMap.has(e.toString())}*values(){for(const[e,t]of this.portChannelMap.values())yield e}[Symbol.iterator](){return this.values()}*entries(){for(const[e,t]of this.portChannelMap.values())yield[e,e]}keys(){return this.values()}forEach(e,t){for(const[n,r]of this.portChannelMap.values())e.apply(t,[n,n,this])}getChannels(e){const t=this.portChannelMap.get(e.toString());if(!t)throw new Error(`Port ${e} is not in the collection.`);return t[1]}find(e){for(const t of this.values())if(e(t))return t}addOrUpdatePort(e){this.has(e)&&this.portUpdatedEmitter.fire(new s.ForwardedPortEventArgs(e)),this.portChannelMap.set(e.toString(),[e,[]]),this.portAddedEmitter.fire(new s.ForwardedPortEventArgs(e))}removePort(e){return!!this.has(e)&&(this.portChannelMap.delete(e.toString()),this.portRemovedEmitter.fire(new s.ForwardedPortEventArgs(e)),!0)}addChannel(e,t){const n=this.portChannelMap.get(e.toString());if(!n)throw new Error(`Port ${e} is not in the collection.`);const r=n[1];if(r.find((e=>e.channelId===t.channelId)))throw new Error(`Channel ${t.channelId} is already in the collection for port ${e}`);r.push(t),t.onClosed((()=>this.tryRemoveChannel(e,t))),this.portChannelAddedEmitter.fire(new s.ForwardedPortChannelEventArgs(e,t))}tryRemoveChannel(e,t){const n=this.portChannelMap.get(e.toString());if(n){const r=n[1],i=r.findIndex((e=>e.channelId===t.channelId));i>=0&&(r.splice(i,1),this.portChannelRemovedEmitter.fire(new s.ForwardedPortChannelEventArgs(e,t)))}}toString(){return[...this].join(", ")}}t.ForwardedPortsCollection=i},9361:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedPortConnectingEventArgs=t.ForwardedPortChannelEventArgs=t.ForwardedPortEventArgs=t.ForwardedPortsCollection=t.ForwardedPort=t.PortForwardChannelOpenMessage=t.PortForwardSuccessMessage=t.PortForwardRequestMessage=t.RemotePortStreamer=t.RemotePortForwarder=t.LocalPortForwarder=t.PortForwardingService=t.SshServer=t.SshClient=void 0;var r=n(7178);Object.defineProperty(t,"SshClient",{enumerable:!0,get:function(){return r.SshClient}});var s=n(9340);Object.defineProperty(t,"SshServer",{enumerable:!0,get:function(){return s.SshServer}});var i=n(3738);Object.defineProperty(t,"PortForwardingService",{enumerable:!0,get:function(){return i.PortForwardingService}});var o=n(8258);Object.defineProperty(t,"LocalPortForwarder",{enumerable:!0,get:function(){return o.LocalPortForwarder}});var a=n(3427);Object.defineProperty(t,"RemotePortForwarder",{enumerable:!0,get:function(){return a.RemotePortForwarder}});var c=n(8338);Object.defineProperty(t,"RemotePortStreamer",{enumerable:!0,get:function(){return c.RemotePortStreamer}});var l=n(9566);Object.defineProperty(t,"PortForwardRequestMessage",{enumerable:!0,get:function(){return l.PortForwardRequestMessage}});var u=n(8842);Object.defineProperty(t,"PortForwardSuccessMessage",{enumerable:!0,get:function(){return u.PortForwardSuccessMessage}});var p=n(2516);Object.defineProperty(t,"PortForwardChannelOpenMessage",{enumerable:!0,get:function(){return p.PortForwardChannelOpenMessage}});var h=n(3817);Object.defineProperty(t,"ForwardedPort",{enumerable:!0,get:function(){return h.ForwardedPort}});var d=n(1678);Object.defineProperty(t,"ForwardedPortsCollection",{enumerable:!0,get:function(){return d.ForwardedPortsCollection}});var f=n(1074);Object.defineProperty(t,"ForwardedPortEventArgs",{enumerable:!0,get:function(){return f.ForwardedPortEventArgs}}),Object.defineProperty(t,"ForwardedPortChannelEventArgs",{enumerable:!0,get:function(){return f.ForwardedPortChannelEventArgs}}),Object.defineProperty(t,"ForwardedPortConnectingEventArgs",{enumerable:!0,get:function(){return f.ForwardedPortConnectingEventArgs}})},5021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPAddressConversions=void 0,t.IPAddressConversions=class{static fromSshAddress(e){return e?"localhost"===e?"127.0.0.1":e:"0.0.0.0"}static toSshAddress(e){return e?"0.0.0.0"===e?"":"127.0.0.1"===e?"localhost":e:null}}},2516:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortForwardChannelOpenMessage=void 0;const r=n(2727);class s extends r.ChannelOpenMessage{constructor(){super(...arguments),this.host="",this.port=0,this.originatorIPAddress="",this.originatorPort=0}onRead(e){super.onRead(e),this.host=e.readString("ascii"),this.port=e.readUInt32(),this.originatorIPAddress=e.readString("ascii"),this.originatorPort=e.readUInt32()}onWrite(e){super.onWrite(e),e.writeString(this.validateField(this.host,"host"),"ascii"),e.writeUInt32(this.validateField(this.port,"port")),e.writeString(this.originatorIPAddress||"","ascii"),e.writeUInt32(this.originatorPort||0)}toString(){return`${super.toString()} (host=${this.host} port=${this.port})`}}t.PortForwardChannelOpenMessage=s},9566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortForwardRequestMessage=void 0;const r=n(2727),s=n(3738);class i extends r.SessionRequestMessage{constructor(){super(),this.addressToBind="",this.port=0,this.requestType=s.PortForwardingService.portForwardRequestType,this.wantReply=!0}onRead(e){super.onRead(e),this.addressToBind=e.readString("ascii"),this.port=e.readUInt32()}onWrite(e){super.onWrite(e),e.writeString(this.validateField(this.addressToBind,"address"),"ascii"),e.writeUInt32(this.validateField(this.port,"port"))}toString(){return`${super.toString()} (addressToBind=${this.addressToBind} port=${this.port})`}}t.PortForwardRequestMessage=i},8842:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortForwardSuccessMessage=void 0;const r=n(2727);class s extends r.SessionRequestSuccessMessage{constructor(){super(...arguments),this.port=0}onRead(e){super.onRead(e),e.available>=4&&(this.port=e.readUInt32())}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.port,"port"))}toString(){return`${super.toString()} (port=${this.port})`}}t.PortForwardSuccessMessage=s},5270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultPortForwardMessageFactory=void 0;const r=n(2516),s=n(9566),i=n(8842);t.DefaultPortForwardMessageFactory=class{createRequestMessageAsync(e){return Promise.resolve(new s.PortForwardRequestMessage)}createSuccessMessageAsync(e){return Promise.resolve(new i.PortForwardSuccessMessage)}createChannelOpenMessageAsync(e){return Promise.resolve(new r.PortForwardChannelOpenMessage)}}},8258:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalPortForwarder=void 0;const r=n(2727),s=n(9998);class i extends r.SshService{constructor(e,t,n,r,s,i,o){super(t),this.pfs=e,this.channelType=n,this.localIPAddress=r,this.port=s,this.remoteHost=i,this.remotePort=null!=o?o:0!==s?s:void 0}get localPort(){return this.port}async startForwarding(e){var t;let n=this.localIPAddress;try{this.tcpListener=await this.pfs.tcpListenerFactory.createTcpListener(n,this.port,!0);const e=this.tcpListener.address();if(!(e.port>0))throw this.tcpListener.close(),new Error("Could not get server port.");if(this.port=e.port,"127.0.0.1"===this.localIPAddress||"0.0.0.0"===this.localIPAddress){n="0.0.0.0"===this.localIPAddress?"::":"::1";try{this.tcpListener2=await this.pfs.tcpListenerFactory.createTcpListener(n,this.port,!1)}catch(e){if(!(e instanceof Error)||"EADDRNOTAVAIL"!==e.code)throw e;this.trace(r.TraceLevel.Warning,r.SshTraceEventIds.portForwardServerListenFailed,`PortForwardingService failed to listen on ${n}:{this.port}: ${e.message}`,e)}}}catch(e){if(!(e instanceof Error))throw e;throw this.trace(r.TraceLevel.Error,r.SshTraceEventIds.portForwardServerListenFailed,`PortForwardingService failed to listen on ${n}:${this.port}: ${e.message}`,e),e}this.tcpListener.on("connection",this.acceptConnection.bind(this)),null===(t=this.tcpListener2)||void 0===t||t.on("connection",this.acceptConnection.bind(this)),this.trace(r.TraceLevel.Info,r.SshTraceEventIds.portForwardServerListening,`PortForwardingService listening on ${this.localIPAddress}:${this.port}.`),this.tcpListener2&&this.trace(r.TraceLevel.Info,r.SshTraceEventIds.portForwardServerListening,`PortForwardingService also listening on ${n}:${this.port}.`)}async acceptConnection(e){var t,n,i,o,a;let c;this.trace(r.TraceLevel.Info,r.SshTraceEventIds.portForwardConnectionAccepted,`PortForwardingService accepted connection from: ${e.remoteAddress} on port ${this.port}`);try{c=await this.pfs.openChannel(this.session,this.channelType,null!==(t=e.remoteAddress)&&void 0!==t?t:null,null!==(n=e.remotePort)&&void 0!==n?n:null,null!==(i=this.remoteHost)&&void 0!==i?i:this.localIPAddress,null!==(o=this.remotePort)&&void 0!==o?o:this.localPort)}catch(t){if(!(t instanceof Error))throw t;return void e.destroy()}const l=await this.pfs.forwardedPortConnecting(null!==(a=this.remotePort)&&void 0!==a?a:this.localPort,!1,new r.SshStream(c));if(!l)return;const u=new s.StreamForwarder(e,l,c.session.trace);this.pfs.streamForwarders.push(u)}dispose(){var e,t;null===(e=this.tcpListener)||void 0===e||e.close(),null===(t=this.tcpListener2)||void 0===t||t.close(),this.trace(r.TraceLevel.Info,r.SshTraceEventIds.portForwardServerListening,`PortForwardingService stopped listening on ${this.localIPAddress}:${this.port}.`),super.dispose()}}t.LocalPortForwarder=i},3738:function(e,t,n){"use strict";var r,s=this&&this.__decorate||function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.PortForwardingService=void 0;const i=n(2727),o=n(5844),a=n(3817),c=n(1678),l=n(5021),u=n(2516),p=n(9566),h=n(8842),d=n(7285),f=n(5270),m=n(8258),g=n(3427),v=n(8338),y=n(1074);let b=r=class extends i.SshService{constructor(e){super(e),this.localForwarders=new Map,this.remoteConnectors=new Map,this.streamForwarders=[],this.acceptLocalConnectionsForForwardedPorts=!0,this.forwardConnectionsToLocalPorts=!0,this.acceptRemoteConnectionsForNonForwardedPorts=!0,this.localForwardedPorts=new c.ForwardedPortsCollection,this.remoteForwardedPorts=new c.ForwardedPortsCollection,this.tcpListenerFactory=new d.DefaultTcpListenerFactory,this.messageFactory=new f.DefaultPortForwardMessageFactory,this.forwardedPortConnectingEmitter=new o.Emitter,this.onForwardedPortConnecting=this.forwardedPortConnectingEmitter.event}async forwardedPortConnecting(e,t,n,r){try{const s=new y.ForwardedPortConnectingEventArgs(e,t,n,r);if(this.forwardedPortConnectingEmitter.fire(s),s.transformPromise)return await s.transformPromise}catch(e){if(!(e instanceof Error))throw e;return this.trace(i.TraceLevel.Warning,i.SshTraceEventIds.portForwardConnectionFailed,`Forwarded port connecting event-handler failed: ${e.message}`),null}return n}async forwardFromRemotePort(e,t,n,r,s){const i="string"==typeof n?n:"127.0.0.1";if(void 0===r&&(r=t),!e)throw new TypeError("Remote IP address is required.");if(!Number.isInteger(t)||t<0)throw new TypeError("Remote port must be a non-negative integer.");if(!i)throw new TypeError("Local host is required.");if(!Number.isInteger(r)||r<=0)throw new TypeError("Local port must be a positive integer.");if(this.localForwardedPorts.find((e=>e.localPort===r)))throw new Error(`Local port ${r} is already forwarded.`);if(t>0&&this.localForwardedPorts.find((e=>e.remotePort===t)))throw new Error(`Remote port ${t} is already forwarded.`);const o=new g.RemotePortForwarder(this,this.session,e,t,i,r),c=await this.messageFactory.createRequestMessageAsync(t);if(!await o.request(c,s))return null;if(t=o.remotePort,this.remoteConnectors.has(t))return null;this.remoteConnectors.set(t,o);const l=new a.ForwardedPort(r,t,!1);return this.localForwardedPorts.addOrUpdatePort(l),o.onDisposed((()=>{this.localForwardedPorts.removePort(l),this.remoteConnectors.delete(t)})),o}async forwardToRemotePort(e,t,n,s,i){const o="string"==typeof n?n:"127.0.0.1";if(void 0===s&&(s=t),!e)throw new TypeError("Local IP address is required.");if(!Number.isInteger(t)||t<0)throw new TypeError("Local port must be a non-negative integer.");if(!o)throw new TypeError("Remote host is required.");if(!Number.isInteger(s)||s<=0)throw new TypeError("Remote port must be a positive integer.");if(this.localForwarders.has(s))throw new Error(`Port ${s} is already forwarded.`);const a=new m.LocalPortForwarder(this,this.session,r.reversePortForwardChannelType,e,t,o,s);return await a.startForwarding(i),this.localForwarders.set(s,a),a.onDisposed((()=>{this.localForwarders.delete(s)})),a}async streamFromRemotePort(e,t,n){if(!e)throw new TypeError("Remote IP address is required.");if(!Number.isInteger(t)||t<0)throw new TypeError("Remote port must be a non-negative integer.");const r=new v.RemotePortStreamer(this.session,e,t),s=await this.messageFactory.createRequestMessageAsync(t);if(!await r.request(s,n))return r.dispose(),null;t=r.remotePort,this.remoteConnectors.set(t,r);const i=new a.ForwardedPort(null,t,!1);return this.localForwardedPorts.addOrUpdatePort(i),r.onDisposed((()=>{this.localForwardedPorts.removePort(i),this.remoteConnectors.delete(t)})),r}async streamToRemotePort(e,t,n){if(!e)throw new TypeError("Remote host is required.");if(!Number.isInteger(t)||t<=0)throw new TypeError("Remote port must be a positive integer.");const s=await this.openChannel(this.session,r.reversePortForwardChannelType,null,null,e,t,n);return new i.SshStream(s)}async connectToForwardedPort(e,t){if(!Number.isInteger(e)||e<=0)throw new TypeError("Forwarded port must be a positive integer.");const n=await this.openChannel(this.session,r.portForwardChannelType,null,null,"127.0.0.1",e,t),s=await this.forwardedPortConnecting(e,!1,new i.SshStream(n),t);if(!s)throw n.close().catch((e=>{})),new i.SshChannelError("The connection to the forwarded port was rejected by the connecting event-handler.");return s}async waitForForwardedPort(e,t){if(this.remoteForwardedPorts.find((t=>t.remotePort===e)))return;const n=new i.PromiseCompletionSource;let r,s,o;t&&(r=t.onCancellationRequested((()=>n.reject(new i.CancellationError))));try{s=this.remoteForwardedPorts.onPortAdded((t=>{t.port.remotePort===e&&n.resolve()})),o=this.session.onClosed((()=>{n.reject(new i.ObjectDisposedError("The session was closed."))})),await n.promise}finally{null==s||s.dispose(),null==o||o.dispose(),null==r||r.dispose()}}async onSessionRequest(e,t){if(!e)throw new TypeError("Request is required.");if(e.requestType!==r.portForwardRequestType&&e.requestType!==r.cancelPortForwardRequestType)throw new Error(`Unexpected request type: ${e.requestType}`);const n=e.request.convertTo(new p.PortForwardRequestMessage),s=l.IPAddressConversions.fromSshAddress(n.addressToBind);if(e.requestType===r.portForwardRequestType&&0!==n.port&&this.localForwarders.has(n.port)){const t=`PortForwardingService port ${n.port} is already forwarded.`;return this.session.trace(i.TraceLevel.Verbose,i.SshTraceEventIds.portForwardRequestInvalid,t),void(e.isAuthorized=!1)}const o=new i.SshRequestEventArgs(e.requestType,n,this.session.principal);let c;await super.onSessionRequest(o,t);let u=null;if(o.isAuthorized)if(e.requestType===r.portForwardRequestType){try{u=await this.startForwarding(s,n.port,t)}catch(e){}if(null!==u){const e=0===n.port?u:n.port,t=await this.messageFactory.createSuccessMessageAsync(e);t.port=e,c=t}}else e.requestType===r.cancelPortForwardRequestType&&await this.cancelForwarding(n.port,t)&&(c=new i.SessionRequestSuccessMessage);if(e.responsePromise=Promise.resolve(null!=c?c:new i.SessionRequestFailureMessage),c instanceof h.PortForwardSuccessMessage){const e=new a.ForwardedPort(null!=u?u:c.port,c.port,!0);this.remoteForwardedPorts.addOrUpdatePort(e)}}async startForwarding(e,t,n){if("number"!=typeof t)throw new TypeError("Remote port must be an integer.");if(this.acceptLocalConnectionsForForwardedPorts){let s=t;const i=new m.LocalPortForwarder(this,this.session,r.portForwardChannelType,e,s,void 0,0===t?void 0:t);return await i.startForwarding(n),s=i.localPort,0===t&&(t=s),this.localForwarders.has(t)?(i.dispose(),null):(this.localForwarders.set(t,i),s=i.localPort,i.onDisposed((()=>{const e=new a.ForwardedPort(s,t,!0);this.remoteForwardedPorts.removePort(e),this.localForwarders.delete(t)})),s)}return 0!==t?t:null}async cancelForwarding(e,t){const n=this.localForwarders.get(e);if(n)return this.localForwarders.delete(e),n.dispose(),!0;const r=new a.ForwardedPort(e,e,!0);return!!this.remoteForwardedPorts.removePort(r)}async onChannelOpening(e,t){var n;if(!e)throw new TypeError("Request is required.");const s=e.request.channelType;if(s!==r.portForwardChannelType&&s!==r.reversePortForwardChannelType)return void(e.failureReason=i.SshChannelOpenFailureReason.unknownChannelType);let o=null;const c=e.request instanceof u.PortForwardChannelOpenMessage?e.request:e.request.convertTo(new u.PortForwardChannelOpenMessage);if(e.isRemoteRequest)if(s===r.portForwardChannelType){const t=`${l.IPAddressConversions.fromSshAddress(c.host)}:${c.port}`;if(o=null!==(n=this.remoteConnectors.get(c.port))&&void 0!==n?n:null,!o)return this.trace(i.TraceLevel.Error,i.SshTraceEventIds.portForwardRequestInvalid,`PortForwardingService received forwarding channel for ${t} that was not requested.`),e.failureReason=i.SshChannelOpenFailureReason.connectFailed,void(e.failureDescription="Forwarding channel was not requested.")}else if(!this.acceptRemoteConnectionsForNonForwardedPorts){const t="The session has disabled connections to non-forwarded ports.";return this.session.trace(i.TraceLevel.Warning,i.SshTraceEventIds.portForwardChannelOpenFailed,t),e.failureReason=i.SshChannelOpenFailureReason.administrativelyProhibited,void(e.failureDescription=t)}const p=new i.SshChannelOpeningEventArgs(c,e.channel,e.isRemoteRequest);if(await super.onChannelOpening(p,t),e.failureReason=p.failureReason,e.failureDescription=p.failureDescription,e.openingPromise=p.openingPromise,e.failureReason===i.SshChannelOpenFailureReason.none&&e.isRemoteRequest&&this.forwardConnectionsToLocalPorts)if(o){await o.onPortChannelOpening(e,t);const n=o instanceof g.RemotePortForwarder?o.localPort:null,r=o instanceof g.RemotePortForwarder?o.remotePort:c.port,s=new a.ForwardedPort(n,r,!1);this.localForwardedPorts.addChannel(s,e.channel)}else await g.RemotePortForwarder.forwardChannel(this,e,c.host,c.port,c.port,this.trace,t),e.failureReason!==i.SshChannelOpenFailureReason.none&&await e.channel.close(t)}async openChannel(e,t,n,s,o,a,c){let l;if(t===r.portForwardChannelType&&(l=this.remoteForwardedPorts.find((e=>e.remotePort===a||null===e.remotePort&&e.localPort===a)),!l))throw new Error(`Port ${a} is not being forwarded.`);const u=await this.messageFactory.createChannelOpenMessageAsync(a);u.channelType=t,u.originatorIPAddress=null!=n?n:"",u.originatorPort=null!=s?s:0,u.host=o,u.port=a;const p=this.session.trace;let h;try{h=await e.openChannel(u,null,c),p(i.TraceLevel.Info,i.SshTraceEventIds.portForwardChannelOpened,`PortForwardingService opened ${t} channel #${h.channelId} for ${o}:${a}.`)}catch(e){if(!(e instanceof Error))throw e;throw p(i.TraceLevel.Error,i.SshTraceEventIds.portForwardChannelOpenFailed,`PortForwardingService failed to open ${t} channel for ${o}:${a}: ${e.message}`,e),e}return t===r.portForwardChannelType&&this.remoteForwardedPorts.addChannel(l,h),h}dispose(){const e=[...this.localForwarders.values(),...this.remoteConnectors.values()];this.streamForwarders.splice(0,this.streamForwarders.length),this.localForwarders.clear(),this.remoteConnectors.clear();for(const t of e)t.dispose();super.dispose()}};b.portForwardRequestType="tcpip-forward",b.cancelPortForwardRequestType="cancel-tcpip-forward",b.portForwardChannelType="forwarded-tcpip",b.reversePortForwardChannelType="direct-tcpip",b=r=s([(0,i.serviceActivation)({sessionRequest:r.portForwardRequestType}),(0,i.serviceActivation)({sessionRequest:r.cancelPortForwardRequestType}),(0,i.serviceActivation)({channelType:r.portForwardChannelType}),(0,i.serviceActivation)({channelType:r.reversePortForwardChannelType})],b),t.PortForwardingService=b},1852:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemotePortConnector=void 0;const r=n(2727),s=n(9566),i=n(8842),o=n(3738);class a extends r.SshService{constructor(e,t,n){super(e),this.forwarding=!1,this.remoteIPAddress=t,this.port=n}get remotePort(){return this.port}async request(e,t){if(this.forwarding)throw new Error("Already forwarding.");e.addressToBind=this.remoteIPAddress,e.port=this.remotePort,e.wantReply=!0;const n=await this.session.requestResponse(e,i.PortForwardSuccessMessage,r.SessionRequestFailureMessage,t);let s=!1;return n instanceof i.PortForwardSuccessMessage&&(0!==n.port&&(this.port=n.port),s=!0),this.forwarding=s,s}dispose(){if(this.forwarding){this.forwarding=!1;const e=new s.PortForwardRequestMessage;e.requestType=o.PortForwardingService.cancelPortForwardRequestType,e.addressToBind=this.remoteIPAddress,e.port=this.remotePort,e.wantReply=!1;try{this.session.request(e).catch((e=>{}))}catch(e){}}super.dispose()}}t.RemotePortConnector=a},3427:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemotePortForwarder=void 0;const r=n(1808),s=n(2727),i=n(9998),o=n(1852);class a extends o.RemotePortConnector{constructor(e,t,n,r,s,i){super(t,n,r),this.pfs=e,this.localHost=s,this.localPort=i}async onPortChannelOpening(e,t){await a.forwardChannel(this.pfs,e,this.localHost,this.localPort,this.remotePort,this.trace,t)}static async forwardChannel(e,t,n,o,a,c,l){const u=t.channel,p=await e.forwardedPortConnecting(null!=a?a:o,!0,new s.SshStream(u),l);if(!p)return void(t.failureReason=s.SshChannelOpenFailureReason.connectFailed);const h=r.createConnection({host:n,port:o,autoSelectFamily:!0,autoSelectFamilyAttemptTimeout:"localhost"===n?10:250}),d=new s.PromiseCompletionSource,f=l?l.onCancellationRequested((()=>h.destroy(new Error("Cancelled.")))):null;try{h.once("connect",(()=>{d.resolve()})),h.once("error",(e=>{d.reject(e)})),await d.promise}catch(e){if(!(e instanceof Error)||(null==l?void 0:l.isCancellationRequested))throw e;c(s.TraceLevel.Warning,s.SshTraceEventIds.portForwardConnectionFailed,`PortForwardingService connection to ${n}:${o} failed: ${e.message}`,e),t.failureReason=s.SshChannelOpenFailureReason.connectFailed,t.failureDescription=e.message}finally{null==f||f.dispose()}const m=new i.StreamForwarder(h,p,u.session.trace);c(s.TraceLevel.Info,s.SshTraceEventIds.portForwardConnectionOpened,`${u.session} PortForwardingService forwarded channel #${u.channelId} connection to ${n}:${o}.`),e.streamForwarders.push(m)}}t.RemotePortForwarder=a},8338:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemotePortStreamer=void 0;const r=n(5844),s=n(2727),i=n(1852);class o extends i.RemotePortConnector{constructor(e,t,n){super(e,t,n),this.streamOpenedEmitter=new r.Emitter,this.onStreamOpened=this.streamOpenedEmitter.event}async onPortChannelOpening(e,t){const n=new s.SshStream(e.channel);this.streamOpenedEmitter.fire(n)}}t.RemotePortStreamer=o},9998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamForwarder=void 0;const r=n(2727),s=n(1808);t.StreamForwarder=class{constructor(e,t,n){if(this.localStream=e,this.remoteStream=t,this.trace=n,this.disposed=!1,!e)throw new TypeError("Local stream is required.");if(!t)throw new TypeError("Remote stream is required.");e.pipe(t),t.pipe(e)}close(e,t){try{e&&this.localStream instanceof s.Socket?this.localStream.destroy():this.localStream.end(),this.remoteStream instanceof r.SshStream?this.remoteStream.channel.close("SIGABRT",t).catch((e=>{})):this.remoteStream.end(),this.trace(r.TraceLevel.Verbose,r.SshTraceEventIds.portForwardChannelClosed,`Stream forwarder ${e?"aborted":"closed"} connection.`)}catch(e){if(!(e instanceof Error))throw e;this.trace(r.TraceLevel.Warning,r.SshTraceEventIds.unknownError,`Stream forwarder unexpected error closing connection:  ${e.message}`)}}dispose(){this.disposed||(this.disposed=!0,this.close(!0))}}},7178:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshClient=void 0;const r=n(1808),s=n(2727);class i{constructor(e){if(this.config=e,this.sessions=[],this.trace=(e,t,n,r)=>{},!e)throw new TypeError("SshSessionConfiguration is required.")}async openSession(e,t,n){if(!e)throw new TypeError("Server host is reqiured.");const r=await this.openConnection(e,t,n),i=new s.SshClientSession(this.config);return i.trace=this.trace,await i.connect(r,n),this.sessions.push(i),i}async openConnection(e,t,n){const o=new r.Socket;return await new Promise(((r,a)=>{if(o.on("connect",r),o.on("error",a),n){if(n.isCancellationRequested)return void a(new s.CancellationError);n.onCancellationRequested(a)}o.connect(t||i.defaultServerPort,e)})),new s.NodeStream(o)}async reconnectSession(e,t,n,r){const s=await this.openConnection(t,n,r);await e.reconnect(s,r)}dispose(){for(;this.sessions.length>0;)this.sessions.shift().dispose()}}t.SshClient=i,i.defaultServerPort=22},9340:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshServer=void 0;const r=n(5844),s=n(2727),i=n(7285);t.SshServer=class{constructor(e){if(this.config=e,this.sessions=[],this.trace=(e,t,n,r)=>{},this.errorEmitter=new r.Emitter,this.onError=this.errorEmitter.event,this.sessionOpenedEmitter=new r.Emitter,this.onSessionOpened=this.sessionOpenedEmitter.event,this.credentials={publicKeys:[]},this.tcpListenerFactory=new i.DefaultTcpListenerFactory,!e)throw new TypeError("SshSessionConfiguration is required.");e.protocolExtensions.includes(s.SshProtocolExtensionNames.sessionReconnect)&&(this.reconnectableSessions=[])}async acceptSessions(e,t){t||(t="0.0.0.0");const n="0.0.0.0"===t?"port ":t+":";try{this.tcpListener=await this.tcpListenerFactory.createTcpListener(t,e,!1)}catch(t){if(!(t instanceof Error))throw t;throw this.trace(s.TraceLevel.Error,s.SshTraceEventIds.serverListenFailed,`SshServer failed to listen on ${n}${e}: ${t.message}`,t),t}this.tcpListener.addListener("connection",this.acceptSession.bind(this)),this.trace(s.TraceLevel.Info,s.SshTraceEventIds.serverListening,`SshServer listening on ${n}${e}.`)}async acceptConnection(e){return e.setNoDelay(!0),new s.NodeStream(e)}async acceptSession(e){this.trace(s.TraceLevel.Info,s.SshTraceEventIds.serverClientConnected,"SshServer client connected.");const t=await this.acceptConnection(e),n=new s.SshServerSession(this.config,this.reconnectableSessions);n.trace=this.trace,n.credentials=this.credentials,this.sessions.push(n),n.onClosed((e=>{const t=this.sessions.indexOf(n);t>=0&&this.sessions.splice(t,1)})),this.sessionOpenedEmitter.fire(n);try{await n.connect(t)}catch(e){if(!(e instanceof Error))throw e;e instanceof s.SshConnectionError?await n.close(e.reason||s.SshDisconnectReason.connectionLost,e.message,e):await n.close(s.SshDisconnectReason.protocolError,e.message,e),this.errorEmitter.fire(e)}}dispose(){var e;null===(e=this.tcpListener)||void 0===e||e.close()}}},7285:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTcpListenerFactory=void 0;const r=n(1808);t.DefaultTcpListenerFactory=class{async createTcpListener(e,t,n,s){if(!e)throw new TypeError("Local IP address is required.");if(!Number.isInteger(t)||t<0)throw new TypeError("Local port must be a non-negative integer.");const i=r.createServer();return await new Promise(((n,s)=>{i.listen({host:e,port:t,ipv6Only:r.isIPv6(e),exclusive:!1}),i.on("listening",n),i.on("error",s)})),i}}},3926:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.curves=void 0,t.curves=[{shortName:"P-256",name:"nistp256",oid:"1.2.840.10045.3.1.7",keySize:256},{shortName:"P-384",name:"nistp384",oid:"1.3.132.0.34",keySize:384},{shortName:"P-521",name:"nistp521",oid:"1.3.132.0.35",keySize:521}]},3687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionAlgorithm=void 0,t.EncryptionAlgorithm=class{constructor(e){this.name=e}}},4953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HmacAlgorithm=void 0,t.HmacAlgorithm=class{constructor(e,t,n,r){this.name=e,this.algorithmName=t,this.keyLength=n,this.digestLength=r}}},1263:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyExchangeAlgorithm=void 0,t.KeyExchangeAlgorithm=class{constructor(e,t,n,r){this.name=e,this.keySizeInBits=t,this.hashAlgorithmName=n,this.hashDigestLength=r}}},2185:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sec1KeyFormatter=t.Pkcs1KeyFormatter=t.parsePem=t.formatPem=void 0;const r=n(3380),s=n(4918),i=n(3926);t.formatPem=function(e,t){return`-----BEGIN ${t}-----\n`+e.toString("base64").match(/.{1,64}/g).join("\n")+"\n"+`-----END ${t}-----\n`},t.parsePem=function(e){const t=e.replace(/-+[^-\n]+KEY-+/g,"").replace(/\s/g,"");return Buffer.from(t,"base64")},t.Pkcs1KeyFormatter=class{static formatRsaPublic(e){const t=new s.DerWriter(Buffer.alloc(1024));return t.writeInteger(e.modulus),t.writeInteger(e.exponent),t.toBuffer()}static formatRsaPrivate(e){if(!(e.d&&e.p&&e.q&&e.dp&&e.dq&&e.qi))throw new Error("Missing private key parameters.");const t=new s.DerWriter(Buffer.alloc(2048));return t.writeInteger(r.BigInt.fromInt32(0)),t.writeInteger(e.modulus),t.writeInteger(e.exponent),t.writeInteger(e.d),t.writeInteger(e.p),t.writeInteger(e.q),t.writeInteger(e.dp),t.writeInteger(e.dq),t.writeInteger(e.qi),t.toBuffer()}static parseRsaPublic(e){const t=new s.DerReader(e);return{modulus:t.readInteger(),exponent:t.readInteger()}}static parseRsaPrivate(e){const t=new s.DerReader(e);return t.readInteger(),{modulus:t.readInteger(),exponent:t.readInteger(),d:t.readInteger(),p:t.readInteger(),q:t.readInteger(),dp:t.readInteger(),dq:t.readInteger(),qi:t.readInteger()}}};class o{static formatECPublic(e){const t=i.curves.find((t=>t.oid===e.curve.oid)),n=Math.ceil(t.keySize/8),r=new s.DerWriter(Buffer.alloc(512)),a=new s.DerWriter(Buffer.alloc(100));a.writeObjectIdentifier(o.ecPublicKeyOid),a.writeObjectIdentifier(e.curve.oid),r.writeSequence(a);const c=e.x.toBytes({unsigned:!0,length:n}),l=e.y.toBytes({unsigned:!0,length:n}),u=Buffer.alloc(1+c.length+l.length);return u[0]=4,c.copy(u,1),l.copy(u,1+c.length),r.writeBitString(u),r.toBuffer()}static formatECPrivate(e){const t=i.curves.find((t=>t.oid===e.curve.oid)),n=Math.ceil(t.keySize/8),o=new s.DerWriter(Buffer.alloc(512));o.writeInteger(r.BigInt.fromInt32(1)),o.writeOctetString(e.d.toBytes({unsigned:!0,length:n}));const a=new s.DerWriter(Buffer.alloc(100));a.writeObjectIdentifier(e.curve.oid),o.writeTagged(0,a);const c=e.x.toBytes({unsigned:!0,length:n}),l=e.y.toBytes({unsigned:!0,length:n}),u=Buffer.alloc(1+c.length+l.length);u[0]=4,c.copy(u,1),l.copy(u,1+c.length);const p=new s.DerWriter(Buffer.alloc(512));return p.writeBitString(u),o.writeTagged(1,p),o.toBuffer()}static parseECPublic(e){var t;const n=new s.DerReader(e),a=n.readSequence(),c=a.readObjectIdentifier();if(c!==o.ecPublicKeyOid)throw new Error(`Unexpected key type OID: ${c}`);const l=a.readObjectIdentifier(),u=null===(t=i.curves.find((e=>e.oid===l)))||void 0===t?void 0:t.name,p=n.readBitString();if(p.length%2!=1)throw new Error(`Unexpected key data length: ${p.length}`);const h=r.BigInt.fromBytes(p.slice(1,1+(p.length-1)/2),{unsigned:!0}),d=r.BigInt.fromBytes(p.slice(1+(p.length-1)/2),{unsigned:!0});return{curve:{name:u,oid:l},x:h,y:d}}static parseECPrivate(e){var t;const n=new s.DerReader(e),o=n.readInteger().toInt32();if(1!==o)throw new Error(`Unsupported SEC1 format version: ${o}`);const a=r.BigInt.fromBytes(n.readOctetString(),{unsigned:!0}),c=n.tryReadTagged(0);if(!c)throw new Error("SEC1 curve info not found.");const l=c.readObjectIdentifier(),u=null===(t=i.curves.find((e=>e.oid===l)))||void 0===t?void 0:t.name,p=n.tryReadTagged(1);if(!p)throw new Error("SEC1 public key data not found.");const h=p.readBitString();if(h.length%2!=1)throw new Error(`Unexpected key data length: ${h.length}`);const d=r.BigInt.fromBytes(h.slice(1,1+(h.length-1)/2),{unsigned:!0}),f=r.BigInt.fromBytes(h.slice(1+(h.length-1)/2),{unsigned:!0});return{curve:{name:u,oid:l},x:d,y:f,d:a}}}t.Sec1KeyFormatter=o,o.ecPublicKeyOid="1.2.840.10045.2.1"},1579:(e,t,n)=>{"use strict";t.b=void 0;const r=n(6113),s=n(4300),i=n(7103),o=n(3926),a=n(3380),c=n(4918),l=n(7309),u=n(2185),p=process.versions.node.split(".").map((e=>parseInt(e,10))),h=p[0]>10||10===p[0]&&p[1]>=12,d=p[0]>11||11===p[0]&&p[1]>=6;class f{constructor(e){this.comment=null,e&&(this.algorithmName=e)}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return this.algorithmName}get algorithmName(){return this.algorithm}set algorithmName(e){const t=e.split("-")[2];if(this.curve=o.curves.find((e=>e.name===t)),!this.curve)throw new Error("Invalid or unsupported ECDSA algorithm: "+e);this.algorithm=e}generate(){return h&&d?this.generateNodeKeyPairObjects():h?this.generateNodeKeyPairBuffers():this.generateExternalKeyPair()}async generateNodeKeyPairObjects(){[this.publicKey,this.privateKey]=await new Promise(((e,t)=>{const n={namedCurve:this.curve.shortName};try{r.generateKeyPair("ec",n,((n,r,s)=>{n?t(n):e([r,s])}))}catch(e){t(e)}}))}async generateNodeKeyPairBuffers(){[this.publicKey,this.privateKey]=await new Promise(((e,t)=>{const n={namedCurve:this.curve.shortName,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"sec1",format:"pem",cipher:void 0,passphrase:void 0}};try{r.generateKeyPair("ec",n,((n,r,s)=>{n?t(n):e([r,s])}))}catch(e){t(e)}}))}async generateExternalKeyPair(){throw new Error("This version of node does not support generating key pairs. Use node >= 10.12.")}async setPublicKeyBytes(e,t){if(!e)throw new TypeError("Buffer is required.");const n=new l.SshDataReader(e),s=n.readString("ascii");this.algorithmName=t||s;const i=n.readString("ascii");this.algorithmName=`ecdsa-sha2-${i}`;const o=n.readBinary(),c=a.BigInt.fromBytes(o.slice(1,1+(o.length-1)/2),{unsigned:!0}),p=a.BigInt.fromBytes(o.slice(1+(o.length-1)/2),{unsigned:!0}),h=u.Sec1KeyFormatter.formatECPublic({curve:{name:this.curve.name,oid:this.curve.oid},x:c,y:p});this.publicKey=d?r.createPublicKey({key:h,type:"spki",format:"der"}):(0,u.formatPem)(h,"PUBLIC KEY")}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;t="string"==typeof this.publicKey?(0,u.parsePem)(this.publicKey):this.publicKey.export({type:"spki",format:"der"});const n=u.Sec1KeyFormatter.parseECPublic(t);e=e||this.algorithmName||this.keyAlgorithmName;const r=new l.SshDataWriter(s.Buffer.alloc(512));r.writeString(e,"ascii"),r.writeString(this.curve.name,"ascii");const i=Math.ceil(this.curve.keySize/8),o=n.x.toBytes({unsigned:!0,length:i}),a=n.y.toBytes({unsigned:!0,length:i});return r.writeUInt32(1+o.length+a.length),r.writeByte(4),r.write(o),r.write(a),r.toBuffer()}async importParameters(e){if(!e.curve)throw new TypeError("A curve is required.");let t;if(e.curve.oid){if(t=o.curves.find((t=>t.oid===e.curve.oid)),!t)throw new Error(`Unsupported curve OID: ${e.curve.oid}`)}else{if(!e.curve.name)throw new TypeError("A curve OID or name is required.");if(t=o.curves.find((t=>t.name===e.curve.name)),!t)throw new Error(`Unsupported curve: ${e.curve.name}`)}this.algorithmName="ecdsa-sha2-"+t.name;const n=u.Sec1KeyFormatter.formatECPublic(e);if(this.publicKey=d?r.createPublicKey({key:n,type:"spki",format:"der"}):(0,u.formatPem)(n,"EC PUBLIC KEY"),e.d){const t=u.Sec1KeyFormatter.formatECPrivate(e);this.privateKey=d?r.createPrivateKey({key:t,type:"sec1",format:"der"}):(0,u.formatPem)(t,"EC PRIVATE KEY")}else this.privateKey=void 0}async exportParameters(){var e,t;if(!this.publicKey)throw new Error("Key is not present.");let n;return n="string"==typeof this.publicKey?(0,u.parsePem)(null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey):(null!==(t=this.privateKey)&&void 0!==t?t:this.publicKey).export({type:this.privateKey?"sec1":"spki",format:"der"}),this.privateKey?u.Sec1KeyFormatter.parseECPrivate(n):u.Sec1KeyFormatter.parseECPublic(n)}dispose(){}}class m extends i.PublicKeyAlgorithm{constructor(e,t){super(e,e,t)}createKeyPair(){return new f(this.name)}async generateKeyPair(){const e=new f(this.name);return await e.generate(),e}createSigner(e){if(!(e instanceof f))throw new TypeError("ECDSA key pair object expected.");return new g(e,m.convertHashAlgorithmName(this.hashAlgorithmName))}createVerifier(e){if(!(e instanceof f))throw new TypeError("ECDSA key pair object expected.");return new g(e,m.convertHashAlgorithmName(this.hashAlgorithmName))}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA")}static getSignatureLength(e){return 2*(5+Math.ceil(e/8))}}t.b=m,m.ecdsaSha2Nistp256="ecdsa-sha2-nistp256",m.ecdsaSha2Nistp384="ecdsa-sha2-nistp384",m.ecdsaSha2Nistp521="ecdsa-sha2-nistp521",m.curves=o.curves,m.KeyPair=f;class g{constructor(e,t){this.keyPair=e,this.hashAlgorithmName=t}get digestLength(){const e=this.keyPair.curve;return e?m.getSignatureLength(e.keySize):0}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");const t=r.createSign(this.hashAlgorithmName);t.update(e);let n=t.sign(this.keyPair.privateKey);const i=new c.DerReader(n),o=i.readInteger(),a=i.readInteger(),u=Math.ceil(this.keyPair.curve.keySize/8),p=new l.SshDataWriter(s.Buffer.alloc(this.digestLength));return p.writeBinary(o.toBytes({unsigned:!0,length:u+1})),p.writeBinary(a.toBytes({unsigned:!0,length:u+1})),n=p.toBuffer(),n}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");const n=new l.SshDataReader(t),i=n.readBigInt(),o=n.readBigInt(),a=new c.DerWriter(s.Buffer.alloc(t.length));a.writeInteger(i),a.writeInteger(o),t=a.toBuffer();const u=r.createVerify(this.hashAlgorithmName);return u.update(e),u.verify(this.keyPair.publicKey,t)}dispose(){}}},5361:(e,t,n)=>{"use strict";t.r=void 0;const r=n(6113),s=n(4300),i=n(3687);class o extends i.EncryptionAlgorithm{constructor(e,t,n,r){if(super(e),this.algorithmName=t,this.cipherMode=n,this.keySizeInBits=r,"AES"!==t)throw new Error(`Unsupported encryption algorithm: ${t}`);this.blockSizeInBits=o.getBlockSize(t)}get keyLength(){return this.keySizeInBits/8}get blockLength(){return this.blockSizeInBits/8}async createCipher(e,t,n){let r;if("CTR"===this.cipherMode||"CBC"===this.cipherMode)r=new a(e,this.keySizeInBits,this.blockSizeInBits,t,n,this.cipherMode);else{if("GCM"!==this.cipherMode)throw new Error(`Unsupported cipher mode: ${this.cipherMode}`);r=new c(e,this.keySizeInBits,this.blockSizeInBits,t,n)}return r}static getBlockSize(e){if("AES"===e)return 128;throw new Error(`Unsupported encryption algorithm: ${e}`)}}t.r=o;class a{constructor(e,t,n,s,i,o){this.isEncryption=e,this.keySizeInBits=t,this.blockSizeInBits=n;const a=`AES-${this.keySizeInBits}-${o}`;this.cipher=this.isEncryption?r.createCipheriv(a,s,i):r.createDecipheriv(a,s,i),this.cipher.setAutoPadding(!1)}get blockLength(){return this.blockSizeInBits/8}transform(e){const t=this.cipher.update(e);if(t.length!==e.length){const n=`Result from encrypt/decrypt has invalid length ${t.length}, expected ${e.length}.`;throw new Error(n)}return Promise.resolve(t)}dispose(){}}class c{constructor(e,t,n,r,i){this.isEncryption=e,this.keySizeInBits=t,this.blockSizeInBits=n,this.tag=null,this.algorithmName=`aes-${this.keySizeInBits}-gcm`,this.key=s.Buffer.alloc(r.length),r.copy(this.key),this.nonce=s.Buffer.alloc(12),i.copy(this.nonce,0,0,12),this.associatedData=s.Buffer.alloc(4)}get blockLength(){return this.blockSizeInBits/8}get digestLength(){return 16}get authenticatedEncryption(){return!0}transform(e){if(e.length%this.blockLength!=0){const t=`Encrypt/decrypt input has invalid length ${e.length}, not a multiple of block size ${this.blockLength}.`;throw new Error(t)}const t=this.isEncryption?r.createCipheriv(this.algorithmName,this.key,this.nonce):r.createDecipheriv(this.algorithmName,this.key,this.nonce),n=e.length;if(this.associatedData[0]=n>>>24,this.associatedData[1]=n>>>16,this.associatedData[2]=n>>>8,this.associatedData[3]=n,t.setAAD(this.associatedData),!this.isEncryption){if(!this.tag)throw new Error("AES-GCM tag was not set before decrypting.");t.setAuthTag(this.tag)}const s=t.update(e);if(s.length!==e.length){const t=`Result from encrypt/decrypt has invalid length ${s.length}, expected ${e.length}.`;throw new Error(t)}t.final(),this.isEncryption?this.tag=t.getAuthTag():this.tag=null;let i=12;for(;--i>=4&&(this.nonce[i]++,0===this.nonce[i]););return Promise.resolve(s)}async sign(e){if(!this.tag)throw new Error("AES-GCM tag was not obtained by encrypting.");return this.tag}async verify(e,t){if(t.length!==this.digestLength)throw new Error("Incorrect AES-GCM tag length.");return this.tag=t,!0}dispose(){}}},9582:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHmac=void 0;const r=n(6113),s=n(4300),i=n(4953);class o extends i.HmacAlgorithm{constructor(e,t,n=!1){super(e,t,o.getHashKeyLength(t),o.getHashDigestLength(t)),this.encryptThenMac=n}async createSigner(e){return new a(o.getNodeHashAlgorithmName(this.algorithmName),this.digestLength,this.encryptThenMac,e)}async createVerifier(e){return new a(o.getNodeHashAlgorithmName(this.algorithmName),this.digestLength,this.encryptThenMac,e)}static getHashKeyLength(e){if("SHA2-512"===e)return 64;if("SHA2-384"===e)return 48;if("SHA2-256"===e)return 32;throw new Error(`Unsupported hash algorithm: ${e}`)}static getHashDigestLength(e){return this.getHashKeyLength(e)}static getNodeHashAlgorithmName(e){if("SHA2-512"===e)return"sha512";if("SHA2-384"===e)return"sha384";if("SHA2-256"===e)return"sha256";throw new Error(`Unsupported hash algorithm: ${e}`)}}t.NodeHmac=o;class a{constructor(e,t,n,i){this.algorithmName=e,this.digestLength=t,this.encryptThenMac=n,this.key=r.createSecretKey?r.createSecretKey(i):s.Buffer.from(i)}async sign(e){const t=r.createHmac(this.algorithmName,this.key);return t.update(e),t.digest()}async verify(e,t){const n=r.createHmac(this.algorithmName,this.key);return n.update(e),n.digest().equals(t)}dispose(){}}},1820:(e,t,n)=>{"use strict";t.th=t.yk=void 0;const r=n(6113),s=n(4300),i=n(1263),o=n(9582),a=n(3380);class c extends i.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.NodeHmac.getHashDigestLength(n))}createKeyExchange(){return new l(this.keySizeInBits,o.NodeHmac.getNodeHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.yk=c;class l{constructor(e,t,n){switch(this.hashAlgorithmName=t,this.digestLength=n,e){case 1024:this.dh=r.getDiffieHellman("modp2");break;case 2048:this.dh=r.getDiffieHellman("modp14");break;case 4096:this.dh=r.getDiffieHellman("modp16");break;default:throw new Error("Invalid DH bit length.")}}startKeyExchange(){const e=this.dh.generateKeys(),t=a.BigInt.fromBytes(e,{unsigned:!0}).toBytes();return Promise.resolve(t)}decryptKeyExchange(e){const t=this.dh.computeSecret(e),n=a.BigInt.fromBytes(t,{unsigned:!0}).toBytes();return Promise.resolve(n)}async sign(e){const t=r.createHash(this.hashAlgorithmName);return t.update(e),s.Buffer.from(t.digest())}dispose(){}}class u extends i.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.NodeHmac.getHashDigestLength(n))}createKeyExchange(){return new p(this.keySizeInBits,o.NodeHmac.getNodeHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.th=u;class p{constructor(e,t,n){switch(this.hashAlgorithmName=t,this.digestLength=n,e){case 256:this.ecdh=r.createECDH("prime256v1");break;case 384:this.ecdh=r.createECDH("secp384r1");break;case 521:this.ecdh=r.createECDH("secp521r1");break;default:throw new Error("Invalid ECDH bit length.")}}startKeyExchange(){const e=this.ecdh.generateKeys();return Promise.resolve(e)}decryptKeyExchange(e){const t=this.ecdh.computeSecret(e),n=a.BigInt.fromBytes(t,{unsigned:!0}).toBytes();return Promise.resolve(n)}async sign(e){const t=r.createHash(this.hashAlgorithmName);return t.update(e),s.Buffer.from(t.digest())}dispose(){}}},5670:(e,t,n)=>{"use strict";t.e=void 0;const r=n(6113);t.e=class{getBytes(e){r.randomBytes(e.length).copy(e)}}},4245:(e,t,n)=>{"use strict";t.G=void 0;const r=n(6113),s=n(4300),i=n(7103),o=n(7309),a=n(9582),c=n(2185),l=process.versions.node.split(".").map((e=>parseInt(e,10))),u=l[0]>10||10===l[0]&&l[1]>=12,p=l[0]>11||11===l[0]&&l[1]>=6;class h{constructor(){this.comment=null}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return d.keyAlgorithmName}generate(e){return e=null!=e?e:h.defaultKeySize,u&&p?this.generateNodeKeyPairObjects(e):u?this.generateNodeKeyPairBuffers(e):this.generateExternalKeyPair(e)}async generateNodeKeyPairObjects(e){[this.publicKey,this.privateKey]=await new Promise(((t,n)=>{const s={modulusLength:e};try{r.generateKeyPair("rsa",s,((e,r,s)=>{e?n(e):t([r,s])}))}catch(e){n(e)}}))}async generateNodeKeyPairBuffers(e){[this.publicKey,this.privateKey]=await new Promise(((t,n)=>{const s={modulusLength:e,publicKeyEncoding:{type:"pkcs1",format:"pem"},privateKeyEncoding:{type:"pkcs1",format:"pem",cipher:void 0,passphrase:void 0}};try{r.generateKeyPair("rsa",s,((e,r,s)=>{e?n(e):t([r,s])}))}catch(e){n(e)}}))}async generateExternalKeyPair(e){const t=new(await Promise.resolve().then((()=>n(4024))))({b:e});this.publicKey=t.exportKey("pkcs1-public-pem"),this.privateKey=t.exportKey("pkcs1-private-pem"),this.publicKey.endsWith("\n")||(this.publicKey+="\n"),this.privateKey.endsWith("\n")||(this.privateKey+="\n")}async setPublicKeyBytes(e){if(!e)throw new TypeError("Buffer is required.");const t=new o.SshDataReader(e),n=t.readString("ascii");if(n!==this.keyAlgorithmName&&n!==d.rsaWithSha256&&n!==d.rsaWithSha512)throw new Error(`Invalid RSA key algorithm: ${n}`);const s=t.readBigInt(),i=t.readBigInt();e=c.Pkcs1KeyFormatter.formatRsaPublic({modulus:i,exponent:s}),this.publicKey=p?r.createPublicKey({key:e,type:"pkcs1",format:"der"}):(0,c.formatPem)(e,"RSA PUBLIC KEY")}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;e||(e=this.keyAlgorithmName),t="string"==typeof this.publicKey?(0,c.parsePem)(this.publicKey):this.publicKey.export({type:"pkcs1",format:"der"});const n=c.Pkcs1KeyFormatter.parseRsaPublic(t),r=s.Buffer.alloc(512),i=new o.SshDataWriter(r);return i.writeString(e,"ascii"),i.writeBigInt(n.exponent),i.writeBigInt(n.modulus),t=i.toBuffer(),t}async importParameters(e){if(p)this.publicKey=r.createPublicKey({key:c.Pkcs1KeyFormatter.formatRsaPublic(e),format:"der",type:"pkcs1"}),e.d?this.privateKey=r.createPrivateKey({key:c.Pkcs1KeyFormatter.formatRsaPrivate(e),format:"der",type:"pkcs1"}):this.privateKey=void 0;else{const t=c.Pkcs1KeyFormatter.formatRsaPublic(e);if(this.publicKey=(0,c.formatPem)(t,"RSA PUBLIC KEY"),e.d){const t=c.Pkcs1KeyFormatter.formatRsaPrivate(e);this.privateKey=(0,c.formatPem)(t,"RSA PRIVATE KEY")}}}async exportParameters(){var e,t;if(!this.publicKey)throw new Error("Public key not set.");let n;return n=p?(null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey).export({format:"der",type:"pkcs1"}):(0,c.parsePem)(null!==(t=this.privateKey)&&void 0!==t?t:this.publicKey),this.privateKey?c.Pkcs1KeyFormatter.parseRsaPrivate(n):c.Pkcs1KeyFormatter.parseRsaPublic(n)}dispose(){this.publicKey=void 0,this.privateKey=void 0}}h.defaultKeySize=2048;class d extends i.PublicKeyAlgorithm{constructor(e,t){super(e,d.keyAlgorithmName,t)}createKeyPair(){return new h}async generateKeyPair(e){const t=new h;return await t.generate(e),t}createSigner(e){if(!(e instanceof h))throw new TypeError("RSA key pair object expected.");return new f(e,d.convertHashAlgorithmName(this.hashAlgorithmName),a.NodeHmac.getHashDigestLength(this.hashAlgorithmName))}createVerifier(e){if(!(e instanceof h))throw new TypeError("RSA key pair object expected.");return new f(e,d.convertHashAlgorithmName(this.hashAlgorithmName),a.NodeHmac.getHashDigestLength(this.hashAlgorithmName))}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA")}}t.G=d,d.keyAlgorithmName="ssh-rsa",d.rsaWithSha256="rsa-sha2-256",d.rsaWithSha512="rsa-sha2-512",d.KeyPair=h;class f{constructor(e,t,n){this.keyPair=e,this.hashAlgorithmName=t,this.digestLength=n}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");const t=r.createSign(this.hashAlgorithmName);return t.update(e),t.sign(this.keyPair.privateKey)}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");const n=r.createVerify(this.hashAlgorithmName);return n.update(e),n.verify(this.keyPair.publicKey,t)}dispose(){}}},7103:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKeyAlgorithm=void 0;const r=n(4300),s=n(7309);t.PublicKeyAlgorithm=class{constructor(e,t,n){this.name=e,this.keyAlgorithmName=t,this.hashAlgorithmName=n}readSignatureData(e){const t=new s.SshDataReader(e),n=t.readString("ascii");if(n!==this.name)throw new Error(`Mismatched public key algorithm: got '${n}', expected '${this.name}'.`);return t.readBinary()}createSignatureData(e){const t=new s.SshDataWriter(r.Buffer.alloc(this.name.length+e.length+20));return t.writeString(this.name,"ascii"),t.writeBinary(e),t.toBuffer()}}},7521:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.algorithmNames=t.SshAlgorithms=t.Encryption=t.ECDsa=t.Rsa=t.HmacAlgorithm=t.EncryptionAlgorithm=t.PublicKeyAlgorithm=t.KeyExchangeAlgorithm=void 0;const r=n(1263);Object.defineProperty(t,"KeyExchangeAlgorithm",{enumerable:!0,get:function(){return r.KeyExchangeAlgorithm}});const s=n(7103);Object.defineProperty(t,"PublicKeyAlgorithm",{enumerable:!0,get:function(){return s.PublicKeyAlgorithm}});const i=n(3687);Object.defineProperty(t,"EncryptionAlgorithm",{enumerable:!0,get:function(){return i.EncryptionAlgorithm}});const o=n(4953);Object.defineProperty(t,"HmacAlgorithm",{enumerable:!0,get:function(){return o.HmacAlgorithm}});const a="object"==typeof self&&!("object"!=typeof crypto||!crypto.subtle),c=n(9297),l=n(787),u=n(6205),p=n(8159),h=n(3175),d=n(8682),f=a?c.WebDiffieHellman:n(1820).yk,m=a?c.WebECDiffieHellman:n(1820).th,g=a?l.WebRsa:n(4245).G;t.Rsa=g;const v=a?u.WebECDsa:n(1579).b;t.ECDsa=v;const y=a?p.WebEncryption:n(5361).r;t.Encryption=y;const b=a?h.WebHmac:n(9582).NodeHmac,w=a?d.WebRandom:n(5670).e;class S{}t.SshAlgorithms=S,S.keyExchange={none:null,dhGroup14Sha256:new f("diffie-hellman-group14-sha256",2048,"SHA2-256"),dhGroup16Sha512:new f("diffie-hellman-group16-sha512",4096,"SHA2-512"),ecdhNistp256Sha256:new m("ecdh-sha2-nistp256",256,"SHA2-256"),ecdhNistp384Sha384:new m("ecdh-sha2-nistp384",384,"SHA2-384"),ecdhNistp521Sha512:new m("ecdh-sha2-nistp521",521,"SHA2-512")},S.publicKey={none:null,rsaWithSha256:new g("rsa-sha2-256","SHA2-256"),rsaWithSha512:new g("rsa-sha2-512","SHA2-512"),ecdsaSha2Nistp256:new v("ecdsa-sha2-nistp256","SHA2-256"),ecdsaSha2Nistp384:new v("ecdsa-sha2-nistp384","SHA2-384"),ecdsaSha2Nistp521:new v("ecdsa-sha2-nistp521","SHA2-512")},S.encryption={none:null,aes256Ctr:new y("aes256-ctr","AES","CTR",256),aes256Gcm:new y("aes256-gcm@openssh.com","AES","GCM",256)},S.hmac={none:null,hmacSha256:new b("hmac-sha2-256","SHA2-256"),hmacSha512:new b("hmac-sha2-512","SHA2-512"),hmacSha256Etm:new b("hmac-sha2-256-etm@openssh.com","SHA2-256",!0),hmacSha512Etm:new b("hmac-sha2-512-etm@openssh.com","SHA2-512",!0)},S.compression={none:null},S.random=new w,t.algorithmNames=function(e){return e.map((e=>e?e.name:"none"))}},5440:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonWebKeyFormatter=void 0;const r=n(3380),s=n(3926);class i{static formatRsa(e,t){const n=i.formatBigInt;let r;if(!1!==t&&e.d&&e.p&&e.q&&e.dp&&e.dq&&e.qi)r={kty:"RSA",n:n(e.modulus),e:n(e.exponent),d:n(e.d),p:n(e.p),q:n(e.q),dp:n(e.dp),dq:n(e.dq),qi:n(e.qi)};else{if(t)throw new Error("Missing private key parameters.");r={kty:"RSA",n:n(e.modulus),e:n(e.exponent)}}return r}static parseRsa(e,t){if("RSA"!==(null==e?void 0:e.kty)||!e.n||!e.e)throw new Error("Invalid RSA JWK.");const n=i.parseBigInt;let r;return r=!1!==t&&e.d&&e.p&&e.q&&e.dp&&e.dq&&e.qi?{modulus:n(e.n),exponent:n(e.e),d:n(e.d),p:n(e.p),q:n(e.q),dp:n(e.dp),dq:n(e.dq),qi:n(e.qi)}:{modulus:n(e.n),exponent:n(e.e)},r}static formatEC(e,t){const n=i.formatBigInt,r=s.curves.find((t=>t.oid===e.curve.oid||t.name===e.curve.name||t.shortName===e.curve.name)),o=Math.ceil(r.keySize/8),a={kty:"EC",crv:e.curve.name,x:n(e.x,o),y:n(e.y,o)};if(!1!==t&&e.d)a.d=n(e.d,o);else if(t)throw new Error("Missing private key parameters.");return a}static parseEC(e,t){if("EC"!==(null==e?void 0:e.kty)||!(e.crv&&e.x&&e.y))throw new Error("Invalid EC JWK.");const n=i.parseBigInt,r={curve:{name:e.crv},x:n(e.x),y:n(e.y)};return!1!==t&&e.d&&(r.d=n(e.d)),r}static formatBigInt(e,t){return i.base64UrlEncode(e.toBytes({unsigned:!0,length:t}))}static parseBigInt(e){return r.BigInt.fromBytes(Buffer.from(e,"base64"),{unsigned:!0})}static base64UrlEncode(e){return e.toString("base64").replace(/=+$/g,"").replace(/\+/g,"-").replace(/\//g,"_")}}t.JsonWebKeyFormatter=i},6205:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebECDsa=void 0;const r=n(4300),s=n(7103),i=n(7309),o=n(3926),a=n(3380),c=n(5440);class l{constructor(e){this.comment=null,e&&(this.algorithmName=e)}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return this.algorithmName}get algorithmName(){return this.algorithm}set algorithmName(e){const t=e.split("-")[2];if(this.curve=o.curves.find((e=>e.name===t)),!this.curve)throw new Error("Invalid or unsupported ECDSA algorithm: "+e);this.algorithm=e}async generate(){try{const e={name:"ECDSA",namedCurve:this.curve.shortName},t=await crypto.subtle.generateKey(e,!0,["sign","verify"]);this.publicKey=t.publicKey,this.privateKey=t.privateKey}catch(e){throw new Error("Failed to generate RSA key pair: "+e)}}async setPublicKeyBytes(e,t){if(!e)throw new TypeError("Buffer is required.");const n=new i.SshDataReader(e),r=n.readString("ascii");if(this.algorithmName=t||r,n.readString("ascii")!==this.curve.name)throw new Error("EC curve name does not match.");const s=n.readBinary(),o=Math.ceil(this.curve.keySize/8),l=a.BigInt.fromBytes(s.slice(1,1+o),{unsigned:!0}),u=a.BigInt.fromBytes(s.slice(1+o,s.length),{unsigned:!0}),p=c.JsonWebKeyFormatter.formatEC({curve:{name:this.curve.shortName,oid:this.curve.oid},x:l,y:u});try{const e={name:"ECDSA",namedCurve:this.curve.shortName};this.publicKey=await crypto.subtle.importKey("jwk",p,e,!0,["verify"])}catch(e){throw new Error("Failed to import EC public key: "+e)}}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;try{t=await crypto.subtle.exportKey("jwk",this.publicKey)}catch(e){throw new Error("Failed to export ECDSA public key: "+e)}const n=r.Buffer.from(t.x,"base64"),s=r.Buffer.from(t.y,"base64"),o=Math.ceil(this.curve.keySize/8);if(n.length!==o||s.length!==o)throw new Error("Unexpected key length.");e=e||this.algorithmName||this.keyAlgorithmName;const a=r.Buffer.alloc(e.length+n.length+s.length+10),c=new i.SshDataWriter(a);return c.writeString(e,"ascii"),c.writeString(this.curve.name,"ascii"),c.writeUInt32(1+n.length+s.length),c.writeByte(4),c.write(n),c.write(s),c.toBuffer()}async importParameters(e){if(!e.curve)throw new TypeError("A curve is required.");let t;if(e.curve.oid){if(t=o.curves.find((t=>t.oid===e.curve.oid)),!t)throw new Error(`Unsupported curve OID: ${e.curve.oid}`)}else{if(!e.curve.name)throw new TypeError("A curve OID or name is required.");if(t=o.curves.find((t=>t.name===e.curve.name)),!t)throw new Error(`Unsupported curve: ${e.curve.name}`)}this.algorithmName="ecdsa-sha2-"+t.name;const n={name:"ECDSA",namedCurve:this.curve.shortName},r=c.JsonWebKeyFormatter.formatEC(e);r.crv=this.curve.shortName;try{r.d?(this.privateKey=await crypto.subtle.importKey("jwk",r,n,!0,["sign"]),r.d=void 0):this.privateKey=void 0,this.publicKey=await crypto.subtle.importKey("jwk",r,n,!0,["verify"])}catch(e){throw new Error("Failed to import ECDSA key pair: "+e)}}async exportParameters(){var e;const t=null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey;if(!t)throw new Error("Key not present.");let n;try{n=await crypto.subtle.exportKey("jwk",t)}catch(e){throw new Error("Failed to export ECDSA key pair: "+e)}const r=c.JsonWebKeyFormatter.parseEC(n);return r.curve={name:this.curve.name,oid:this.curve.oid},r}dispose(){}}class u extends s.PublicKeyAlgorithm{constructor(e,t){super(e,e,t)}createKeyPair(){return new l(this.name)}async generateKeyPair(){const e=new l(this.name);return await e.generate(),e}createSigner(e){if(!(e instanceof l))throw new TypeError("ECDSA key pair object expected.");const t=u.convertHashAlgorithmName(this.hashAlgorithmName);return new p(e,t)}createVerifier(e){if(!(e instanceof l))throw new TypeError("ECDSA key pair object expected.");const t=u.convertHashAlgorithmName(this.hashAlgorithmName);return new p(e,t)}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA-")}static getSignatureLength(e){return 2*(5+Math.ceil(e/8))}}t.WebECDsa=u,u.ecdsaSha2Nistp256="ecdsa-sha2-nistp256",u.ecdsaSha2Nistp384="ecdsa-sha2-nistp384",u.ecdsaSha2Nistp521="ecdsa-sha2-nistp521",u.curves=o.curves,u.KeyPair=l;class p{constructor(e,t){this.keyPair=e,this.hashAlgorithm=t}get digestLength(){const e=this.keyPair.curve;return e?u.getSignatureLength(e.keySize):0}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");let t=r.Buffer.from(await crypto.subtle.sign({name:"ECDSA",hash:{name:this.hashAlgorithm}},this.keyPair.privateKey,e));const n=Math.ceil(this.keyPair.curve.keySize/8);if(t.length!==2*n)throw new Error(`Unexpected signature length: ${t.length}`);const s=a.BigInt.fromBytes(t.slice(0,n),{unsigned:!0}),o=a.BigInt.fromBytes(t.slice(n,t.length),{unsigned:!0}),c=new i.SshDataWriter(r.Buffer.alloc(this.digestLength));return c.writeBinary(s.toBytes({unsigned:!0,length:n+1})),c.writeBinary(o.toBytes({unsigned:!0,length:n+1})),t=c.toBuffer(),t}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");const n=new i.SshDataReader(t),s=n.readBigInt(),o=n.readBigInt(),a=Math.ceil(this.keyPair.curve.keySize/8);return t=r.Buffer.alloc(2*a),s.toBytes({unsigned:!0,length:a}).copy(t,0),o.toBytes({unsigned:!0,length:a}).copy(t,a),await crypto.subtle.verify({name:"ECDSA",hash:{name:this.hashAlgorithm}},this.keyPair.publicKey,t,e)}dispose(){}}},8159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebEncryption=void 0;const r=n(4300),s=n(3687);class i extends s.EncryptionAlgorithm{constructor(e,t,n,r){super(e),this.algorithmName=t,this.cipherMode=n,this.keySizeInBits=r,this.blockSizeInBits=i.getBlockSize(t)}get keyLength(){return this.keySizeInBits/8}get blockLength(){return this.blockSizeInBits/8}async createCipher(e,t,n){const r=new o(e,this.algorithmName,this.cipherMode,this.keySizeInBits,this.blockSizeInBits);return await r.init(t,n),r}static getBlockSize(e){if("AES"===e)return 128;throw new Error(`Unsupported encryption algorithm: ${e}`)}}t.WebEncryption=i;class o{get blockLength(){return this.blockSizeInBits/8}constructor(e,t,n,s,i){if(this.isEncryption=e,this.algorithmName=t,this.cipherMode=n,this.keySizeInBits=s,this.blockSizeInBits=i,this.tag=null,"AES"===this.algorithmName&&"CTR"===this.cipherMode)this.transform=this.aesCtr.bind(this,e);else if("AES"===this.algorithmName&&"CBC"===this.cipherMode)this.transform=this.aesCbc.bind(this,e);else{if("AES"!==this.algorithmName||"GCM"!==this.cipherMode)throw new Error(`Unsupported encryption algorithm: ${this.algorithmName}-${this.cipherMode}`);this.transform=this.aesGcm.bind(this,e),this.associatedData=r.Buffer.alloc(4),this.decryptBuffer=r.Buffer.alloc(4*this.blockLength)}}async init(e,t){try{const t=`${this.algorithmName}-${this.cipherMode}`;this.key=await crypto.subtle.importKey("raw",e,{name:t,length:this.keySizeInBits},!1,this.isEncryption?["encrypt"]:["decrypt"])}catch(e){throw new Error("Failed to initialize AES: "+e)}"GCM"===this.cipherMode?this.iv=r.Buffer.from(t.slice(0,12)):this.iv=r.Buffer.from(t)}async aesCtr(e,t){if(t.length%this.blockLength!=0){const e=`Encrypt/decrypt input has invalid length ${t.length}, not a multiple of block size ${this.blockLength}.`;throw new Error(e)}let n;if(n=e?r.Buffer.from(await crypto.subtle.encrypt({name:"AES-CTR",counter:this.iv,length:this.blockSizeInBits},this.key,t)):r.Buffer.from(await crypto.subtle.decrypt({name:"AES-CTR",counter:this.iv,length:this.blockSizeInBits},this.key,t)),n.length!==t.length){const e=`Result from encrypt/decrypt has invalid length ${n.length}, expected ${t.length}.`;throw new Error(e)}const s=t.length/this.blockLength;for(let e=0;e<s;e++)for(let e=this.iv.length-1;e>=0&&(this.iv[e]=this.iv[e]+1,!this.iv[e]);e--);return n}async aesCbc(e,t){if(e){let e=r.Buffer.from(await crypto.subtle.encrypt({name:"AES-CBC",iv:this.iv},this.key,t));return e=e.slice(0,t.length),e}return r.Buffer.from(await crypto.subtle.decrypt({name:"AES-CBC",iv:this.iv},this.key,t))}async aesGcm(e,t){if(t.length%this.blockLength!=0){const e=`Encrypt/decrypt input has invalid length ${t.length}, not a multiple of block size ${this.blockLength}.`;throw new Error(e)}const n=t.length;let s;if(this.associatedData[0]=n>>>24,this.associatedData[1]=n>>>16,this.associatedData[2]=n>>>8,this.associatedData[3]=n,e)s=r.Buffer.from(await crypto.subtle.encrypt({name:"AES-GCM",iv:this.iv,additionalData:this.associatedData,tagLength:8*this.digestLength},this.key,t)),this.tag=s.slice(s.length-this.digestLength),s=s.slice(0,s.length-this.digestLength);else{if(!this.tag)throw new Error("AES-GCM tag was not set before decrypting.");const e=t.length+this.digestLength;if(this.decryptBuffer.length<e){let t=2*this.decryptBuffer.length;for(;t<e;)t*=2;this.decryptBuffer=r.Buffer.alloc(t)}const n=this.decryptBuffer.slice(0,e);t.copy(n,0),this.tag.copy(n,t.length),s=r.Buffer.from(await crypto.subtle.decrypt({name:"AES-GCM",iv:this.iv,additionalData:this.associatedData,tagLength:8*this.digestLength},this.key,n))}if(s.length!==t.length){const e=`Result from encrypt/decrypt has invalid length ${s.length}, expected ${t.length}.`;throw new Error(e)}let i=12;for(;--i>=4&&(this.iv[i]++,0===this.iv[i]););return s}get digestLength(){return 16}get authenticatedEncryption(){return"GCM"===this.cipherMode}async sign(e){if(!this.tag)throw new Error("AES-GCM tag was not obtained by encrypting.");return this.tag}async verify(e,t){if(t.length!==this.digestLength)throw new Error("Incorrect AES-GCM tag length.");return this.tag=t,!0}dispose(){}}},3175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebHmac=void 0;const r=n(4300),s=n(4953);class i extends s.HmacAlgorithm{constructor(e,t,n=!1){super(e,t,i.getHashKeyLength(t),i.getHashDigestLength(t)),this.encryptThenMac=n}async createSigner(e){const t=new o(this.algorithmName,!0,this.digestLength,this.encryptThenMac);return await t.init(e),t}async createVerifier(e){const t=new o(this.algorithmName,!1,this.digestLength,this.encryptThenMac);return await t.init(e),t}static getHashKeyLength(e){if("SHA2-512"===e)return 64;if("SHA2-384"===e)return 48;if("SHA2-256"===e)return 32;throw new Error(`Unsupported hash algorithm: ${e}`)}static getHashDigestLength(e){return this.getHashKeyLength(e)}static getWebHashAlgorithmName(e){if("SHA2-512"===e)return"SHA-512";if("SHA2-384"===e)return"SHA-384";if("SHA2-256"===e)return"SHA-256";throw new Error(`Unsupported hash algorithm: ${e}`)}}t.WebHmac=i;class o{constructor(e,t,n,r){this.algorithmName=e,this.isSigning=t,this.digestLength=n,this.encryptThenMac=r}async init(e){try{const t=this.algorithmName.replace("SHA2-","SHA-");this.key=await crypto.subtle.importKey("raw",e,{name:"HMAC",hash:{name:t}},!1,this.isSigning?["sign"]:["verify"])}catch(e){throw new Error("Failed to initialize HMAC: "+e)}}async sign(e){return r.Buffer.from(await crypto.subtle.sign({name:"HMAC",hash:{name:this.algorithmName}},this.key,e))}async verify(e,t){return await crypto.subtle.verify({name:"HMAC",hash:{name:this.algorithmName}},this.key,t,e)}dispose(){}}},9297:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebECDiffieHellman=t.WebDiffieHellman=void 0;const r=n(4300),s=n(2257),i=n(1263),o=n(3175),a=n(3380),c=n(5440);class l extends i.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.WebHmac.getHashDigestLength(n))}createKeyExchange(){return new u(this.keySizeInBits,o.WebHmac.getWebHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.WebDiffieHellman=l;class u{constructor(e,t,n){switch(this.hashAlgorithmName=t,this.digestLength=n,e){case 1024:this.dh=(0,s.getDiffieHellman)("modp2");break;case 2048:this.dh=(0,s.getDiffieHellman)("modp14");break;case 4096:this.dh=(0,s.getDiffieHellman)("modp16");break;default:throw new Error("Invalid DH bit length.")}}startKeyExchange(){const e=this.dh.generateKeys(),t=a.BigInt.fromBytes(e,{unsigned:!0}).toBytes();return Promise.resolve(t)}decryptKeyExchange(e){const t=this.dh.computeSecret(e),n=a.BigInt.fromBytes(t,{unsigned:!0}).toBytes();return Promise.resolve(n)}async sign(e){const t=await crypto.subtle.digest(this.hashAlgorithmName,e);return r.Buffer.from(t)}dispose(){}}class p extends i.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.WebHmac.getHashDigestLength(n))}createKeyExchange(){return new h(this.keySizeInBits,o.WebHmac.getWebHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.WebECDiffieHellman=p;class h{constructor(e,t,n){this.bitLength=e,this.hashAlgorithmName=t,this.digestLength=n,this.algorithm={name:"ECDH",namedCurve:"P-"+e}}async startKeyExchange(){this.keyPair||(this.keyPair=await crypto.subtle.generateKey(this.algorithm,!0,["deriveBits"]));const e=await crypto.subtle.exportKey("jwk",this.keyPair.publicKey),t=c.JsonWebKeyFormatter.parseEC(e),n=Math.ceil(this.bitLength/8),s=r.Buffer.alloc(1+2*n);return s[0]=4,t.x.toBytes({unsigned:!0,length:n}).copy(s,1),t.y.toBytes({unsigned:!0,length:n}).copy(s,1+n),r.Buffer.from(s)}async decryptKeyExchange(e){if(!this.keyPair)throw new Error("Key exchange not started.");const t=e,n=c.JsonWebKeyFormatter.formatEC({curve:{name:this.algorithm.namedCurve},x:a.BigInt.fromBytes(t.slice(1,1+(t.length-1)/2),{unsigned:!0}),y:a.BigInt.fromBytes(t.slice(1+(t.length-1)/2),{unsigned:!0})}),s=await crypto.subtle.importKey("jwk",n,this.algorithm,!1,[]),i=r.Buffer.from(await crypto.subtle.deriveBits(Object.assign(Object.assign({},this.algorithm),{public:s}),this.keyPair.privateKey,8*Math.ceil(this.bitLength/8)));return a.BigInt.fromBytes(i,{unsigned:!0}).toBytes()}async sign(e){const t=await crypto.subtle.digest(this.hashAlgorithmName,e);return r.Buffer.from(t)}dispose(){}}},8682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebRandom=void 0,t.WebRandom=class{getBytes(e){crypto.getRandomValues(e)}}},787:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebRsa=void 0;const r=n(4300),s=n(7103),i=n(3175),o=n(7309),a=n(5440);class c{constructor(e){this.hashAlgorithm=e,this.comment=null}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return l.keyAlgorithmName}async generate(e){e=null!=e?e:c.defaultKeySize;try{const t={name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:this.hashAlgorithm}},n=await crypto.subtle.generateKey(t,!0,["sign","verify"]);this.publicKey=n.publicKey,this.privateKey=n.privateKey}catch(e){throw new Error("Failed to generate RSA key pair: "+e)}}async setPublicKeyBytes(e){if(!e)throw new TypeError("Buffer is required.");const t=new o.SshDataReader(e),n=t.readString("ascii");if(n!==this.keyAlgorithmName&&n!==l.rsaWithSha256&&n!==l.rsaWithSha512)throw new Error(`Invalid RSA key algorithm: ${n}`);const r=t.readBigInt(),s=t.readBigInt(),i=a.JsonWebKeyFormatter.formatRsa({modulus:s,exponent:r},!1);i.alg="RS"+this.hashAlgorithm.replace("SHA-",""),i.key_ops=["verify"];try{const e={name:"RSASSA-PKCS1-v1_5",hash:{name:this.hashAlgorithm}};this.publicKey=await crypto.subtle.importKey("jwk",i,e,!0,["verify"])}catch(e){throw new Error("Failed to import RSA public key: "+e)}}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;e||(e=this.keyAlgorithmName);try{t=await crypto.subtle.exportKey("jwk",this.publicKey)}catch(e){throw new Error("Failed to export RSA public key: "+e)}const{modulus:n,exponent:s}=a.JsonWebKeyFormatter.parseRsa(t,!1),i=r.Buffer.alloc(512),c=new o.SshDataWriter(i);return c.writeString(e,"ascii"),c.writeBigInt(s),c.writeBigInt(n),c.toBuffer()}async importParameters(e){const t=e.d?a.JsonWebKeyFormatter.formatRsa(e,!0):null,n=a.JsonWebKeyFormatter.formatRsa(e,!1),r={name:"RSASSA-PKCS1-v1_5",hash:{name:this.hashAlgorithm}};try{this.publicKey=await crypto.subtle.importKey("jwk",n,r,!0,["verify"]),this.privateKey=t?await crypto.subtle.importKey("jwk",t,r,!0,["sign"]):void 0}catch(e){if(!(e instanceof Error))throw e;throw new Error("Failed to import RSA key pair: "+e.message)}}async exportParameters(){var e;if(!this.publicKey)throw new Error("Public key not set.");let t;try{t=await crypto.subtle.exportKey("jwk",null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey)}catch(e){if(!(e instanceof Error))throw e;throw new Error("Failed to export RSA public key: "+e.message)}return a.JsonWebKeyFormatter.parseRsa(t,!!this.privateKey)}dispose(){}}c.defaultKeySize=2048;class l extends s.PublicKeyAlgorithm{constructor(e,t){super(e,l.keyAlgorithmName,t)}createKeyPair(){const e=l.convertHashAlgorithmName(this.hashAlgorithmName);return new c(e)}async generateKeyPair(e){const t=l.convertHashAlgorithmName(this.hashAlgorithmName),n=new c(t);return await n.generate(e),n}createSigner(e){if(!(e instanceof c))throw new TypeError("RSA key pair object expected.");const t=l.convertHashAlgorithmName(this.hashAlgorithmName);return new u(e,t,i.WebHmac.getHashDigestLength(this.hashAlgorithmName))}createVerifier(e){if(!(e instanceof c))throw new TypeError("RSA key pair object expected.");const t=l.convertHashAlgorithmName(this.hashAlgorithmName);return new u(e,t,i.WebHmac.getHashDigestLength(this.hashAlgorithmName))}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA-")}}t.WebRsa=l,l.keyAlgorithmName="ssh-rsa",l.rsaWithSha256="rsa-sha2-256",l.rsaWithSha512="rsa-sha2-512",l.KeyPair=c;class u{constructor(e,t,n){this.keyPair=e,this.hashAlgorithm=t,this.digestLength=n}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");return await this.convertKeyHashAlgorithm(),r.Buffer.from(await crypto.subtle.sign("RSASSA-PKCS1-v1_5",this.keyPair.privateKey,e))}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");return await this.convertKeyHashAlgorithm(),await crypto.subtle.verify("RSASSA-PKCS1-v1_5",this.keyPair.publicKey,t,e)}async convertKeyHashAlgorithm(){if(this.keyPair.hashAlgorithm!==this.hashAlgorithm){const e=await this.keyPair.exportParameters();this.keyPair=new c(this.hashAlgorithm),await this.keyPair.importParameters(e)}}dispose(){}}},4608:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDisposedError=t.SshChannelError=t.SshReconnectError=t.SshConnectionError=void 0;class n extends Error{constructor(e,t){super(e),this.reason=t}}t.SshConnectionError=n;class r extends Error{constructor(e,t){super(e),this.reason=t}}t.SshReconnectError=r;class s extends Error{constructor(e,t){super(e),this.reason=t}}t.SshChannelError=s;class i extends Error{constructor(e){var t,n;let r;r="string"==typeof e?e:"function"==typeof e?e.name+" disposed.":(null!==(n=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)&&void 0!==n?n:"Object ")+" disposed.",super(r)}}t.ObjectDisposedError=i},3314:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshAuthenticatingEventArgs=t.SshAuthenticationType=void 0;const r=n(5844);var s;!function(e){e[e.clientNone=0]="clientNone",e[e.clientHostBased=1]="clientHostBased",e[e.clientPassword=2]="clientPassword",e[e.clientPublicKeyQuery=3]="clientPublicKeyQuery",e[e.clientPublicKey=4]="clientPublicKey",e[e.clientInteractive=5]="clientInteractive",e[e.serverPublicKey=10]="serverPublicKey"}(s=t.SshAuthenticationType||(t.SshAuthenticationType={})),t.SshAuthenticatingEventArgs=class{constructor(e,{username:t,password:n,publicKey:i,clientHostname:o,clientUsername:a,infoRequest:c,infoResponse:l},u){this.authenticationType=e,this.infoRequest=null,this.infoResponse=null;const p=({usernameRequired:e,passwordRequired:r,publicKeyRequired:s,clientHostnameRequired:c,clientUsernameRequired:l})=>"string"==typeof t==!!e&&"string"==typeof n==!!r&&!!i==!!s&&"string"==typeof o==!!c&&"string"==typeof a==!!l;let h;switch(e){case s.clientNone:h=p({usernameRequired:!0});break;case s.clientHostBased:h=p({usernameRequired:!0,publicKeyRequired:!0,clientHostnameRequired:!0,clientUsernameRequired:!0});break;case s.clientPassword:h=p({usernameRequired:!0,passwordRequired:!0});break;case s.clientPublicKeyQuery:case s.clientPublicKey:h=p({usernameRequired:!0,publicKeyRequired:!0});break;case s.serverPublicKey:h=p({publicKeyRequired:!0});break;case s.clientInteractive:h=!0;break;default:throw new Error(`Invalid authentication type: ${e}`)}if(!h)throw new Error(`Invalid arguments for authentication type: ${e}`);this.username=null!=t?t:null,this.password=null!=n?n:null,this.publicKey=null!=i?i:null,this.clientHostname=null!=o?o:null,this.clientUsername=null!=a?a:null,this.infoRequest=null!=c?c:null,this.infoResponse=null!=l?l:null,this.cancellationValue=null!=u?u:r.CancellationToken.None}get cancellation(){return this.cancellationValue}set cancellation(e){this.cancellationValue=e}toString(){return this.infoRequest?`Info request: ${this.infoRequest.name}`:this.infoResponse?`"${this.username}" info response`:this.password?(this.username?'"'+this.username+'" ':"")+"[password]":this.publicKey?`${this.username?'"'+this.username+'" ':""}[${this.publicKey.keyAlgorithmName}]`:`"${this.username}"`}}},8512:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshChannelClosedEventArgs=void 0,t.SshChannelClosedEventArgs=class{constructor(e,t){"number"==typeof e?this.exitStatus=e:"string"==typeof e?(this.exitSignal=e,this.errorMessage=t):e instanceof Error&&(this.error=e)}}},7776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshChannelOpeningEventArgs=void 0;const r=n(3379),s=n(5844);t.SshChannelOpeningEventArgs=class{constructor(e,t,n,i){if(this.request=e,this.channel=t,this.isRemoteRequest=n,this.failureReason=r.SshChannelOpenFailureReason.none,this.failureDescription=null,!e)throw new TypeError("A channel open message is required.");if(!t)throw new TypeError("A channel is required.");this.cancellationValue=null!=i?i:s.CancellationToken.None}get cancellation(){return this.cancellationValue}set cancellation(e){this.cancellationValue=e}toString(){return`${this.channel.toString()}${this.failureReason?" "+r.SshChannelOpenFailureReason[this.failureReason]:""}`}}},6076:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SshExtendedDataEventArgs=t.SshExtendedDataType=void 0,function(e){e[e.STDERR=1]="STDERR"}(n=t.SshExtendedDataType||(t.SshExtendedDataType={})),t.SshExtendedDataEventArgs=class{constructor(e,t){this.dataTypeCode=e,this.data=t}toString(){return`${n[this.dataTypeCode]}: ${this.data.toString()}`}}},1039:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshReportProgressEventArgs=void 0,t.SshReportProgressEventArgs=class{constructor(e,t){this.progress=e,this.sessionNumber=t}toString(){return`Progress: ${this.progress}`+this.sessionNumber?` Session number: ${this.sessionNumber}`:""}}},1656:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshRequestEventArgs=void 0;const r=n(5844);t.SshRequestEventArgs=class{constructor(e,t,n,s){this.requestType=e,this.request=t,this.principal=n,this.cancellationValue=null!=s?s:r.CancellationToken.None}get cancellation(){return this.cancellationValue}set cancellation(e){this.cancellationValue=e}toString(){return`RequestType: ${this.requestType}`+this.request?` Request: ${this.request}`:""}}},8764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSessionClosedEventArgs=void 0;const r=n(6306);t.SshSessionClosedEventArgs=class{constructor(e,t,n){if(this.reason=e,this.message=t,this.error=n,!t)throw new TypeError("A disconnect message is required.")}toString(){return`${r.SshDisconnectReason[this.reason]}: ${this.message}`}}},2727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandRequestMessage=t.ChannelRequestType=t.ChannelRequestMessage=t.ChannelOpenConfirmationMessage=t.ChannelOpenMessage=t.ChannelOpenFailureMessage=t.ChannelMessage=t.SshChannelOpenFailureReason=t.SessionChannelRequestMessage=t.ServiceAcceptMessage=t.ServiceRequestMessage=t.SshReconnectFailureReason=t.SshDisconnectReason=t.SessionRequestFailureMessage=t.SessionRequestSuccessMessage=t.DebugMessage=t.SessionRequestMessage=t.PasswordRequestMessage=t.PublicKeyOKMessage=t.PublicKeyRequestMessage=t.AuthenticationInfoResponseMessage=t.AuthenticationInfoRequestMessage=t.AuthenticationFailureMessage=t.AuthenticationSuccessMessage=t.AuthenticationRequestMessage=t.AuthenticationMessage=t.SshMessage=t.SshExtendedDataEventArgs=t.SshExtendedDataType=t.SshChannelClosedEventArgs=t.SshSessionClosedEventArgs=t.SshChannelOpeningEventArgs=t.SshReportProgressEventArgs=t.SshRequestEventArgs=t.SshAuthenticatingEventArgs=t.SshAuthenticationType=t.serviceActivation=t.SshService=t.SshRpcMessageStream=t.WebSocketStream=t.NodeStream=t.BaseStream=t.SshStream=t.SshChannel=t.SshServerSession=t.SshClientSession=t.SshSession=t.SshVersionInfo=t.SshProtocolExtensionNames=t.SshSessionConfiguration=void 0,t.Progress=t.SshTraceEventIds=t.TraceLevel=t.SecureStream=t.MultiChannelStream=t.SessionContour=t.ChannelMetrics=t.SessionMetrics=t.Queue=t.Semaphore=t.PromiseCompletionSource=t.CancellationError=t.CancellationTokenSource=t.CancellationToken=t.ObjectDisposedError=t.SshReconnectError=t.SshConnectionError=t.SshChannelError=t.BigInt=t.DerWriter=t.DerReader=t.formatBuffer=t.SshDataWriter=t.SshDataReader=t.ECDsa=t.Rsa=t.Encryption=t.HmacAlgorithm=t.EncryptionAlgorithm=t.PublicKeyAlgorithm=t.KeyExchangeAlgorithm=t.SshAlgorithms=void 0;var r=n(9872);Object.defineProperty(t,"SshSessionConfiguration",{enumerable:!0,get:function(){return r.SshSessionConfiguration}}),Object.defineProperty(t,"SshProtocolExtensionNames",{enumerable:!0,get:function(){return r.SshProtocolExtensionNames}});var s=n(1163);Object.defineProperty(t,"SshVersionInfo",{enumerable:!0,get:function(){return s.SshVersionInfo}});var i=n(7492);Object.defineProperty(t,"SshSession",{enumerable:!0,get:function(){return i.SshSession}});var o=n(5706);Object.defineProperty(t,"SshClientSession",{enumerable:!0,get:function(){return o.SshClientSession}});var a=n(7331);Object.defineProperty(t,"SshServerSession",{enumerable:!0,get:function(){return a.SshServerSession}});var c=n(9273);Object.defineProperty(t,"SshChannel",{enumerable:!0,get:function(){return c.SshChannel}});var l=n(6373);Object.defineProperty(t,"SshStream",{enumerable:!0,get:function(){return l.SshStream}});var u=n(3538);Object.defineProperty(t,"BaseStream",{enumerable:!0,get:function(){return u.BaseStream}}),Object.defineProperty(t,"NodeStream",{enumerable:!0,get:function(){return u.NodeStream}}),Object.defineProperty(t,"WebSocketStream",{enumerable:!0,get:function(){return u.WebSocketStream}});var p=n(5523);Object.defineProperty(t,"SshRpcMessageStream",{enumerable:!0,get:function(){return p.SshRpcMessageStream}});var h=n(1838);Object.defineProperty(t,"SshService",{enumerable:!0,get:function(){return h.SshService}});var d=n(4865);Object.defineProperty(t,"serviceActivation",{enumerable:!0,get:function(){return d.serviceActivation}});var f=n(3314);Object.defineProperty(t,"SshAuthenticationType",{enumerable:!0,get:function(){return f.SshAuthenticationType}}),Object.defineProperty(t,"SshAuthenticatingEventArgs",{enumerable:!0,get:function(){return f.SshAuthenticatingEventArgs}});var m=n(1656);Object.defineProperty(t,"SshRequestEventArgs",{enumerable:!0,get:function(){return m.SshRequestEventArgs}});var g=n(1039);Object.defineProperty(t,"SshReportProgressEventArgs",{enumerable:!0,get:function(){return g.SshReportProgressEventArgs}});var v=n(7776);Object.defineProperty(t,"SshChannelOpeningEventArgs",{enumerable:!0,get:function(){return v.SshChannelOpeningEventArgs}});var y=n(8764);Object.defineProperty(t,"SshSessionClosedEventArgs",{enumerable:!0,get:function(){return y.SshSessionClosedEventArgs}});var b=n(8512);Object.defineProperty(t,"SshChannelClosedEventArgs",{enumerable:!0,get:function(){return b.SshChannelClosedEventArgs}});var w=n(6076);Object.defineProperty(t,"SshExtendedDataType",{enumerable:!0,get:function(){return w.SshExtendedDataType}}),Object.defineProperty(t,"SshExtendedDataEventArgs",{enumerable:!0,get:function(){return w.SshExtendedDataEventArgs}});var S=n(6744);Object.defineProperty(t,"SshMessage",{enumerable:!0,get:function(){return S.SshMessage}});var E=n(6892);Object.defineProperty(t,"AuthenticationMessage",{enumerable:!0,get:function(){return E.AuthenticationMessage}}),Object.defineProperty(t,"AuthenticationRequestMessage",{enumerable:!0,get:function(){return E.AuthenticationRequestMessage}}),Object.defineProperty(t,"AuthenticationSuccessMessage",{enumerable:!0,get:function(){return E.AuthenticationSuccessMessage}}),Object.defineProperty(t,"AuthenticationFailureMessage",{enumerable:!0,get:function(){return E.AuthenticationFailureMessage}}),Object.defineProperty(t,"AuthenticationInfoRequestMessage",{enumerable:!0,get:function(){return E.AuthenticationInfoRequestMessage}}),Object.defineProperty(t,"AuthenticationInfoResponseMessage",{enumerable:!0,get:function(){return E.AuthenticationInfoResponseMessage}}),Object.defineProperty(t,"PublicKeyRequestMessage",{enumerable:!0,get:function(){return E.PublicKeyRequestMessage}}),Object.defineProperty(t,"PublicKeyOKMessage",{enumerable:!0,get:function(){return E.PublicKeyOKMessage}}),Object.defineProperty(t,"PasswordRequestMessage",{enumerable:!0,get:function(){return E.PasswordRequestMessage}});var _=n(6306);Object.defineProperty(t,"SessionRequestMessage",{enumerable:!0,get:function(){return _.SessionRequestMessage}}),Object.defineProperty(t,"DebugMessage",{enumerable:!0,get:function(){return _.DebugMessage}}),Object.defineProperty(t,"SessionRequestSuccessMessage",{enumerable:!0,get:function(){return _.SessionRequestSuccessMessage}}),Object.defineProperty(t,"SessionRequestFailureMessage",{enumerable:!0,get:function(){return _.SessionRequestFailureMessage}}),Object.defineProperty(t,"SshDisconnectReason",{enumerable:!0,get:function(){return _.SshDisconnectReason}}),Object.defineProperty(t,"SshReconnectFailureReason",{enumerable:!0,get:function(){return _.SshReconnectFailureReason}}),Object.defineProperty(t,"ServiceRequestMessage",{enumerable:!0,get:function(){return _.ServiceRequestMessage}}),Object.defineProperty(t,"ServiceAcceptMessage",{enumerable:!0,get:function(){return _.ServiceAcceptMessage}}),Object.defineProperty(t,"SessionChannelRequestMessage",{enumerable:!0,get:function(){return _.SessionChannelRequestMessage}});var x=n(3379);Object.defineProperty(t,"SshChannelOpenFailureReason",{enumerable:!0,get:function(){return x.SshChannelOpenFailureReason}}),Object.defineProperty(t,"ChannelMessage",{enumerable:!0,get:function(){return x.ChannelMessage}}),Object.defineProperty(t,"ChannelOpenFailureMessage",{enumerable:!0,get:function(){return x.ChannelOpenFailureMessage}}),Object.defineProperty(t,"ChannelOpenMessage",{enumerable:!0,get:function(){return x.ChannelOpenMessage}}),Object.defineProperty(t,"ChannelOpenConfirmationMessage",{enumerable:!0,get:function(){return x.ChannelOpenConfirmationMessage}}),Object.defineProperty(t,"ChannelRequestMessage",{enumerable:!0,get:function(){return x.ChannelRequestMessage}}),Object.defineProperty(t,"ChannelRequestType",{enumerable:!0,get:function(){return x.ChannelRequestType}}),Object.defineProperty(t,"CommandRequestMessage",{enumerable:!0,get:function(){return x.CommandRequestMessage}});var T=n(7521);Object.defineProperty(t,"SshAlgorithms",{enumerable:!0,get:function(){return T.SshAlgorithms}}),Object.defineProperty(t,"KeyExchangeAlgorithm",{enumerable:!0,get:function(){return T.KeyExchangeAlgorithm}}),Object.defineProperty(t,"PublicKeyAlgorithm",{enumerable:!0,get:function(){return T.PublicKeyAlgorithm}}),Object.defineProperty(t,"EncryptionAlgorithm",{enumerable:!0,get:function(){return T.EncryptionAlgorithm}}),Object.defineProperty(t,"HmacAlgorithm",{enumerable:!0,get:function(){return T.HmacAlgorithm}}),Object.defineProperty(t,"Encryption",{enumerable:!0,get:function(){return T.Encryption}}),Object.defineProperty(t,"Rsa",{enumerable:!0,get:function(){return T.Rsa}}),Object.defineProperty(t,"ECDsa",{enumerable:!0,get:function(){return T.ECDsa}});var C=n(7309);Object.defineProperty(t,"SshDataReader",{enumerable:!0,get:function(){return C.SshDataReader}}),Object.defineProperty(t,"SshDataWriter",{enumerable:!0,get:function(){return C.SshDataWriter}}),Object.defineProperty(t,"formatBuffer",{enumerable:!0,get:function(){return C.formatBuffer}});var P=n(4918);Object.defineProperty(t,"DerReader",{enumerable:!0,get:function(){return P.DerReader}}),Object.defineProperty(t,"DerWriter",{enumerable:!0,get:function(){return P.DerWriter}});var A=n(3380);Object.defineProperty(t,"BigInt",{enumerable:!0,get:function(){return A.BigInt}});var R=n(4608);Object.defineProperty(t,"SshChannelError",{enumerable:!0,get:function(){return R.SshChannelError}}),Object.defineProperty(t,"SshConnectionError",{enumerable:!0,get:function(){return R.SshConnectionError}}),Object.defineProperty(t,"SshReconnectError",{enumerable:!0,get:function(){return R.SshReconnectError}}),Object.defineProperty(t,"ObjectDisposedError",{enumerable:!0,get:function(){return R.ObjectDisposedError}});var I=n(9638);Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return I.CancellationToken}}),Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return I.CancellationTokenSource}}),Object.defineProperty(t,"CancellationError",{enumerable:!0,get:function(){return I.CancellationError}});var k=n(3305);Object.defineProperty(t,"PromiseCompletionSource",{enumerable:!0,get:function(){return k.PromiseCompletionSource}});var O=n(7399);Object.defineProperty(t,"Semaphore",{enumerable:!0,get:function(){return O.Semaphore}});var M=n(6655);Object.defineProperty(t,"Queue",{enumerable:!0,get:function(){return M.Queue}});var D=n(4340);Object.defineProperty(t,"SessionMetrics",{enumerable:!0,get:function(){return D.SessionMetrics}});var N=n(8614);Object.defineProperty(t,"ChannelMetrics",{enumerable:!0,get:function(){return N.ChannelMetrics}});var L=n(2750);Object.defineProperty(t,"SessionContour",{enumerable:!0,get:function(){return L.SessionContour}});var j=n(9141);Object.defineProperty(t,"MultiChannelStream",{enumerable:!0,get:function(){return j.MultiChannelStream}});var q=n(3868);Object.defineProperty(t,"SecureStream",{enumerable:!0,get:function(){return q.SecureStream}});var B=n(6197);Object.defineProperty(t,"TraceLevel",{enumerable:!0,get:function(){return B.TraceLevel}}),Object.defineProperty(t,"SshTraceEventIds",{enumerable:!0,get:function(){return B.SshTraceEventIds}});var F=n(3689);Object.defineProperty(t,"Progress",{enumerable:!0,get:function(){return F.Progress}})},3380:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BigInt=void 0;const r=n(4300),s=n(7309);class i{constructor(e){if(this.buffer=e,0===e.length)throw new Error("BigInt buffer length must be greater than zero.")}get sign(){const e=this.buffer[0];return 0===e?this.buffer.length>1?1:0:0==(128&e)?1:-1}static fromInt32(e){if(0===e)return i.zero;let t=!1;e<0&&(t=!0,e=-e);const n=[];for(let t=24;t>=0;t-=8)(e>=1<<t||n.length>0)&&(n.push(e>>t),e&=~((1<<t)-1));return t&&(0==(128&n[0])?n[0]|=128:n.splice(0,0,128)),new i(r.Buffer.from(new Uint8Array(n)))}toInt32(){if(this.buffer.length>4)throw new TypeError("BigInt value cannot be converted to a 32-bit signed integer.");let e=this.buffer[0];this.sign<0&&(e&=127);for(let t=1;t<this.buffer.length;t++)e=(e<<8)+this.buffer[t];return this.sign<0&&(e=-e),e}static fromBytes(e,t){if(!r.Buffer.isBuffer(e))throw new TypeError("Buffer expected.");if(0===e.length)throw new Error("BigInt buffer length must be greater than zero.");t=null!=t?t:{};const n=0!=(128&e[0]),s=t.unsigned&&n?1:0;let o=0;for(let t=0;t<e.length-1&&0===e[t];t++)0==(128&e[t+1])&&o++;const a=r.Buffer.alloc(e.length+s-o);return e.copy(a,s,o,e.length),new i(a)}toBytes(e){e=null!=e?e:{};let t=this.buffer;if(e.unsigned){if(this.sign<0)throw new TypeError("Cannot format a negative BigInt as unsigned.");if(0===t[0]&&t.length>1&&(t=t.slice(1,t.length)),void 0!==e.length){if(t.length>e.length)throw new Error(`BigInt (${t.length} bytes) is too large for length ${e.length}.`);if(t.length<e.length){const n=r.Buffer.alloc(e.length);return t.copy(n,e.length-t.length),n}}}const n=r.Buffer.alloc(t.length);return t.copy(n,0,0,t.length),n}copyTo(e,t=0){this.buffer.copy(e,t,0,this.buffer.length)}equals(e){return e instanceof i&&this.buffer.equals(e.buffer)}toString(e){return(0,s.formatBuffer)(this.buffer,null!=e?e:"BigInt")}}t.BigInt=i,i.zero=new i(r.Buffer.alloc(1))},4918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DerWriter=t.DerReader=void 0;const r=n(4300),s=n(3380);class i{constructor(e,t=48){this.buffer=e,this.position=0,this.readType(t);const n=this.readLength();if(n>this.buffer.length-this.position)throw new Error("Read out of bounds.");this.buffer=this.buffer.slice(0,this.position+n)}get available(){return this.buffer.length-this.position}readNull(){if(this.readType(5),0!==this.readByte())throw new Error("Expected a 0 after Null type.")}readInteger(){this.readType(2);const e=this.readLength(),t=this.readBytes(e);return new s.BigInt(t)}readOctetString(){this.readType(4);const e=this.readLength();return this.readBytes(e)}readBitString(){this.readType(3);const e=this.readLength();if(0!==this.readByte())throw new Error("Padded bit strings are not supported.");return this.readBytes(e-1)}readObjectIdentifier(e){this.readType(6);const t=this.readLength(),n=this.position+t,r=[],s=this.readByte();r.push(Math.trunc(s/40)),r.push(s%40);let i=0;for(;this.position<n;){const e=this.readByte();0!=(128&e)?i=128*i+(127&e):(i=128*i+e,r.push(i),i=0)}if(0!==i)throw new Error("Invalid OID format.");const o=r.join(".");if(e&&o!==e)throw new Error(`Expected OID ${e}, found: ${o}`);return o}readSequence(){const e=this.position;this.readType(48);const t=this.readLength();return this.position+=t,new i(this.buffer.slice(e,this.position))}tryReadTagged(e){if(this.position>=this.buffer.length)return null;const t=this.buffer[this.position];if(0==(160&t)||(-161&t)!==e)return null;const n=this.position;this.position++;const r=this.readLength();return this.position+=r,new i(this.buffer.slice(n,this.position),t)}peek(){if(this.position>=this.buffer.length)throw new Error("Read out of bounds.");return this.buffer[this.position]}readLength(){let e=this.readByte();if(128===e)throw new Error("Indefinite-length encoding is not supported.");if(e>127){const t=127&e;if(t>4)throw new Error(`DER length size is ${t} and cannot be more than 4 bytes.`);e=0;for(let n=0;n<t;n++)e=(e<<8)+this.readByte();if(e<0)throw new Error("Corrupted data - negative length found")}return e}readByte(){if(this.position>=this.buffer.length)throw new Error("Read out of bounds.");return this.buffer[this.position++]}readBytes(e){if(this.position+e>this.buffer.length)throw new Error("Read out of bounds.");const t=this.buffer.slice(this.position,this.position+e);return this.position+=e,t}readType(e){const t=this.readByte();if(t!==e)throw new Error(`Expected ${e} data type, found : ${t}`)}}t.DerReader=i;class o{constructor(e,t=48){this.buffer=e,this.dataType=t,this.position=0,this.buffer=e}toBuffer(){const e=this.position,t=o.getLength(e);this.ensureCapacity(1+t.length+e);const n=this.buffer.slice(0,1+t.length+e);return this.buffer.copy(n,1+t.length),n[0]=this.dataType,t.copy(n,1,0),this.buffer=this.buffer.slice(1+t.length,n.length),this.position=e,n}writeSequence(e){this.writeBytes(e.toBuffer())}writeTagged(e,t){if(e>15)throw new Error("Invalid DER tag.");this.writeByte(160|e);const n=o.getLength(t.position);this.writeBytes(n),this.writeBytes(t.buffer.slice(0,t.position))}writeNull(){this.writeByte(5),this.writeByte(0)}writeInteger(e){this.writeByte(2);const t=e.toBytes(),n=o.getLength(t.length);this.writeBytes(n),this.writeBytes(t)}writeOctetString(e){this.writeByte(4);const t=o.getLength(e.length);this.writeBytes(t),this.writeBytes(e)}writeBitString(e){this.writeByte(3);const t=o.getLength(1+e.length);this.writeBytes(t),this.writeByte(0),this.writeBytes(e)}writeObjectIdentifier(e){if(!e)throw new TypeError("OID value is null or empty.");const t=e.split(".").map(Number);if(t.length<2||t[0]>3||t[1]>=40)throw new Error(`Invalid OID: ${e}`);this.writeByte(6);let n=t.length-1;for(let e=2;e<t.length;e++){let r=t[e];for(;r>128;)n++,r/=128}const r=o.getLength(n);this.writeBytes(r),this.writeByte(40*t[0]+t[1]);for(let e=2;e<t.length;e++){let n=t[e];if(n>=128){const e=[];for(e.push(127&n);n>=128;)n/=128,e.push(128|127&n);for(;e.length>0;)this.writeByte(e.pop())}else this.writeByte(n)}}static getLength(e){if(e>127){let t=1;for(let n=e>>8;0!==n;n>>=8)t++;const n=o.lengthBuffer.slice(0,t+1);n[0]=128|t;for(let r=8*(t-1),s=1;r>=0;r-=8,s++)n[s]=e>>r;return n}{const t=o.lengthBuffer.slice(0,1);return t[0]=e,t}}writeByte(e){this.ensureCapacity(this.position+1),this.buffer[this.position++]=e}writeBytes(e){this.ensureCapacity(this.position+e.length),e.copy(this.buffer,this.position),this.position+=e.length}ensureCapacity(e){if(this.buffer.length<e){let t=Math.max(512,2*this.buffer.length);for(;t<e;)t*=2;const n=r.Buffer.alloc(t);this.buffer.copy(n,0,0,this.position),this.buffer=n}}}t.DerWriter=o,o.lengthBuffer=r.Buffer.alloc(10)},7309:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatBuffer=t.SshDataWriter=t.SshDataReader=void 0;const r=n(4300),s=n(7521),i=n(3380);class o{constructor(e){this.buffer=e,this.position=0}get available(){return this.buffer.length-this.position}read(e){if(this.available<e)throw new Error("Attempted to read past end of buffer.");const t=this.buffer.slice(this.position,this.position+e);return this.position+=e,t}readByte(){if(0===this.available)throw new Error("Attempted to read past end of buffer.");const e=this.buffer[this.position];return this.position++,e}readBinary(){const e=this.readUInt32();if(this.available<e)throw new Error("Attempted to read past end of buffer.");const t=this.buffer.slice(this.position,this.position+e);return this.position+=e,t}readString(e){return this.readBinary().toString()}readList(e){const t=this.readString(e);return 0===t.length?[]:t.split(",")}readBoolean(){return 0!==this.readByte()}readUInt32(){if(this.available<4)throw new Error("Attempted to read past end of buffer.");const e=this.buffer[this.position+0],t=this.buffer[this.position+1],n=this.buffer[this.position+2],r=this.buffer[this.position+3];return this.position+=4,(e<<24|t<<16|n<<8|r)>>>0}readUInt64(){if(this.available<8)throw new Error("Attempted to read past end of buffer.");const e=this.buffer[this.position+0],t=this.buffer[this.position+1],n=this.buffer[this.position+2],r=this.buffer[this.position+3],s=this.buffer[this.position+4],i=this.buffer[this.position+5],o=this.buffer[this.position+6],a=this.buffer[this.position+7];return this.position+=8,4294967296*((e<<24|t<<16|n<<8|r)>>>0)+((s<<24|i<<16|o<<8|a)>>>0)}readBigInt(){const e=this.readBinary();return 0===e.length?i.BigInt.zero:i.BigInt.fromBytes(e)}}let a;t.SshDataReader=o,o.mpintZero=r.Buffer.alloc(1),t.SshDataWriter=class{constructor(e){this.buffer=e,this.position=0}write(e){this.ensureCapacity(this.position+e.length),e.copy(this.buffer,this.position),this.position+=e.length}writeByte(e){this.ensureCapacity(this.position+1),this.buffer[this.position]=e,this.position++}writeBinary(e){this.ensureCapacity(this.position+4+e.length),this.writeUInt32(e.length),e.copy(this.buffer,this.position),this.position+=e.length}writeString(e,t){this.writeBinary(r.Buffer.from(e))}writeList(e,t){this.writeString(e?e.join(","):"",t)}writeBoolean(e){this.writeByte(e?1:0)}writeUInt32(e){this.ensureCapacity(this.position+4),this.buffer[this.position+0]=e>>>24,this.buffer[this.position+1]=e>>>16,this.buffer[this.position+2]=e>>>8,this.buffer[this.position+3]=e>>>0,this.position+=4}static writeUInt32(e,t,n){e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n>>>0}writeUInt64(e){this.ensureCapacity(this.position+8);const t=4294967295&e,n=(e-t)/4294967296;this.buffer[this.position+0]=n>>>24,this.buffer[this.position+1]=n>>>16,this.buffer[this.position+2]=n>>>8,this.buffer[this.position+3]=n>>>0,this.buffer[this.position+4]=t>>>24,this.buffer[this.position+5]=t>>>16,this.buffer[this.position+6]=t>>>8,this.buffer[this.position+7]=t>>>0,this.position+=8}writeBigInt(e){const t=e.toBytes();1===t.length&&0===t[0]?this.writeUInt32(0):this.writeBinary(t)}writeRandom(e){this.ensureCapacity(this.position+e);const t=this.buffer.slice(this.position,this.position+e);s.SshAlgorithms.random.getBytes(t),this.position+=e}skip(e){this.ensureCapacity(this.position+e),this.position+=e}ensureCapacity(e){if(this.buffer.length<e){let t=Math.max(512,2*this.buffer.length);for(;t<e;)t*=2;const n=r.Buffer.alloc(t);this.buffer.copy(n,0,0,this.position),this.buffer=n}}toBuffer(){return this.buffer.slice(0,this.position)}},t.formatBuffer=function(e,t,n){let r=`${void 0===t?"Buffer":t}[${e.length}] (${function(e){a||(a=function(){let e;const t=[];for(let n=0;n<256;n++){e=n;for(let t=0;t<8;t++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}());let t=-1;for(let n=0;n<e.length;n++)t=t>>>8^a[255&(t^e[n])];return(4294967296+((-1^t)>>>0)).toString(16).substr(-8).toUpperCase()}(e)})\n`;if(!1===n)return r;const s=Math.min(2048,e.length);for(let t=0;t<s;t+=16){t<1e3&&(r+="0"),t<100&&(r+="0"),t<10&&(r+="0"),r+=t+":";for(let n=t;n<t+16;n++)r+=n<s?" "+e.slice(n,n+1).toString("hex"):"   ";r+="  ";for(let n=t;n<t+16;n++)if(n<s){const t=e[n];r+=t>32&&t<=127?e.slice(n,n+1).toString():"."}else r+=" ";r+="\n"}return s<e.length&&(r+="...\n"),r}},1915:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshProtocol=void 0;const r=n(4300),s=n(6655),i=n(7399),o=n(6744),a=n(7309),c=n(6306),l=n(5255),u=n(3379),p=n(4608),h=n(6197);class d{constructor(e,t){this.sequence=e,this.message=t}}class f{constructor(e,t,n,o){this.config=t,this.metrics=n,this.trace=o,this.sessionSemaphore=new i.Semaphore(1),this.inboundPacketSequence=0,this.outboundPacketSequence=0,this.inboundFlow=0,this.outboundFlow=0,this.recentSentMessages=new s.Queue,this.sendWriter=new a.SshDataWriter(r.Buffer.alloc(1024)),this.receiveWriter=new a.SshDataWriter(r.Buffer.alloc(1024)),this.traceChannelData=!1,this.extensions=null,this.kexService=null,this.algorithms=null,this.messageContext=null,this.outgoingMessagesHaveLatencyInfo=!1,this.incomingMessagesHaveLatencyInfo=!1,this.outgoingMessagesHaveReconnectInfo=!1,this.incomingMessagesHaveReconnectInfo=!1,this.stream=e,this.traceChannelData=t.traceChannelData}get lastIncomingSequence(){return this.inboundPacketSequence-1}getSentMessages(e){if(e===this.outboundPacketSequence+1)return[];if(this.recentSentMessages.size>0&&e<this.recentSentMessages.peek().sequence)return null;const t=new Array;for(const n of this.recentSentMessages)if(n.sequence>=e){const e=n.message;e instanceof l.KeyExchangeMessage||e instanceof c.DisconnectMessage||t.push(e)}return t}async writeProtocolVersion(e,t){const n=this.stream;if(!n)throw new Error("SSH session disconnected.");const s=r.Buffer.from(e+"\r\n");return await n.write(s,t),this.metrics.addMessageSent(s.length),Promise.resolve()}async readProtocolVersion(e){const t=this.stream;if(!t)throw new Error("SSH session disconnected.");const n=r.Buffer.alloc(255);let s=0;for(let r=0;r<n.length;r++){const i=await t.read(1,e);if(!i)break;n[r]=i[0];const o=13,a=10;if(r>0&&n[r-1]===o&&n[r]===a){const e=n.toString("utf8",0,r-1);if(e.startsWith("SSH-"))return this.metrics.addMessageReceived(r+1),e;if(s>20)break;s++,r=-1}}throw new p.SshConnectionError("Failed to read the protocol version",c.SshDisconnectReason.protocolError)}async handleNewKeys(e){try{await this.sessionSemaphore.wait(e),this.inboundFlow=0,this.outboundFlow=0,this.algorithms=this.kexService.finishKeyExchange()}finally{this.sessionSemaphore.release()}}async read(e,t){const n=this.stream;if(!n)return!1;let r=0;do{let s;try{s=await n.read(e.length-r,t)}catch(e){if(!(e instanceof Error))throw e;if(n.isDisposed)return!1;throw n.dispose(),this.stream=null,this.trace(h.TraceLevel.Error,h.SshTraceEventIds.streamReadError,`Error reading from stream: ${e.message}`,e),new p.SshConnectionError("Error reading from stream: "+e.message,c.SshDisconnectReason.connectionLost)}if(!s)return!1;s.copy(e,r),r+=s.length}while(r<e.length);return!0}async write(e,t){const n=this.stream;if(!n)return!1;try{await n.write(e,t)}catch(e){if(!(e instanceof Error))throw e;if(n.isDisposed)return!1;throw n.dispose(),this.stream=null,this.trace(h.TraceLevel.Error,h.SshTraceEventIds.streamWriteError,`Error writing to stream: ${e.message}`,e),new p.SshConnectionError("Error writing to stream: "+e.message,c.SshDisconnectReason.connectionLost)}return!0}async considerReExchange(e,t){const n=this.kexService;if(!n)return;let r=null,s=null;!n.exchanging&&(e||this.inboundFlow+this.outboundFlow>this.config.keyRotationThreshold)&&([r,s]=await n.startKeyExchange(e)),r&&(await this.sendMessage(r,t),s&&await this.sendMessage(s,t))}async computeHmac(e,t,n){const s=new a.SshDataWriter(r.Buffer.alloc(4+t.length));return s.writeUInt32(n),s.write(t),await e.sign(s.toBuffer())}async verifyHmac(e,t,n,s){const i=new a.SshDataWriter(r.Buffer.alloc(4+t.length));return i.writeUInt32(n),i.write(t),await e.verify(i.toBuffer(),s)}async readAndVerifyHmac(e,t,n,r){if(!await this.read(n,r))return!1;if(!await this.verifyHmac(e,t,this.inboundPacketSequence,n))throw new p.SshConnectionError("Invalid MAC",c.SshDisconnectReason.macError);return!0}async sendMessage(e,t){var n;const s=this.algorithms,i=null==s?void 0:s.compressor,o=null==s?void 0:s.cipher,a=null==s?void 0:s.messageSigner;let c;await this.sessionSemaphore.wait(t);try{const s=o?Math.max(8,o.blockLength):8,l=f.packetLengthSize+f.paddingLengthSize;if(this.sendWriter.position=l,e.write(this.sendWriter),this.outgoingMessagesHaveReconnectInfo&&(this.sendWriter.writeUInt64(this.lastIncomingSequence),this.outgoingMessagesHaveLatencyInfo)){const e=Math.min(4294967295,Math.round(1e3*(this.metrics.time-this.lastIncomingTimestamp)));this.sendWriter.writeUInt32(e)}let p=this.sendWriter.toBuffer().slice(l);null!=i&&(p=i.compress(p));let m=s-(((null==a?void 0:a.encryptThenMac)||(null==a?void 0:a.authenticatedEncryption)?0:f.packetLengthSize)+f.paddingLengthSize+p.length)%s;m<4&&(m+=s);const g=f.paddingLengthSize+p.length+m;this.sendWriter.position=0,this.sendWriter.writeUInt32(g),this.sendWriter.writeByte(m),null!=i?this.sendWriter.write(p):this.sendWriter.position+=p.length,this.sendWriter.writeRandom(m),p=this.sendWriter.toBuffer();let v=null;if((null==a?void 0:a.encryptThenMac)&&o){const e=p.slice(f.packetLengthSize,p.length);(await o.transform(e)).copy(e),v=await this.computeHmac(a,p,this.outboundPacketSequence)}else if(null==a?void 0:a.authenticatedEncryption){const e=p.slice(f.packetLengthSize,p.length);(await o.transform(e)).copy(e),v=await a.sign(e)}else a&&(v=await this.computeHmac(a,p,this.outboundPacketSequence)),o&&(p=await o.transform(p));if(e instanceof u.ChannelDataMessage?this.traceChannelData&&this.trace(h.TraceLevel.Verbose,h.SshTraceEventIds.sendingChannelData,`Sending #${this.outboundPacketSequence} ${e}`):this.trace(h.TraceLevel.Verbose,h.SshTraceEventIds.sendingMessage,`Sending #${this.outboundPacketSequence} ${e}`),this.incomingMessagesHaveReconnectInfo){const t=new d(this.outboundPacketSequence,e);t.sentTime=this.metrics.time,this.recentSentMessages.enqueue(t)}if(this.outboundPacketSequence++,this.outboundFlow+=g,v){const e=r.Buffer.concat([p,v],p.length+v.length);c=await this.write(e,t)}else c=await this.write(p,t);this.metrics.addMessageSent(f.packetLengthSize+g+(null!==(n=null==a?void 0:a.digestLength)&&void 0!==n?n:0))}finally{this.sessionSemaphore.release()}return await this.considerReExchange(!1,t),c}async receiveMessage(e){var t;const n=this.algorithms,r=null==n?void 0:n.decipher,s=null==n?void 0:n.messageVerifier,i=null==n?void 0:n.decompressor,l=!((null==s?void 0:s.encryptThenMac)||(null==s?void 0:s.authenticatedEncryption)),d=l?r?Math.max(8,r.blockLength):8:f.packetLengthSize;this.receiveWriter.position=d;let m=this.receiveWriter.toBuffer();if(!await this.read(m,e))return null;this.lastIncomingTimestamp=this.metrics.time,r&&l&&(m=await r.transform(m),this.receiveWriter.position=0,this.receiveWriter.write(m));const g=new a.SshDataReader(m).readUInt32();if(g>f.maxPacketLength)throw new p.SshConnectionError("Invalid packet length.",c.SshDisconnectReason.protocolError);const v=f.packetLengthSize+g;v>d&&this.receiveWriter.skip(v-d),s&&this.receiveWriter.skip(s.digestLength);const y=this.receiveWriter.toBuffer(),b=y.slice(0,v),w=y.slice(v);let S=b.slice(d,v);if(S.length>0){if(!await this.read(S,e))return null;if((null==s?void 0:s.encryptThenMac)&&!await this.readAndVerifyHmac(s,b,w,e))return null;if(r){if(null==s?void 0:s.authenticatedEncryption){if(!await this.read(w,e))return null;await s.verify(S,w)}try{S=await r.transform(S)}catch(e){throw(null==s?void 0:s.authenticatedEncryption)?new p.SshConnectionError("Invalid MAC",c.SshDisconnectReason.macError):e}this.receiveWriter.position=d,this.receiveWriter.write(S)}}if(s&&!s.encryptThenMac&&!s.authenticatedEncryption&&!await this.readAndVerifyHmac(s,b,w,e))return null;const E=b[f.packetLengthSize];let _=b.slice(f.packetLengthSize+f.paddingLengthSize,f.packetLengthSize+(g-E));if(i&&(_=i.decompress(_)),this.incomingMessagesHaveReconnectInfo){let e,t;if(this.incomingMessagesHaveLatencyInfo){const n=new a.SshDataReader(_.slice(_.length-12,_.length));e=n.readUInt64(),t=n.readUInt32()/1e3,_=_.slice(0,_.length-12)}else e=new a.SshDataReader(_.slice(_.length-8,_.length)).readUInt64(),t=0,_=_.slice(0,_.length-8);for(;this.recentSentMessages.size>0;){const n=this.recentSentMessages.peek();if(n.sequence>e)break;if(this.stream&&this.incomingMessagesHaveLatencyInfo&&n.sequence===e){const e=this.lastIncomingTimestamp-n.sentTime-t;this.metrics.updateLatency(e,this.trace)}this.recentSentMessages.dequeue()}}const x=_[0];let T=o.SshMessage.create(this.config,x,this.messageContext,_);if(!T){const e=new c.UnimplementedMessage;e.sequenceNumber=this.inboundPacketSequence,e.unimplementedMessageType=x,T=e}return T instanceof u.ChannelDataMessage?this.traceChannelData&&this.trace(h.TraceLevel.Verbose,h.SshTraceEventIds.receivingChannelData,`Receiving #${this.inboundPacketSequence} ${T}`):this.trace(h.TraceLevel.Verbose,h.SshTraceEventIds.receivingMessage,`Receiving #${this.inboundPacketSequence} ${T}`),await this.sessionSemaphore.wait(e),this.inboundPacketSequence++,this.inboundFlow+=g,this.sessionSemaphore.release(),this.metrics.addMessageReceived(f.packetLengthSize+g+(null!==(t=null==s?void 0:s.digestLength)&&void 0!==t?t:0)),await this.considerReExchange(!1,e),T}dispose(){try{this.stream&&this.stream.close().catch((e=>{this.trace(h.TraceLevel.Error,h.SshTraceEventIds.streamCloseError,`Error closing stream: ${e.message}`,e)}))}catch(e){if(!(e instanceof Error))throw e;this.trace(h.TraceLevel.Error,h.SshTraceEventIds.streamCloseError,`Error closing stream: ${e.message}`,e)}this.stream=null,this.metrics.updateLatency(0),this.algorithms&&this.algorithms.dispose()}}t.SshProtocol=f,f.maxPacketLength=1048576,f.packetLengthSize=4,f.paddingLengthSize=1},6892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationSuccessMessage=t.AuthenticationFailureMessage=t.PasswordRequestMessage=t.PublicKeyOKMessage=t.AuthenticationInfoResponseMessage=t.AuthenticationInfoRequestMessage=t.PublicKeyRequestMessage=t.AuthenticationRequestMessage=t.AuthenticationMessage=void 0;const r=n(6744);class s extends r.SshMessage{}t.AuthenticationMessage=s;class i extends s{get messageType(){return 50}onRead(e){this.username=e.readString("utf8"),this.serviceName=e.readString("ascii"),this.methodName=e.readString("ascii")}onWrite(e){e.writeString(this.username||"","utf8"),e.writeString(this.serviceName||"","ascii"),e.writeString(this.validateField(this.methodName,"method name"),"ascii")}toString(){return super.toString()+` (Method: ${this.methodName}, Username: ${this.username})`}}t.AuthenticationRequestMessage=i;class o extends i{constructor(){super(),this.methodName="publickey"}get hasSignature(){return!!(this.signature&&this.signature.length>0)}onRead(e){super.onRead(e);const t=e.readBoolean();this.keyAlgorithmName=e.readString("ascii"),this.publicKey=e.readBinary(),t?(this.signature=e.readBinary(),this.payloadWithoutSignature=this.rawBytes.slice(0,this.rawBytes.length-this.signature.length-4)):this.signature=void 0}onWrite(e){var t,n;if(super.onWrite(e),!this.keyAlgorithmName)throw new Error("Key algorithm name not set.");if("hostbased"===this.methodName){if(e.writeString(this.keyAlgorithmName,"ascii"),e.writeBinary(this.publicKey||Buffer.alloc(0)),e.writeString(null!==(t=this.clientHostname)&&void 0!==t?t:"","ascii"),e.writeString(null!==(n=this.clientUsername)&&void 0!==n?n:"","ascii"),!this.hasSignature)throw new Error("A signature is required for a host-based authentcation request.");e.writeBinary(this.signature)}else e.writeBoolean(this.hasSignature),e.writeString(this.keyAlgorithmName,"ascii"),e.writeBinary(this.publicKey||Buffer.alloc(0)),this.hasSignature&&e.writeBinary(this.signature)}}t.PublicKeyRequestMessage=o;class a extends s{get messageType(){return 60}onRead(e){this.name=e.readString("utf8"),this.instruction=e.readString("utf8"),this.language=e.readString("ascii"),this.prompts=[];const t=e.readUInt32(),n=[];for(let r=0;r<t;r++)n.push(e.readString("utf8"));for(let r=0;r<t;r++)this.prompts.push({prompt:n[r],echo:e.readBoolean()})}onWrite(e){var t,n;e.writeString(this.name||"","utf8"),e.writeString(this.instruction||"","utf8"),e.writeString(this.language||"","ascii");const r=null!==(n=null===(t=this.prompts)||void 0===t?void 0:t.length)&&void 0!==n?n:0;e.writeUInt32(r);for(let t=0;t<r;t++)e.writeString(this.prompts[t].prompt||"","utf8");for(let t=0;t<r;t++)e.writeBoolean(this.prompts[t].echo)}}t.AuthenticationInfoRequestMessage=a;class c extends s{get messageType(){return 61}onRead(e){this.responses=[];const t=e.readUInt32();for(let n=0;n<t;n++)this.responses.push(e.readString("utf8"))}onWrite(e){var t,n;const r=null!==(n=null===(t=this.responses)||void 0===t?void 0:t.length)&&void 0!==n?n:0;e.writeUInt32(r);for(let t=0;t<r;t++)e.writeString(this.responses[t]||"","utf8")}}t.AuthenticationInfoResponseMessage=c,t.PublicKeyOKMessage=class extends s{get messageType(){return 60}onRead(e){this.keyAlgorithmName=e.readString("ascii"),this.publicKey=e.readBinary()}onWrite(e){if(!this.keyAlgorithmName)throw new Error("Key algorithm name not set.");if(!this.publicKey)throw new Error("Public key not set.");e.writeString(this.keyAlgorithmName,"ascii"),e.writeBinary(this.publicKey)}},t.PasswordRequestMessage=class extends i{constructor(){super(),this.methodName="password"}onRead(e){super.onRead(e),e.readBoolean(),this.password=e.readString("utf8")}onWrite(e){super.onWrite(e),e.writeBoolean(!1),e.writeString(this.password||"","utf8")}};class l extends s{constructor(){super(...arguments),this.partialSuccess=!1}get messageType(){return 51}onRead(e){this.methodNames=e.readList("ascii"),this.partialSuccess=e.readBoolean()}onWrite(e){e.writeList(this.methodNames||[],"ascii"),e.writeBoolean(this.partialSuccess)}}t.AuthenticationFailureMessage=l;class u extends s{get messageType(){return 52}onRead(e){}onWrite(e){}}t.AuthenticationSuccessMessage=u,r.SshMessage.index.set(50,i),r.SshMessage.index.set(51,l),r.SshMessage.index.set(52,u),r.SshMessage.index.set([60,"publickey"],o),r.SshMessage.index.set([60,"keyboard-interactive"],a),r.SshMessage.index.set([61,"keyboard-interactive"],c)},3379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelFailureMessage=t.ChannelSuccessMessage=t.ChannelSignalMessage=t.CommandRequestMessage=t.ChannelRequestMessage=t.ChannelRequestType=t.ChannelCloseMessage=t.ChannelEofMessage=t.ChannelExtendedDataMessage=t.ChannelDataMessage=t.ChannelWindowAdjustMessage=t.ChannelOpenFailureMessage=t.SshChannelOpenFailureReason=t.ChannelOpenConfirmationMessage=t.ChannelOpenMessage=t.ChannelMessage=t.ConnectionMessage=void 0;const r=n(6744),s=n(7309);class i extends r.SshMessage{}t.ConnectionMessage=i;class o extends i{get recipientChannel(){return this.recipientChannelValue}set recipientChannel(e){e!==this.recipientChannelValue&&(this.recipientChannelValue=e,this.rawBytes&&s.SshDataWriter.writeUInt32(this.rawBytes,1,null!=e?e:0))}onRead(e){this.recipientChannel=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.recipientChannel,"recipient channel"))}toString(){return`${super.toString()} (recipientChannel=${this.recipientChannel})`}}t.ChannelMessage=o;class a extends i{get messageType(){return 90}get senderChannel(){return this.senderChannelValue}set senderChannel(e){e!==this.senderChannelValue&&(this.senderChannelValue=e,this.rawBytes&&this.channelType&&s.SshDataWriter.writeUInt32(this.rawBytes,5+this.channelType.length,null!=e?e:0))}onRead(e){this.channelType=e.readString("ascii"),this.senderChannel=e.readUInt32(),this.maxWindowSize=e.readUInt32(),this.maxPacketSize=e.readUInt32()}onWrite(e){e.writeString(this.validateField(this.channelType,"channel type"),"ascii"),e.writeUInt32(this.validateField(this.senderChannel,"sender channel")),e.writeUInt32(this.maxWindowSize||a.defaultMaxWindowSize),e.writeUInt32(this.maxPacketSize||a.defaultMaxPacketSize)}toString(){return`${super.toString()}(channelType=${this.channelType}, senderChannel=${this.senderChannel})`}}t.ChannelOpenMessage=a,a.defaultMaxPacketSize=32768,a.defaultMaxWindowSize=1048576;class c extends o{get messageType(){return 91}onRead(e){super.onRead(e),this.senderChannel=e.readUInt32(),this.maxWindowSize=e.readUInt32(),this.maxPacketSize=e.readUInt32()}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.senderChannel,"sender channel")),e.writeUInt32(this.validateField(this.maxWindowSize,"max window size")),e.writeUInt32(this.validateField(this.maxPacketSize,"max packet size"))}toString(){return`${super.toString()}(senderChannel=${this.senderChannel})`}}var l,u;t.ChannelOpenConfirmationMessage=c,function(e){e[e.none=0]="none",e[e.administrativelyProhibited=1]="administrativelyProhibited",e[e.connectFailed=2]="connectFailed",e[e.unknownChannelType=3]="unknownChannelType",e[e.resourceShortage=4]="resourceShortage"}(l=t.SshChannelOpenFailureReason||(t.SshChannelOpenFailureReason={}));class p extends o{get messageType(){return 92}onRead(e){super.onRead(e),this.reasonCode=e.readUInt32(),this.description=e.readString("utf8"),this.language=e.readString("ascii")}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.reasonCode,"reason code")),e.writeString(this.description||"","utf8"),e.writeString(this.language||"en","ascii")}toString(){return`${super.toString()} (${l[this.reasonCode||0]}: ${this.description})`}}t.ChannelOpenFailureMessage=p;class h extends o{get messageType(){return 93}onRead(e){super.onRead(e),this.bytesToAdd=e.readUInt32()}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.bytesToAdd,"bytes to add"))}toString(){return`${super.toString()} (bytesToAdd=${this.bytesToAdd})`}}t.ChannelWindowAdjustMessage=h;class d extends o{get messageType(){return 94}onRead(e){super.onRead(e),this.data=e.readBinary()}onWrite(e){super.onWrite(e),e.writeBinary(this.validateField(this.data,"data"))}toString(){return this.data?(0,s.formatBuffer)(this.data,""):"[0]"}}t.ChannelDataMessage=d;class f extends o{get messageType(){return 95}onRead(e){super.onRead(e),this.dataTypeCode=e.readUInt32(),this.data=e.readBinary()}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.dataTypeCode,"data type code")),e.writeBinary(this.validateField(this.data,"data"))}toString(){return`${super.toString()} (dataTypeCode=${this.dataTypeCode}, data=${this.data?(0,s.formatBuffer)(this.data,""):"[0]"})`}}t.ChannelExtendedDataMessage=f;class m extends o{get messageType(){return 96}}t.ChannelEofMessage=m;class g extends o{get messageType(){return 97}}t.ChannelCloseMessage=g,function(e){e.command="exec",e.shell="shell",e.terminal="pty-req",e.signal="signal",e.exitSignal="exit-signal",e.exitStatus="exit-status"}(u=t.ChannelRequestType||(t.ChannelRequestType={}));class v extends o{constructor(e,t){super(),this.requestType=e,this.wantReply=null!=t&&t}get messageType(){return 98}onRead(e){super.onRead(e),this.requestType=e.readString("ascii"),this.wantReply=e.readBoolean()}onWrite(e){void 0===this.recipientChannel&&(this.recipientChannel=0),super.onWrite(e),e.writeString(this.validateField(this.requestType,"request type"),"ascii"),e.writeBoolean(this.wantReply)}}t.ChannelRequestMessage=v,t.CommandRequestMessage=class extends v{constructor(){super(),this.requestType=u.command}onRead(e){super.onRead(e),this.command=e.readString("utf8")}onWrite(e){super.onWrite(e),e.writeString(this.validateField(this.command,"command"),"utf8")}toString(){return`${super.toString()} (requestType=${this.requestType})`}},t.ChannelSignalMessage=class extends v{constructor(){super()}get signal(){return this.signalValue}set signal(e){this.requestType=u.signal,this.signalValue=e}get exitSignal(){return this.signalValue}set exitSignal(e){this.requestType=u.exitSignal,this.signalValue=e}get errorMessage(){return this.errorMessageValue}set errorMessage(e){if(this.requestType!==u.exitSignal)throw new Error(`Error message property is only valid for ${u.exitSignal} messages.`);this.errorMessageValue=e}get exitStatus(){return this.statusValue}set exitStatus(e){this.requestType=u.exitStatus,this.statusValue=e}onRead(e){switch(super.onRead(e),this.requestType){case u.exitStatus:this.exitStatus=e.readUInt32();break;case u.signal:this.signal=e.readString("ascii");break;case u.exitSignal:this.exitSignal=e.readString("ascii"),e.readBoolean(),this.errorMessage=e.readString("utf8"),e.readString("ascii")}}onWrite(e){if(!this.requestType)throw new Error("Signal message request type not set.");switch(this.wantReply=!1,super.onWrite(e),this.requestType){case u.exitStatus:e.writeUInt32(this.validateField(this.exitStatus,"exit status"));break;case u.signal:e.writeString(this.validateField(this.signal,"signal"),"ascii");break;case u.exitSignal:e.writeString(this.validateField(this.exitSignal,"exit signal"),"ascii"),e.writeBoolean(!1),e.writeString(this.errorMessage||"","utf8"),e.writeString("","ascii");break;default:throw new Error(`Unknown signal message request type: ${this.requestType}`)}}};class y extends o{get messageType(){return 99}}t.ChannelSuccessMessage=y;class b extends o{get messageType(){return 100}}t.ChannelFailureMessage=b,r.SshMessage.index.set(90,a),r.SshMessage.index.set(91,c),r.SshMessage.index.set(92,p),r.SshMessage.index.set(93,h),r.SshMessage.index.set(94,d),r.SshMessage.index.set(95,f),r.SshMessage.index.set(96,m),r.SshMessage.index.set(97,g),r.SshMessage.index.set(98,v),r.SshMessage.index.set(99,y),r.SshMessage.index.set(100,b)},5255:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewKeysMessage=t.KeyExchangeDhReplyMessage=t.KeyExchangeDhInitMessage=t.KeyExchangeInitMessage=t.KeyExchangeMessage=void 0;const r=n(4300),s=n(6744),i=n(7521);class o extends s.SshMessage{}t.KeyExchangeMessage=o;class a extends o{get messageType(){return 20}onRead(e){this.cookie=e.read(16),this.keyExchangeAlgorithms=e.readList("ascii"),this.serverHostKeyAlgorithms=e.readList("ascii"),this.encryptionAlgorithmsClientToServer=e.readList("ascii"),this.encryptionAlgorithmsServerToClient=e.readList("ascii"),this.macAlgorithmsClientToServer=e.readList("ascii"),this.macAlgorithmsServerToClient=e.readList("ascii"),this.compressionAlgorithmsClientToServer=e.readList("ascii"),this.compressionAlgorithmsServerToClient=e.readList("ascii"),this.languagesClientToServer=e.readList("ascii"),this.languagesServerToClient=e.readList("ascii"),this.firstKexPacketFollows=e.readBoolean(),this.reserved=e.readUInt32()}onWrite(e){var t;this.cookie||(this.cookie=r.Buffer.alloc(16),i.SshAlgorithms.random.getBytes(this.cookie)),e.write(this.cookie),e.writeList(this.keyExchangeAlgorithms||[],"ascii"),e.writeList(this.serverHostKeyAlgorithms||[],"ascii"),e.writeList(this.encryptionAlgorithmsClientToServer||[],"ascii"),e.writeList(this.encryptionAlgorithmsServerToClient||[],"ascii"),e.writeList(this.macAlgorithmsClientToServer||[],"ascii"),e.writeList(this.macAlgorithmsServerToClient||[],"ascii"),e.writeList(this.compressionAlgorithmsClientToServer||[],"ascii"),e.writeList(this.compressionAlgorithmsServerToClient||[],"ascii"),e.writeList(this.languagesClientToServer||[],"ascii"),e.writeList(this.languagesServerToClient||[],"ascii"),e.writeBoolean(null!==(t=this.firstKexPacketFollows)&&void 0!==t&&t),e.writeUInt32(this.reserved||0)}static CreateNone(){const e=["none"],t=[""],n=new a;return n.cookie=r.Buffer.alloc(16),n.keyExchangeAlgorithms=e,n.serverHostKeyAlgorithms=e,n.encryptionAlgorithmsClientToServer=e,n.encryptionAlgorithmsServerToClient=e,n.macAlgorithmsClientToServer=e,n.macAlgorithmsServerToClient=e,n.compressionAlgorithmsClientToServer=e,n.compressionAlgorithmsServerToClient=e,n.languagesClientToServer=t,n.languagesServerToClient=t,n.rawBytes=n.toBuffer(),n}get allowsNone(){const e=e=>!0===(null==e?void 0:e.includes("none"));return e(this.keyExchangeAlgorithms)&&e(this.serverHostKeyAlgorithms)&&e(this.encryptionAlgorithmsClientToServer)&&e(this.encryptionAlgorithmsServerToClient)&&e(this.macAlgorithmsClientToServer)&&e(this.macAlgorithmsServerToClient)&&e(this.compressionAlgorithmsClientToServer)&&e(this.compressionAlgorithmsServerToClient)&&!0!==this.firstKexPacketFollows}}t.KeyExchangeInitMessage=a,a.none=a.CreateNone();class c extends o{get messageType(){return 30}onRead(e){this.e=e.readBinary()}onWrite(e){e.writeBinary(this.validateField(this.e,"E"))}}t.KeyExchangeDhInitMessage=c;class l extends o{get messageType(){return 31}onRead(e){this.hostKey=e.readBinary(),this.f=e.readBinary(),this.signature=e.readBinary()}onWrite(e){e.writeBinary(this.validateField(this.hostKey,"host key")),e.writeBinary(this.validateField(this.f,"F")),e.writeBinary(this.validateField(this.signature,"signature"))}}t.KeyExchangeDhReplyMessage=l;class u extends o{get messageType(){return 21}onRead(e){}onWrite(e){}}t.NewKeysMessage=u,s.SshMessage.index.set(20,a),s.SshMessage.index.set(30,c),s.SshMessage.index.set(31,l),s.SshMessage.index.set(21,u)},6744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshMessage=void 0;const r=n(4300),s=n(7309);class i{get messageType(){return 0}toBuffer(){const e=new s.SshDataWriter(r.Buffer.alloc(16));return this.write(e),e.toBuffer()}read(e){this.rawBytes=e.buffer;const t=e.readByte();if(t!==this.messageType)throw new Error(`Message type ${t} is not valid.`);this.onRead(e)}write(e){this.rawBytes?e.write(this.rawBytes):(e.writeByte(this.messageType),this.onWrite(e))}rewrite(){if(this.rawBytes){const e=new s.SshDataWriter(r.Buffer.alloc(16));e.writeByte(this.messageType),this.onWrite(e),this.rawBytes=e.toBuffer()}}onRead(e){throw new Error("Not supported.")}onWrite(e){throw new Error("Not supported.")}validateField(e,t){if(void 0===e)throw new Error(`${this.constructor.name} ${t} is required.`);return e}toString(){return this.constructor.name}static create(e,t,n,r){let i=e.messages.get(t);if(!i&&n){const r=e.contextualMessages.get(n);r&&(i=r.get(t))}if(i){const e=new i;return e.read(new s.SshDataReader(r)),e}return null}convertTo(e,t=!1){const n=new s.SshDataReader(t?r.Buffer.from(this.rawBytes):this.rawBytes);return e.read(n),e}}t.SshMessage=i,i.index=new Map},6306:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionReconnectFailureMessage=t.SshReconnectFailureReason=t.SessionReconnectResponseMessage=t.SessionReconnectRequestMessage=t.SessionChannelRequestMessage=t.ExtensionInfoMessage=t.SessionRequestFailureMessage=t.SessionRequestSuccessMessage=t.SessionRequestMessage=t.ServiceAcceptMessage=t.ServiceRequestMessage=t.DebugMessage=t.UnimplementedMessage=t.IgnoreMessage=t.DisconnectMessage=t.SshDisconnectReason=void 0;const r=n(6744),s=n(3379);var i,o;!function(e){e[e.none=0]="none",e[e.hostNotAllowedToConnect=1]="hostNotAllowedToConnect",e[e.protocolError=2]="protocolError",e[e.keyExchangeFailed=3]="keyExchangeFailed",e[e.reserved=4]="reserved",e[e.macError=5]="macError",e[e.compressionError=6]="compressionError",e[e.serviceNotAvailable=7]="serviceNotAvailable",e[e.protocolVersionNotSupported=8]="protocolVersionNotSupported",e[e.hostKeyNotVerifiable=9]="hostKeyNotVerifiable",e[e.connectionLost=10]="connectionLost",e[e.byApplication=11]="byApplication",e[e.tooManyConnections=12]="tooManyConnections",e[e.authCancelledByUser=13]="authCancelledByUser",e[e.noMoreAuthMethodsAvailable=14]="noMoreAuthMethodsAvailable",e[e.illegalUserName=15]="illegalUserName"}(i=t.SshDisconnectReason||(t.SshDisconnectReason={}));class a extends r.SshMessage{get messageType(){return 1}onRead(e){this.reasonCode=e.readUInt32(),this.description=e.readString("utf8"),e.available>=4?this.language=e.readString("ascii"):this.language=null}onWrite(e){e.writeUInt32(this.validateField(this.reasonCode,"reason code")),e.writeString(this.description||"","utf8"),this.language&&e.writeString(this.language,"ascii")}toString(){return`${super.toString()} (${i[this.reasonCode||0]}: ${this.description})`}}t.DisconnectMessage=a;class c extends r.SshMessage{get messageType(){return 2}onRead(e){}onWrite(e){}}t.IgnoreMessage=c;class l extends r.SshMessage{get messageType(){return 3}onRead(e){this.sequenceNumber=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.sequenceNumber,"sequence number"))}toString(){return this.unimplementedMessageType?`${super.toString()} (messageType=${this.unimplementedMessageType})`:`${super.toString()} (sequenceNumber=${this.sequenceNumber})`}}t.UnimplementedMessage=l;class u extends r.SshMessage{constructor(e){super(),this.alwaysDisplay=!1,this.message=e}get messageType(){return 4}onRead(e){this.alwaysDisplay=e.readBoolean(),this.message=e.readString("utf8"),this.language=e.readString("ascii")}onWrite(e){var t,n;e.writeBoolean(this.alwaysDisplay),e.writeString(null!==(t=this.message)&&void 0!==t?t:"","utf8"),e.writeString(null!==(n=this.language)&&void 0!==n?n:"","ascii")}toString(){return`${super.toString()}: ${this.message}`}}t.DebugMessage=u;class p extends r.SshMessage{get messageType(){return 5}onRead(e){this.serviceName=e.readString("ascii")}onWrite(e){e.writeString(this.validateField(this.serviceName,"service name"),"ascii")}}t.ServiceRequestMessage=p;class h extends r.SshMessage{get messageType(){return 6}onRead(e){this.serviceName=e.readString("ascii")}onWrite(e){e.writeString(this.validateField(this.serviceName,"service name"),"ascii")}}t.ServiceAcceptMessage=h;class d extends r.SshMessage{constructor(e,t){super(),this.requestType=e,this.wantReply=null!=t&&t}get messageType(){return 80}onRead(e){this.requestType=e.readString("ascii"),this.wantReply=e.readBoolean()}onWrite(e){e.writeString(this.validateField(this.requestType,"request type"),"ascii"),e.writeBoolean(this.wantReply)}toString(){return`${super.toString()} (requestType=${this.requestType})`}}t.SessionRequestMessage=d;class f extends r.SshMessage{get messageType(){return 81}onRead(e){}onWrite(e){}}t.SessionRequestSuccessMessage=f;class m extends r.SshMessage{get messageType(){return 82}onRead(e){}onWrite(e){}}t.SessionRequestFailureMessage=m;class g extends r.SshMessage{constructor(){super(...arguments),this.extensionInfo={}}get messageType(){return 7}onRead(e){const t=e.readUInt32();this.extensionInfo={};for(let n=0;n<t;n++){const t=e.readString("ascii"),n=e.readString("utf8");this.extensionInfo[t]=n}}onWrite(e){const t=Object.keys(this.extensionInfo);e.writeUInt32(t.length);for(const n of t)e.writeString(n,"ascii"),e.writeString(this.extensionInfo[n]||"","utf8")}toString(){let e="";for(const[t,n]of Object.entries(this.extensionInfo))e&&(e+="; "),e+=t,n&&(e+="="+n);return`${super.toString()} (${e})`}}t.ExtensionInfoMessage=g,g.serverIndicator="ext-info-c",g.clientIndicator="ext-info-c",t.SessionChannelRequestMessage=class extends d{onRead(e){super.onRead(e),this.senderChannel=e.readUInt32();const t=new s.ChannelRequestMessage;t.read(e),this.request=t}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.senderChannel,"sender channel")),this.validateField(this.request,"request message").write(e)}},t.SessionReconnectRequestMessage=class extends d{onRead(e){super.onRead(e),this.clientReconnectToken=e.readBinary(),this.lastReceivedSequenceNumber=e.readUInt64()}onWrite(e){super.onWrite(e),e.writeBinary(this.validateField(this.clientReconnectToken,"clientReconnectToken")),e.writeUInt64(this.validateField(this.lastReceivedSequenceNumber,"lastReceivedSequenceNumber"))}},t.SessionReconnectResponseMessage=class extends f{onRead(e){super.onRead(e),this.serverReconnectToken=e.readBinary(),this.lastReceivedSequenceNumber=e.readUInt64()}onWrite(e){super.onWrite(e),e.writeBinary(this.validateField(this.serverReconnectToken,"serverReconnectToken")),e.writeUInt64(this.validateField(this.lastReceivedSequenceNumber,"lastReceivedSequenceNumber"))}},function(e){e[e.none=0]="none",e[e.unknownServerFailure=1]="unknownServerFailure",e[e.sessionNotFound=2]="sessionNotFound",e[e.invalidClientReconnectToken=3]="invalidClientReconnectToken",e[e.serverDroppedMessages=4]="serverDroppedMessages",e[e.unknownClientFailure=101]="unknownClientFailure",e[e.differentServerHostKey=102]="differentServerHostKey",e[e.invalidServerReconnectToken=103]="invalidServerReconnectToken",e[e.clientDroppedMessages=104]="clientDroppedMessages"}(o=t.SshReconnectFailureReason||(t.SshReconnectFailureReason={})),t.SessionReconnectFailureMessage=class extends m{onRead(e){e.available>0&&(this.reasonCode=e.readUInt32(),this.description=e.readString("utf8"),this.language=e.readString("ascii"))}onWrite(e){e.writeUInt32(this.validateField(this.reasonCode,"reason code")),e.writeString(this.description||"","utf8"),e.writeString(this.language||"en","ascii")}toString(){return`${super.toString()} (${o[this.reasonCode||0]}: ${this.description})`}},r.SshMessage.index.set(1,a),r.SshMessage.index.set(2,c),r.SshMessage.index.set(3,l),r.SshMessage.index.set(5,p),r.SshMessage.index.set(6,h),r.SshMessage.index.set(7,g),r.SshMessage.index.set(80,d),r.SshMessage.index.set(81,f),r.SshMessage.index.set(82,m)},8614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelMetrics=void 0,t.ChannelMetrics=class{constructor(){this.bytesSentSum=0,this.bytesReceivedSum=0}get bytesSent(){return this.bytesSentSum}get bytesReceived(){return this.bytesReceivedSum}addBytesSent(e){this.bytesSentSum+=e}addBytesReceived(e){this.bytesReceivedSum+=e}toString(){return`Bytes S/R: ${this.bytesSent} / ${this.bytesReceived}; `}}},2750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionContour=void 0;const r=n(4608),s=n(6655),i=n(7399);class o{constructor(e=256){if(this.intervalMs=o.initialInterval,this.count=0,this.updateQueue=new s.Queue,this.updateSemaphore=new i.Semaphore(0),this.disposed=!1,e<2||0!=(e&e-1))throw new Error("Contour intervals must be a power of two.");this.maxIntervals=e,this.intervalBytesSent=new Array(e),this.intervalBytesReceived=new Array(e),this.intervalLatencyMin=new Array(e),this.intervalLatencyMax=new Array(e),this.intervalLatencySum=new Array(e),this.intervalLatencyCount=new Array(e),this.intervalLatencyAvg=new Array(e),this.intervalBytesSent.fill(0),this.intervalBytesReceived.fill(0),this.intervalLatencyMin.fill(0),this.intervalLatencyMax.fill(0),this.intervalLatencySum.fill(0),this.intervalLatencyCount.fill(0),this.intervalLatencyAvg.fill(0)}get intervalCount(){return this.count}get interval(){return this.intervalMs}get bytesSent(){return this.intervalBytesSent.slice(0,this.count)}get bytesReceived(){return this.intervalBytesReceived.slice(0,this.count)}get latencyMinMs(){return this.intervalLatencyMin.slice(0,this.count)}get latencyMaxMs(){return this.intervalLatencyMax.slice(0,this.count)}get latencyAverageMs(){return this.intervalLatencyAvg.slice(0,this.count)}onMessageSent(e){this.updateQueue.enqueue({time:e.time,bytesSent:e.size}),this.updateSemaphore.tryRelease()}onMessageReceived(e){this.updateQueue.enqueue({time:e.time,bytesReceived:e.size}),this.updateSemaphore.tryRelease()}onLatencyUpdated(e){this.updateQueue.enqueue(e),this.updateSemaphore.tryRelease()}onSessionClosed(){this.updateSemaphore.tryRelease()}async collectMetrics(e,t){if(!e)throw new TypeError("A session metrics object is required.");if(this.disposed)throw new r.ObjectDisposedError(this);const n=[];n.push(e.onMessageSent(this.onMessageSent.bind(this))),n.push(e.onMessageReceived(this.onMessageReceived.bind(this))),n.push(e.onLatencyUpdated(this.onLatencyUpdated.bind(this))),n.push(e.onSessionClosed(this.onSessionClosed.bind(this)));try{for(;!(null==t?void 0:t.isCancellationRequested);){try{await this.updateSemaphore.wait(t)}catch(e){break}const e=this.updateQueue.dequeue();if(!e)break;const n=this.updateInterval(e.time);e.bytesSent&&(this.intervalBytesSent[n]+=e.bytesSent),e.bytesReceived&&(this.intervalBytesReceived[n]+=e.bytesReceived);const r=e.latency;r&&((!this.intervalLatencyMin[n]||r<this.intervalLatencyMin[n])&&(this.intervalLatencyMin[n]=r),(!this.intervalLatencyMax[n]||r>this.intervalLatencyMax[n])&&(this.intervalLatencyMax[n]=r),this.intervalLatencySum[n]+=r,this.intervalLatencyCount[n]++,this.intervalLatencyAvg[n]=this.intervalLatencySum[n]/this.intervalLatencyCount[n])}this.disposed&&this.updateSemaphore.dispose()}finally{for(const e of n)e.dispose()}}updateInterval(e){let t=Math.floor(e/this.intervalMs);if(t>=this.intervalCount){for(;t>=this.maxIntervals;)this.expandIntervals(),t=Math.floor(e/this.intervalMs);this.count=t+1}return t}expandIntervals(){const e=(e,t,n)=>0===e?t:0===t?e:n(e,t),t=this.maxIntervals/2;for(let n=0;n<t;n++){const t=2*n,r=2*n+1;this.intervalBytesSent[n]=this.intervalBytesSent[t]+this.intervalBytesSent[r],this.intervalBytesReceived[n]=this.intervalBytesReceived[t]+this.intervalBytesReceived[r],this.intervalLatencyMin[n]=e(this.intervalLatencyMin[t],this.intervalLatencyMin[r],Math.min),this.intervalLatencyMax[n]=e(this.intervalLatencyMax[t],this.intervalLatencyMax[r],Math.max),this.intervalLatencySum[n]=this.intervalLatencySum[t]+this.intervalLatencySum[r];const s=this.intervalLatencyCount[t]+this.intervalLatencyCount[r];this.intervalLatencyCount[n]=s,this.intervalLatencyAvg[n]=0===s?0:this.intervalLatencySum[n]/this.intervalLatencyCount[n]}this.intervalBytesSent.fill(0,t,this.maxIntervals),this.intervalBytesReceived.fill(0,t,this.maxIntervals),this.intervalLatencyMin.fill(0,t,this.maxIntervals),this.intervalLatencyMax.fill(0,t,this.maxIntervals),this.intervalLatencySum.fill(0,t,this.maxIntervals),this.intervalLatencyCount.fill(0,t,this.maxIntervals),this.intervalLatencyAvg.fill(0,t,this.maxIntervals),this.intervalMs*=2}dispose(){this.disposed=!0,this.updateSemaphore.tryRelease()}export(){const e=e=>Math.max(0,Math.ceil(Math.log2(Math.max(...e)/255))),t=(e,t)=>Math.round(e/Math.pow(2,t)),n=Buffer.alloc(3+5*(2+this.intervalCount)),r=Math.log2(this.interval/o.initialInterval);n[0]=1,n[1]=5,n[2]=r,n[3]=e(this.latencyMinMs),n[4]=e(this.latencyMaxMs),n[5]=e(this.latencyAverageMs),n[6]=e(this.bytesSent),n[7]=e(this.bytesReceived),n[8]=a.latencyMin,n[9]=a.latencyMax,n[10]=a.latencyAverage,n[11]=a.bytesSent,n[12]=a.bytesReceived;for(let e=0;e<this.intervalCount;e++){const r=13+5*e;n[r+0]=t(this.intervalLatencyMin[e],n[3]),n[r+1]=t(this.intervalLatencyMax[e],n[4]),n[r+2]=t(this.intervalLatencyAvg[e],n[5]),n[r+3]=t(this.intervalBytesSent[e],n[6]),n[r+4]=t(this.intervalBytesReceived[e],n[7])}return n.toString("base64")}static import(e){const t=Buffer.from(e,"base64");if(t.length<3)throw new Error("Invalid session contour string.");const n=t[0],r=t[1],s=t[2];if(1!==n)throw new Error(`Unsupported session contour version: ${n}`);const i=(t.length-3)/r-2;if(i<1||t.length!==3+r*(i+2))throw new Error("Incomplete session contour string.");const c=Math.pow(2,Math.ceil(Math.log2(i))),l=new o(c);l.intervalMs=Math.pow(2,s)*o.initialInterval,l.count=i;const u=new Array(r);for(let e=0;e<r;e++)u[e]=Math.pow(2,t[3+e]);const p=new Array(r);for(let e=0;e<r;e++)p[e]=t[3+r+e];for(let e=0;e<i;e++){const n=3+(2+e)*r;for(let s=0;s<r;s++)switch(p[s]){case a.latencyMin:l.intervalLatencyMin[e]=t[n+s]*u[s];break;case a.latencyMax:l.intervalLatencyMax[e]=t[n+s]*u[s];break;case a.latencyAverage:l.intervalLatencyAvg[e]=l.intervalLatencySum[e]=t[n+s]*u[s],l.intervalLatencyCount[e]=0===t[n+s]?0:1;break;case a.bytesSent:l.intervalBytesSent[e]=t[n+s]*u[s];break;case a.bytesReceived:l.intervalBytesReceived[e]=t[n+s]*u[s]}}return l}}var a;t.SessionContour=o,o.initialInterval=1e3,function(e){e[e.none=0]="none",e[e.latencyMin=1]="latencyMin",e[e.latencyMax=2]="latencyMax",e[e.latencyAverage=3]="latencyAverage",e[e.bytesSent=11]="bytesSent",e[e.bytesReceived=12]="bytesReceived"}(a||(a={}))},4340:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionMetrics=void 0;const r=n(5844),s=n(6197);t.SessionMetrics=class{constructor(){this.startTime=0,this.messagesSentCount=0,this.messagesReceivedCount=0,this.bytesSentSum=0,this.bytesReceivedSum=0,this.reconnectionsCount=0,this.currentLatency=0,this.minLatency=0,this.maxLatency=0,this.latencySum=0,this.latencyCount=0,this.messageSentEmitter=new r.Emitter,this.onMessageSent=this.messageSentEmitter.event,this.messageReceivedEmitter=new r.Emitter,this.onMessageReceived=this.messageReceivedEmitter.event,this.latencyUpdatedEmitter=new r.Emitter,this.onLatencyUpdated=this.latencyUpdatedEmitter.event,this.sessionClosedEmitter=new r.Emitter,this.onSessionClosed=this.sessionClosedEmitter.event,"object"==typeof performance&&"function"==typeof performance.now?Object.defineProperty(this,"time",{get:this.browserTime}):"object"==typeof process&&"function"==typeof process.hrtime&&Object.defineProperty(this,"time",{get:this.nodejsTime}),this.startTime=this.time}get time(){return Date.now()-this.startTime}browserTime(){return performance.now()-this.startTime}nodejsTime(){const[e,t]=process.hrtime();return 1e3*e+t/1e6-this.startTime}get messagesSent(){return this.messagesSentCount}get messagesReceived(){return this.messagesReceivedCount}get bytesSent(){return this.bytesSentSum}get bytesReceived(){return this.bytesReceivedSum}get reconnections(){return this.reconnectionsCount}get latencyAverageMs(){return 0===this.latencyCount?0:this.latencySum/this.latencyCount}get latencyMinMs(){return this.minLatency}get latencyMaxMs(){return this.maxLatency}get latencyCurrentMs(){return this.currentLatency}addMessageSent(e){this.messagesSentCount++,this.bytesSentSum+=e,this.messageSentEmitter.fire({time:this.time,size:e})}addMessageReceived(e){this.messagesReceivedCount++,this.bytesReceivedSum+=e,this.messageReceivedEmitter.fire({time:this.time,size:e})}addReconnection(){this.reconnectionsCount++}updateLatency(e,t){e<0?t&&t(s.TraceLevel.Warning,s.SshTraceEventIds.metricsError,`Measured latency was negative: ${e} us`):(this.currentLatency=e,0!==e&&((0===this.minLatency||e<this.minLatency)&&(this.minLatency=e),(0===this.maxLatency||e>this.maxLatency)&&(this.maxLatency=e),this.latencySum+=e,this.latencyCount++,this.latencyUpdatedEmitter.fire({time:this.time,latency:e})))}close(){this.currentLatency=0,this.sessionClosedEmitter.fire()}toString(){let e=`Messages S/R: ${this.messagesSent} / ${this.messagesReceived}; Bytes S/R: ${this.bytesSent} / ${this.bytesReceived}; Reconnections: ${this.reconnections}; `;const t=this.minLatency>=10?1:this.minLatency>=1?10:100;return this.maxLatency>0&&(e+=`Latency Min-Avg-Max: ${Math.round(this.minLatency*t)/t} - ${Math.round(this.latencySum/this.latencyCount*t)/t} - ${Math.round(this.maxLatency*t)/t} ms; `),this.currentLatency>0&&(e+=`Current Latency: ${Math.round(this.currentLatency*t)/t} ms; `),e}}},9141:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiChannelStream=void 0;const r=n(5844),s=n(9273),i=n(6373),o=n(7492),a=n(9872),c=n(6306),l=n(6197),u=n(3379),p=n(1039);t.MultiChannelStream=class{constructor(e){if(this.transportStream=e,this.disposed=!1,this.disposables=[],this.reportProgressEmitter=new r.Emitter,this.onReportProgress=this.reportProgressEmitter.event,this.channelMaxWindowSize=s.SshChannel.defaultMaxWindowSize,this.closedEmitter=new r.Emitter,this.onClosed=this.closedEmitter.event,this.channelOpeningEmitter=new r.Emitter,this.onChannelOpening=this.channelOpeningEmitter.event,!e)throw new TypeError("transportStream is required.");const t=new a.SshSessionConfiguration(!1);this.session=new o.SshSession(t),this.session.onReportProgress((e=>this.raiseReportProgress(e.progress,e.sessionNumber)),this,this.disposables),this.session.onClosed(this.onSessionClosed,this,this.disposables),this.session.onChannelOpening(this.onSessionChannelOpening,this,this.disposables)}get trace(){return this.session.trace}set trace(e){this.session.trace=e}raiseReportProgress(e,t){const n=new p.SshReportProgressEventArgs(e,t);this.reportProgressEmitter.fire(n)}get isClosed(){return this.disposed||this.session.isClosed}async connect(e){await this.session.connect(this.transportStream,e)}async acceptChannel(e,t){return await this.session.connect(this.transportStream,t),await this.session.acceptChannel(e,t)}async acceptStream(e,t){return this.createStream(await this.acceptChannel(e,t))}async openChannel(e,t){await this.session.connect(this.transportStream,t);const n=new u.ChannelOpenMessage;return n.channelType=null!=e?e:s.SshChannel.sessionChannelType,n.maxWindowSize=this.channelMaxWindowSize,await this.session.openChannel(n,null,t)}async openStream(e,t){return this.createStream(await this.openChannel(e,t))}createStream(e){return new i.SshStream(e)}async connectAndRunUntilClosed(e){const t=[],n=new Promise(((n,r)=>{null==e||e.onCancellationRequested(r,null,t),this.session.onClosed(n,null,t)}));try{await this.connect(e),await n}finally{t.forEach((e=>e.dispose())),await this.close()}}dispose(){if(!this.disposed){this.disposed=!0,this.session.dispose(),this.unsubscribe();try{this.transportStream&&this.transportStream.close().catch((e=>{this.trace(l.TraceLevel.Error,l.SshTraceEventIds.streamCloseError,`Error closing transport stream: ${e.message}`,e)}))}catch(e){if(!(e instanceof Error))throw e;this.trace(l.TraceLevel.Error,l.SshTraceEventIds.streamCloseError,`Error closing transport stream: ${e.message}`,e)}}}async close(){this.disposed||(this.disposed=!0,await this.session.close(c.SshDisconnectReason.none,"SshSession disposed"),this.session.dispose(),this.unsubscribe(),await this.transportStream.close())}onSessionClosed(e){this.unsubscribe(),this.closedEmitter.fire(e)}onSessionChannelOpening(e){e.isRemoteRequest&&(e.channel.maxWindowSize=this.channelMaxWindowSize),this.channelOpeningEmitter.fire(e)}unsubscribe(){this.disposables.forEach((e=>e.dispose())),this.disposables=[]}}},3661:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PipeExtensions=void 0;const r=n(4300),s=n(5844),i=n(6306),o=n(3379),a=n(3305),c=n(4608),l=n(6197);class u{static async pipeSession(e,t){if(!e)throw new TypeError("Session is required.");if(!t)throw new TypeError("Target session is required");const n=new a.PromiseCompletionSource;e.onRequest((e=>{e.responsePromise=u.forwardSessionRequest(e,t,e.cancellation)})),t.onRequest((t=>{t.responsePromise=u.forwardSessionRequest(t,e,t.cancellation)})),e.onChannelOpening((e=>{e.isRemoteRequest&&(e.openingPromise=u.forwardChannel(e,t,e.cancellation))})),t.onChannelOpening((t=>{t.isRemoteRequest&&(t.openingPromise=u.forwardChannel(t,e,t.cancellation))})),e.onClosed((e=>{n.resolve(u.forwardSessionClose(t,e))})),t.onClosed((t=>{n.resolve(u.forwardSessionClose(e,t))}));const r=await n.promise;await r}static async pipeChannel(e,t){if(!e)throw new TypeError("Channel is required.");if(!t)throw new TypeError("Target channel is required");const n=new a.PromiseCompletionSource;let s=!1;e.onRequest((e=>{e.responsePromise=u.forwardChannelRequest(e,t,e.cancellation)})),t.onRequest((t=>{t.responsePromise=u.forwardChannelRequest(t,e,t.cancellation)})),e.onDataReceived((n=>{u.forwardData(e,t,n).catch()})),t.onDataReceived((n=>{u.forwardData(t,e,n).catch()})),e.onEof((()=>{u.forwardData(e,t,r.Buffer.alloc(0)).catch()})),t.onEof((()=>{u.forwardData(t,e,r.Buffer.alloc(0)).catch()})),e.onExtendedDataReceived((n=>{u.forwardExtendedData(e,t,n.dataTypeCode,n.data).catch()})),t.onExtendedDataReceived((n=>{u.forwardExtendedData(t,e,n.dataTypeCode,n.data).catch()})),e.onClosed((r=>{s||(s=!0,n.resolve(u.forwardChannelClose(e,t,r)))})),t.onClosed((r=>{s||(s=!0,n.resolve(u.forwardChannelClose(t,e,r)))}));const i=await n.promise;await i}static async forwardSessionRequest(e,t,n){return e.request.wantReply?t.requestResponse(e.request,i.SessionRequestSuccessMessage,i.SessionRequestFailureMessage,n):t.request(e.request,n).then((()=>new i.SessionRequestSuccessMessage))}static async forwardChannel(e,t,n){var r;try{const r=await t.openChannel(e.request,null,n);return u.pipeChannel(e.channel,r).catch(),new o.ChannelOpenConfirmationMessage}catch(e){if(!(e instanceof Error))throw e;const t=new o.ChannelOpenFailureMessage;return e instanceof c.SshChannelError?t.reasonCode=null!==(r=e.reason)&&void 0!==r?r:o.SshChannelOpenFailureReason.connectFailed:t.reasonCode=o.SshChannelOpenFailureReason.connectFailed,t.description=e.message,t}}static async forwardChannelRequest(e,t,n){return e.request.recipientChannel=t.remoteChannelId,await t.request(e.request,n)?new o.ChannelSuccessMessage:new o.ChannelFailureMessage}static async forwardSessionClose(e,t){var n;return e.close(t.reason,t.message,null!==(n=t.error)&&void 0!==n?n:void 0)}static async forwardData(e,t,n){const i=r.Buffer.alloc(n.length);n.copy(i);const o=t.send(i,s.CancellationToken.None);return e.adjustWindow(i.length),o}static async forwardExtendedData(e,t,n,i){const o=r.Buffer.alloc(i.length);i.copy(o);const a=t.sendExtendedData(n,o,s.CancellationToken.None);return e.adjustWindow(o.length),a}static async forwardChannelClose(e,t,n){const r=`Piping channel closure.\nSource: ${e.session} ${e}\nDestination: ${t.session} ${t}\n`;return t.session.trace(l.TraceLevel.Verbose,l.SshTraceEventIds.channelClosed,r),n.error?(t.close(n.error),Promise.resolve()):n.exitSignal?t.close(n.exitSignal,n.errorMessage):"number"==typeof n.exitStatus?t.close(n.exitStatus):t.close()}}t.PipeExtensions=u},3689:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Progress=void 0,(n=t.Progress||(t.Progress={})).OpeningClientConnectionToRelay="OpeningClientConnectionToRelay",n.OpenedClientConnectionToRelay="OpenedClientConnectionToRelay",n.OpeningHostConnectionToRelay="OpeningHostConnectionToRelay",n.OpenedHostConnectionToRelay="OpenedHostConnectionToRelay",n.OpeningSshSessionConnection="OpeningSshSessionConnection",n.OpenedSshSessionConnection="OpenedSshSessionConnection",n.StartingProtocolVersionExchange="StartingProtocolVersionExchange",n.CompletedProtocolVersionExchange="CompletedProtocolVersionExchange",n.StartingKeyExchange="StartingKeyExchange",n.CompletedKeyExchange="CompletedKeyExchange",n.StartingSessionAuthentication="StartingSessionAuthentication",n.CompletedSessionAuthentication="CompletedSessionAuthentication"},3868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecureStream=void 0;const r=n(5844),s=n(3538),i=n(6373),o=n(9872),a=n(6306),c=n(6197),l=n(5706),u=n(7331),p=n(4608),h=n(2781),d=n(3305);class f extends h.Duplex{constructor(e,t,n){if(super({write(e,t,n){this.connectCompletion.promise.then((r=>{r?r._write(e,t,n):n(new p.ObjectDisposedError("SecureStream"))}),n)},writev(e,t){this.connectCompletion.promise.then((n=>{n?n._writev(e,t):t(new p.ObjectDisposedError("SecureStream"))}),t)},final(e){this.connectCompletion.promise.then((t=>{t?t._final(e):e(new p.ObjectDisposedError("SecureStream"))}),e)},read(e){this.connectCompletion.promise.then((t=>{t?t._read(e):this.push(null)}),(e=>{}))}}),this.transportStream=e,this.clientCredentials=null,this.serverCredentials=null,this.connectCompletion=new d.PromiseCompletionSource,this.disposed=!1,this.disposables=[],this.disconnectedEmitter=new r.Emitter,this.onDisconnected=this.disconnectedEmitter.event,this.closedEmitter=new r.Emitter,this.onClosed=this.closedEmitter.event,!e)throw new TypeError("A transport stream is required.");if(!t)throw new TypeError("Client or server credentials are required.");const s=new o.SshSessionConfiguration(!0);if(n&&s.protocolExtensions.push(o.SshProtocolExtensionNames.sessionReconnect),"username"in t){if(void 0!==n&&"boolean"!=typeof n)throw new TypeError("SecureStream client reconnectable sessions must be a boolean.");this.clientCredentials=t,this.session=new l.SshClientSession(s)}else{if(!t.publicKeys)throw new TypeError("Client or server credentials are required.");if(void 0!==n&&!Array.isArray(n))throw new TypeError("SecureStream server reconnectable sessions must be an array.");this.serverCredentials=t,this.session=new u.SshServerSession(s,n)}this.session.onDisconnected(this.onSessionDisconnected,this,this.disposables),this.session.onClosed(this.onSessionClosed,this,this.disposables)}get trace(){return this.session.trace}set trace(e){this.session.trace=e}get isClosed(){return this.disposed||this.session.isClosed}onAuthenticating(e,t,n){return this.session.onAuthenticating(e,t,n)}async connect(e){let t=!1;try{this.serverCredentials&&(this.session.credentials=this.serverCredentials);let n=this.transportStream;n instanceof h.Duplex&&(n=new s.NodeStream(n)),await this.session.connect(n,e),t=!0;let r=null;if(this.clientCredentials){const t=this.session;if(!await t.authenticateServer(e))throw new p.SshConnectionError("Server authentication failed.",a.SshDisconnectReason.hostKeyNotVerifiable);if(!await t.authenticateClient(this.clientCredentials,e))throw new p.SshConnectionError("Client authentication failed.",a.SshDisconnectReason.noMoreAuthMethodsAvailable);r=await this.session.openChannel(e)}else r=await this.session.acceptChannel(e);this.stream=this.createStream(r),this.stream.on("data",(e=>this.emit("data",e))),this.stream.on("end",(()=>this.emit("end"))),this.stream.on("close",(()=>this.emit("close"))),this.stream.on("error",(()=>this.emit("error"))),r.onClosed((()=>this.dispose())),this.connectCompletion.resolve(this.stream)}catch(e){if(!(e instanceof Error))throw e;if(!(e instanceof p.ObjectDisposedError&&this.session.isClosed)){let t=e instanceof p.SshConnectionError?e.reason:void 0;throw null!=t||(t=a.SshDisconnectReason.protocolError),await this.session.close(t,e.message,e),this.connectCompletion.reject(e),e}this.connectCompletion.resolve(null)}}async reconnect(e,t){if(!(this.session instanceof l.SshClientSession))throw new Error("Cannot reconnect SecureStream server.");if(!e)throw new TypeError("A transport stream is required.");this.transportStream=e;let n=this.transportStream;n instanceof h.Duplex&&(n=new s.NodeStream(n)),await this.session.reconnect(n,t)}createStream(e){return new i.SshStream(e)}dispose(){if(!this.disposed){const e=this.session.isConnected||this.session.isClosed;this.disposed=!0,this.session.dispose(),this.unsubscribe();try{!e&&this.transportStream&&(this.transportStream instanceof h.Duplex?(this.transportStream.end(),this.transportStream.destroy()):this.transportStream.close().catch((e=>{this.trace(c.TraceLevel.Error,c.SshTraceEventIds.streamCloseError,`Error closing transport stream: ${e.message}`,e)})))}catch(e){if(!(e instanceof Error))throw e;this.trace(c.TraceLevel.Error,c.SshTraceEventIds.streamCloseError,`Error closing transport stream: ${e.message}`,e)}}}async close(){this.disposed||(this.disposed=!0,await this.session.close(a.SshDisconnectReason.none,this.session.constructor.name+" disposed."),this.session.dispose(),this.unsubscribe(),this.transportStream instanceof h.Duplex?await new Promise((e=>{this.transportStream.end(e)})):await this.transportStream.close())}onSessionDisconnected(){this.disconnectedEmitter.fire()}onSessionClosed(e){this.unsubscribe(),this.closedEmitter.fire(e)}unsubscribe(){this.disposables.forEach((e=>e.dispose())),this.disposables=[]}}t.SecureStream=f},5263:function(e,t,n){"use strict";var r,s=this&&this.__decorate||function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationService=void 0;const i=n(1838),o=n(6892),a=n(5844),c=n(7309),l=n(6306),u=n(3314),p=n(3193),h=n(4865),d=n(6655),f=n(6197),m=n(4608);let g=r=class extends i.SshService{constructor(e){var t;super(e),this.currentRequestMessage=null,this.authenticationFailureCount=0,this.disposeCancellationSource=new a.CancellationTokenSource;const n=null===(t=e.algorithms)||void 0===t?void 0:t.publicKeyAlgorithmName;if(!n)throw new Error("Algorithms not initialized.");this.publicKeyAlgorithmName=n}handleMessage(e,t){return e instanceof o.AuthenticationSuccessMessage?this.handleSuccessMessage(e):e instanceof o.AuthenticationFailureMessage?this.handleFailureMessage(e):e instanceof o.AuthenticationRequestMessage?this.handleAuthenticationRequestMessage(e,t):e instanceof o.AuthenticationInfoRequestMessage?this.handleInfoRequestMessage(e,t):e instanceof o.AuthenticationInfoResponseMessage?this.handleInfoResponseMessage(e,t):void o.PublicKeyOKMessage}async handleAuthenticationRequestMessage(e,t){this.trace(f.TraceLevel.Info,f.SshTraceEventIds.sessionAuthenticating,`Authentication request: ${e.methodName}`);let n=e.methodName;if(this.session.config.authenticationMethods.includes(n)||(n=null),"publickey"===n||"hostbased"===n){const n=e.convertTo(new o.PublicKeyRequestMessage);return this.setCurrentRequest(n),this.handlePublicKeyRequestMessage(n,t)}if("password"===n){const n=e.convertTo(new o.PasswordRequestMessage);return this.setCurrentRequest(n),this.handlePasswordRequestMessage(n,t)}if("keyboard-interactive"===n)return this.setCurrentRequest(e),this.beginInteractiveAuthentication(e,t);if("none"===n)return this.setCurrentRequest(e),this.handleAuthenticating(new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientNone,{username:e.username}),t);{this.setCurrentRequest(null);const e=new o.AuthenticationFailureMessage;e.methodNames=["publickey","password","hostbased"],await this.session.sendMessage(e,t)}}setCurrentRequest(e){var t;this.currentRequestMessage=e;const n=this.session.protocol;n&&(n.messageContext=null!==(t=null==e?void 0:e.methodName)&&void 0!==t?t:null)}async handlePublicKeyRequestMessage(e,t){var n,r,s;const i=this.session.config.getPublicKeyAlgorithm(e.keyAlgorithmName);if(!i){const e=new o.AuthenticationFailureMessage;return e.methodNames=["publickey","password"],void await this.session.sendMessage(e,t)}const a=i.createKeyPair();let l;if(await a.setPublicKeyBytes(e.publicKey),"hostbased"===e.methodName)l=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientHostBased,{username:null!==(n=e.username)&&void 0!==n?n:"",publicKey:a,clientHostname:e.clientHostname,clientUsername:e.clientUsername});else if(e.hasSignature){const n=i.readSignatureData(e.signature),r=this.session.sessionId;if(null==r)throw new Error("Session ID not initialized.");const o=new c.SshDataWriter(Buffer.alloc(r.length+e.payloadWithoutSignature.length+20));o.writeBinary(r),o.write(e.payloadWithoutSignature);const p=o.toBuffer(),h=i.createVerifier(a);await h.verify(p,n)||await this.handleAuthenticationFailure("Public key authentication failed: invalid signature.",t),l=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientPublicKey,{username:null!==(s=e.username)&&void 0!==s?s:"",publicKey:a})}else l=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientPublicKeyQuery,{username:null!==(r=e.username)&&void 0!==r?r:"",publicKey:a});await this.handleAuthenticating(l,t)}async handlePasswordRequestMessage(e,t){var n,r;const s=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientPassword,{username:null!==(n=e.username)&&void 0!==n?n:"",password:null!==(r=e.password)&&void 0!==r?r:""});await this.handleAuthenticating(s,t)}async beginInteractiveAuthentication(e,t){const n=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientInteractive,{username:e.username});await this.handleAuthenticating(n,t)}async handleInfoRequestMessage(e,t){const n=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientInteractive,{infoRequest:e});await this.handleAuthenticating(n,t)}async handleInfoResponseMessage(e,t){var n;const r=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientInteractive,{username:null===(n=this.currentRequestMessage)||void 0===n?void 0:n.username,infoResponse:e});await this.handleAuthenticating(r,t)}async handleAuthenticating(e,t){var n;if(!this.currentRequestMessage)throw new m.SshConnectionError("No current authentication request.",l.SshDisconnectReason.protocolError);e.cancellation=this.disposeCancellationSource.token;let r=null;try{r=await this.session.raiseAuthenticatingEvent(e)}catch(e){if(!(e instanceof Error))throw e;this.trace(f.TraceLevel.Error,f.SshTraceEventIds.authenticationError,`Error while authenticating client: ${e.message}`,e),r=null}if(r)if(e.authenticationType===u.SshAuthenticationType.clientPublicKeyQuery){const e=this.currentRequestMessage,n=new o.PublicKeyOKMessage;n.keyAlgorithmName=e.keyAlgorithmName,n.publicKey=e.publicKey,this.setCurrentRequest(null),await this.session.sendMessage(n,t)}else{this.session.principal=r;const s=this.currentRequestMessage.serviceName;s&&this.session.activateService(s),this.trace(f.TraceLevel.Info,f.SshTraceEventIds.sessionAuthenticated,`${u.SshAuthenticationType[e.authenticationType]} authentication succeeded.`),this.setCurrentRequest(null),await this.session.sendMessage(new o.AuthenticationSuccessMessage,t),null===(n=this.session)||void 0===n||n.handleClientAuthenticated()}else e.authenticationType===u.SshAuthenticationType.clientInteractive&&!this.session.isClientSession&&e.infoRequest?await this.sendMessage(e.infoRequest,t):e.authenticationType===u.SshAuthenticationType.clientInteractive&&this.session.isClientSession&&e.infoResponse?await this.sendMessage(e.infoResponse,t):(this.setCurrentRequest(null),await this.handleAuthenticationFailure(`${u.SshAuthenticationType[e.authenticationType]} authentication failed.`))}async handleAuthenticationFailure(e,t){this.authenticationFailureCount++,this.trace(f.TraceLevel.Warning,f.SshTraceEventIds.clientAuthenticationFailed,e);const n=new o.AuthenticationFailureMessage;n.methodNames=this.session.config.authenticationMethods,await this.session.sendMessage(n,t),this.authenticationFailureCount>=this.session.config.maxClientAuthenticationAttempts&&await this.session.close(l.SshDisconnectReason.noMoreAuthMethodsAvailable,"Authentication failed.")}async authenticateClient(e,t){var n,r,s,i;this.clientAuthenticationMethods=new d.Queue;const o=this.session.config.authenticationMethods;if(o.includes("publickey"))for(const t of null!==(n=e.publicKeys)&&void 0!==n?n:[]){if(!t)continue;const n=null!==(r=e.username)&&void 0!==r?r:"";let s=t;const i=e.privateKeyProvider;this.clientAuthenticationMethods.enqueue({method:"publickey",handler:async e=>{if(!s.hasPrivateKey){if(null==i)throw new Error("A private key provider is required.");s=await i(t,null!=e?e:a.CancellationToken.None)}s?await this.requestPublicKeyAuthentication(n,s,e):await this.session.close(l.SshDisconnectReason.authCancelledByUser)}})}if(o.includes("password")){const t=e.passwordProvider;if(t)this.clientAuthenticationMethods.enqueue({method:"password",handler:async e=>{var n;const r=t(null!=e?e:a.CancellationToken.None),s=r?await r:null;s?await this.requestPasswordAuthentication(null!==(n=s[0])&&void 0!==n?n:"",s[1],e):await this.session.close(l.SshDisconnectReason.authCancelledByUser)}});else if(e.password){const t=null!==(s=e.username)&&void 0!==s?s:"",n=e.password;this.clientAuthenticationMethods.enqueue({method:"password",handler:async e=>{await this.requestPasswordAuthentication(t,n,e)}})}}if(0===this.clientAuthenticationMethods.size){const t=null!==(i=e.username)&&void 0!==i?i:"";if(o.includes("none")&&this.clientAuthenticationMethods.enqueue({method:"none",handler:async e=>{await this.requestUsernameAuthentication(t,e)}}),o.includes("keyboard-interactive")&&this.clientAuthenticationMethods.enqueue({method:"keyboard-interactive",handler:async e=>{await this.requestInteractiveAuthentication(t,e)}}),0===this.clientAuthenticationMethods.size)throw new Error("Could not prepare request for authentication method(s): "+o.join(", ")+". Supply client credentials or enable none or interactive authentication methods.")}this.session.activateService(p.ConnectionService);const c=this.clientAuthenticationMethods.dequeue();await c.handler(t)}async requestUsernameAuthentication(e,t){const n=new o.AuthenticationRequestMessage;n.serviceName=p.ConnectionService.serviceName,n.methodName="none",n.username=e,this.setCurrentRequest(n),await this.session.sendMessage(n,t)}async requestPublicKeyAuthentication(e,t,n){const r=this.session.config.publicKeyAlgorithms.find((e=>(null==e?void 0:e.keyAlgorithmName)===t.keyAlgorithmName));if(!r)throw new Error(`Public key algorithm '${t.keyAlgorithmName}' is not in session config.`);const s=new o.PublicKeyRequestMessage;s.serviceName=p.ConnectionService.serviceName,s.username=e,s.keyAlgorithmName=r.name,s.publicKey=await t.getPublicKeyBytes(r.name),s.signature=await this.createAuthenticationSignature(s,r,t),this.setCurrentRequest(s),await this.session.sendMessage(s,n)}async requestPasswordAuthentication(e,t,n){const r=new o.PasswordRequestMessage;r.serviceName=p.ConnectionService.serviceName,r.username=e,r.password=t,this.setCurrentRequest(r),await this.session.sendMessage(r,n)}async requestInteractiveAuthentication(e,t){const n=new o.AuthenticationRequestMessage;n.serviceName=p.ConnectionService.serviceName,n.methodName="keyboard-interactive",n.username=e,this.setCurrentRequest(n),await this.session.sendMessage(n,t)}async handleFailureMessage(e){var t,n;for(this.setCurrentRequest(null);null===(t=this.clientAuthenticationMethods)||void 0===t?void 0:t.size;){const t=this.clientAuthenticationMethods.dequeue();if(null===(n=e.methodNames)||void 0===n?void 0:n.includes(t.method))return void await t.handler(this.disposeCancellationSource.token)}this.session.onAuthenticationComplete(!1)}handleSuccessMessage(e){this.setCurrentRequest(null),this.session.onAuthenticationComplete(!0)}async createAuthenticationSignature(e,t,n){const r=this.session.sessionId;if(null==r)throw new Error("Session ID not initialized.");const s=new c.SshDataWriter(Buffer.alloc(e.publicKey.length+(e.username||"").length+400));s.writeBinary(r),s.writeByte(e.messageType),s.writeString(e.username||"","utf8"),s.writeString(e.serviceName||"","ascii"),s.writeString("publickey","ascii"),s.writeBoolean(!0),s.writeString(e.keyAlgorithmName,"ascii"),s.writeBinary(e.publicKey);const i=t.createSigner(n),o=await i.sign(s.toBuffer());return t.createSignatureData(o)}dispose(){try{this.disposeCancellationSource.cancel(),this.disposeCancellationSource.dispose()}catch(e){}super.dispose()}};g.serviceName="ssh-userauth",g=r=s([(0,h.serviceActivation)({serviceRequest:r.serviceName})],g),t.AuthenticationService=g},3193:function(e,t,n){"use strict";var r,s=this&&this.__decorate||function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionService=void 0;const i=n(1838),o=n(3379),a=n(3305),c=n(9273),l=n(9638),u=n(4608),p=n(7776),h=n(4865),d=n(6197),f=n(6076);let m=r=class extends i.SshService{constructor(e){super(e),this.channelCounter=0,this.channelMap=new Map,this.nonAcceptedChannels=new Map,this.pendingChannels=new Map,this.pendingAcceptChannels=new Map}get channels(){return Array.from(this.channelMap.values())}close(e){let t=[...this.pendingChannels.values()].map((e=>e.completionSource));this.pendingAcceptChannels.size>0&&(t=t.concat([...this.pendingAcceptChannels.values()].reduce(((e,t)=>e.concat(t)))));for(const t of this.channelMap.values())t.close(e);for(const n of t)n.reject(e)}dispose(){const e=[...this.channelMap.values()];let t=[...this.pendingChannels.values()].map((e=>e.completionSource));this.pendingAcceptChannels.size>0&&(t=t.concat([...this.pendingAcceptChannels.values()].reduce(((e,t)=>e.concat(t)))));for(const t of e)t.dispose();for(const e of t)e.reject(new u.ObjectDisposedError("Session closed."));super.dispose()}async acceptChannel(e,t){const n=new a.PromiseCompletionSource;let r;if(t){if(t.isCancellationRequested)throw new l.CancellationError;r=t.onCancellationRequested((()=>{const t=this.pendingAcceptChannels.get(e);if(t){const e=t.findIndex((e=>Object.is(e,n)));e>=0&&t.splice(e,1)}n.reject(new l.CancellationError)}))}let s=null;if(s=Array.from(this.nonAcceptedChannels.values()).find((t=>t.channelType===e))||null,s)this.nonAcceptedChannels.delete(s.channelId);else{let t=this.pendingAcceptChannels.get(e);t||(t=[],this.pendingAcceptChannels.set(e,t)),t.push(n)}try{return s||await n.promise}finally{r&&r.dispose()}}async openChannel(e,t,n){const r=++this.channelCounter;e.senderChannel=r;let s=null;if(n){if(n.isCancellationRequested)throw new l.CancellationError;s=n.onCancellationRequested((()=>{this.pendingChannels.delete(r)&&t.reject(new l.CancellationError)}))}return this.pendingChannels.set(r,{openMessage:e,completionSource:t,cancellationRegistration:s}),await this.session.sendMessage(e),r}handleMessage(e,t){if(e instanceof o.ChannelDataMessage)return this.handleDataMessage(e);if(e instanceof o.ChannelExtendedDataMessage)return this.handleExtendedDataMessage(e);if(e instanceof o.ChannelWindowAdjustMessage)return this.handleAdjustWindowMessage(e);if(e instanceof o.ChannelEofMessage)return this.handleEofMessage(e);if(e instanceof o.ChannelOpenMessage)return this.handleOpenMessage(e,t);if(e instanceof o.ChannelCloseMessage)return this.handleCloseMessage(e);if(e instanceof o.ChannelOpenConfirmationMessage)return this.handleOpenConfirmationMessage(e,t);if(e instanceof o.ChannelOpenFailureMessage)return this.handleOpenFailureMessage(e);if(e instanceof o.ChannelRequestMessage)return this.handleRequestMessage(e,t);if(e instanceof o.ChannelSuccessMessage)return this.handleSuccessMessage(e);if(e instanceof o.ChannelFailureMessage)return this.handleFailureMessage(e);throw new Error(`Message not implemented: ${e}`)}async handleOpenMessage(e,t){var n;const r=e.senderChannel;if(!this.session.canAcceptRequests){this.trace(d.TraceLevel.Warning,d.SshTraceEventIds.channelOpenFailed,"Channel open request blocked because the session is not yet authenticated.");const e=new o.ChannelOpenFailureMessage;return e.recipientChannel=r,e.reasonCode=o.SshChannelOpenFailureReason.administrativelyProhibited,e.description="Authenticate before opening channels.",void await this.session.sendMessage(e,t)}if(!e.channelType){const e=new o.ChannelOpenFailureMessage;return e.recipientChannel=r,e.reasonCode=o.SshChannelOpenFailureReason.unknownChannelType,e.description="Channel type not specified.",void await this.session.sendMessage(e,t)}e=e.convertTo(new o.ChannelOpenMessage,!0);let s=new o.ChannelOpenConfirmationMessage;const i=++this.channelCounter,a=new c.SshChannel(this,e.channelType,i,r,e.maxWindowSize,e.maxPacketSize,e,s);let l;const u=new p.SshChannelOpeningEventArgs(e,a,!0);try{if(await this.session.handleChannelOpening(u,t),u.openingPromise)l=await u.openingPromise;else if(u.failureReason!==o.SshChannelOpenFailureReason.none){const e=new o.ChannelOpenFailureMessage;e.reasonCode=u.failureReason,e.description=null!==(n=u.failureDescription)&&void 0!==n?n:void 0,l=e}else l=s}catch(e){throw a.dispose(),e}if(l instanceof o.ChannelOpenFailureMessage){l.recipientChannel=r;try{await this.session.sendMessage(l,t)}finally{a.dispose()}return}if(this.session.isClosed)return void a.dispose();a.isMaxWindowSizeLocked=!0,this.channelMap.set(a.channelId,a),s=l,s.recipientChannel=a.remoteChannelId,s.senderChannel=a.channelId,s.maxWindowSize=a.maxWindowSize,s.maxPacketSize=a.maxPacketSize,s.rewrite(),a.openConfirmationMessage=s,await this.session.sendMessage(s,t);let h=!1;const f=this.pendingAcceptChannels.get(a.channelType);for(;f&&f.length>0;){f.shift().resolve(a),h=!0;break}h||this.nonAcceptedChannels.set(a.channelId,a),this.onChannelOpenCompleted(a.channelId,a),a.enableSending()}handleCloseMessage(e){const t=this.findChannelById(e.recipientChannel);t&&t.handleClose()}async handleOpenConfirmationMessage(e,t){var n;let r,s=null;const i=this.pendingChannels.get(e.recipientChannel);if(!i)throw this.channelMap.has(e.recipientChannel)?new Error("Duplicate channel ID."):new Error("Channel confirmation was not requested.");r=i.openMessage,s=i.completionSource,i.cancellationRegistration&&i.cancellationRegistration.dispose(),this.pendingChannels.delete(e.recipientChannel),e=e.convertTo(new o.ChannelOpenConfirmationMessage,!0);const a=new c.SshChannel(this,r.channelType||c.SshChannel.sessionChannelType,e.recipientChannel,e.senderChannel,e.maxWindowSize,e.maxPacketSize,r,e);"number"==typeof r.maxWindowSize&&(a.maxWindowSize=r.maxWindowSize),a.isMaxWindowSizeLocked=!0,this.channelMap.set(a.channelId,a);const l=new p.SshChannelOpeningEventArgs(r,a,!1);if(await this.session.handleChannelOpening(l,t),s){if(l.failureReason!==o.SshChannelOpenFailureReason.none)return void s.reject(new u.SshChannelError(null!==(n=l.failureDescription)&&void 0!==n?n:"Channel open failure.",l.failureReason));s.resolve(a)}else this.onChannelOpenCompleted(a.channelId,a);a.enableSending()}handleOpenFailureMessage(e){let t=null;const n=this.pendingChannels.get(e.recipientChannel);n&&(t=n.completionSource,n.cancellationRegistration&&n.cancellationRegistration.dispose(),this.pendingChannels.delete(e.recipientChannel)),null!=t?t.reject(new u.SshChannelError(e.description||"Channel open rejected.",e.reasonCode)):this.onChannelOpenCompleted(e.recipientChannel,null)}async handleRequestMessage(e,t){const n=this.tryGetChannelForMessage(e);n&&await n.handleRequest(e,t)}handleSuccessMessage(e){const t=this.tryGetChannelForMessage(e);null==t||t.handleResponse(!0)}handleFailureMessage(e){const t=this.tryGetChannelForMessage(e);null==t||t.handleResponse(!1)}handleDataMessage(e){const t=this.tryGetChannelForMessage(e);null==t||t.handleDataReceived(e.data)}handleExtendedDataMessage(e){const t=this.tryGetChannelForMessage(e);null==t||t.handleExtendedDataReceived(new f.SshExtendedDataEventArgs(e.dataTypeCode,e.data))}handleAdjustWindowMessage(e){const t=this.tryGetChannelForMessage(e);null==t||t.adjustRemoteWindow(e.bytesToAdd)}handleEofMessage(e){const t=this.findChannelById(e.recipientChannel);null==t||t.handleEof()}onChannelOpenCompleted(e,t){t?this.trace(d.TraceLevel.Info,d.SshTraceEventIds.channelOpened,`${this.session} ChannelOpenCompleted(${t})`):this.trace(d.TraceLevel.Warning,d.SshTraceEventIds.channelOpenFailed,`${this.session} ChannelOpenCompleted(${e} failed)`)}tryGetChannelForMessage(e){const t=this.findChannelById(e.recipientChannel);if(!t){const t=e instanceof o.ChannelDataMessage?"channel data message":e.toString();this.trace(d.TraceLevel.Warning,d.SshTraceEventIds.channelRequestFailed,`Invalid channel ID ${e.recipientChannel} in ${t}.`)}return t}findChannelById(e){var t;return null!==(t=this.channelMap.get(e))&&void 0!==t?t:null}removeChannel(e){this.channelMap.delete(e.channelId),this.pendingChannels.delete(e.channelId)}};m.serviceName="ssh-connection",m=r=s([(0,h.serviceActivation)({serviceRequest:r.serviceName})],m),t.ConnectionService=m},4237:function(e,t,n){"use strict";var r,s=this&&this.__decorate||function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyExchangeService=void 0;const i=n(4300),o=n(7492),a=n(1838),c=n(3380),l=n(5255),u=n(7521),p=n(7309),h=n(4608),d=n(6306),f=n(890),m=n(5844),g=n(3193),v=n(4865),y=n(6197);class b{}const w="ext-info-s",S="ext-info-c";let E=r=class extends a.SshService{constructor(e){super(e),this.isInitialExchange=!1,this.exchangeContext=null}get exchanging(){return!!this.exchangeContext}async startKeyExchange(e){this.isInitialExchange=e,this.exchangeContext=new b;const t=this.createKeyExchangeInitMessage();let n=null;return this.session.isClientSession?(e&&this.session.config.enableKeyExchangeGuess&&(n=await this.createKeyExchangeGuessMessage(),t.firstKexPacketFollows=!!n),this.exchangeContext.clientKexInitPayload=t.toBuffer()):this.exchangeContext.serverKexInitPayload=t.toBuffer(),[t,n]}finishKeyExchange(){var e;if(!this.exchangeContext)throw new h.SshConnectionError("Key exchange not started.",d.SshDisconnectReason.protocolError);const t=this.exchangeContext.newAlgorithms;if(!t)throw new h.SshConnectionError("Key exchange not completed.",d.SshDisconnectReason.protocolError);return t.isExtensionInfoRequested=null===(e=this.exchangeContext)||void 0===e?void 0:e.isExtensionInfoRequested,this.exchangeContext=null,t}abortKeyExchange(){this.exchangeContext=null}createKeyExchangeInitMessage(){const e=this.session.isClientSession?S:w,t=this.session.config,n=new l.KeyExchangeInitMessage;return n.keyExchangeAlgorithms=(0,u.algorithmNames)(t.keyExchangeAlgorithms).concat(e),n.serverHostKeyAlgorithms=this.getPublicKeyAlgorithms(),n.encryptionAlgorithmsClientToServer=n.encryptionAlgorithmsServerToClient=(0,u.algorithmNames)(t.encryptionAlgorithms),n.macAlgorithmsClientToServer=n.macAlgorithmsServerToClient=(0,u.algorithmNames)(t.hmacAlgorithms),n.compressionAlgorithmsClientToServer=n.compressionAlgorithmsServerToClient=(0,u.algorithmNames)(t.compressionAlgorithms),n.languagesClientToServer=[""],n.languagesServerToClient=[""],n.firstKexPacketFollows=!1,n.reserved=0,n}getPublicKeyAlgorithms(){var e,t;let n=[...this.session.config.publicKeyAlgorithms];if(n.length>1&&!this.session.isClientSession){const r=null===(t=null===(e=this.session.credentials)||void 0===e?void 0:e.publicKeys)||void 0===t?void 0:t.map((e=>e.keyAlgorithmName));r&&(n=n.filter((e=>e&&r.includes(e.keyAlgorithmName))))}return(0,u.algorithmNames)(n)}async createKeyExchangeGuessMessage(){if(!this.exchangeContext)throw new Error("Key exchange was not started.");const e=this.session.config.keyExchangeAlgorithms[0];if(!e)return null;this.exchangeContext.keyExchange=e.name,this.exchangeContext.exchange=e.createKeyExchange(),this.exchangeContext.exchangeValue=await this.exchangeContext.exchange.startKeyExchange();const t=new l.KeyExchangeDhInitMessage;return t.e=this.exchangeContext.exchangeValue,t}handleMessage(e,t){if(e instanceof l.KeyExchangeInitMessage)return this.handleInitMessage(e,t);if(e instanceof l.KeyExchangeDhInitMessage)return this.handleDhInitMessage(e,t);if(e instanceof l.KeyExchangeDhReplyMessage)return this.handleDhReplyMessage(e,t);throw new Error(`Message not implemented: ${e}`)}async handleInitMessage(e,t){var n,r,s,i;if(!this.exchangeContext)throw new Error("Key exchange was not started.");const o=this.session.config;if(this.exchangeContext.keyExchange=this.chooseAlgorithm("KeyExchange",(0,u.algorithmNames)(o.keyExchangeAlgorithms),e.keyExchangeAlgorithms),"none"===this.exchangeContext.keyExchange)return this.trace(y.TraceLevel.Info,y.SshTraceEventIds.algorithmNegotiation,"Client and server negotiated no security. Cancelling key-exchange."),this.session.activateService(g.ConnectionService),this.exchangeContext.newAlgorithms=new f.SshSessionAlgorithms,void await this.session.handleNewKeysMessage(new l.NewKeysMessage,t);if(this.exchangeContext.publicKey=this.chooseAlgorithm("PublicKey",this.getPublicKeyAlgorithms(),e.serverHostKeyAlgorithms),this.exchangeContext.clientEncryption=this.chooseAlgorithm("ClientEncryption",(0,u.algorithmNames)(o.encryptionAlgorithms),e.encryptionAlgorithmsClientToServer),this.exchangeContext.serverEncryption=this.chooseAlgorithm("ServerEncryption",(0,u.algorithmNames)(o.encryptionAlgorithms),e.encryptionAlgorithmsServerToClient),this.exchangeContext.clientHmac=this.chooseAlgorithm("ClientHmac",(0,u.algorithmNames)(o.hmacAlgorithms),e.macAlgorithmsClientToServer),this.exchangeContext.serverHmac=this.chooseAlgorithm("ServerHmac",(0,u.algorithmNames)(o.hmacAlgorithms),e.macAlgorithmsServerToClient),this.exchangeContext.clientCompression=this.chooseAlgorithm("ClientCompression",(0,u.algorithmNames)(o.compressionAlgorithms),e.compressionAlgorithmsClientToServer),this.exchangeContext.serverCompression=this.chooseAlgorithm("ServerCompression",(0,u.algorithmNames)(o.compressionAlgorithms),e.compressionAlgorithmsServerToClient),this.session.isClientSession){this.exchangeContext.serverKexInitPayload=e.toBuffer();const s=!!this.exchangeContext.exchangeValue,i=this.exchangeContext.keyExchange===(null===(n=o.keyExchangeAlgorithms[0])||void 0===n?void 0:n.name);if(s&&i)this.trace(y.TraceLevel.Verbose,y.SshTraceEventIds.algorithmNegotiation,"Already sent correct guess for key-exchange init.");else{const e=o.getKeyExchangeAlgorithm(this.exchangeContext.keyExchange);this.exchangeContext.exchange=e.createKeyExchange(),this.exchangeContext.exchangeValue=await this.exchangeContext.exchange.startKeyExchange();const n=new l.KeyExchangeDhInitMessage;n.e=this.exchangeContext.exchangeValue,await this.session.sendMessage(n,t)}this.exchangeContext.isExtensionInfoRequested=this.isInitialExchange&&(null===(r=e.keyExchangeAlgorithms)||void 0===r?void 0:r.includes(w))}else{if(e.firstKexPacketFollows){const t=this.exchangeContext.keyExchange===(null===(s=e.keyExchangeAlgorithms)||void 0===s?void 0:s[0]),n=t?"correct":"incorrect";this.trace(y.TraceLevel.Verbose,y.SshTraceEventIds.algorithmNegotiation,`Client's KeyExchange guess was ${n}.`),this.exchangeContext.discardGuessedInit=!t}this.exchangeContext.clientKexInitPayload=e.toBuffer(),this.exchangeContext.isExtensionInfoRequested=this.isInitialExchange&&(null===(i=e.keyExchangeAlgorithms)||void 0===i?void 0:i.includes(S))}}async handleDhInitMessage(e,t){var n,r,s,o,a;if(this.session.isClientSession)return;const c=this.session;if(!this.exchangeContext||!this.exchangeContext.keyExchange||!this.exchangeContext.publicKey)throw new h.SshConnectionError("Key exchange not started.",d.SshDisconnectReason.protocolError);if(this.exchangeContext.discardGuessedInit)return void(this.exchangeContext.discardGuessedInit=!1);const u=this.session.config.getKeyExchangeAlgorithm(this.exchangeContext.keyExchange);if(!u)throw new h.SshConnectionError("Key exchange not supported for algorithm: "+this.exchangeContext.keyExchange,d.SshDisconnectReason.keyExchangeFailed);const p=this.session.config.getPublicKeyAlgorithm(this.exchangeContext.publicKey);if(!p)throw new h.SshConnectionError("Public key algorithm not supported: "+this.exchangeContext.publicKey,d.SshDisconnectReason.keyExchangeFailed);let g=null;if(null===(n=c.credentials)||void 0===n?void 0:n.publicKeys){const e=c.credentials.publicKeys.find((e=>e.keyAlgorithmName===p.keyAlgorithmName));if(g=null!=e?e:null,!1===(null==g?void 0:g.hasPrivateKey)){if(!c.credentials.privateKeyProvider)throw new Error("A private key provider is required.");g=await c.credentials.privateKeyProvider(e,null!=t?t:m.CancellationToken.None)}}if(null==g)throw new h.SshConnectionError("Private key not found for algorithm: "+this.exchangeContext.publicKey,d.SshDisconnectReason.keyExchangeFailed);const v=this.session.config.getEncryptionAlgorithm(this.exchangeContext.clientEncryption),y=this.session.config.getEncryptionAlgorithm(this.exchangeContext.serverEncryption),b=this.session.config.getHmacAlgorithm(this.exchangeContext.serverHmac),w=this.session.config.getHmacAlgorithm(this.exchangeContext.clientHmac),S=u.createKeyExchange(),E=e.e||i.Buffer.alloc(0),_=await S.startKeyExchange(),x=await S.decryptKeyExchange(E),T=await g.getPublicKeyBytes(p.name);if(!T)throw new h.SshConnectionError("Public key not set.",d.SshDisconnectReason.keyExchangeFailed);const C=await this.computeExchangeHash(S,T,E,_,x);this.session.sessionId||(this.session.sessionId=C);const[P,A,R,I,k,O]=await this.computeKeys(S,x,C,v,y,w,b),M=null!==(r=await(null==y?void 0:y.createCipher(!0,I,A)))&&void 0!==r?r:null,D=null!==(s=await(null==v?void 0:v.createCipher(!1,R,P)))&&void 0!==s?s:null,N=null!==(o=await(null==b?void 0:b.createSigner(O)))&&void 0!==o?o:null,L=null!==(a=await(null==w?void 0:w.createVerifier(k)))&&void 0!==a?a:null,j=new f.SshSessionAlgorithms;j.publicKeyAlgorithmName=this.exchangeContext.publicKey,j.cipher=M,j.decipher=D,j.signer=N,j.verifier=L,j.messageSigner=(null==M?void 0:M.authenticatedEncryption)?M:N,j.messageVerifier=(null==D?void 0:D.authenticatedEncryption)?D:L,j.compressor=this.session.config.getCompressionAlgorithm(this.exchangeContext.serverCompression),j.decompressor=this.session.config.getCompressionAlgorithm(this.exchangeContext.clientCompression),this.exchangeContext.newAlgorithms=j,P&&P.fill(0),R&&R.fill(0),k&&k.fill(0),A&&A.fill(0),I&&I.fill(0),O&&O.fill(0);const q=p.createSigner(g);let B=await q.sign(C);B=p.createSignatureData(B);const F=new l.KeyExchangeDhReplyMessage;F.hostKey=T,F.f=_,F.signature=B,await this.session.sendMessage(F,t),await this.session.sendMessage(new l.NewKeysMessage,t)}async handleDhReplyMessage(e,t){var n,r,s,i;if(!this.session.isClientSession)return;if(!this.exchangeContext)throw new h.SshConnectionError("Key exchange was not started.",d.SshDisconnectReason.protocolError);const o=this.session.config,a=this.exchangeContext.exchange,c=this.exchangeContext.publicKey,u=o.getPublicKeyAlgorithm(c),p=o.getEncryptionAlgorithm(this.exchangeContext.clientEncryption),m=o.getEncryptionAlgorithm(this.exchangeContext.serverEncryption),g=o.getHmacAlgorithm(this.exchangeContext.serverHmac),v=o.getHmacAlgorithm(this.exchangeContext.clientHmac),b=this.exchangeContext.exchangeValue,w=e.f;if(!a||!b)throw new h.SshConnectionError("Failed to initialize crypto after key exchange.",d.SshDisconnectReason.keyExchangeFailed);this.hostKey=u.createKeyPair(),await this.hostKey.setPublicKeyBytes(e.hostKey);const S=await a.decryptKeyExchange(w),E=e.hostKey,_=await this.computeExchangeHash(a,E,b,w,S),x=u.readSignatureData(e.signature),T=u.createVerifier(this.hostKey);let C;try{C=await T.verify(_,x)}catch(e){if(!(e instanceof Error))throw e;throw this.trace(y.TraceLevel.Error,y.SshTraceEventIds.serverAuthenticationFailed,`Server public key verification error: ${e.message}`,e),new h.SshConnectionError(`Server public key verification failed: ${e.message}`,d.SshDisconnectReason.hostKeyNotVerifiable)}if(!C)throw this.trace(y.TraceLevel.Warning,y.SshTraceEventIds.serverAuthenticationFailed,"Server public key verification failed."),new h.SshConnectionError("Server public key verification failed.",d.SshDisconnectReason.hostKeyNotVerifiable);this.trace(y.TraceLevel.Verbose,y.SshTraceEventIds.sessionAuthenticated,"Server public key verification succeeded."),null==this.session.sessionId&&(this.session.sessionId=_);const[P,A,R,I,k,O]=await this.computeKeys(a,S,_,p,m,v,g),M=null!==(n=await(null==p?void 0:p.createCipher(!0,R,P)))&&void 0!==n?n:null,D=null!==(r=await(null==m?void 0:m.createCipher(!1,I,A)))&&void 0!==r?r:null,N=null!==(s=await(null==v?void 0:v.createSigner(k)))&&void 0!==s?s:null,L=null!==(i=await(null==g?void 0:g.createVerifier(O)))&&void 0!==i?i:null,j=new f.SshSessionAlgorithms;j.publicKeyAlgorithmName=c,j.cipher=M,j.decipher=D,j.signer=N,j.verifier=L,j.messageSigner=(null==M?void 0:M.authenticatedEncryption)?M:N,j.messageVerifier=(null==D?void 0:D.authenticatedEncryption)?D:L,j.compressor=o.getCompressionAlgorithm(this.exchangeContext.clientCompression),j.decompressor=o.getCompressionAlgorithm(this.exchangeContext.serverCompression),this.exchangeContext.newAlgorithms=j,P&&P.fill(0),R&&R.fill(0),k&&k.fill(0),A&&A.fill(0),I&&I.fill(0),O&&O.fill(0),await this.session.sendMessage(new l.NewKeysMessage,t)}chooseAlgorithm(e,t,n){let r,s;this.session.isClientSession?(r=n||[],s=t):(r=t,s=n||[]);const i=`${e} negotiation: Server (${r.join(", ")}) Client (${s.join(", ")})`;for(const e of s)for(const t of r)if(t===e){const e=t;return this.trace(y.TraceLevel.Info,y.SshTraceEventIds.algorithmNegotiation,`${i} => ${e}`),e}throw new Error(`Failed ${i}`)}async computeExchangeHash(e,t,n,r,s){if(!this.session.remoteVersion)throw new Error("Key exchange not completed.");const a=new p.SshDataWriter(i.Buffer.alloc(2048));return this.session.isClientSession?(a.writeString(o.SshSession.localVersion.toString(),"ascii"),a.writeString(this.session.remoteVersion.toString(),"ascii")):(a.writeString(this.session.remoteVersion.toString(),"ascii"),a.writeString(o.SshSession.localVersion.toString(),"ascii")),a.writeBinary(this.exchangeContext.clientKexInitPayload),a.writeBinary(this.exchangeContext.serverKexInitPayload),a.writeBinary(t),a.writeBigInt(c.BigInt.fromBytes(n,{unsigned:!0})),a.writeBigInt(c.BigInt.fromBytes(r,{unsigned:!0})),a.writeBigInt(c.BigInt.fromBytes(s,{unsigned:!0})),await e.sign(a.toBuffer())}async computeKeys(e,t,n,r,s,o,a){var c,l;const u=new p.SshDataWriter(i.Buffer.alloc(4+t.length+n.length+Math.max(1+(null!==(l=null===(c=this.session.sessionId)||void 0===c?void 0:c.length)&&void 0!==l?l:0),e.digestLength)));u.writeBinary(t),u.write(n);const h=u.position;return[r&&await this.computeKey(e,u,h,r.blockLength,"A"),s&&await this.computeKey(e,u,h,s.blockLength,"B"),r&&await this.computeKey(e,u,h,r.keyLength,"C"),s&&await this.computeKey(e,u,h,s.keyLength,"D"),o&&await this.computeKey(e,u,h,o.keyLength,"E"),a&&await this.computeKey(e,u,h,a.keyLength,"F")]}async computeKey(e,t,n,r,s){const o=i.Buffer.alloc(r);let a=0,c=0,l=null;if(!this.session.sessionId)throw new Error("Session ID not set.");for(;a<r;)t.position=n,l?t.write(l):(t.writeByte(s.charCodeAt(0)),t.write(this.session.sessionId)),l=await e.sign(t.toBuffer()),c=Math.min(l.length,r-a),l.copy(o,a),a+=c;return l&&l.fill(0),o}};E.serviceName="ssh-keyexchange",E=r=s([(0,v.serviceActivation)({serviceRequest:r.serviceName})],E),t.KeyExchangeService=E},4865:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findService=t.serviceActivation=void 0,t.serviceActivation=function(e){return t=>{t.activations||(t.activations=[]),t.activations.push(e)}},t.findService=function(e,t){for(const n of e.keys()){const e=n.activations;let r=!1;for(const s of e)if(r=!0,t(s))return n;if(!r)throw new Error(`SSH service type '${n.name}' must have one or more 'serviceActivation' decorators.`)}return null}},1838:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshService=void 0;const r=n(5844),s=n(7492);t.SshService=class{constructor(e){if(this.session=e,this.disposed=!1,this.disposedEmitter=new r.Emitter,this.onDisposed=this.disposedEmitter.event,!(e instanceof s.SshSession))throw new TypeError("Session is not an instance of SshSession. (This may be due to a version mismatch between SSH packages.)")}get trace(){return this.session.trace}raiseReportProgress(e){this.session.raiseReportProgress(e)}dispose(){this.disposed||(this.disposed=!0,this.disposedEmitter.fire())}async onSessionRequest(e,t){this.session.raiseSessionRequest(e)}async onChannelOpening(e,t){if(!e)throw new TypeError("Request is required.");return this.session.handleChannelOpening(e,t,!1)}async onChannelRequest(e,t,n){}async sendMessage(e,t){await this.session.sendMessage(e,t)}}},9273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshChannel=void 0;const r=n(5844),s=n(4865),i=n(3379),o=n(6306),a=n(8614),c=n(3305),l=n(4608),u=n(1656),p=n(8512),h=n(9638),d=n(7399),f=n(6197),m=n(3661),g=n(6655);class v{constructor(e,t,n,s,i,o,c,l){this.connectionService=e,this.channelType=t,this.channelId=n,this.remoteChannelId=s,this.openMessage=c,this.openConfirmationMessage=l,this.remoteClosed=!1,this.localClosed=!1,this.sentEof=!1,this.disposed=!1,this.openSendingWindowCompletionSource=null,this.requestCompletionSources=new g.Queue,this.sendSemaphore=new d.Semaphore(0),this.metrics=new a.ChannelMetrics,this.dataReceivedEmitter=new r.Emitter,this.extendedDataReceivedEmitter=new r.Emitter,this.onDataReceived=this.dataReceivedEmitter.event,this.onExtendedDataReceived=this.extendedDataReceivedEmitter.event,this.eofEmitter=new r.Emitter,this.onEof=this.eofEmitter.event,this.closedEmitter=new r.Emitter,this.onClosed=this.closedEmitter.event,this.requestEmitter=new r.Emitter,this.onRequest=this.requestEmitter.event,this.isMaxWindowSizeLocked=!1,this.remoteWindowSize=i,this.maxWindowSizeValue=v.defaultMaxWindowSize,this.windowSize=this.maxWindowSizeValue,this.maxPacketSize=Math.min(o,v.defaultMaxPacketSize)}get session(){return this.connectionService.session}get isClosed(){return this.localClosed||this.remoteClosed}get maxWindowSize(){return this.maxWindowSizeValue}set maxWindowSize(e){if(this.isMaxWindowSizeLocked)throw new Error("Cannot change the max window size after opening the channel.");if(e<this.maxPacketSize)throw new Error("Maximum window size cannot be less than maximum packet size.");this.maxWindowSizeValue=e}async request(e,t){if(!e)throw new TypeError("Request is required.");if(this.disposed)throw new l.ObjectDisposedError(this);if(e.recipientChannel=this.remoteChannelId,!e.wantReply)return await this.session.sendMessage(e,t),!0;const n=new c.PromiseCompletionSource;if(t){if(t.isCancellationRequested)throw new h.CancellationError;t.onCancellationRequested((()=>{n.reject(new h.CancellationError)}))}return this.requestCompletionSources.enqueue(n),await this.session.sendMessage(e,t),await n.promise}async send(e,t){return this.sendCommon(e,void 0,t)}async sendExtendedData(e,t,n){return this.sendCommon(t,e,n)}async sendCommon(e,t,n){if(this.disposed)throw new l.ObjectDisposedError(this);if(0!==e.length){if(this.sentEof)throw new Error("Cannot send more data after EOF.");await this.sendSemaphore.wait(n);try{let r=0,s=e.length;for(;s>0;){let o,a=Math.min(Math.min(this.remoteWindowSize,this.maxPacketSize),s);for(;0===a;)this.openSendingWindowCompletionSource||(this.openSendingWindowCompletionSource=new c.PromiseCompletionSource),this.session.trace(f.TraceLevel.Warning,f.SshTraceEventIds.channelWaitForWindowAdjust,`${this} send window is full. Waiting for window adjustment before sending.`),await(0,h.withCancellation)(this.openSendingWindowCompletionSource.promise,n),this.openSendingWindowCompletionSource=null,a=Math.min(Math.min(this.remoteWindowSize,this.maxPacketSize),s);void 0!==t?(o=new i.ChannelExtendedDataMessage,o.dataTypeCode=t):o=new i.ChannelDataMessage,o.recipientChannel=this.remoteChannelId,o.data=Buffer.from(e.slice(r,r+a)),await this.session.sendMessage(o,n),this.remoteWindowSize-=a,s-=a,r+=a,this.metrics.addBytesSent(a)}}finally{this.sendSemaphore.tryRelease()}}else await this.sendEof()}enableSending(){this.sendSemaphore.tryRelease()}async sendEof(e){if(!this.sentEof){await this.sendSemaphore.wait(e);try{this.sentEof=!0;const t=new i.ChannelEofMessage;t.recipientChannel=this.remoteChannelId,await this.session.sendMessage(t,e)}finally{this.sendSemaphore.tryRelease()}}}async handleRequest(e,t){if(!e.requestType)throw new l.SshConnectionError("Channel request type not specified.",o.SshDisconnectReason.protocolError);if(e.requestType===i.ChannelRequestType.exitStatus){const t=new i.ChannelSignalMessage;return e.convertTo(t),this.exitStatus=t.exitStatus,!0}if(e.requestType===i.ChannelRequestType.exitSignal){const t=new i.ChannelSignalMessage;return e.convertTo(t),this.exitSignal=t.exitSignal,this.exitErrorMessage=t.errorMessage,!0}if(e.requestType===i.ChannelRequestType.signal){const t=new i.ChannelSignalMessage;e.convertTo(t)}const n=new u.SshRequestEventArgs(e.requestType,e,this.session.principal,t),r=(0,s.findService)(this.session.config.services,(t=>(!t.channelType||t.channelType===this.channelType)&&t.channelRequest===e.requestType));await this.sendSemaphore.wait(t);try{let s=null;if(r){const e=this.session.activateService(r);await e.onChannelRequest(this,n,t)}else this.requestEmitter.fire(n);n.responsePromise&&(s=await n.responsePromise,n.isAuthorized=s instanceof i.ChannelSuccessMessage),e.wantReply&&(n.isAuthorized?(s=null!=s?s:new i.ChannelSuccessMessage,s.recipientChannel=this.remoteChannelId):(s=null!=s?s:new i.ChannelFailureMessage,s.recipientChannel=this.remoteChannelId),await this.session.sendMessage(s,t))}finally{this.sendSemaphore.tryRelease()}return n.isAuthorized||!1}handleResponse(e){const t=this.requestCompletionSources.dequeue();t&&t.resolve(e)}handleDataReceived(e){this.metrics.addBytesReceived(e.length),this.dataReceivedEmitter.fire(e)}handleExtendedDataReceived(e){this.metrics.addBytesReceived(e.data.length),this.extendedDataReceivedEmitter.fire(e)}adjustWindow(e){if(!this.disposed&&(this.windowSize-=e,this.windowSize<=this.maxWindowSizeValue/2)){const e=new i.ChannelWindowAdjustMessage;e.recipientChannel=this.remoteChannelId,e.bytesToAdd=this.maxWindowSizeValue-this.windowSize,this.windowSize=this.maxWindowSizeValue,this.session.sendMessage(e).catch((e=>{this.session.trace(f.TraceLevel.Error,f.SshTraceEventIds.channelWindowAdjustFailed,`Error sending window adjust message: ${e.message}`,e)}))}}adjustRemoteWindow(e){this.remoteWindowSize+=e,this.openSendingWindowCompletionSource&&this.openSendingWindowCompletionSource.resolve(void 0)}handleEof(){this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelEofReceived,`${this} EOF received.`),this.eofEmitter.fire()}close(e,t,n){if(e instanceof Error){const t=e;return this.localClosed||(this.localClosed=!0,this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelClosed,`${this} Closed: ${t.message}`),this.closedEmitter.fire(new p.SshChannelClosedEventArgs(t))),void this.disposeInternal()}return"number"==typeof e?this.closeWithStatus(e,t):"string"==typeof e?this.closeWithSignal(e,t,n):this.closeDefault(e)}async closeDefault(e){if(!this.remoteClosed&&!this.localClosed){this.remoteClosed=!0,await this.sendSemaphore.wait(e);try{const e=new i.ChannelCloseMessage;e.recipientChannel=this.remoteChannelId,await this.session.sendMessage(e)}catch(e){}finally{this.sendSemaphore.tryRelease()}}this.localClosed||(this.localClosed=!0,this.raiseClosedEvent()),this.disposeInternal()}async closeWithStatus(e,t){if(!this.remoteClosed&&!this.localClosed){this.exitStatus=e;const t=new i.ChannelSignalMessage;t.recipientChannel=this.remoteChannelId,t.exitStatus=e,await this.session.sendMessage(t)}await this.closeDefault(t)}async closeWithSignal(e,t,n){if(!this.remoteClosed&&!this.localClosed){this.exitSignal=e,this.exitErrorMessage=t;const n=new i.ChannelSignalMessage;n.recipientChannel=this.remoteChannelId,n.exitSignal=e,n.errorMessage=t,await this.session.sendMessage(n)}await this.closeDefault(n)}handleClose(){this.localClosed||(this.localClosed=!0,this.raiseClosedEvent(!0)),this.disposeInternal()}raiseClosedEvent(e=!1){const t=` (S: ${this.metrics.bytesSent}, R: ${this.metrics.bytesReceived})`,n=e?"remotely":"locally";let r,s;return void 0!==this.exitStatus?(s=new p.SshChannelClosedEventArgs(this.exitStatus),r=`${this} closed ${n}: status=${this.exitStatus}`):void 0!==this.exitSignal?(s=new p.SshChannelClosedEventArgs(this.exitSignal,this.exitErrorMessage),r=`${this} closed ${n}: signal=${this.exitSignal} ${this.exitErrorMessage}`):(s=new p.SshChannelClosedEventArgs,r=`${this} closed ${n}.`),this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelClosed,r+t),this.closedEmitter.fire(s),r}dispose(){if(!this.disposed&&!this.localClosed){if(!this.remoteClosed){this.remoteClosed=!0;const e=new i.ChannelCloseMessage;e.recipientChannel=this.remoteChannelId,this.session.sendMessage(e).catch((e=>{}))}const e=this.session.isClosed?`${this.session} closed.`:`${this} disposed.`;this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelClosed,e);const t=new p.SshChannelClosedEventArgs("SIGABRT",e);this.localClosed=!0,this.closedEmitter.fire(t)}this.disposeInternal()}disposeInternal(){this.disposed||(this.disposed=!0,this.cancelPendingRequests(),this.connectionService.removeChannel(this),this.sendSemaphore.dispose())}pipe(e){return m.PipeExtensions.pipeChannel(this,e)}cancelPendingRequests(){for(const e of this.requestCompletionSources)e.resolve(!1)}toString(){return`SshChannel(Type: ${this.channelType}, Id: ${this.channelId}, RemoteId: ${this.remoteChannelId})`}}t.SshChannel=v,v.sessionChannelType="session",v.defaultMaxPacketSize=i.ChannelOpenMessage.defaultMaxPacketSize,v.defaultMaxWindowSize=i.ChannelOpenMessage.defaultMaxWindowSize},5706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshClientSession=void 0;const r=n(7492),s=n(6306),i=n(3314),o=n(3305),a=n(9638),c=n(9872),l=n(5263),u=n(3193),p=n(4608),h=n(6197);class d extends r.SshSession{constructor(e){super(e,!0),this.serviceRequests=new Map,this.clientAuthCompletion=null}async authenticate(e,t){return!!await this.authenticateServer(t)&&!!await this.authenticateClient(e,t)}async authenticateServer(e){if(!this.kexService||!this.kexService.hostKey)throw new Error("Encrypt the session before authenticating.");try{this.principal=await this.raiseAuthenticatingEvent(new i.SshAuthenticatingEventArgs(i.SshAuthenticationType.serverPublicKey,{publicKey:this.kexService.hostKey},e))}catch(e){if(!(e instanceof Error))throw e;throw this.trace(h.TraceLevel.Error,h.SshTraceEventIds.authenticationError,`Error while authenticating server: ${e.message}`,e),e}return this.principal?(this.trace(h.TraceLevel.Info,h.SshTraceEventIds.sessionAuthenticated,`${this} server authenticated.`),!0):(await this.close(s.SshDisconnectReason.hostKeyNotVerifiable,"Server authentication failed."),this.trace(h.TraceLevel.Warning,h.SshTraceEventIds.serverAuthenticationFailed,`${this} server authentication failed.`),!1)}authenticateClient(e,t,n){if(!e)throw new TypeError("A credentials object is required.");return"function"==typeof t?this.authenticateClientWithCompletion(e,t,n):new Promise(((n,r)=>this.authenticateClientWithCompletion(e,((e,t)=>{e?r(e):n(t)}),t)))}async authenticateClientWithCompletion(e,t,n){if(this.clientAuthCompletion=new o.PromiseCompletionSource,this.clientAuthCompletion.promise.then((e=>t(void 0,e)),(e=>t(e))),n){if(n.isCancellationRequested)throw new a.CancellationError;n.onCancellationRequested((e=>{this.clientAuthCompletion&&this.clientAuthCompletion.reject(new a.CancellationError)}))}let r=this.getService(l.AuthenticationService);if(!r){const e=new s.ServiceRequestMessage;e.serviceName=l.AuthenticationService.serviceName,await this.sendMessage(e,n),r=this.activateService(l.AuthenticationService)}await r.authenticateClient(e,n)}onAuthenticationComplete(e){e?this.trace(h.TraceLevel.Info,h.SshTraceEventIds.sessionAuthenticated,`${this} client authenticated.`):this.trace(h.TraceLevel.Warning,h.SshTraceEventIds.clientAuthenticationFailed,`${this} client authentication failed.`),this.clientAuthCompletion&&(this.clientAuthCompletion.resolve(e),this.clientAuthCompletion=null)}async requestService(e,t){let n=!1,r=this.serviceRequests.get(e);if(r||(r=new o.PromiseCompletionSource,this.serviceRequests.set(e,r),n=!0),n){const n=new s.ServiceRequestMessage;n.serviceName=e,await this.sendMessage(n,t)}await r.promise}async handleServiceAcceptMessage(e,t){const n=this.serviceRequests.get(e.serviceName);null==n||n.resolve(!0)}async openChannel(e,t,n){if(!this.connectionService){const e=new s.ServiceRequestMessage;e.serviceName=u.ConnectionService.serviceName,await this.sendMessage(e,n)}return await super.openChannel(e,t,n)}handleDisconnected(){return this.reconnecting?(this.reconnecting=!1,!1):super.handleDisconnected()}async reconnect(e,t){if(this.trace(h.TraceLevel.Verbose,h.SshTraceEventIds.clientSessionReconnecting,"Attempting to reconnect..."),this.isClosed)throw new p.ObjectDisposedError(this);if(this.isConnected)throw new Error("Already connected.");if(!this.protocol)throw new Error("The session was never previously connected.");if(this.reconnecting)throw new Error("Already reconnecting.");this.reconnecting=!0;try{await this.reconnectInternal(e,t)}finally{this.reconnecting=!1}}async reconnectInternal(e,t){var n,r,i,o,a,l;const u=this.sessionId,d=this.protocol,f=null===(n=this.kexService)||void 0===n?void 0:n.hostKey;if(!(u&&d&&this.kexService&&f&&(null===(r=d.extensions)||void 0===r?void 0:r.has(c.SshProtocolExtensionNames.sessionReconnect))))throw new Error("Reconnect was not enabled for this session.");let m;try{if(this.sessionId=null,await this.connect(e,t),!this.sessionId||!this.algorithms||!this.algorithms.signer)throw new Error("Session is not encrypted.");const n=this.kexService.hostKey,r=n?await n.getPublicKeyBytes():null,i=await f.getPublicKeyBytes();if(!r||!i||!r.equals(i)){const e="The server host key is different.";throw this.trace(h.TraceLevel.Error,h.SshTraceEventIds.clientSessionReconnectFailed,`Reconnection failed: ${e}`),new p.SshReconnectError(e,s.SshReconnectFailureReason.differentServerHostKey)}m=this.sessionId}catch(e){throw this.protocol=d,super.handleDisconnected(),e}finally{this.sessionId=u,this.kexService.hostKey=f}const g=await this.createReconnectToken(u,m),v=new s.SessionReconnectRequestMessage;v.requestType="session-reconnect@microsoft.com",v.clientReconnectToken=g,v.lastReceivedSequenceNumber=d.lastIncomingSequence,v.wantReply=!0;const y=await this.requestResponse(v,s.SessionReconnectResponseMessage,s.SessionReconnectFailureMessage,t);if(y instanceof s.SessionReconnectFailureMessage){const e=null!==(i=y.reasonCode)&&void 0!==i?i:s.SshReconnectFailureReason.unknownServerFailure,t=null!==(o=y.description)&&void 0!==o?o:"The server rejected the reconnect request.";throw this.trace(h.TraceLevel.Error,h.SshTraceEventIds.clientSessionReconnectFailed,`Reconnection failed: ${t}`),this.protocol=d,new p.SshReconnectError(t,e)}if(!this.verifyReconnectToken(u,m,null!==(a=y.serverReconnectToken)&&void 0!==a?a:Buffer.alloc(0))){const e="The reconnect token provided by the server was invalid.";throw this.trace(h.TraceLevel.Error,h.SshTraceEventIds.clientSessionReconnectFailed,`Reconnection failed: ${e}`),new p.SshReconnectError(e,s.SshReconnectFailureReason.invalidServerReconnectToken)}this.trace(h.TraceLevel.Info,h.SshTraceEventIds.clientSessionReconnecting,"Reconnect request was accepted by the server.");const b=d.getSentMessages((null!==(l=y.lastReceivedSequenceNumber)&&void 0!==l?l:0)+1);if(!b){const e="Client is unable to re-send messages requested by the server.";throw this.trace(h.TraceLevel.Error,h.SshTraceEventIds.clientSessionReconnectFailed,`Reconnection failed: ${e}`),new p.SshReconnectError(e,s.SshReconnectFailureReason.clientDroppedMessages)}let w=0;for(const e of b)await this.sendMessage(e,t),w++;d.dispose(),this.metrics.addReconnection(),this.trace(h.TraceLevel.Info,h.SshTraceEventIds.clientSessionReconnecting,`${this} reconnected. Re-sent ${w} dropped messages.`)}dispose(){this.clientAuthCompletion&&this.clientAuthCompletion.reject(new p.ObjectDisposedError(this)),super.dispose()}}t.SshClientSession=d},5523:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshRpcMessageStream=void 0;const r=n(5844),s=n(4300),i=n(7309),o="Content-Length: ",a="\r\n\r\n";class c{constructor(e){this.channel=e,this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter,this.callback=null,this.messageBuffer=new i.SshDataWriter(s.Buffer.alloc(1024)),this.headersLength=null,this.messageLength=null,this.onError=this.errorEmitter.event,this.onClose=this.closeEmitter.event,this.onPartialMessage=this.partialMessageEmitter.event,this.eventRegistration=this.channel.onDataReceived(this.onDataReceived.bind(this)),this.channel.onClosed((e=>{e.error&&this.errorEmitter.fire(e.error),this.closeEmitter.fire()}))}listen(e){return this.callback=e,r.Disposable.create((()=>{this.callback=null}))}dispose(){this.eventRegistration&&this.eventRegistration.dispose()}onDataReceived(e){if(this.messageBuffer.write(e),this.channel.adjustWindow(e.length),e=this.messageBuffer.toBuffer(),null===this.messageLength){const t=e.indexOf(a);if(t<0)return;const n=e.slice(0,t).toString();if(!n.startsWith(o))throw new Error(`Message does not start with JSON-RPC headers.\n${n}`);this.headersLength=t+a.length,this.messageLength=parseInt(n.substr(o.length,t-o.length),10)}const t=this.messageBuffer.position,n=this.headersLength+this.messageLength;if(t>=n){if(this.callback){const t=e.slice(this.headersLength,n).toString();let r;try{r=JSON.parse(t)}catch(e){if(!(e instanceof Error))throw e;throw new Error(`Failed to parse JSON-RPC message: ${e.message}\n${t}`)}this.callback(r)}this.messageLength=null,this.messageBuffer.position=0,t>n&&this.onDataReceived(e.slice(n))}}}class l{constructor(e){this.channel=e,this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.onError=this.errorEmitter.event,this.onClose=this.closeEmitter.event,this.channel.onClosed((e=>{e.error&&this.errorEmitter.fire([e.error,e.errorMessage&&{jsonrpc:e.errorMessage}||void 0,e.exitStatus]),this.closeEmitter.fire()}))}write(e){const t=JSON.stringify(e),n=s.Buffer.from(t),r=s.Buffer.from(o+n.length+a),i=s.Buffer.alloc(r.length+n.length);return r.copy(i,0),n.copy(i,r.length),this.channel.send(i).catch((e=>{this.errorEmitter.fire([e,void 0,void 0])}))}end(){}dispose(){}}t.SshRpcMessageStream=class{constructor(e){this.reader=new c(e),this.writer=new l(e)}}},7331:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshServerSession=void 0;const r=n(7492),s=n(5844),i=n(6306),o=n(4608),a=n(9872),c=n(6197);class l extends r.SshSession{constructor(e,t){super(e,!1),this.clientAuthenticatedEmitter=new s.Emitter,this.onClientAuthenticated=this.clientAuthenticatedEmitter.event,this.reconnectedEmitter=new s.Emitter,this.onReconnected=this.reconnectedEmitter.event,this.credentials={publicKeys:[]};const n=e.protocolExtensions.includes(a.SshProtocolExtensionNames.sessionReconnect);if(n&&!t)throw new Error("When reconnect is enabled, server sessions require a reference to a shared collection to track reconnectable sessions.");if(!n&&t)throw new Error("When reconnect is not enabled, the reconnectable sessions collection is not applicable.");this.reconnectableSessions=t}async handleServiceRequestMessage(e,t){if(!this.activateService(e.serviceName))throw new o.SshConnectionError(`Service "${e.serviceName}" not available.`,i.SshDisconnectReason.serviceNotAvailable);{const n=new i.ServiceAcceptMessage;n.serviceName=e.serviceName,await this.sendMessage(n,t)}}async handleRequestMessage(e,t){var n;if("session-reconnect@microsoft.com"===e.requestType&&(null===(n=this.config.protocolExtensions)||void 0===n?void 0:n.includes(a.SshProtocolExtensionNames.sessionReconnect))){const n=e.convertTo(new i.SessionReconnectRequestMessage);await this.reconnect(n,t)}else await super.handleRequestMessage(e,t)}handleClientAuthenticated(){this.clientAuthenticatedEmitter.fire()}async enableReconnect(e){await super.enableReconnect(e),this.reconnectableSessions.includes(this)||this.reconnectableSessions.push(this)}handleDisconnected(){return!!this.reconnecting||super.handleDisconnected()}async reconnect(e,t){var n,r,s;if(!this.reconnectableSessions)throw new Error("Disconnected sessions collection should have been initialized when reconnect is enabled.");let a;for(const t of this.reconnectableSessions)if(t!==this&&await this.verifyReconnectToken(t.sessionId,this.sessionId,null!==(n=e.clientReconnectToken)&&void 0!==n?n:Buffer.alloc(0))){a=t,this.reconnectableSessions.splice(this.reconnectableSessions.indexOf(a),1);break}if(!a||a.isClosed){const e="Requested reconnect session was not found or the reconnect token provided by the client was invalid.";this.trace(c.TraceLevel.Error,c.SshTraceEventIds.serverSessionReconnectFailed,`Reconnect failed: ${e}`);const n=new i.SessionReconnectFailureMessage;return n.reasonCode=i.SshReconnectFailureReason.sessionNotFound,n.description=e,void await this.sendMessage(n,t)}const l=a.protocol.getSentMessages((null!==(r=e.lastReceivedSequenceNumber)&&void 0!==r?r:0)+1);if(!l){this.reconnectableSessions.push(a);const e="Server is unable to re-send messages requested by the client.";this.trace(c.TraceLevel.Error,c.SshTraceEventIds.serverSessionReconnectFailed,`Reconnect failed: ${e}`);const n=new i.SessionReconnectFailureMessage;return n.reasonCode=i.SshReconnectFailureReason.serverDroppedMessages,n.description=e,void await this.sendMessage(n,t)}const u=new i.SessionReconnectResponseMessage;u.serverReconnectToken=await this.createReconnectToken(a.sessionId,this.sessionId),u.lastReceivedSequenceNumber=a.protocol.lastIncomingSequence,await this.sendMessage(u,t);try{for(a.reconnecting=!0,null===(s=a.protocol)||void 0===s||s.dispose();a.isConnected;)await new Promise((e=>setTimeout((()=>e()),5)));a.protocol=this.protocol,a.protocol.kexService=a.kexService,this.protocol=void 0;for(const e of l)await a.sendMessage(e,t);this.dispose(new o.SshConnectionError("Reconnected.",i.SshDisconnectReason.none))}finally{a.reconnecting=!1}this.reconnectableSessions.push(a),a.metrics.addReconnection(),a.processMessages().catch((e=>{this.trace(c.TraceLevel.Error,c.SshTraceEventIds.unknownError,`Unhandled error processing messages: ${e.message}`,e)})),this.trace(c.TraceLevel.Info,c.SshTraceEventIds.serverSessionReconnecting,`${a} reconnected. Re-sent ${l.length} dropped messages.`),a.reconnectedEmitter.fire()}dispose(e){if(this.reconnectableSessions){const e=this.reconnectableSessions.indexOf(this);e>=0&&this.reconnectableSessions.splice(e,1)}super.dispose(e)}}t.SshServerSession=l},7492:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSession=void 0;const r=n(6197),s=n(4300),i=n(5844),o=n(9872),a=n(9273),c=n(1163),l=n(1915),u=n(4237),p=n(4865),h=n(3193),d=n(5263),f=n(6744),m=n(5255),g=n(3379),v=n(6892),y=n(6306),b=n(4340),w=n(3305),S=n(8764),E=n(1656),_=n(7521),x=n(9638),T=n(4608),C=n(7399),P=n(3661),A=n(6655),R=n(3689),I=n(1039);let k=0;class O{get algorithms(){return this.protocol?this.protocol.algorithms:null}get principal(){return this.principalValue}set principal(e){this.principalValue=e}constructor(e,t){if(this.config=e,this.remoteVersion=null,this.activatedServices=new Map,this.connectionService=null,this.requestHandlers=new A.Queue,this.blockedMessages=[],this.blockedMessagesSemaphore=new C.Semaphore(1),this.connected=!1,this.disposed=!1,this.metrics=new b.SessionMetrics,this.reconnecting=!1,this.sessionId=null,this.principalValue=null,this.authenticatingEmitter=new i.Emitter,this.onAuthenticating=this.authenticatingEmitter.event,this.closedEmitter=new i.Emitter,this.onClosed=this.closedEmitter.event,this.disconnectedEmitter=new i.Emitter,this.onDisconnected=this.disconnectedEmitter.event,this.serviceActivatedEmitter=new i.Emitter,this.onServiceActivated=this.serviceActivatedEmitter.event,this.channelOpeningEmitter=new i.Emitter,this.onChannelOpening=this.channelOpeningEmitter.event,this.requestEmitter=new i.Emitter,this.onRequest=this.requestEmitter.event,this.reportProgressEmitter=new i.Emitter,this.onReportProgress=this.reportProgressEmitter.event,this.trace=(e,t,n,r)=>{},this.isClientSession=t,this.sessionNumber=++k,!e)throw new TypeError("Session configuration is required.");if(e.keyExchangeAlgorithms.find((e=>!!e)))this.kexService=new u.KeyExchangeService(this);else{if(e.encryptionAlgorithms.length>0&&e.encryptionAlgorithms.indexOf(null)<0)throw new Error("Encryption requires a key-exchange algorithm to be configured.");if(e.hmacAlgorithms.length>0&&e.hmacAlgorithms.indexOf(null)<0)throw new Error("HMAC requires a key-exchange algorithm to be configured.");if(e.publicKeyAlgorithms.length>0&&e.publicKeyAlgorithms.indexOf(null)<0)throw new Error("Host authentication requires a key-exchange algorithm to be configured.");this.kexService=null,this.activateService(h.ConnectionService)}e.onConfigurationChanged((()=>{const t=this.protocol;t&&(t.traceChannelData=e.traceChannelData)}))}get isConnected(){return this.connected}get isClosed(){return this.disposed}get services(){return[...this.activatedServices.values()]}get channels(){var e,t;return null!==(t=null===(e=this.connectionService)||void 0===e?void 0:e.channels)&&void 0!==t?t:[]}get protocolExtensions(){var e;return(null===(e=this.protocol)||void 0===e?void 0:e.extensions)||null}getService(e){return this.activatedServices.get(e)||null}activateService(e){let t;if("function"==typeof e)t=e;else{const n=e;if(t=(0,p.findService)(this.config.services,(e=>e.serviceRequest===n)),!t)return null}let n=this.activatedServices.get(t);if(!n){if(!this.config.services.has(t))throw new Error(`Service type not configured: ${t.name}`);n=new t(this,this.config.services.get(t)),t===h.ConnectionService&&(this.connectionService=n),this.activatedServices.set(t,n),this.serviceActivatedEmitter.fire(n)}return n}async connect(e,t){if(!e)throw new TypeError("A session stream is required.");if(this.disposed)throw new T.ObjectDisposedError(this);this.connectPromise||(this.connectPromise=this.doConnect(e,t)),await this.connectPromise}async doConnect(e,t){this.trace(r.TraceLevel.Info,r.SshTraceEventIds.sessionConnecting,`${this} ${this.reconnecting?"re":""}connecting...`),this.raiseReportProgress(R.Progress.OpeningSshSessionConnection),this.protocol=new l.SshProtocol(e,this.config,this.metrics,this.trace),this.protocol.kexService=this.kexService,this.raiseReportProgress(R.Progress.StartingProtocolVersionExchange),await this.exchangeVersions(t),this.kexService?await this.encrypt(t):(await this.sendMessage(m.KeyExchangeInitMessage.none,t),await(0,x.withCancellation)(this.versionExchangePromise,t),this.raiseReportProgress(R.Progress.CompletedProtocolVersionExchange),this.connected=!0),this.processMessages().catch((e=>{this.trace(r.TraceLevel.Error,r.SshTraceEventIds.unknownError,`Unhandled error processing messages: ${e.message}`,e)})),this.raiseReportProgress(R.Progress.OpenedSshSessionConnection)}async exchangeVersions(e){const t=this.protocol.writeProtocolVersion(O.localVersion.toString(),e),n=this.protocol.readProtocolVersion(e);this.versionExchangePromise=n.then((async e=>{let t;this.trace(r.TraceLevel.Info,r.SshTraceEventIds.protocolVersion,`Local version: ${O.localVersion}, remote version: ${e}`);const n=c.SshVersionInfo.tryParse(e);if(n){if(this.remoteVersion=n,"2.0"===n.protocolVersion)return;t=`Remote SSH version ${this.remoteVersion} is not supported. This library only supports SSH v2.0.`}else t=`Could not parse remote SSH version ${e}`;await this.close(y.SshDisconnectReason.protocolVersionNotSupported,t,new Error(t))})),await t}async encrypt(e){var t,n;const s=this.protocol;if(!s)throw new T.ObjectDisposedError(this);await s.considerReExchange(!0,e),await(0,x.withCancellation)(this.versionExchangePromise,e),this.raiseReportProgress(R.Progress.CompletedProtocolVersionExchange),this.connected=!0,this.raiseReportProgress(R.Progress.StartingKeyExchange);let i=null;for(;!(this.isClosed||(null===(t=this.protocol)||void 0===t?void 0:t.algorithms)||i instanceof y.DisconnectMessage)&&(i=await s.receiveMessage(e),i);)await this.handleMessage(i,e);if(this.raiseReportProgress(R.Progress.CompletedKeyExchange),!(null===(n=this.protocol)||void 0===n?void 0:n.algorithms))throw new T.SshConnectionError("Session closed while encrypting.",y.SshDisconnectReason.connectionLost);this.protocol.algorithms.cipher&&this.trace(r.TraceLevel.Info,r.SshTraceEventIds.sessionEncrypted,`${this} encrypted.`)}async processMessages(){var e;for(this.connected=!0;!this.disposed;){const t=this.protocol;if(!t)break;let n=null;try{n=await t.receiveMessage()}catch(t){if(!(t instanceof Error))throw t;let n=y.SshDisconnectReason.protocolError;t instanceof T.SshConnectionError?n=null!==(e=t.reason)&&void 0!==e?e:n:this.trace(r.TraceLevel.Error,r.SshTraceEventIds.receiveMessageFailed,`Error receiving message: ${t.message}`,t),await this.close(n,t.message,t)}if(!n){await this.close(y.SshDisconnectReason.connectionLost,"Connection lost.");break}try{await this.handleMessage(n)}catch(e){if(!(e instanceof Error))throw e;this.trace(r.TraceLevel.Error,r.SshTraceEventIds.handleMessageFailed,`Error handling ${n}: ${e.message}`,e),await this.close(y.SshDisconnectReason.protocolError,e.message,e)}}this.connected=!1}get canAcceptRequests(){var e;return!(this.kexService&&(!(null===(e=this.protocol)||void 0===e?void 0:e.algorithms)||this.protocol.algorithms.cipher&&!this.principal))}async sendMessage(e,t){var n,s;if(!e)throw new TypeError("Message expected.");if(t&&t.isCancellationRequested)throw new x.CancellationError;const i=this.protocol;if(!i||this.disposed)throw new T.ObjectDisposedError(this);if(this.kexService&&this.kexService.exchanging&&e.messageType>4&&(e.messageType<20||e.messageType>49))return void this.blockedMessages.push(e);let a;await this.blockedMessagesSemaphore.wait(t);try{a=await i.sendMessage(e,t),this.blockedMessagesSemaphore.release()}catch(t){if(this.blockedMessagesSemaphore.release(),t instanceof T.SshConnectionError&&t.reason===y.SshDisconnectReason.connectionLost&&(null===(n=this.protocolExtensions)||void 0===n?void 0:n.has(o.SshProtocolExtensionNames.sessionReconnect)))return;if(!(t instanceof Error))throw t;throw this.trace(r.TraceLevel.Error,r.SshTraceEventIds.sendMessageFailed,`Error sending ${e}: ${t.message}`,t),t}if(!a&&!(null===(s=this.protocolExtensions)||void 0===s?void 0:s.has(o.SshProtocolExtensionNames.sessionReconnect)))throw new T.SshConnectionError("Session disconnected.",y.SshDisconnectReason.connectionLost)}handleMessage(e,t){var n;if(e instanceof g.ConnectionMessage&&this.connectionService)return this.connectionService.handleMessage(e,t);if(e instanceof m.NewKeysMessage)return this.handleNewKeysMessage(e,t);if(e instanceof m.KeyExchangeMessage)return this.handleKeyExchangeMessage(e,t);if(e instanceof v.AuthenticationMessage)return null===(n=this.getService(d.AuthenticationService))||void 0===n?void 0:n.handleMessage(e,t);if(e instanceof y.ServiceRequestMessage)return this.handleServiceRequestMessage(e,t);if(e instanceof y.ServiceAcceptMessage)return this.handleServiceAcceptMessage(e,t);if(e instanceof y.SessionRequestMessage)return this.handleRequestMessage(e,t);if(e instanceof y.SessionRequestSuccessMessage)return this.handleRequestSuccessMessage(e);if(e instanceof y.SessionRequestFailureMessage)return this.handleRequestFailureMessage(e);if(e instanceof y.ExtensionInfoMessage)return this.handleExtensionInfoMessage(e,t);if(e instanceof y.DisconnectMessage)return this.handleDisconnectMessage(e);if(e instanceof y.UnimplementedMessage)return this.handleUnimplementedMessage(e,t);if(e instanceof y.DebugMessage)return this.handleDebugMessage(e);if(!(e instanceof y.IgnoreMessage))throw e instanceof f.SshMessage?new Error(`Unhandled message type: ${e.constructor.name}`):new TypeError("Message argument was "+(e?"invalid type.":"null."))}async handleRequestMessage(e,t){var n;let s=!1,i=null;if("initial-channel-request@microsoft.com"===e.requestType&&this.config.protocolExtensions.includes(o.SshProtocolExtensionNames.openChannelRequest)){const n=e.convertTo(new y.SessionChannelRequestMessage),r=n.senderChannel,i=this.channels.find((e=>e.remoteChannelId===r));i&&n.request&&(n.request.wantReply=!1,s=await i.handleRequest(n.request,t))}else if("enable-session-reconnect@microsoft.com"===e.requestType&&(null===(n=this.config.protocolExtensions)||void 0===n?void 0:n.includes(o.SshProtocolExtensionNames.sessionReconnect)))this.protocol.incomingMessagesHaveReconnectInfo||(this.protocol.incomingMessagesHaveReconnectInfo=!0,this.protocol.incomingMessagesHaveLatencyInfo=this.protocol.extensions.has(o.SshProtocolExtensionNames.sessionLatency),s=!0);else if(this.canAcceptRequests){const n=new E.SshRequestEventArgs(e.requestType||"",e,this.principal,t),r=(0,p.findService)(this.config.services,(t=>t.sessionRequest===e.requestType));if(r){const e=this.activateService(r);await e.onSessionRequest(n,t)}else this.raiseSessionRequest(n);n.responsePromise?(i=await n.responsePromise,s=i instanceof y.SessionRequestSuccessMessage):s=n.isAuthorized||!1}else this.trace(r.TraceLevel.Warning,r.SshTraceEventIds.sessionRequestFailed,"Session request blocked because the session is not yet authenticated."),s=!1;e.wantReply&&(s?i instanceof y.SessionRequestSuccessMessage||(i=new y.SessionRequestSuccessMessage):i instanceof y.SessionRequestFailureMessage||(i=new y.SessionRequestFailureMessage),await this.sendMessage(i,t))}raiseReportProgress(e){const t=new I.SshReportProgressEventArgs(e,this.sessionNumber);this.reportProgressEmitter.fire(t)}raiseSessionRequest(e){this.requestEmitter.fire(e)}async handleServiceRequestMessage(e,t){}async handleServiceAcceptMessage(e,t){}async handleKeyExchangeMessage(e,t){this.kexService?await this.kexService.handleMessage(e,t):e instanceof m.KeyExchangeInitMessage&&e.allowsNone||await this.close(y.SshDisconnectReason.keyExchangeFailed,"Encryption is disabled.")}async handleNewKeysMessage(e,t){var n;try{await this.blockedMessagesSemaphore.wait(t),await this.protocol.handleNewKeys(t),(null===(n=this.algorithms)||void 0===n?void 0:n.isExtensionInfoRequested)&&await this.sendExtensionInfo(t);try{for(;this.blockedMessages.length>0;){const e=this.blockedMessages.shift();if(!this.protocol)throw new T.ObjectDisposedError(this);await this.protocol.sendMessage(e,t)}}catch(e){if(!(e instanceof Error))throw e;await this.close(y.SshDisconnectReason.protocolError,void 0,e)}}finally{this.blockedMessagesSemaphore.release()}}async handleUnimplementedMessage(e,t){void 0!==e.unimplementedMessageType&&await this.sendMessage(e,t)}handleDebugMessage(e){e.message&&this.trace(e.alwaysDisplay?r.TraceLevel.Info:r.TraceLevel.Verbose,r.SshTraceEventIds.debugMessage,e.message)}async raiseAuthenticatingEvent(e){this.trace(r.TraceLevel.Info,r.SshTraceEventIds.sessionAuthenticating,`${this} Authenticating(${e})`),this.raiseReportProgress(R.Progress.StartingSessionAuthentication),this.authenticatingEmitter.fire(e);let t=e.authenticationPromise;t||(t=Promise.resolve(null));const n=await t;return this.raiseReportProgress(R.Progress.CompletedSessionAuthentication),n}async request(e,t){if(!e)throw new TypeError("Request is required.");return e.wantReply?await this.requestResponse(e,y.SessionRequestSuccessMessage,y.SessionRequestFailureMessage,t)instanceof y.SessionRequestSuccessMessage:(await this.sendMessage(e,t),!0)}async requestResponse(e,t,n,r){if(!e)throw new TypeError("Request is required.");if(!t)throw new TypeError("Success response type is required.");if(!n)throw new TypeError("Failure response type is required.");e.wantReply=!0;const s=(e,r)=>{var o,a;if(e)i.reject(e);else{if(s.isCancelled)return;if(r instanceof y.SessionRequestFailureMessage){const e=null!==(o=null==r?void 0:r.convertTo(new n,!0))&&void 0!==o?o:null;i.resolve(e)}else if(r instanceof y.SessionRequestSuccessMessage){const e=null!==(a=null==r?void 0:r.convertTo(new t,!0))&&void 0!==a?a:null;i.resolve(e)}else i.reject(new Error("Unknown response message type."))}},i=new w.PromiseCompletionSource;if(r){if(r.isCancellationRequested)throw new x.CancellationError;r.onCancellationRequested((()=>{s.isCancelled=!0,i.reject(new x.CancellationError)}))}return this.requestHandlers.enqueue(s),await this.sendMessage(e,r),await i.promise}handleRequestSuccessMessage(e){this.invokeRequestHandler(e,void 0,void 0)}handleRequestFailureMessage(e){this.invokeRequestHandler(void 0,e,void 0)}invokeRequestHandler(e,t,n){let r;for(;(r=this.requestHandlers.dequeue())&&(r(n,null!=e?e:t),n););}async acceptChannel(e,t){const n="string"==typeof e?e:void 0;t||"object"!=typeof e||(t=e),this.activateService(h.ConnectionService);const r=this.connectionService.acceptChannel(n||a.SshChannel.sessionChannelType,t);return await r}async openChannel(e,t,n){let r;if("string"==typeof e||null===e?(r=new g.ChannelOpenMessage,r.channelType=null!=e?e:a.SshChannel.sessionChannelType):e instanceof g.ChannelOpenMessage?r=e:(r=new g.ChannelOpenMessage,r.channelType=a.SshChannel.sessionChannelType,n=e),t instanceof g.ChannelRequestMessage)return await this.openChannelWithInitialRequest(r,t,n);n||null===t||(n=t),this.activateService(h.ConnectionService);const s=new w.PromiseCompletionSource;return await this.connectionService.openChannel(r,s,n),await s.promise}async openChannelWithInitialRequest(e,t,n){var r;this.activateService(h.ConnectionService);const s=new w.PromiseCompletionSource,i=await this.connectionService.openChannel(e,s,n);if(n){if(n.isCancellationRequested)throw new x.CancellationError;n.onCancellationRequested((()=>s.reject(new x.CancellationError)))}let a,c;const l=this.config.protocolExtensions.includes(o.SshProtocolExtensionNames.openChannelRequest)&&(null===(r=this.protocolExtensions)||void 0===r?void 0:r.has(o.SshProtocolExtensionNames.openChannelRequest));if(!1===l)a=await s.promise,c=await a.request(t,n);else{const e=t.wantReply||void 0===l,r=new y.SessionChannelRequestMessage;r.requestType="initial-channel-request@microsoft.com",r.senderChannel=i,r.request=t,r.wantReply=e;const o=this.request(r,n);a=await s.promise,e?(c=await o,c||void 0!==l||(c=await a.request(t))):c=!0}if(!c)throw await a.close(),new Error("The initial channel request was denied.");return a}async handleChannelOpening(e,t,n=!0){if(n){const n=(0,p.findService)(this.config.services,(t=>t.channelType===e.channel.channelType&&!t.channelRequest));if(n){const r=this.activateService(n);return void await r.onChannelOpening(e,t)}}e.cancellation=null!=t?t:i.CancellationToken.None,this.channelOpeningEmitter.fire(e)}async sendExtensionInfo(e){if(!this.protocol)return;const t=new y.ExtensionInfoMessage;t.extensionInfo={};for(const e of this.config.protocolExtensions)if(e===o.SshProtocolExtensionNames.serverSignatureAlgorithms){const n=Array.from(new Set((0,_.algorithmNames)(this.config.publicKeyAlgorithms))).join(",");t.extensionInfo[e]=n}else t.extensionInfo[e]="";await this.protocol.sendMessage(t,e)}async handleExtensionInfoMessage(e,t){if(this.protocol&&(this.protocol.extensions=new Map,e.extensionInfo)){for(const t of this.config.protocolExtensions){const n=e.extensionInfo[t];"string"==typeof n&&this.protocol.extensions.set(t,n)}this.protocol.extensions.has(o.SshProtocolExtensionNames.sessionReconnect)&&await this.enableReconnect(t)}}async close(e,t,n){var s,i,o;if(!this.disposed&&this.connected){if(this.connected=!1,this.trace(r.TraceLevel.Info,r.SshTraceEventIds.sessionClosing,`${this} Close(${y.SshDisconnectReason[e]}, "${t||""}")`),e!==y.SshDisconnectReason.connectionLost)try{const n=new y.DisconnectMessage;n.reasonCode=e,n.description=t||"",await(null===(s=this.protocol)||void 0===s?void 0:s.sendMessage(n))}catch(e){}else if(this.handleDisconnected())return null===(i=this.protocol)||void 0===i||i.dispose(),this.trace(r.TraceLevel.Info,r.SshTraceEventIds.sessionDisconnected,`${this} disconnected.`),void this.disconnectedEmitter.fire();this.disposed=!0,this.closedError=n,(n=null!=n?n:new T.SshConnectionError(t,e))&&(null===(o=this.connectionService)||void 0===o||o.close(n)),this.closedEmitter.fire(new S.SshSessionClosedEventArgs(e,t||"Disconnected.",n)),this.dispose()}}handleDisconnected(){var e,t;return this.connectPromise=void 0,null===(e=this.kexService)||void 0===e||e.abortKeyExchange(),!!(null===(t=this.protocolExtensions)||void 0===t?void 0:t.has(o.SshProtocolExtensionNames.sessionReconnect))}async handleDisconnectMessage(e){var t;const n=e.description||"Received disconnect message.";await this.close(null!==(t=e.reasonCode)&&void 0!==t?t:y.SshDisconnectReason.none,n)}dispose(e){var t,n;const s=null!=e?e:this.closedError instanceof T.SshConnectionError?this.closedError:new T.SshConnectionError(this.constructor.name+" disposed.");this.disposed||(this.trace(r.TraceLevel.Info,r.SshTraceEventIds.sessionClosing,`${this} disposed.`),this.disposed=!0,this.closedEmitter.fire(new S.SshSessionClosedEventArgs(y.SshDisconnectReason.none,s.message,s))),this.invokeRequestHandler(void 0,void 0,s),this.metrics.close(),null===(t=this.connectionService)||void 0===t||t.dispose();for(const e of this.activatedServices.values())e!==this.connectionService&&e.dispose();this.activatedServices.clear(),null===(n=this.protocol)||void 0===n||n.dispose(),this.protocol=void 0}async enableReconnect(e){var t;try{if(await this.blockedMessagesSemaphore.wait(),null===(t=this.kexService)||void 0===t?void 0:t.exchanging)this.trace(r.TraceLevel.Error,r.SshTraceEventIds.sessionReconnectInitFailed,"Failed to initialize session reconnect because a key-exchange was in-progress.");else{const t=new y.SessionRequestMessage("enable-session-reconnect@microsoft.com",!1);await this.protocol.sendMessage(t,e),this.protocol&&(this.protocol.outgoingMessagesHaveReconnectInfo=!0,this.protocol.outgoingMessagesHaveLatencyInfo=this.protocol.extensions.has(o.SshProtocolExtensionNames.sessionLatency))}this.blockedMessagesSemaphore.release()}catch(e){throw this.blockedMessagesSemaphore.release(),e instanceof Error&&await this.close(y.SshDisconnectReason.protocolError,void 0,e),e}}async createReconnectToken(e,t){return await this.algorithms.signer.sign(s.Buffer.concat([e,t]))}async verifyReconnectToken(e,t,n){return await this.algorithms.verifier.verify(s.Buffer.concat([e,t]),n)}pipe(e){return P.PipeExtensions.pipeSession(this,e)}toString(){return this.constructor.name}}t.SshSession=O,O.localVersion=c.SshVersionInfo.getLocalVersion()},890:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSessionAlgorithms=void 0,t.SshSessionAlgorithms=class{dispose(){this.cipher&&this.cipher.dispose(),this.decipher&&this.decipher.dispose(),this.signer&&this.signer.dispose(),this.verifier&&this.verifier.dispose()}}},9872:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSessionConfiguration=t.SshProtocolExtensionNames=void 0;const r=n(5844),s=n(7521),i=n(4237),o=n(3193),a=n(5263),c=n(6744);var l;!function(e){e.serverSignatureAlgorithms="server-sig-algs",e.openChannelRequest="open-channel-request@microsoft.com",e.sessionReconnect="session-reconnect@microsoft.com",e.sessionLatency="session-latency@microsoft.com"}(l=t.SshProtocolExtensionNames||(t.SshProtocolExtensionNames={})),t.SshSessionConfiguration=class{constructor(e=!0){this.protocolExtensions=[],this.services=new Map,this.authenticationMethods=[],this.messages=new Map,this.contextualMessages=new Map,this.keyExchangeAlgorithms=[],this.publicKeyAlgorithms=[],this.encryptionAlgorithms=[],this.hmacAlgorithms=[],this.compressionAlgorithms=[],this.traceChannelDataValue=!1,this.configurationChangedEmitter=new r.Emitter,this.onConfigurationChanged=this.configurationChangedEmitter.event,this.maxClientAuthenticationAttempts=5,this.enableKeyExchangeGuess=!1,this.keyRotationThreshold=536870912,this.protocolExtensions.push(l.serverSignatureAlgorithms),this.protocolExtensions.push(l.openChannelRequest),this.services.set(i.KeyExchangeService,null),this.services.set(o.ConnectionService,null),this.services.set(a.AuthenticationService,null),this.authenticationMethods.push("none","password","publickey","keyboard-interactive");for(const[e,t]of c.SshMessage.index)if("number"==typeof e)this.messages.set(e,t);else{const[n,r]=e;let s=this.contextualMessages.get(r);s||(s=new Map,this.contextualMessages.set(r,s)),s.set(n,t)}e?(this.keyExchangeAlgorithms.push(s.SshAlgorithms.keyExchange.ecdhNistp384Sha384),this.keyExchangeAlgorithms.push(s.SshAlgorithms.keyExchange.ecdhNistp256Sha256),this.keyExchangeAlgorithms.push(s.SshAlgorithms.keyExchange.dhGroup16Sha512),this.keyExchangeAlgorithms.push(s.SshAlgorithms.keyExchange.dhGroup14Sha256),this.publicKeyAlgorithms.push(s.SshAlgorithms.publicKey.rsaWithSha512),this.publicKeyAlgorithms.push(s.SshAlgorithms.publicKey.rsaWithSha256),this.publicKeyAlgorithms.push(s.SshAlgorithms.publicKey.ecdsaSha2Nistp384),this.publicKeyAlgorithms.push(s.SshAlgorithms.publicKey.ecdsaSha2Nistp256),this.encryptionAlgorithms.push(s.SshAlgorithms.encryption.aes256Gcm),this.encryptionAlgorithms.push(s.SshAlgorithms.encryption.aes256Ctr),this.hmacAlgorithms.push(s.SshAlgorithms.hmac.hmacSha512Etm),this.hmacAlgorithms.push(s.SshAlgorithms.hmac.hmacSha256Etm),this.hmacAlgorithms.push(s.SshAlgorithms.hmac.hmacSha512),this.hmacAlgorithms.push(s.SshAlgorithms.hmac.hmacSha256)):(this.keyExchangeAlgorithms.push(s.SshAlgorithms.keyExchange.none),this.publicKeyAlgorithms.push(s.SshAlgorithms.publicKey.none),this.encryptionAlgorithms.push(s.SshAlgorithms.encryption.none),this.hmacAlgorithms.push(s.SshAlgorithms.hmac.none)),this.compressionAlgorithms.push(s.SshAlgorithms.compression.none)}addService(e,t){if(this.services.has(e))throw new Error("Duplicate service entry.");this.services.set(e,t)}getKeyExchangeAlgorithm(e){return this.getAlgorithm(e,this.keyExchangeAlgorithms)}getPublicKeyAlgorithm(e){return this.getAlgorithm(e,this.publicKeyAlgorithms)}getEncryptionAlgorithm(e){return this.getAlgorithm(e,this.encryptionAlgorithms)}getHmacAlgorithm(e){return this.getAlgorithm(e,this.hmacAlgorithms)}getCompressionAlgorithm(e){return this.getAlgorithm(e,this.compressionAlgorithms)}getAlgorithm(e,t){const n=t.find((t=>!!t&&t.name===e));if(!n){if("none"===e)return null;throw new Error("Algorithm not found: "+e)}return n}get traceChannelData(){return this.traceChannelDataValue}set traceChannelData(e){e!==this.traceChannelDataValue&&(this.traceChannelDataValue=e,this.configurationChangedEmitter.fire())}}},6373:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshStream=void 0;const r=n(3305),s=n(2781);class i extends s.Duplex{constructor(e){let t=null;super({async write(t,n,r){let s;try{let r;if("string"==typeof t)r=Buffer.from(t,n);else{if(!(t instanceof Buffer||t instanceof Uint8Array))throw new Error("Unsupported chunk type: "+typeof t);r=t}await e.send(r)}catch(e){if(!(e instanceof Error))throw e;s=e}r&&r(s)},async writev(t,n){let r;try{if(1===t.length)return this.write(t[0].chunk,t[0].encoding,n);{function s(e,t){if(t.chunk instanceof Buffer||t.chunk instanceof Uint8Array)return e+t.chunk.length;throw new Error("Unsupported chunk type: "+typeof t.chunk)}const i=t.reduce(s,0),o=Buffer.alloc(i);let a=0;for(let c=0;c<t.length;c++)t[c].chunk.copy(o,a),a+=t[c].chunk.length;await e.send(o)}}catch(l){if(!(l instanceof Error))throw l;r=l}n&&n(r)},async final(t){let n;try{await e.close()}catch(e){if(!(e instanceof Error))throw e;n=e}t&&t(n)},read(){t&&(t.resolve(),t=null)}}),e.onDataReceived((async n=>{const s=Buffer.alloc(n.length);n.copy(s),this.push(s)||(t||(t=new r.PromiseCompletionSource),await t.promise),e.adjustWindow(s.length)})),e.onClosed((()=>{this.push(null)})),this.channel=e}destroy(e){return this.channel.close().catch(),super.destroy(e),this}toString(){return`SshStream(Channel Type: ${this.channel.channelType}, Id: ${this.channel.channelId}, RemoteId: ${this.channel.remoteChannelId})`}}t.SshStream=i},1163:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshVersionInfo=void 0;const r=n(4369),s=r.name.replace(/^@\w+\//,""),i=r.version;class o{static tryParse(e){if(!e)throw new TypeError("Version string expected.");if(!e.startsWith("SSH-"))return null;const t=e.indexOf("-",4);if(t<=0)return null;const n=e.substring(4,t);if(!/^\d+\.\d+$/.test(n))return null;let r,s;const i=e.substring(t+1),a=i.indexOf(" "),c=i.lastIndexOf("_",a>=0?a:i.length-1);if(c>=0){r=i.substring(0,c).replace(/_/g," "),s=i.substring(c+1);for(let e=0;e<s.length;e++){const t=s[e];if(!(t>="0"&&t<="9")&&"."!==t){s=s.substring(0,e);break}}/^\d+(\.\d+)*$/.test(s)||(s=null)}else r=i,s=null;return new o(e,n,r,s)}static getLocalVersion(){return new o(`SSH-2.0-${s}_${i}`,"2.0",s,i)}constructor(e,t,n,r){this.versionString=e,this.protocolVersion=t,this.name=n,this.version=r}toString(){return this.versionString}get isVsSsh(){return this.isVsSshCS||this.isVsSshTS}get isVsSshCS(){return"Microsoft.VisualStudio.Ssh"===this.name||"Microsoft.DevTunnels.Ssh"===this.name}get isVsSshTS(){return"vs-ssh"===this.name||"dev-tunnels-ssh"===this.name}}t.SshVersionInfo=o},3538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketStream=t.NodeStream=t.BaseStream=void 0;const r=n(4300),s=n(5844),i=n(9638),o=n(4608);function a(e,t){t&&(t.isCancellationRequested?e(new i.CancellationError):t.onCancellationRequested((()=>{e(new i.CancellationError)})))}class c{constructor(){this.incomingData=[],this.pendingReads=[],this.error=null,this.disposed=!1,this.closedEmitter=new s.Emitter,this.closed=this.closedEmitter.event}onData(e){for(;this.pendingReads.length>0;){const t=this.pendingReads.shift();if(t.count>=e.length)return void t.resolve(e);{const n=e.slice(0,t.count);e=e.slice(t.count),t.resolve(n)}}this.incomingData.push(e)}onEnd(){for(;this.pendingReads.length>0;)this.pendingReads.shift().resolve(null);this.incomingData.push(r.Buffer.alloc(0))}onError(e){for(this.error||(this.error=e);this.pendingReads.length>0;)this.pendingReads.shift().reject(e)}async read(e,t){if(this.disposed)throw new o.ObjectDisposedError(this);if(this.incomingData.length>0){let t=this.incomingData[0];return 0===t.length?null:(e>=t.length?this.incomingData.shift():(this.incomingData[0]=t.slice(e),t=t.slice(0,e)),t)}if(this.error)throw this.error;return await new Promise(((n,r)=>{if(t){if(t.isCancellationRequested)return void r(new i.CancellationError);t.onCancellationRequested((()=>{for(let e=0;e<this.pendingReads.length;e++)Object.is(t,this.pendingReads[e].cancellation)&&this.pendingReads.splice(e--,1)[0].reject(new i.CancellationError)}))}this.pendingReads.push({count:e,resolve:n,reject:r,cancellation:t})}))}dispose(){if(!this.disposed){this.disposed=!0;const e=new o.ObjectDisposedError(this);this.onError(e),this.fireOnClose(e)}}fireOnClose(e){this.closedEmitter.fire({error:e})}get isDisposed(){return this.disposed}}t.BaseStream=c,t.NodeStream=class extends c{constructor(e,t){if(super(),!e)throw new TypeError("Duplex or Readable/Writable stream are required.");this.readStream=e,this.writeStream=t||e,this.readStream.on("data",this.onData.bind(this)),this.readStream.on("end",this.onEnd.bind(this)),this.readStream.on("error",this.onError.bind(this)),this.readStream.on("close",(()=>{this.onEnd(),this.fireOnClose()}))}async write(e,t){if(!e)throw new TypeError("Data is required.");if(this.disposed)throw new o.ObjectDisposedError(this);return new Promise(((n,r)=>{a(r,t),this.writeStream.write(e,(e=>{e?r(e):n()}))}))}async close(e,t){if(this.disposed)throw new o.ObjectDisposedError(this);await new Promise(((e,n)=>{a(n,t),this.writeStream.end(e)})),this.disposed=!0,this.onError(e||new o.ObjectDisposedError(this)),this.closedEmitter.fire({error:e})}dispose(){if(!this.disposed){const e=new o.ObjectDisposedError(this);this.readStream.destroy(e),this.writeStream.destroy(e)}super.dispose()}},t.WebSocketStream=class extends c{constructor(e){if(super(),this.websocket=e,!e)throw new TypeError("WebSocket is required.");if("string"==typeof e.binaryType&&"arraybuffer"!==e.binaryType)throw new Error("WebSocket must use arraybuffer binary type.");e.onmessage=e=>{this.onData(r.Buffer.from(e.data))},e.onclose=e=>{if(e.wasClean)this.onEnd();else{const t=new Error(e.reason);t.code=e.code,this.onError(t)}}}get protocol(){return this.websocket.protocol}async write(e,t){if(!e)throw new TypeError("Data is required.");if(this.disposed)throw new o.ObjectDisposedError(this);if("readyState"in this.websocket&&(2===this.websocket.readyState||3===this.websocket.readyState))throw new DOMException("WebSocket is already in CLOSING or CLOSED state.","InvalidStateError");this.websocket.send(e)}async close(e,t){if(this.disposed)throw new o.ObjectDisposedError(this);if(e){const t="number"==typeof e.code?e.code:void 0;this.websocket.close(t,e.message)}else this.websocket.close();this.disposed=!0,this.closedEmitter.fire({error:e}),this.onError(e||new Error("Stream closed."))}dispose(){this.disposed||this.websocket.close(),super.dispose()}}},6197:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SshTraceEventIds=t.TraceLevel=void 0,(n=t.TraceLevel||(t.TraceLevel={})).Error="error",n.Warning="warning",n.Info="info",n.Verbose="verbose";class r{}t.SshTraceEventIds=r,r.unknownError=9e3,r.streamReadError=9001,r.streamWriteError=9002,r.streamCloseError=9003,r.sendMessageFailed=9004,r.receiveMessageFailed=9005,r.handleMessageFailed=9006,r.serverAuthenticationFailed=9007,r.clientAuthenticationFailed=9008,r.authenticationError=9009,r.channelWindowAdjustFailed=9010,r.channelWaitForWindowAdjust=9011,r.sessionReconnectInitFailed=9020,r.serverSessionReconnectFailed=9021,r.clientSessionReconnectFailed=9022,r.sessionRequestFailed=9023,r.channelRequestFailed=9024,r.serverListenFailed=9050,r.portForwardServerListenFailed=9051,r.portForwardRequestInvalid=9052,r.portForwardChannelInvalid=9053,r.portForwardChannelOpenFailed=9054,r.portForwardConnectionFailed=9055,r.metricsError=9061,r.protocolVersion=9100,r.sendingMessage=9101,r.receivingMessage=9102,r.sendingChannelData=9103,r.receivingChannelData=9104,r.sessionEncrypted=9110,r.sessionAuthenticating=9111,r.sessionAuthenticated=9112,r.sessionClosing=9113,r.sessionConnecting=9114,r.channelOpened=9120,r.channelOpenFailed=9121,r.channelEofReceived=9122,r.channelClosed=9123,r.serverListening=9150,r.serverClientConnected=9151,r.portForwardServerListening=9152,r.portForwardConnectionAccepted=9153,r.portForwardChannelOpened=9154,r.portForwardChannelClosed=9155,r.portForwardConnectionOpened=9156,r.portForwardConnectionClosed=9157,r.sessionDisconnected=9160,r.clientSessionReconnecting=9161,r.serverSessionReconnecting=9162,r.clientSessionStartReconnecting=9163,r.algorithmNegotiation=9170,r.debugMessage=9200},9638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withCancellation=t.CancellationError=t.CancellationTokenSource=t.CancellationToken=void 0;const r=n(5844);Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return r.CancellationToken}}),Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return r.CancellationTokenSource}});class s extends Error{constructor(e){super(e||"Operation cancelled.")}}t.CancellationError=s,t.withCancellation=function(e,t){return t?Promise.race([e,new Promise(((e,n)=>{t.isCancellationRequested?n(new s):t.onCancellationRequested((()=>{n(new s)}))}))]):e}},3305:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseCompletionSource=void 0,t.PromiseCompletionSource=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}resolve(e){}reject(e){}}},6655:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;class n{constructor(){this.array=new Array,this.first=0,this.count=0,this.version=0}get size(){return this.count}enqueue(e){if(this.count===this.array.length){const e=new Array(Math.max(16,2*this.count));for(let t=0;t<this.count;t++)e[t]=this.array[(this.first+t)%this.count];this.array=e,this.first=0}this.array[(this.first+this.count)%this.array.length]=e,this.count++,this.version++}dequeue(){if(0===this.count)return;const e=this.array[this.first];return this.array[this.first]=void 0,this.first=(this.first+1)%this.array.length,this.count--,this.version++,e}peek(){if(0!==this.count)return this.array[this.first]}clear(){this.first=0,this.count=0,this.array.fill(void 0),this.version++}*[Symbol.iterator](){const e=this.version;for(let t=0;t<this.count;t++){const n=this.array[(this.first+t)%this.array.length];if(yield n,this.version!==e)throw new Error("Iterator is invalid due to changes in the collection.")}}}t.Queue=n},7399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const r=n(3305),s=n(9638),i=n(4608);t.Semaphore=class{constructor(e=0){this.completions=[],this.disposed=!1,this.count=e}get currentCount(){return this.count}release(e=1){if(this.disposed)throw new i.ObjectDisposedError(this);const t=this.count;for(;e>0;e--)this.completions.length>0?this.completions.shift().resolve(!0):this.count++;return t}tryRelease(){try{this.release()}catch(e){if(!(e instanceof i.ObjectDisposedError))throw e}}async wait(e,t){const n="number"==typeof e?e:void 0;if(void 0===t&&"object"==typeof e&&(t=e),this.disposed)throw new i.ObjectDisposedError(this);if(null==t?void 0:t.isCancellationRequested)throw new s.CancellationError;if(this.count>0)return this.count--,!0;if(0===n)return!1;{const e=new r.PromiseCompletionSource;this.completions.push(e);const i=[e.promise];if(n&&i.push(new Promise((e=>setTimeout((()=>e(!1)),n)))),t){const e=new r.PromiseCompletionSource;t.onCancellationRequested((()=>{e.reject(new s.CancellationError)})),i.push(e.promise)}if(await Promise.race(i))return!0;{const t=this.completions.indexOf(e);return t>=0&&this.completions.splice(t,1),!1}}}dispose(){if(!this.disposed){this.disposed=!0;for(const e of this.completions)e.reject(new i.ObjectDisposedError(this));this.completions.splice(0,this.completions.length),this.count=0}}}},1034:(e,t,n)=>{var r,s=Object.create,i=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&f(e,n,t[n]);if(u)for(var n of u(t))d.call(t,n)&&f(e,n,t[n]);return e},g=(e,t)=>o(e,c(t)),v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),y=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of l(t))!h.call(e,s)&&s!==n&&i(e,s,{get:()=>t[s],enumerable:!(r=a(t,s))||r.enumerable});return e},b=(e,t,n)=>(n=null!=e?s(p(e)):{},y(!t&&e&&e.__esModule?n:i(n,"default",{value:e,enumerable:!0}),e)),w=v(((e,t)=>{"use strict";var n=function(){function e(){}return e.info=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.enableDebug&&console.info(e.TAG+t,n)},e.warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.disableWarnings||console.warn(e.TAG+t,n)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();t.exports=n})),S=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var r=vr(),s=n(2361),i=function(){function e(){}return e.prototype.active=function(){var e=this,n=r.CorrelationContextManager.getCurrentContext();return t(t({},n),{getValue:function(t){return e._activeSymbol?t===e._activeSymbol&&n:(e._activeSymbol=t,n)},setValue:function(){}})},e.prototype.with=function(t,n){var s=t.parentSpanId,i=t.name,o=e._spanToContext(t,s,i);return r.CorrelationContextManager.runWithContext(o,n)()},e.prototype.bind=function(e){return"function"==typeof e?r.CorrelationContextManager.wrapCallback(e):(e instanceof s.EventEmitter&&r.CorrelationContextManager.wrapEmitter(e),e)},e.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},e._spanToContext=function(e,n,s){var i=n?"|"+e.spanContext().traceId+"."+n+".":e.spanContext().traceId,o=t(t({},e.spanContext()),{traceFlags:e.spanContext().traceFlags});return r.CorrelationContextManager.spanToContextObject(o,i,s)},e}();e.OpenTelemetryScopeManagerWrapper=i,e.AsyncScopeManager=new i})),E=v(((e,t)=>{var n;e=t.exports=V,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,s=e.re=[],i=e.src=[],o=0,a=o++;i[a]="0|[1-9]\\d*";var c=o++;i[c]="[0-9]+";var l=o++;i[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var u=o++;i[u]="("+i[a]+")\\.("+i[a]+")\\.("+i[a]+")";var p=o++;i[p]="("+i[c]+")\\.("+i[c]+")\\.("+i[c]+")";var h=o++;i[h]="(?:"+i[a]+"|"+i[l]+")";var d=o++;i[d]="(?:"+i[c]+"|"+i[l]+")";var f=o++;i[f]="(?:-("+i[h]+"(?:\\."+i[h]+")*))";var m=o++;i[m]="(?:-?("+i[d]+"(?:\\."+i[d]+")*))";var g=o++;i[g]="[0-9A-Za-z-]+";var v=o++;i[v]="(?:\\+("+i[g]+"(?:\\."+i[g]+")*))";var y=o++,b="v?"+i[u]+i[f]+"?"+i[v]+"?";i[y]="^"+b+"$";var w="[v=\\s]*"+i[p]+i[m]+"?"+i[v]+"?",S=o++;i[S]="^"+w+"$";var E=o++;i[E]="((?:<|>)?=?)";var _=o++;i[_]=i[c]+"|x|X|\\*";var x=o++;i[x]=i[a]+"|x|X|\\*";var T=o++;i[T]="[v=\\s]*("+i[x]+")(?:\\.("+i[x]+")(?:\\.("+i[x]+")(?:"+i[f]+")?"+i[v]+"?)?)?";var C=o++;i[C]="[v=\\s]*("+i[_]+")(?:\\.("+i[_]+")(?:\\.("+i[_]+")(?:"+i[m]+")?"+i[v]+"?)?)?";var P=o++;i[P]="^"+i[E]+"\\s*"+i[T]+"$";var A=o++;i[A]="^"+i[E]+"\\s*"+i[C]+"$";var R=o++;i[R]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var I=o++;i[I]="(?:~>?)";var k=o++;i[k]="(\\s*)"+i[I]+"\\s+",s[k]=new RegExp(i[k],"g");var O=o++;i[O]="^"+i[I]+i[T]+"$";var M=o++;i[M]="^"+i[I]+i[C]+"$";var D=o++;i[D]="(?:\\^)";var N=o++;i[N]="(\\s*)"+i[D]+"\\s+",s[N]=new RegExp(i[N],"g");var L=o++;i[L]="^"+i[D]+i[T]+"$";var j=o++;i[j]="^"+i[D]+i[C]+"$";var q=o++;i[q]="^"+i[E]+"\\s*("+w+")$|^$";var B=o++;i[B]="^"+i[E]+"\\s*("+b+")$|^$";var F=o++;i[F]="(\\s*)"+i[E]+"\\s*("+w+"|"+i[T]+")",s[F]=new RegExp(i[F],"g");var U=o++;i[U]="^\\s*("+i[T]+")\\s+-\\s+("+i[T]+")\\s*$";var $=o++;i[$]="^\\s*("+i[C]+")\\s+-\\s+("+i[C]+")\\s*$";var H,z=o++;for(i[z]="(<|>)?=?\\s*\\*",H=0;H<35;H++)n(H,i[H]),s[H]||(s[H]=new RegExp(i[H]));function K(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof V)return e;if("string"!=typeof e||e.length>256)return null;if(!(t.loose?s[S]:s[y]).test(e))return null;try{return new V(e,t)}catch{return null}}function V(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof V){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof V))return new V(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?s[S]:s[y]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}e.parse=K,e.valid=function(e,t){var n=K(e,t);return n?n.version:null},e.clean=function(e,t){var n=K(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},e.SemVer=V,V.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},V.prototype.toString=function(){return this.version},V.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof V||(e=new V(e,this.options)),this.compareMain(e)||this.comparePre(e)},V.prototype.compareMain=function(e){return e instanceof V||(e=new V(e,this.options)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},V.prototype.comparePre=function(e){if(e instanceof V||(e=new V(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],s=e.prerelease[t];if(n("prerelease compare",t,r,s),void 0===r&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===r)return-1;if(r!==s)return G(r,s)}while(++t)},V.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new V(e,n).inc(t,r).version}catch{return null}},e.diff=function(e,t){if(J(e,t))return null;var n=K(e),r=K(t),s="";if(n.prerelease.length||r.prerelease.length){s="pre";var i="prerelease"}for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==r[o])return s+o;return i},e.compareIdentifiers=G;var W=/^[0-9]+$/;function G(e,t){var n=W.test(e),r=W.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function Y(e,t,n){return new V(e,n).compare(new V(t,n))}function Q(e,t,n){return Y(e,t,n)>0}function X(e,t,n){return Y(e,t,n)<0}function J(e,t,n){return 0===Y(e,t,n)}function Z(e,t,n){return 0!==Y(e,t,n)}function ee(e,t,n){return Y(e,t,n)>=0}function te(e,t,n){return Y(e,t,n)<=0}function ne(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return J(e,n,r);case"!=":return Z(e,n,r);case">":return Q(e,n,r);case">=":return ee(e,n,r);case"<":return X(e,n,r);case"<=":return te(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function re(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof re))return new re(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===se?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}e.rcompareIdentifiers=function(e,t){return G(t,e)},e.major=function(e,t){return new V(e,t).major},e.minor=function(e,t){return new V(e,t).minor},e.patch=function(e,t){return new V(e,t).patch},e.compare=Y,e.compareLoose=function(e,t){return Y(e,t,!0)},e.rcompare=function(e,t,n){return Y(t,e,n)},e.sort=function(t,n){return t.sort((function(t,r){return e.compare(t,r,n)}))},e.rsort=function(t,n){return t.sort((function(t,r){return e.rcompare(t,r,n)}))},e.gt=Q,e.lt=X,e.eq=J,e.neq=Z,e.gte=ee,e.lte=te,e.cmp=ne,e.Comparator=re;var se={};function ie(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ie)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ie(e.raw,t);if(e instanceof re)return new ie(e.value,t);if(!(this instanceof ie))return new ie(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function oe(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,n,r,s,i,o,a,c,l,u,p,h){return((t=oe(n)?"":oe(r)?">="+n+".0.0":oe(s)?">="+n+"."+r+".0":">="+t)+" "+(a=oe(c)?"":oe(l)?"<"+(+c+1)+".0.0":oe(u)?"<"+c+"."+(+l+1)+".0":p?"<="+c+"."+l+"."+u+"-"+p:"<="+a)).trim()}function ce(e,t,r){for(var s=0;s<e.length;s++)if(!e[s].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(s=0;s<e.length;s++)if(n(e[s].semver),e[s].semver!==se&&e[s].semver.prerelease.length>0){var i=e[s].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new ie(t,n)}catch{return!1}return t.test(e)}function ue(e,t,n,r){var s,i,o,a,c;switch(e=new V(e,r),t=new ie(t,r),n){case">":s=Q,i=te,o=X,a=">",c=">=";break;case"<":s=X,i=ee,o=Q,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],p=null,h=null;if(u.forEach((function(e){e.semver===se&&(e=new re(">=0.0.0")),p=p||e,h=h||e,s(e.semver,p.semver,r)?p=e:o(e.semver,h.semver,r)&&(h=e)})),p.operator===a||p.operator===c||(!h.operator||h.operator===a)&&i(e,h.semver))return!1;if(h.operator===c&&o(e,h.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.options.loose?s[q]:s[B],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new V(n[2],this.options.loose):this.semver=se},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===se||("string"==typeof e&&(e=new V(e,this.options)),ne(e,this.operator,this.semver,this.options))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new ie(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new ie(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),s=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||s||i&&o||a||c},e.Range=ie,ie.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ie.prototype.toString=function(){return this.range},ie.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?s[$]:s[U];e=e.replace(r,ae),n("hyphen replace",e),e=e.replace(s[F],"$1$2$3"),n("comparator trim",e,s[F]),e=(e=(e=e.replace(s[k],"$1~")).replace(s[N],"$1^")).split(/\s+/).join(" ");var i=t?s[q]:s[B],o=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?s[j]:s[L];return e.replace(r,(function(t,r,s,i,o){var a;return n("caret",e,t,r,s,i,o),oe(r)?a="":oe(s)?a=">="+r+".0.0 <"+(+r+1)+".0.0":oe(i)?a="0"===r?">="+r+"."+s+".0 <"+r+"."+(+s+1)+".0":">="+r+"."+s+".0 <"+(+r+1)+".0.0":o?(n("replaceCaret pr",o),a="0"===r?"0"===s?">="+r+"."+s+"."+i+"-"+o+" <"+r+"."+s+"."+(+i+1):">="+r+"."+s+"."+i+"-"+o+" <"+r+"."+(+s+1)+".0":">="+r+"."+s+"."+i+"-"+o+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===s?">="+r+"."+s+"."+i+" <"+r+"."+s+"."+(+i+1):">="+r+"."+s+"."+i+" <"+r+"."+(+s+1)+".0":">="+r+"."+s+"."+i+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?s[M]:s[O];return e.replace(r,(function(t,r,s,i,o){var a;return n("tilde",e,t,r,s,i,o),oe(r)?a="":oe(s)?a=">="+r+".0.0 <"+(+r+1)+".0.0":oe(i)?a=">="+r+"."+s+".0 <"+r+"."+(+s+1)+".0":o?(n("replaceTilde pr",o),a=">="+r+"."+s+"."+i+"-"+o+" <"+r+"."+(+s+1)+".0"):a=">="+r+"."+s+"."+i+" <"+r+"."+(+s+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?s[A]:s[P];return e.replace(r,(function(t,r,s,i,o,a){n("xRange",e,t,r,s,i,o,a);var c=oe(s),l=c||oe(i),u=l||oe(o);return"="===r&&u&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&u?(l&&(i=0),o=0,">"===r?(r=">=",l?(s=+s+1,i=0,o=0):(i=+i+1,o=0)):"<="===r&&(r="<",l?s=+s+1:i=+i+1),t=r+s+"."+i+"."+o):l?t=">="+s+".0.0 <"+(+s+1)+".0.0":u&&(t=">="+s+"."+i+".0 <"+s+"."+(+i+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(s[z],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o.map((function(e){return new re(e,this.options)}),this)},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new ie(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ie.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new V(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,n){var r=null,s=null;try{var i=new ie(t,n)}catch{return null}return e.forEach((function(e){i.test(e)&&(!r||-1===s.compare(e))&&(s=new V(r=e,n))})),r},e.minSatisfying=function(e,t,n){var r=null,s=null;try{var i=new ie(t,n)}catch{return null}return e.forEach((function(e){i.test(e)&&(!r||1===s.compare(e))&&(s=new V(r=e,n))})),r},e.minVersion=function(e,t){e=new ie(e,t);var n=new V("0.0.0");if(e.test(n)||(n=new V("0.0.0-0"),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new V(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!n||Q(n,t))&&(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},e.validRange=function(e,t){try{return new ie(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,n){return ue(e,t,"<",n)},e.gtr=function(e,t,n){return ue(e,t,">",n)},e.outside=ue,e.prerelease=function(e,t){var n=K(e,t);return n&&n.prerelease.length?n.prerelease:null},e.intersects=function(e,t,n){return e=new ie(e,n),t=new ie(t,n),e.intersects(t)},e.coerce=function(e){if(e instanceof V)return e;if("string"!=typeof e)return null;var t=e.match(s[R]);return null==t?null:K(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),_=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=n(1017),r=E(),s=n(8188),i=Object.keys(process.binding("natives")),o=s.prototype.require;e.makePatchingRequire=function(e){var n={};return function(a){var c=o.apply(this,arguments);if(e[a]){var l=s._resolveFilename(a,this);if(n.hasOwnProperty(l))return n[l];var u=void 0;if(i.indexOf(a)<0)try{u=o.call(this,t.join(a,"package.json")).version}catch{return c}else u=process.version.substring(1);var p=u.indexOf("-");p>=0&&(u=u.substring(0,p));for(var h=c,d=0,f=e[a];d<f.length;d++){var m=f[d];r.satisfies(u,m.versionSpecifier)&&(h=m.patch(h,l))}return n[l]=h}return c}}})),x=v(((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}})),T=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=_(),r=_();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var s=function(e){return!0},i=function(){function e(){this.version=x().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var r={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,n.forEach((function(e){var t=e.listener,n=e.filter;try{n&&n(!0)&&t(r)}catch{}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,n){void 0===n&&(n=s),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:n})},e.prototype.unsubscribe=function(e,t,n){void 0===n&&(n=s);var r=this.subscribers[e];if(r)for(var i=0;i<r.length;++i)if(r[i].listener===t&&r[i].filter===n)return r.splice(i,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(t(n))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new i,n(8188).prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),e.channel=global.diagnosticsSource})),C=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),P=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis="object"==typeof globalThis?globalThis:global})),A=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(P(),e)})),R=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(A(),e)})),I=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"})),k=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=I(),n=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function r(e){var t=new Set([e]),r=new Set,s=e.match(n);if(!s)return function(){return!1};var i=+s[1],o=+s[2],a=+s[3];if(null!=s[4])return function(t){return t===e};function c(e){return r.add(e),!1}function l(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var s=e.match(n);if(!s)return c(e);var u=+s[1],p=+s[2],h=+s[3];return null!=s[4]||i!==u?c(e):0===i?o===p&&a<=h?l(e):c(e):o<=p?l(e):c(e)}}e._makeCompatibilityCheck=r,e.isCompatible=r(t.VERSION)})),O=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=R(),n=I(),r=k(),s=n.VERSION.split(".")[0],i=Symbol.for("opentelemetry.js.api."+s),o=t._globalThis;e.registerGlobal=function(e,t,r,s){var a;void 0===s&&(s=!1);var c=o[i]=null!==(a=o[i])&&void 0!==a?a:{version:n.VERSION};if(!s&&c[e]){var l=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(l.stack||l.message),!1}return c.version!==n.VERSION?(l=new Error("@opentelemetry/api: All API registration versions must match"),r.error(l.stack||l.message),!1):(c[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+n.VERSION+"."),!0)},e.getGlobal=function(e){var t,n,s=null===(t=o[i])||void 0===t?void 0:t.version;if(s&&r.isCompatible(s))return null===(n=o[i])||void 0===n?void 0:n[e]},e.unregisterGlobal=function(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+n.VERSION+".");var r=o[i];r&&delete r[e]}})),M=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=O(),n=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("verbose",this._namespace,e)},e}();function r(e,n,r){var s=t.getGlobal("diag");if(s)return r.unshift(n),s[e].apply(s,r)}e.DiagComponentLogger=n})),D=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0,(t=e.DiagLogLevel||(e.DiagLogLevel={}))[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})),N=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=D();e.createLogLevelDiagLogger=function(e,n){function r(t,r){var s=n[t];return"function"==typeof s&&e>=r?s.bind(n):function(){}}return e<t.DiagLogLevel.NONE?e=t.DiagLogLevel.NONE:e>t.DiagLogLevel.ALL&&(e=t.DiagLogLevel.ALL),n=n||{},{error:r("error",t.DiagLogLevel.ERROR),warn:r("warn",t.DiagLogLevel.WARN),info:r("info",t.DiagLogLevel.INFO),debug:r("debug",t.DiagLogLevel.DEBUG),verbose:r("verbose",t.DiagLogLevel.VERBOSE)}}})),L=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=M(),n=N(),r=D(),s=O(),i=function(){function e(){function e(e){return function(){var t=s.getGlobal("diag");if(t)return t[e].apply(t,arguments)}}var i=this;i.setLogger=function(e,t){var o,a;if(void 0===t&&(t=r.DiagLogLevel.INFO),e===i){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return i.error(null!==(o=c.stack)&&void 0!==o?o:c.message),!1}var l=s.getGlobal("diag"),u=n.createLogLevelDiagLogger(t,e);if(l){var p=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p),u.warn("Current logger will overwrite one already registered from "+p)}return s.registerGlobal("diag",u,i,!0)},i.disable=function(){s.unregisterGlobal("diag",i)},i.createComponentLogger=function(e){return new t.DiagComponentLogger(e)},i.verbose=e("verbose"),i.debug=e("debug"),i.info=e("info"),i.warn=e("warn"),i.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();e.DiagAPI=i})),j=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=new e(this._entries),s=0,i=t;s<i.length;s++){var o=i[s];r._entries.delete(o)}return r},e.prototype.clear=function(){return new e},e}();e.BaggageImpl=t})),q=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")})),B=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=L(),n=j(),r=q(),s=t.DiagAPI.instance();e.createBaggage=function(e){return void 0===e&&(e={}),new n.BaggageImpl(new Map(Object.entries(e)))},e.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(s.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:r.baggageEntryMetadataSymbol,toString:function(){return e}}}})),F=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),U=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),$=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];e.DiagConsoleLogger=function(){function e(e){return function(){var t=arguments;if(console){var n=console[e];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,t)}}}for(var n=0;n<t.length;n++)this[t[n].n]=e(t[n].c)}})),H=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n($(),e),n(D(),e)})),z=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},e.defaultTextMapSetter={set:function(e,t,n){null!=e&&(e[t]=n)}}})),K=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),V=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),W=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0,e.createContextKey=function(e){return Symbol.for(e)};e.ROOT_CONTEXT=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var s=new e(n._currentContext);return s._currentContext.set(t,r),s},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}})),G=v((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var n=0,r=t.length,s=e.length;n<r;n++,s++)e[s]=t[n];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var n=W(),r=function(){function e(){}return e.prototype.active=function(){return n.ROOT_CONTEXT},e.prototype.with=function(e,n,r){for(var s=[],i=3;i<arguments.length;i++)s[i-3]=arguments[i];return n.call.apply(n,t([r],s))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();e.NoopContextManager=r})),Y=v((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var n=0,r=t.length,s=e.length;n<r;n++,s++)e[s]=t[n];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var n=G(),r=O(),s=L(),i="context",o=new n.NoopContextManager,a=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return r.registerGlobal(i,e,s.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,n,r){for(var s,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(s=this._getContextManager()).with.apply(s,t([e,n,r],i))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return r.getGlobal(i)||o},e.prototype.disable=function(){this._getContextManager().disable(),r.unregisterGlobal(i,s.DiagAPI.instance())},e}();e.ContextAPI=a})),Q=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0,(t=e.TraceFlags||(e.TraceFlags={}))[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})),X=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=Q();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}})),J=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=X(),n=function(){function e(e){void 0===e&&(e=t.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}();e.NonRecordingSpan=n})),Z=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=W(),n=J(),r=t.createContextKey("OpenTelemetry Context Key SPAN");function s(e){return e.getValue(r)||void 0}function i(e,t){return e.setValue(r,t)}e.getSpan=s,e.setSpan=i,e.deleteSpan=function(e){return e.deleteValue(r)},e.setSpanContext=function(e,t){return i(e,new n.NonRecordingSpan(t))},e.getSpanContext=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.spanContext()}})),ee=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=X(),n=J(),r=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function i(e){return r.test(e)&&e!==t.INVALID_TRACEID}function o(e){return s.test(e)&&e!==t.INVALID_SPANID}e.isValidTraceId=i,e.isValidSpanId=o,e.isSpanContextValid=function(e){return i(e.traceId)&&o(e.spanId)},e.wrapSpanContext=function(e){return new n.NonRecordingSpan(e)}})),te=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=Y(),n=Z(),r=J(),s=ee(),i=t.ContextAPI.getInstance(),o=function(){function e(){}return e.prototype.startSpan=function(e,t,i){if(Boolean(null==t?void 0:t.root))return new r.NonRecordingSpan;var o=i&&n.getSpanContext(i);return function(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}(o)&&s.isSpanContextValid(o)?new r.NonRecordingSpan(o):new r.NonRecordingSpan},e.prototype.startActiveSpan=function(e,t,r,s){var o,a,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(o=t,c=r):(o=t,a=r,c=s);var l=a??i.active(),u=this.startSpan(e,o,l),p=n.setSpan(l,u);return i.with(p,c,void 0,u)}},e}();e.NoopTracer=o})),ne=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=new(te().NoopTracer),n=function(){function e(e,t,n){this._provider=e,this.name=t,this.version=n}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):t},e}();e.ProxyTracer=n})),re=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=te(),n=function(){function e(){}return e.prototype.getTracer=function(e,n){return new t.NoopTracer},e}();e.NoopTracerProvider=n})),se=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=ne(),n=new(re().NoopTracerProvider),r=function(){function e(){}return e.prototype.getTracer=function(e,n){var r;return null!==(r=this.getDelegateTracer(e,n))&&void 0!==r?r:new t.ProxyTracer(this,e,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:n},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t)},e}();e.ProxyTracerProvider=r})),ie=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),oe=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0,(t=e.SamplingDecision||(e.SamplingDecision={}))[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})),ae=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ce=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0,(t=e.SpanKind||(e.SpanKind={}))[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})),le=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ue=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),pe=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0,(t=e.SpanStatusCode||(e.SpanStatusCode={}))[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})),he=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),de=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),fe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),me=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ge=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=O(),n=se(),r=ee(),s=Z(),i=L(),o="trace",a=function(){function e(){this._proxyTracerProvider=new n.ProxyTracerProvider,this.wrapSpanContext=r.wrapSpanContext,this.isSpanContextValid=r.isSpanContextValid,this.deleteSpan=s.deleteSpan,this.getSpan=s.getSpan,this.getSpanContext=s.getSpanContext,this.setSpan=s.setSpan,this.setSpanContext=s.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var n=t.registerGlobal(o,this._proxyTracerProvider,i.DiagAPI.instance());return n&&this._proxyTracerProvider.setDelegate(e),n},e.prototype.getTracerProvider=function(){return t.getGlobal(o)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){t.unregisterGlobal(o,i.DiagAPI.instance()),this._proxyTracerProvider=new n.ProxyTracerProvider},e}();e.TraceAPI=a})),ve=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}();e.NoopTextMapPropagator=t})),ye=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=W().createContextKey("OpenTelemetry Baggage Key");e.getBaggage=function(e){return e.getValue(t)||void 0},e.setBaggage=function(e,n){return e.setValue(t,n)},e.deleteBaggage=function(e){return e.deleteValue(t)}})),be=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=O(),n=ve(),r=z(),s=ye(),i=B(),o=L(),a="propagation",c=new n.NoopTextMapPropagator,l=function(){function e(){this.createBaggage=i.createBaggage,this.getBaggage=s.getBaggage,this.setBaggage=s.setBaggage,this.deleteBaggage=s.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return t.registerGlobal(a,e,o.DiagAPI.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=r.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=r.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){t.unregisterGlobal(a,o.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return t.getGlobal(a)||c},e}();e.PropagationAPI=l})),we=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,n(C(),e);var r=B();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return r.baggageEntryMetadataFromString}}),n(F(),e),n(U(),e),n(H(),e),n(z(),e),n(K(),e),n(V(),e),n(ne(),e),n(se(),e),n(ie(),e),n(oe(),e),n(ae(),e),n(ce(),e),n(le(),e),n(ue(),e),n(pe(),e),n(Q(),e),n(he(),e),n(de(),e),n(fe(),e);var s=ee();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return s.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return s.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return s.isValidSpanId}});var i=X();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return i.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return i.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return i.INVALID_SPAN_CONTEXT}}),n(W(),e),n(me(),e);var o=Y();e.context=o.ContextAPI.getInstance();var a=ge();e.trace=a.TraceAPI.getInstance();var c=be();e.propagation=c.PropagationAPI.getInstance();var l=L();e.diag=l.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}})),Se=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=we().createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");e.suppressTracing=function(e){return e.setValue(t,!0)},e.unsuppressTracing=function(e){return e.deleteValue(t)},e.isTracingSuppressed=function(e){return!0===e.getValue(t)}})),Ee=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192})),_e=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=we(),n=Ee();e.serializeKeyPairs=e=>e.reduce(((e,t)=>{let r=`${e}${""!==e?n.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return r.length>n.BAGGAGE_MAX_TOTAL_LENGTH?e:r}),""),e.getKeyPairs=e=>e.getAllEntries().map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`)),e.parsePairKeyValue=e=>{let r=e.split(n.BAGGAGE_PROPERTIES_SEPARATOR);if(r.length<=0)return;let s=r.shift();if(!s)return;let i=s.split(n.BAGGAGE_KEY_PAIR_SEPARATOR);if(2!==i.length)return;let o,a=decodeURIComponent(i[0].trim()),c=decodeURIComponent(i[1].trim());return r.length>0&&(o=t.baggageEntryMetadataFromString(r.join(n.BAGGAGE_PROPERTIES_SEPARATOR))),{key:a,value:c,metadata:o}},e.parseKeyPairsIntoRecord=t=>"string"!=typeof t||0===t.length?{}:t.split(n.BAGGAGE_ITEMS_SEPARATOR).map((t=>e.parsePairKeyValue(t))).filter((e=>void 0!==e&&e.value.length>0)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})})),xe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=we(),n=Se(),r=Ee(),s=_e();e.HttpBaggagePropagator=class{inject(e,i,o){let a=t.propagation.getBaggage(e);if(!a||n.isTracingSuppressed(e))return;let c=s.getKeyPairs(a).filter((e=>e.length<=r.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,r.BAGGAGE_MAX_NAME_VALUE_PAIRS),l=s.serializeKeyPairs(c);l.length>0&&o.set(i,r.BAGGAGE_HEADER,l)}extract(e,n,i){let o=i.get(n,r.BAGGAGE_HEADER);if(!o)return e;let a={};return 0===o.length||(o.split(r.BAGGAGE_ITEMS_SEPARATOR).forEach((e=>{let t=s.parsePairKeyValue(e);if(t){let e={value:t.value};t.metadata&&(e.metadata=t.metadata),a[t.key]=e}})),0===Object.entries(a).length)?e:t.propagation.setBaggage(e,t.propagation.createBaggage(a))}fields(){return[r.BAGGAGE_HEADER]}}})),Te=v((e=>{"use strict";function t(e){return null==e||(Array.isArray(e)?function(e){let t;for(let r of e)if(null!=r){if(!t){if(n(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}(e):n(e))}function n(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0,e.sanitizeAttributes=function(e){let n={};if(null==e||"object"!=typeof e)return n;for(let[r,s]of Object.entries(e))t(s)&&(Array.isArray(s)?n[r]=s.slice():n[r]=s);return n},e.isAttributeValue=t})),Ce=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=we();e.loggingErrorHandler=function(){return e=>{t.diag.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){let t={},n=e;for(;null!==n;)Object.getOwnPropertyNames(n).forEach((e=>{if(t[e])return;let r=n[e];r&&(t[e]=String(r))})),n=Object.getPrototypeOf(n);return t}(e))}(e))}}})),Pe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=Ce().loggingErrorHandler();e.setGlobalErrorHandler=function(e){t=e},e.globalErrorHandler=e=>{try{t(e)}catch{}}})),Ae=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0,(t=e.TracesSamplerValues||(e.TracesSamplerValues={})).AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})),Re=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=we(),n=Ae(),r=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function s(e){return r.indexOf(e)>-1}var i=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function o(e){return i.indexOf(e)>-1}function a(e,t,n,r=-1/0,s=1/0){if(typeof n[e]<"u"){let i=Number(n[e]);isNaN(i)||(t[e]=i<r?r:i>s?s:i)}}function c(e,t,n,r=","){let s=n[e];"string"==typeof s&&(t[e]=s.split(r).map((e=>e.trim())))}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:n.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};var l={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function u(e,t,n){let r=n[e];if("string"==typeof r){let n=l[r.toUpperCase()];null!=n&&(t[e]=n)}}e.parseEnvironment=function(t){let n={};for(let r in e.DEFAULT_ENVIRONMENT){let e=r;if("OTEL_LOG_LEVEL"===e)u(e,n,t);else if(s(e))a(e,n,t);else if(o(e))c(e,n,t);else{let r=t[e];typeof r<"u"&&null!==r&&(n[e]=String(r))}}return n}})),Ie=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=n(2037),r=Re();e.getEnv=function(){let e=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},r.DEFAULT_ENVIRONMENT,e)}})),ke=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0,e.hexToBase64=function(e){let t=e.length,n="";for(let r=0;r<t;r+=2){let t=e.substring(r,r+2),s=parseInt(t,16);n+=String.fromCharCode(s)}return Buffer.from(n,"ascii").toString("base64")}})),Oe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0,e.RandomIdGenerator=class{constructor(){this.generateTraceId=n(16),this.generateSpanId=n(8)}};var t=Buffer.allocUnsafe(16);function n(e){return function(){for(let n=0;n<e/4;n++)t.writeUInt32BE(Math.random()*2**32>>>0,4*n);for(let n=0;n<e&&!(t[n]>0);n++)n===e-1&&(t[e-1]=1);return t.toString("hex",0,e)}}})),Me=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=n(4074);e.otperformance=t.performance})),De=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"})),Ne=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"},(t=e.DbSystemValues||(e.DbSystemValues={})).OTHER_SQL="other_sql",t.MSSQL="mssql",t.MYSQL="mysql",t.ORACLE="oracle",t.DB2="db2",t.POSTGRESQL="postgresql",t.REDSHIFT="redshift",t.HIVE="hive",t.CLOUDSCAPE="cloudscape",t.HSQLDB="hsqldb",t.PROGRESS="progress",t.MAXDB="maxdb",t.HANADB="hanadb",t.INGRES="ingres",t.FIRSTSQL="firstsql",t.EDB="edb",t.CACHE="cache",t.ADABAS="adabas",t.FIREBIRD="firebird",t.DERBY="derby",t.FILEMAKER="filemaker",t.INFORMIX="informix",t.INSTANTDB="instantdb",t.INTERBASE="interbase",t.MARIADB="mariadb",t.NETEZZA="netezza",t.PERVASIVE="pervasive",t.POINTBASE="pointbase",t.SQLITE="sqlite",t.SYBASE="sybase",t.TERADATA="teradata",t.VERTICA="vertica",t.H2="h2",t.COLDFUSION="coldfusion",t.CASSANDRA="cassandra",t.HBASE="hbase",t.MONGODB="mongodb",t.REDIS="redis",t.COUCHBASE="couchbase",t.COUCHDB="couchdb",t.COSMOSDB="cosmosdb",t.DYNAMODB="dynamodb",t.NEO4J="neo4j",t.GEODE="geode",t.ELASTICSEARCH="elasticsearch",t.MEMCACHED="memcached",t.COCKROACHDB="cockroachdb",function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"}(e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={})),function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"}(e.FaasTriggerValues||(e.FaasTriggerValues={})),function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"}(e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={})),function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"}(e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={})),function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"}(e.NetTransportValues||(e.NetTransportValues={})),function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"}(e.HttpFlavorValues||(e.HttpFlavorValues={})),function(e){e.QUEUE="queue",e.TOPIC="topic"}(e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={})),function(e){e.RECEIVE="receive",e.PROCESS="process"}(e.MessagingOperationValues||(e.MessagingOperationValues={})),function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))})),Le=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ne(),e)})),je=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},(t=e.CloudProviderValues||(e.CloudProviderValues={})).AWS="aws",t.AZURE="azure",t.GCP="gcp",function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"}(e.CloudPlatformValues||(e.CloudPlatformValues={})),function(e){e.EC2="ec2",e.FARGATE="fargate"}(e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={})),function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"}(e.HostArchValues||(e.HostArchValues={})),function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"}(e.OsTypeValues||(e.OsTypeValues={})),function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"}(e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))})),qe=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(je(),e)})),Be=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Le(),e),n(qe(),e)})),Fe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=De(),n=Be();e.SDK_INFO={[n.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[n.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[n.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:n.TelemetrySdkLanguageValues.NODEJS,[n.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}})),Ue=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0,e.unrefTimer=function(e){e.unref()}})),$e=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ie(),e),n(ke(),e),n(Oe(),e),n(Me(),e),n(Fe(),e),n(Ue(),e)})),He=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n($e(),e)})),ze=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=He(),n=Math.pow(10,9);function r(e){let t=e/1e3,r=Math.trunc(t);return[r,Number((t-r).toFixed(9))*n]}function s(){let e=t.otperformance.timeOrigin;if("number"!=typeof e){let n=t.otperformance;e=n.timing&&n.timing.fetchStart}return e}function i(e){let i=r(s()),o=r("number"==typeof e?e:t.otperformance.now()),a=i[0]+o[0],c=i[1]+o[1];return c>n&&(c-=n,a+=1),[a,c]}function o(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}e.hrTime=i,e.timeInputToHrTime=function(e){if(o(e))return e;if("number"==typeof e)return e<s()?i(e):r(e);if(e instanceof Date)return r(e.getTime());throw TypeError("Invalid input type")},e.hrTimeDuration=function(e,t){let r=t[0]-e[0],s=t[1]-e[1];return s<0&&(r-=1,s+=n),[r,s]},e.hrTimeToTimeStamp=function(e){let t=`${"0".repeat(9)}${e[1]}Z`,n=t.substr(t.length-9-1);return new Date(1e3*e[0]).toISOString().replace("000Z",n)},e.hrTimeToNanoseconds=function(e){return e[0]*n+e[1]},e.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},e.hrTimeToMicroseconds=function(e){return Math.round(1e6*e[0]+e[1]/1e3)},e.isTimeInputHrTime=o,e.isTimeInput=function(e){return o(e)||"number"==typeof e||e instanceof Date}})),Ke=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ve=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0,(t=e.ExportResultCode||(e.ExportResultCode={}))[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})),We=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=we();e.CompositePropagator=class{constructor(e={}){var t;this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((e=>"function"==typeof e.fields?e.fields():[])).reduce(((e,t)=>e.concat(t)),[])))}inject(e,n,r){for(let s of this._propagators)try{s.inject(e,n,r)}catch(e){t.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${e.message}`)}}extract(e,n,r){return this._propagators.reduce(((e,s)=>{try{return s.extract(e,n,r)}catch(e){t.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${e.message}`)}return e}),e)}fields(){return this._fields.slice()}}})),Ge=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",n=new RegExp(`^(?:[a-z]${t}{0,255}|[a-z0-9]${t}{0,240}@[a-z]${t}{0,13})$`),r=/^[ -~]{0,255}[!-~]$/,s=/,|=/;e.validateKey=function(e){return n.test(e)},e.validateValue=function(e){return r.test(e)&&!s.test(e)}})),Ye=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=Ge(),n=class{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>(e.push(t+"="+this.get(t)),e)),[]).join(",")}_parse(e){e.length>512||(this._internalState=e.split(",").reverse().reduce(((e,n)=>{let r=n.trim(),s=r.indexOf("=");if(-1!==s){let i=r.slice(0,s),o=r.slice(s+1,n.length);t.validateKey(i)&&t.validateValue(o)&&e.set(i,o)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new n;return e._internalState=new Map(this._internalState),e}};e.TraceState=n})),Qe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=we(),n=Se(),r=Ye();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var s=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function i(e){let t=s.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}e.parseTraceParent=i,e.HttpTraceContextPropagator=class{inject(r,s,i){let o=t.trace.getSpanContext(r);if(!o||n.isTracingSuppressed(r)||!t.isSpanContextValid(o))return;let a=`00-${o.traceId}-${o.spanId}-0${Number(o.traceFlags||t.TraceFlags.NONE).toString(16)}`;i.set(s,e.TRACE_PARENT_HEADER,a),o.traceState&&i.set(s,e.TRACE_STATE_HEADER,o.traceState.serialize())}extract(n,s,o){let a=o.get(s,e.TRACE_PARENT_HEADER);if(!a)return n;let c=Array.isArray(a)?a[0]:a;if("string"!=typeof c)return n;let l=i(c);if(!l)return n;l.isRemote=!0;let u=o.get(s,e.TRACE_STATE_HEADER);if(u){let e=Array.isArray(u)?u.join(","):u;l.traceState=new r.TraceState("string"==typeof e?e:void 0)}return t.trace.setSpanContext(n,l)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}}})),Xe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Je=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=we().createContextKey("OpenTelemetry SDK Context Key RPC_METADATA");(e.RPCType||(e.RPCType={})).HTTP="http",e.setRPCMetadata=function(e,n){return e.setValue(t,n)},e.deleteRPCMetadata=function(e){return e.deleteValue(t)},e.getRPCMetadata=function(e){return e.getValue(t)}})),Ze=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=we();e.AlwaysOffSampler=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}})),et=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=we();e.AlwaysOnSampler=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}})),tt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=we(),n=Pe(),r=Ze(),s=et();e.ParentBasedSampler=class{constructor(e){var t,i,o,a;this._root=e.root,this._root||(n.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new s.AlwaysOnSampler),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new s.AlwaysOnSampler,this._remoteParentNotSampled=null!==(i=e.remoteParentNotSampled)&&void 0!==i?i:new r.AlwaysOffSampler,this._localParentSampled=null!==(o=e.localParentSampled)&&void 0!==o?o:new s.AlwaysOnSampler,this._localParentNotSampled=null!==(a=e.localParentNotSampled)&&void 0!==a?a:new r.AlwaysOffSampler}shouldSample(e,n,r,s,i,o){let a=t.trace.getSpanContext(e);return a&&t.isSpanContextValid(a)?a.isRemote?a.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,n,r,s,i,o):this._remoteParentNotSampled.shouldSample(e,n,r,s,i,o):a.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,n,r,s,i,o):this._localParentNotSampled.shouldSample(e,n,r,s,i,o):this._root.shouldSample(e,n,r,s,i,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}})),nt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=we();e.TraceIdRatioBasedSampler=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(e,n){return{decision:t.isValidTraceId(n)&&this._accumulate(n)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let n=0;n<e.length/8;n++){let r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t}}})),rt=v((e=>{"use strict";function t(e,t){return"string"==typeof t?e===t:t.test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0,e.urlMatches=t,e.isUrlIgnored=function(e,n){if(!n)return!1;for(let r of n)if(t(e,r))return!0;return!1}})),st=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0,e.isWrapped=function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}})),it=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,n(xe(),e),n(Te(),e),n(Pe(),e),n(Ce(),e),n(ze(),e),n(Ke(),e),n(Ve(),e),n(De(),e),e.baggageUtils=_e(),n(He(),e),n(We(),e),n(Qe(),e),n(Xe(),e),n(Je(),e),n(Ze(),e),n(et(),e),n(tt(),e),n(nt(),e),n(Se(),e),n(Ye(),e),n(Re(),e),n(Ae(),e),n(rt(),e),n(st(),e),n(De(),e)})),ot=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"})),at=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=we(),n=it(),r=Be(),s=ot();e.Span=class{constructor(e,r,s,i,o,a,c=[],l=n.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=s,this._spanContext=i,this.parentSpanId=a,this.kind=o,this.links=c,this.startTime=n.timeInputToHrTime(l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(e,r){return null==r||this._isSpanEnded()?this:0===e.length?(t.diag.warn(`Invalid attribute key: ${e}`),this):n.isAttributeValue(r)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=r),this):(t.diag.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(let[t,n]of Object.entries(e))this.setAttribute(t,n);return this}addEvent(e,r,s){return this._isSpanEnded()||(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),n.isTimeInput(r)&&(typeof s>"u"&&(s=r),r=void 0),typeof s>"u"&&(s=n.hrTime()),this.events.push({name:e,attributes:r,time:n.timeInputToHrTime(s)})),this}setStatus(e){return this._isSpanEnded()||(this.status=e),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e=n.hrTime()){this._isSpanEnded()?t.diag.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=n.timeInputToHrTime(e),this._duration=n.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this))}isRecording(){return!1===this._ended}recordException(e,i=n.hrTime()){let o={};"string"==typeof e?o[r.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?o[r.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(o[r.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(o[r.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(o[r.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),o[r.SemanticAttributes.EXCEPTION_TYPE]||o[r.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(s.ExceptionEventName,o,i):t.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}}})),ct=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=we(),n=it(),r=n.getEnv(),s=n.TracesSamplerValues.AlwaysOn;function i(e=n.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case n.TracesSamplerValues.AlwaysOn:return new n.AlwaysOnSampler;case n.TracesSamplerValues.AlwaysOff:return new n.AlwaysOffSampler;case n.TracesSamplerValues.ParentBasedAlwaysOn:return new n.ParentBasedSampler({root:new n.AlwaysOnSampler});case n.TracesSamplerValues.ParentBasedAlwaysOff:return new n.ParentBasedSampler({root:new n.AlwaysOffSampler});case n.TracesSamplerValues.TraceIdRatio:return new n.TraceIdRatioBasedSampler(o(e));case n.TracesSamplerValues.ParentBasedTraceIdRatio:return new n.ParentBasedSampler({root:new n.TraceIdRatioBasedSampler(o(e))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${s}".`),new n.AlwaysOnSampler}}function o(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return t.diag.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;let n=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(n)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to 1.`),1):n<0||n>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to 1.`),1):n}e.DEFAULT_CONFIG={sampler:i(r),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:n.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:n.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:n.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}},e.buildSamplerFromEnv=i})),lt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=ct();e.mergeConfig=function(e){let n={sampler:t.buildSamplerFromEnv()},r=Object.assign({},t.DEFAULT_CONFIG,n,e);return r.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),r}})),ut=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=we(),n=it(),r=at(),s=lt();e.Tracer=class{constructor(e,t,r){this._tracerProvider=r;let i=s.mergeConfig(t);this._sampler=i.sampler,this._spanLimits=i.spanLimits,this._idGenerator=t.idGenerator||new n.RandomIdGenerator,this.resource=r.resource,this.instrumentationLibrary=e}startSpan(e,s={},i=t.context.active()){var o,a;if(n.isTracingSuppressed(i))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let c,l,u,p=function(e,n){if(!e.root)return t.trace.getSpanContext(n)}(s,i),h=this._idGenerator.generateSpanId();p&&t.trace.isSpanContextValid(p)?(c=p.traceId,l=p.traceState,u=p.spanId):c=this._idGenerator.generateTraceId();let d=null!==(o=s.kind)&&void 0!==o?o:t.SpanKind.INTERNAL,f=null!==(a=s.links)&&void 0!==a?a:[],m=n.sanitizeAttributes(s.attributes),g=this._sampler.shouldSample(s.root?t.trace.setSpanContext(i,t.INVALID_SPAN_CONTEXT):i,c,e,d,m,f),v={traceId:c,spanId:h,traceFlags:g.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,traceState:l};if(g.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(v);let y=new r.Span(this,i,e,v,d,u,f,s.startTime);return y.setAttributes(Object.assign(m,g.attributes)),y}startActiveSpan(e,n,r,s){let i,o,a;if(arguments.length<2)return;2===arguments.length?a=n:3===arguments.length?(i=n,a=r):(i=n,o=r,a=s);let c=o??t.context.active(),l=this.startSpan(e,i,c),u=t.trace.setSpan(c,l);return t.context.with(u,a,void 0,l)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}})),pt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0,e.defaultServiceName=function(){return`unknown_service:${process.argv0}`}})),ht=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=yt(),r=we(),s=n(3837);e.detectResources=async(e={})=>{let n=Object.assign(e),s=await Promise.all((n.detectors||[]).map((async e=>{try{let t=await e.detect(n);return r.diag.debug(`${e.constructor.name} found resource.`,t),t}catch(n){return r.diag.debug(`${e.constructor.name} failed: ${n.message}`),t.Resource.empty()}})));return i(s),s.reduce(((e,t)=>e.merge(t)),t.Resource.empty())};var i=e=>{e.forEach((e=>{if(Object.keys(e.attributes).length>0){let t=s.inspect(e.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(t)}}))}})),dt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=we(),n=it(),r=Be(),s=St();e.envDetector=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(e){let i={},o=n.getEnv(),a=o.OTEL_RESOURCE_ATTRIBUTES,c=o.OTEL_SERVICE_NAME;if(a)try{let e=this._parseResourceAttributes(a);Object.assign(i,e)}catch(e){t.diag.debug(`EnvDetector failed: ${e.message}`)}return c&&(i[r.ResourceAttributes.SERVICE_NAME]=c),new s.Resource(i)}_parseResourceAttributes(e){if(!e)return{};let t={},n=e.split(this._COMMA_SEPARATOR,-1);for(let e of n){let n=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==n.length)continue;let[r,s]=n;if(r=r.trim(),s=s.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(r))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(s))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);t[r]=s}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isPrintableString(e)}_isPrintableString(e){for(let t=0;t<e.length;t++){let n=e.charAt(t);if(n<=" "||n>="~")return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}})),ft=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=we(),n=Be(),r=St();e.processDetector=new class{async detect(e){let t={[n.ResourceAttributes.PROCESS_PID]:process.pid,[n.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[n.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[n.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(t,e)}_getResourceAttributes(e,s){return""===e[n.ResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===e[n.ResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===e[n.ResourceAttributes.PROCESS_COMMAND]||""===e[n.ResourceAttributes.PROCESS_COMMAND_LINE]?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),r.Resource.empty()):new r.Resource(Object.assign({},e))}}})),mt=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(dt(),e),n(ft(),e)})),gt=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(pt(),e),n(ht(),e),n(mt(),e)})),vt=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(gt(),e)})),yt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=Be(),n=it(),r=vt(),s=class{constructor(e){this.attributes=e}static empty(){return s.EMPTY}static default(){return new s({[t.ResourceAttributes.SERVICE_NAME]:r.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:n.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:n.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:n.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(e){if(!e||!Object.keys(e.attributes).length)return this;let t=Object.assign({},this.attributes,e.attributes);return new s(t)}};e.Resource=s,s.EMPTY=new s({})})),bt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),wt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),St=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(yt(),e),n(vt(),e),n(bt(),e),n(wt(),e)})),Et=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=it();e.MultiSpanProcessor=class{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let t of this._spanProcessors)e.push(t.forceFlush());return new Promise((n=>{Promise.all(e).then((()=>{n()})).catch((e=>{t.globalErrorHandler(e||new Error("MultiSpanProcessor: forceFlush failed")),n()}))}))}onStart(e,t){for(let n of this._spanProcessors)n.onStart(e,t)}onEnd(e){for(let t of this._spanProcessors)t.onEnd(e)}shutdown(){let e=[];for(let t of this._spanProcessors)e.push(t.shutdown());return new Promise(((t,n)=>{Promise.all(e).then((()=>{t()}),n)}))}}})),_t=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0,e.NoopSpanProcessor=class{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}})),xt=v(((e,t)=>{var n="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",i="[object Function]",o="[object Object]",a=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[s]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l[i]=l["[object Map]"]=l["[object Number]"]=l[o]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1;var u="object"==typeof global&&global&&global.Object===Object&&global,p="object"==typeof self&&self&&self.Object===Object&&self,h=u||p||Function("return this")(),d="object"==typeof e&&e&&!e.nodeType&&e,f=d&&"object"==typeof t&&t&&!t.nodeType&&t,m=f&&f.exports===d,g=m&&u.process,v=function(){try{return f&&f.require&&f.require("util").types||g&&g.binding&&g.binding("util")}catch{}}(),y=v&&v.isTypedArray;function b(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var w,S=Array.prototype,E=Function.prototype,_=Object.prototype,x=h["__core-js_shared__"],T=E.toString,C=_.hasOwnProperty,P=(w=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",A=_.toString,R=T.call(Object),I=RegExp("^"+T.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=m?h.Buffer:void 0,O=h.Symbol,M=h.Uint8Array,D=(k&&k.allocUnsafe,function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object)),N=Object.create,L=_.propertyIsEnumerable,j=S.splice,q=O?O.toStringTag:void 0,B=function(){try{var e=oe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),F=k?k.isBuffer:void 0,U=Math.max,$=Date.now,H=oe(h,"Map"),z=oe(Object,"create"),K=function(){function e(){}return function(t){if(!ye(t))return{};if(N)return N(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function V(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function W(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function G(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Y(e){var t=this.__data__=new W(e);this.size=t.size}function Q(e,t,n){(void 0!==n&&!pe(e[t],n)||void 0===n&&!(t in e))&&Z(e,t,n)}function X(e,t,n){var r=e[t];(!C.call(e,t)||!pe(r,n)||void 0===n&&!(t in e))&&Z(e,t,n)}function J(e,t){for(var n=e.length;n--;)if(pe(e[n][0],t))return n;return-1}function Z(e,t,n){"__proto__"==t&&B?B(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}V.prototype.clear=function(){this.__data__=z?z(null):{},this.size=0},V.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},V.prototype.get=function(e){var t=this.__data__;if(z){var r=t[e];return r===n?void 0:r}return C.call(t,e)?t[e]:void 0},V.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:C.call(t,e)},V.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=z&&void 0===t?n:t,this},W.prototype.clear=function(){this.__data__=[],this.size=0},W.prototype.delete=function(e){var t=this.__data__,n=J(t,e);return!(n<0||(n==t.length-1?t.pop():j.call(t,n,1),--this.size,0))},W.prototype.get=function(e){var t=this.__data__,n=J(t,e);return n<0?void 0:t[n][1]},W.prototype.has=function(e){return J(this.__data__,e)>-1},W.prototype.set=function(e,t){var n=this.__data__,r=J(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},G.prototype.clear=function(){this.size=0,this.__data__={hash:new V,map:new(H||W),string:new V}},G.prototype.delete=function(e){var t=ie(this,e).delete(e);return this.size-=t?1:0,t},G.prototype.get=function(e){return ie(this,e).get(e)},G.prototype.has=function(e){return ie(this,e).has(e)},G.prototype.set=function(e,t){var n=ie(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Y.prototype.clear=function(){this.__data__=new W,this.size=0},Y.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Y.prototype.get=function(e){return this.__data__.get(e)},Y.prototype.has=function(e){return this.__data__.has(e)},Y.prototype.set=function(e,t){var n=this.__data__;if(n instanceof W){var r=n.__data__;if(!H||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new G(r)}return n.set(e,t),this.size=n.size,this};var ee=function(e,t,n){for(var r=-1,s=Object(e),i=n(e),o=i.length;o--;){var a=i[++r];if(!1===t(s[a],a,s))break}return e};function te(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":q&&q in Object(e)?function(e){var t=C.call(e,q),n=e[q];try{e[q]=void 0;var r=!0}catch{}var s=A.call(e);return r&&(t?e[q]=n:delete e[q]),s}(e):function(e){return A.call(e)}(e)}function ne(e){return be(e)&&te(e)==s}function re(e,t,n,r,s){e!==t&&ee(t,(function(i,a){if(s||(s=new Y),ye(i))!function(e,t,n,r,s,i,a){var c=le(e,n),l=le(t,n),u=a.get(l);if(u)Q(e,n,u);else{var p=i?i(c,l,n+"",e,t,a):void 0,h=void 0===p;if(h){var d=de(l),f=!d&&me(l),m=!d&&!f&&we(l);p=l,d||f||m?de(c)?p=c:function(e){return be(e)&&fe(e)}(c)?p=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(c):f?(h=!1,p=function(e,t){return e.slice()}(l)):m?(h=!1,p=function(e,t){var n=function(e){var t=new e.constructor(e.byteLength);return new M(t).set(new M(e)),t}(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}(l)):p=[]:function(e){if(!be(e)||te(e)!=o)return!1;var t=D(e);if(null===t)return!0;var n=C.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&T.call(n)==R}(l)||he(l)?(p=c,he(c)?p=function(e){return function(e,t,n,r){var s=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],c=void 0;void 0===c&&(c=e[a]),s?Z(n,a,c):X(n,a,c)}return n}(e,Se(e))}(c):(!ye(c)||ge(c))&&(p=function(e){return"function"!=typeof e.constructor||ce(e)?{}:K(D(e))}(l))):h=!1}h&&(a.set(l,p),s(p,l,r,i,a),a.delete(l)),Q(e,n,p)}}(e,t,a,n,re,r,s);else{var c=r?r(le(e,a),i,a+"",e,t,s):void 0;void 0===c&&(c=i),Q(e,a,c)}}),Se)}var se=B?function(e,t){return B(e,"toString",{configurable:!0,enumerable:!1,value:_e(t),writable:!0})}:xe;function ie(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function oe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ye(e)||function(e){return!!P&&P in e}(e))&&(ge(e)?I:a).test(function(e){if(null!=e){try{return T.call(e)}catch{}try{return e+""}catch{}}return""}(e))}(n)?n:void 0}function ae(e,t){var n=typeof e;return!!(t=t??r)&&("number"==n||"symbol"!=n&&c.test(e))&&e>-1&&e%1==0&&e<t}function ce(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_)}function le(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ue=function(e){var t=0,n=0;return function(){var r=$(),s=16-(r-n);if(n=r,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(se);function pe(e,t){return e===t||e!=e&&t!=t}var he=ne(function(){return arguments}())?ne:function(e){return be(e)&&C.call(e,"callee")&&!L.call(e,"callee")},de=Array.isArray;function fe(e){return null!=e&&ve(e.length)&&!ge(e)}var me=F||function(){return!1};function ge(e){if(!ye(e))return!1;var t=te(e);return t==i||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ve(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function ye(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function be(e){return null!=e&&"object"==typeof e}var we=y?function(e){return function(t){return e(t)}}(y):function(e){return be(e)&&ve(e.length)&&!!l[te(e)]};function Se(e){return fe(e)?function(e,t){var n=de(e),r=!n&&he(e),s=!n&&!r&&me(e),i=!n&&!r&&!s&&we(e),o=n||r||s||i,a=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var l in e)(t||C.call(e,l))&&(!o||!("length"==l||s&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ae(l,c)))&&a.push(l);return a}(e,!0):function(e){if(!ye(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ce(e),n=[];for(var r in e)"constructor"==r&&(t||!C.call(e,r))||n.push(r);return n}(e)}var Ee=function(e){return function(e,t){return ue(function(e,t,n){return t=U(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,i=U(r.length-t,0),o=Array(i);++s<i;)o[s]=r[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=r[s];return a[t]=n(o),b(e,this,a)}}(e,t,xe),e+"")}((function(t,n){var r=-1,s=n.length,i=s>1?n[s-1]:void 0,o=s>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(s--,i):void 0,o&&function(e,t,n){if(!ye(n))return!1;var r=typeof t;return!!("number"==r?fe(n)&&ae(t,n.length):"string"==r&&t in n)&&pe(n[t],e)}(n[0],n[1],o)&&(i=s<3?void 0:i,s=1),t=Object(t);++r<s;){var a=n[r];a&&e(t,a,r)}return t}))}((function(e,t,n){re(e,t,n)}));function _e(e){return function(){return e}}function xe(e){return e}t.exports=Ee})),Tt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=we(),n=it();e.BatchSpanProcessorBase=class{constructor(e,t){this._exporter=e,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let r=n.getEnv();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(e){}onEnd(e){this._isShutdown||this._addToBuffer(e)}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise(((e,t)=>{let n=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)n.push(this._flushOneBatch());Promise.all(n).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,r)=>{let s=setTimeout((()=>{r(new Error("Timeout"))}),this._exportTimeoutMillis);t.context.with(n.suppressTracing(t.context.active()),(()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),(t=>{var i;clearTimeout(s),t.code===n.ExportResultCode.SUCCESS?e():r(null!==(i=t.error)&&void 0!==i?i:new Error("BatchSpanProcessor: span export failed"))}))}))}))}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{n.globalErrorHandler(e)}))}),this._scheduledDelayMillis),n.unrefTimer(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}})),Ct=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=Tt(),n=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=n})),Pt=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ct(),e)})),At=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Pt(),e)})),Rt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t,n,r=we(),s=it(),i=St(),o=qt(),a=ct(),c=Et(),l=_t(),u=xt(),p=At();(n=t=e.ForceFlushState||(e.ForceFlushState={}))[n.resolved=0]="resolved",n[n.timeout=1]="timeout",n[n.error=2]="error",n[n.unresolved=3]="unresolved";var h=class{constructor(e={}){var t;this._registeredSpanProcessors=[],this._tracers=new Map;let n=u({},a.DEFAULT_CONFIG,e);this.resource=null!==(t=n.resource)&&void 0!==t?t:i.Resource.empty(),this.resource=i.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let r=this._buildExporterFromEnv();if(void 0!==r){let e=new p.BatchSpanProcessor(r);this.activeSpanProcessor=e}else this.activeSpanProcessor=new l.NoopSpanProcessor}getTracer(e,t){let n=`${e}@${t||""}`;return this._tracers.has(n)||this._tracers.set(n,new o.Tracer({name:e,version:t},this._config,this)),this._tracers.get(n)}addSpanProcessor(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((e=>r.diag.error("Error while trying to shutdown current span processor",e))),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new c.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){r.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&r.context.setGlobalContextManager(e.contextManager),e.propagator&&r.propagation.setGlobalPropagator(e.propagator)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,n=this._registeredSpanProcessors.map((n=>new Promise((r=>{let s,i=setTimeout((()=>{r(new Error(`Span processor did not completed within timeout period of ${e} ms`)),s=t.timeout}),e);n.forceFlush().then((()=>{clearTimeout(i),s!==t.timeout&&(s=t.resolved,r(s))})).catch((e=>{clearTimeout(i),s=t.error,r(e)}))}))));return new Promise(((e,r)=>{Promise.all(n).then((n=>{let s=n.filter((e=>e!==t.resolved));s.length>0?r(s):e()})).catch((e=>r([e])))}))}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return null===(t=h._registeredPropagators.get(e))||void 0===t?void 0:t()}_getSpanExporter(e){var t;return null===(t=h._registeredExporters.get(e))||void 0===t?void 0:t()}_buildPropagatorFromEnv(){let e=Array.from(new Set(s.getEnv().OTEL_PROPAGATORS)),t=e.map((e=>{let t=this._getPropagator(e);return t||r.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`),t})).reduce(((e,t)=>(t&&e.push(t),e)),[]);if(0!==t.length)return 1===e.length?t[0]:new s.CompositePropagator({propagators:t})}_buildExporterFromEnv(){let e=s.getEnv().OTEL_TRACES_EXPORTER;if("none"===e)return;let t=this._getSpanExporter(e);return t||r.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`),t}};e.BasicTracerProvider=h,h._registeredPropagators=new Map([["tracecontext",()=>new s.HttpTraceContextPropagator],["baggage",()=>new s.HttpBaggagePropagator]]),h._registeredExporters=new Map})),It=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=it();e.ConsoleSpanExporter=class{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(e){return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:t.hrTimeToMicroseconds(e.startTime),duration:t.hrTimeToMicroseconds(e.duration),attributes:e.attributes,status:e.status,events:e.events}}_sendSpans(e,n){for(let t of e)console.log(this._exportInfo(t));if(n)return n({code:t.ExportResultCode.SUCCESS})}}})),kt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=it();e.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,n){if(this._stopped)return n({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout((()=>n({code:t.ExportResultCode.SUCCESS})),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}})),Ot=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Mt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=we(),n=it();e.SimpleSpanProcessor=class{constructor(e){this._exporter=e,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(e){}onEnd(e){this._isShutdown||t.context.with(n.suppressTracing(t.context.active()),(()=>{this._exporter.export([e],(e=>{var t;e.code!==n.ExportResultCode.SUCCESS&&n.globalErrorHandler(null!==(t=e.error)&&void 0!==t?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))}))}))}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}}})),Dt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Nt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Lt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),jt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),qt=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ut(),e),n(Rt(),e),n(At(),e),n(It(),e),n(kt(),e),n(Ot(),e),n(Mt(),e),n(Dt(),e),n(_t(),e),n(at(),e),n(Nt(),e),n(Lt(),e),n(jt(),e)})),Bt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=T();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var n=!1;e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(r){if(n)return r;try{var s=qt(),i=we(),o=(new s.BasicTracerProvider).getTracer("applicationinsights tracer"),a=r.setTracer;r.setTracer=function(n){var r=n.startSpan;n.startSpan=function(e,n,s){var i=r.call(this,e,n,s),o=i.end;return i.end=function(){var e=o.apply(this,arguments);return t.channel.publish("azure-coretracing",i),e},i},n[e.AzureMonitorSymbol]=!0,a.call(this,n)},i.trace.getSpan(i.context.active()),r.setTracer(o),n=!0}catch{}return r}},e.enable=function(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}})),Ft=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=T();e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var n=e.prototype._emit;return e.prototype._emit=function(e,r){var s=n.apply(this,arguments);if(!r){var i=s;i||(i=n.call(this,e,!0)),t.channel.publish("bunyan",{level:e.level,result:i})}return s},e}},e.enable=function(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}})),Ut=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=T(),r=n(2781);e.console={versionSpecifier:">= 4.0.0",patch:function(e){var n=new r.Writable,s=new r.Writable;n.write=function(e){if(!e)return!0;var n=e.toString();return t.channel.publish("console",{message:n}),!0},s.write=function(e){if(!e)return!0;var n=e.toString();return t.channel.publish("console",{message:n,stderr:!0}),!0};for(var i=new e.Console(n,s),o=function(t){var n=e[t];n&&(e[t]=function(){if(i[t])try{i[t].apply(i,arguments)}catch{}return n.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++)o(c[a]);return e}},e.enable=function(){t.channel.registerMonkeyPatch("console",e.console),n(6206)}})),$t=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=T();e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var n=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=n.apply(this,arguments),r=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=t.channel.bindToContext(arguments[e])),r.apply(this,arguments)};var s=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=t.channel.bindToContext(arguments[1])),s.apply(this,arguments)},e},e}},e.enable=function(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}})),Ht=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var n=T();e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var r=e.instrument({operationIdGenerator:{next:function(){return n.channel.bindToContext((function(e){return e()}))}}}),s={};return r.on("started",(function(e){s[e.requestId]||(s[e.requestId]=t(t({},e),{time:new Date}))})),r.on("succeeded",(function(e){var t=s[e.requestId];t&&delete s[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),r.on("failed",(function(e){var t=s[e.requestId];t&&delete s[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var r=e.instrument(),s={},i={};return r.on("started",(function(e){s[e.requestId]||(i[e.requestId]=n.channel.bindToContext((function(e){return e()})),s[e.requestId]=t(t({},e),{time:new Date}))})),r.on("succeeded",(function(e){var t=s[e.requestId];t&&delete s[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete i[e.requestId])})),r.on("failed",(function(e){var t=s[e.requestId];t&&delete s[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete i[e.requestId])})),e}},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),r=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=n.channel.bindToContext(arguments[e])),r.apply(this,arguments)};var s=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=n.channel.bindToContext(arguments[1])),s.apply(this,arguments)},e}}(e);var t=e.instrument(),r={},s={};return t.on("started",(function(e){r[e.requestId]||(s[e.requestId]=n.channel.bindToContext((function(e){return e()})),r[e.requestId]=e)})),t.on("succeeded",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof s[e.requestId]&&(s[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete s[e.requestId])})),t.on("failed",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof s[e.requestId]&&(s[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete s[e.requestId])})),e}},e.enable=function(){n.channel.registerMonkeyPatch("mongodb",e.mongo2),n.channel.registerMonkeyPatch("mongodb",e.mongo3),n.channel.registerMonkeyPatch("mongodb",e.mongo330)}})),zt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=T(),r=n(1017);e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,s){var i=function(e,n){return function(n,r){var s=e[n];s&&(e[n]=function(){for(var e=arguments.length-1,n=arguments.length-1;n>=0;--n){if("function"==typeof arguments[n]){e=n;break}if(typeof arguments[n]<"u")break}var i=arguments[e],o={result:null,startTime:null,startDate:null};"function"==typeof i&&(r?(o.startTime=process.hrtime(),o.startDate=new Date,arguments[e]=t.channel.bindToContext(r(o,i))):arguments[e]=t.channel.bindToContext(i));var a=s.apply(this,arguments);return o.result=a,a})}},o=function(e,t){return i(e.prototype)},a=n(2729)(r.dirname(s)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return o(a)(e)})),i(a)("createQuery",(function(e,n){return function(r){var s=process.hrtime(e.startTime),i=1e3*s[0]+s[1]/1e6|0;t.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:r,duration:i,time:e.startDate}),n.apply(this,arguments)}}));var c=n(9668)(r.dirname(s)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return o(c)(e)})),e}},e.enable=function(){t.channel.registerMonkeyPatch("mysql",e.mysql)}})),Kt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=T();e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var n=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=t.channel.bindToContext(e)),n.apply(this,arguments)},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}})),Vt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=T(),r=n(2361);e.postgres6={versionSpecifier:"6.*",patch:function(e,n){var s=e.Client.prototype.query,i="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,n,o){var a,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},l=process.hrtime();function u(e){e&&e[i]&&(e=e[i]);var n=t.channel.bindToContext((function(n,s){var i=process.hrtime(l);if(c.result=s&&{rowCount:s.rowCount,command:s.command},c.error=n,c.duration=Math.ceil(1e3*i[0]+i[1]/1e6),t.channel.publish("postgres",c),n){if(e)return e.apply(this,arguments);a&&a instanceof r.EventEmitter&&a.emit("error",n)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(n,i,{value:e}),n}catch{return e}}try{"string"==typeof e?n instanceof Array?(c.query.preparable={text:e,args:n},o=u(o)):(c.query.text=e,o?o=u(o):n=u(n)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,o?o=u(o):n?n=u(n):e.callback=u(e.callback))}catch{return s.apply(this,arguments)}return arguments[0]=e,arguments[1]=n,arguments[2]=o,arguments.length=arguments.length>3?arguments.length:3,a=s.apply(this,arguments)},e}},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:function(e,n){var s=e.Client.prototype.query,i="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,n,o){var a,c=this,l=!!o,u={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},p=process.hrtime();function h(e){e&&e[i]&&(e=e[i]);var n=t.channel.bindToContext((function(n,s){var i=process.hrtime(p);if(u.result=s&&{rowCount:s.rowCount,command:s.command},u.error=n,u.duration=Math.ceil(1e3*i[0]+i[1]/1e6),t.channel.publish("postgres",u),n){if(e)return e.apply(this,arguments);a&&a instanceof r.EventEmitter&&a.emit("error",n)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(n,i,{value:e}),n}catch{return e}}try{"string"==typeof e?n instanceof Array?(u.query.preparable={text:e,args:n},o=(l="function"==typeof o)?h(o):o):(u.query.text=e,o?o=(l="function"==typeof o)?h(o):o:n=(l="function"==typeof n)?h(n):n):("string"==typeof e.name?u.query.plan=e.name:e.values instanceof Array?u.query.preparable={text:e.text,args:e.values}:u.query.text=e.text,o?(l="function"==typeof o,o=h(o)):n?n=(l="function"==typeof n)?h(n):n:(l="function"==typeof e.callback,e.callback=l?h(e.callback):e.callback))}catch{return s.apply(this,arguments)}return arguments[0]=e,arguments[1]=n,arguments[2]=o,arguments.length=arguments.length>3?arguments.length:3,a=s.apply(this,arguments),l?a:a.then((function(e){return h()(void 0,e),new c._Promise((function(t,n){t(e)}))})).catch((function(e){return h()(e,void 0),new c._Promise((function(t,n){n(e)}))}))},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}})),Wt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=T();e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var n=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var r=e.callback;if(!r||!r.pubsubBound){var s=this.address,i=process.hrtime(),o=new Date;e.callback=t.channel.bindToContext((function(n,a){var c=process.hrtime(i),l=1e3*c[0]+c[1]/1e6|0;t.channel.publish("redis",{duration:l,address:s,commandObj:e,err:n,result:a,time:o}),"function"==typeof r&&r.apply(this,arguments)})),e.callback.pubsubBound=!0}}return n.call(this,e)},e}},e.enable=function(){t.channel.registerMonkeyPatch("redis",e.redis)}})),Gt=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var n=T();e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var r=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){function e(e){var r=process.hrtime(),s={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return n.channel.bindToContext((function(i,o,a){var c=process.hrtime(r);s=t(t({},s),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!i&&{rowCount:o,rows:a},query:{text:this.parametersByName.statement.value},error:i,duration:Math.ceil(1e3*c[0]+c[1]/1e6)}),n.channel.publish("tedious",s),e.call(this,i,o,a)}))}var s=arguments[0];arguments[0].callback=e(s.callback),r.apply(this,arguments)},e}},e.enable=function(){n.channel.registerMonkeyPatch("tedious",e.tedious)}})),Yt=v((e=>{"use strict";var t,n=e&&e.__extends||(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)},function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),r=e&&e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var s=T();e.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,n){var r=e.call(this,n)||this;return r.winston=t,r}return n(t,e),t.prototype.log=function(e,t){var n=e.message,i=e.level,o=e.meta,a=r(e,["message","level","meta"]);i="function"==typeof Symbol.for?e[Symbol.for("level")]:i,n=e instanceof Error?e:n;var c=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,i);for(var l in o=o||{},a)a.hasOwnProperty(l)&&(o[l]=a[l]);s.channel.publish("winston",{message:n,level:i,levelKind:c,meta:o}),t()},t}(e.Transport);function i(){var n,r=arguments[0].levels||e.config.npm.levels;for(var s in r)r.hasOwnProperty(s)&&(n=void 0===n||r[s]>r[n]?s:n);this.add(new t(e,{level:n}))}var o=e.createLogger;e.createLogger=function(){var n,r=arguments[0].levels||e.config.npm.levels;for(var s in r)r.hasOwnProperty(s)&&(n=void 0===n||r[s]>r[n]?s:n);var a=o.apply(this,arguments);a.add(new t(e,{level:n}));var c=a.configure;return a.configure=function(){c.apply(this,arguments),i.apply(this,arguments)},a};var a=e.configure;return e.configure=function(){a.apply(this,arguments),i.apply(this,arguments)},e.add(new t(e)),e}},e.winston2={versionSpecifier:"2.x",patch:function(e){var t,n=e.Logger.prototype.log,r=function(n,r,i){var o;return o=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",s.channel.publish("winston",{level:n,message:r,meta:i,levelKind:o}),r};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==r&&(this.filters=this.filters.filter((function(e){return e!==r})),this.filters.push(r)):this.filters=[r],n.apply(this,arguments)},e}},e.enable=function(){s.channel.registerMonkeyPatch("winston",e.winston2),s.channel.registerMonkeyPatch("winston",e.winston3)}})),Qt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=Bt();e.azuresdk=t;var n=Ft();e.bunyan=n;var r=Ut();e.console=r;var s=$t();e.mongodbCore=s;var i=Ht();e.mongodb=i;var o=zt();e.mysql=o;var a=Kt();e.pgPool=a;var c=Vt();e.pg=c;var l=Wt();e.redis=l;var u=Gt();e.tedious=u;var p=Yt();e.winston=p,e.enable=function(){n.enable(),r.enable(),s.enable(),i.enable(),o.enable(),c.enable(),a.enable(),l.enable(),p.enable(),t.enable(),u.enable()}})),Xt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=S(),n=w();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var r,s,i,o,a="DiagnosticChannel";if(e.IsInitialized){for(o in r=Qt(),s=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),i={bunyan:r.bunyan,console:r.console,mongodb:r.mongodb,mongodbCore:r.mongodbCore,mysql:r.mysql,redis:r.redis,pg:r.pg,pgPool:r.pgPool,winston:r.winston,azuresdk:r.azuresdk})-1===s.indexOf(o)&&(i[o].enable(),n.info(a,"Subscribed to "+o+" events"));s.length>0&&n.info(a,"Some modules will not be patched",s)}else n.info(a,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");e.registerContextPreservation=function(n){if(e.IsInitialized){var r=T();r.channel.addContextPreservation(n),r.channel.spanContextPropagator=t.AsyncScopeManager}}})),Jt=v(((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}})),Zt=v(((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},s=n(3685),i=n(5687),o=n(7310),a=n(2057),c=w(),l=Jt(),u=function(){function e(){}return e.getCookie=function(t,n){var r="";if(t&&t.length&&"string"==typeof n)for(var s=t+"=",i=n.split(";"),o=0;o<i.length;o++)if(n=i[o],(n=e.trim(n))&&0===n.indexOf(s)){r=n.substring(s.length,i[o].length);break}return r},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},n=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),r=(Buffer.from?Buffer.from(n,"binary"):new Buffer(n,"binary")).toString("base64");return r.substr(0,r.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",s=0;s<4;s++)r+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var i=n[8+4*Math.random()|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+i+r.substr(16,3)+r.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,s=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,n=n.length<2?"0"+n:n,(s>0?s+".":"")+(r=r.length<2?"0"+r:r)+":"+n+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var n={};for(var r in t){var s="",i=t[r],o=typeof i;if(e.isPrimitive(i))s=i.toString();else if(null===i||"undefined"===o)s="";else{if("function"===o){c.info("key: "+r+" was function; will not serialize");continue}var a=e.isArray(i)?i:e.extractObject(i);try{s=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){s=i.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+r+", could not be serialized")}}n[r]=s.substring(0,e.MAX_PROPERTY_LENGTH)}return n}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||0==n.length||!t)return!0;for(var r=0;r<n.length;r++)if(new RegExp(n[r].replace(/\./g,".").replace(/\*/g,".*")).test(o.parse(t).hostname))return!1;return!0},e.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[l.requestContextHeader];if(n)for(var r=n.split(","),s=0;s<r.length;++s){var i=r[s].split("=");if(2==i.length&&i[0]==t)return i[1]}},e.makeRequest=function(t,n,a,l){n&&0===n.indexOf("//")&&(n="https:"+n);var u=o.parse(n),p=r(r({},a),{host:u.hostname,port:u.port,path:u.pathname}),h=void 0;if("https:"===u.protocol&&(h=t.proxyHttpsUrl||void 0),"http:"===u.protocol&&(h=t.proxyHttpUrl||void 0),h){0===h.indexOf("//")&&(h="http:"+h);var d=o.parse(h);"https:"===d.protocol?(c.info("Proxies that use HTTPS are not supported"),h=void 0):p=r(r({},p),{host:d.hostname,port:d.port||"80",path:n,headers:r(r({},p.headers),{Host:u.hostname})})}var f="https:"===u.protocol&&!h;return f&&void 0!==t.httpsAgent?p.agent=t.httpsAgent:f||void 0===t.httpAgent?f&&(p.agent=e.tlsRestrictedAgent):p.agent=t.httpAgent,f?i.request(p,l):s.request(p,l)},e.safeIncludeCorrelationHeader=function(t,n,r){var s;if("string"==typeof r)s=r;else if(r instanceof Array)s=r.join(",");else if(r&&"function"==typeof r.toString)try{s=r.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,r)}s?e.addCorrelationIdHeaderFromString(t,n,s):n.setHeader(l.requestContextHeader,l.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(e){var t=Object.prototype.toString.call(e);return t+("[object Error]"===t?"{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":JSON.stringify(e))},e.addCorrelationIdHeaderFromString=function(e,t,n){var r=n.split(","),s=l.requestContextSourceKey+"=";r.some((function(e){return e.substring(0,s.length)===s}))||t.setHeader(l.requestContextHeader,n+","+l.requestContextSourceKey+"="+e.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new i.Agent({keepAlive:!0,maxSockets:25,secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e}();t.exports=u})),en=v(((e,t)=>{"use strict";var n=Zt(),r=w(),s=function(){function e(){}return e.queryCorrelationId=function(t,s){var i=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(i))s(e.completedLookups[i]);else if(e.pendingLookups[i])e.pendingLookups[i].push(s);else{e.pendingLookups[i]=[s];var o=function(){if(e.pendingLookups[i]){var s={method:"GET",disableAppInsightsAutoCollection:!0};r.info(e.TAG,s);var a=n.makeRequest(t,i,s,(function(n){if(200===n.statusCode){var s="";n.setEncoding("utf-8"),n.on("data",(function(e){s+=e})),n.on("end",(function(){r.info(e.TAG,s);var t=e.correlationIdPrefix+s;e.completedLookups[i]=t,e.pendingLookups[i]&&e.pendingLookups[i].forEach((function(e){return e(t)})),delete e.pendingLookups[i]}))}else n.statusCode>=400&&n.statusCode<500?(e.completedLookups[i]=void 0,delete e.pendingLookups[i]):setTimeout(o,t.correlationIdRetryIntervalMs)}));a&&(a.on("error",(function(t){r.warn(e.TAG,t)})),a.end())}};setTimeout(o,0)}},e.cancelCorrelationIdQuery=function(t,n){var r=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",s=e.pendingLookups[r];s&&(e.pendingLookups[r]=s.filter((function(e){return e!=n})),0==e.pendingLookups[r].length&&delete e.pendingLookups[r])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var n=(e.currentRootId++).toString(16);return e.appendSuffix(t,n,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var n="|"===e[0]?1:0;return e.substring(n,t)},e.generateRootId=function(){return"|"+n.w3cTraceId()+"."},e.appendSuffix=function(t,r,s){if(t.length+r.length<e.requestIdMaxLength)return t+r+s;var i=e.requestIdMaxLength-9;if(t.length>i)for(;i>1;--i){var o=t[i-1];if("."===o||"_"===o)break}if(i<=1)return e.generateRootId();for(r=n.randomu32().toString(16);r.length<8;)r="0"+r;return t.substring(0,i)+r+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=n.randomu32(),e}();t.exports=s})),tn=v(((e,t)=>{"use strict";var n=Zt(),r=en(),s=function(){function e(t,s){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16);else{var i=t.trim().split("-"),o=i.length;o>=4?(this.version=i[0],this.traceId=i[1],this.spanId=i[2],this.traceFlag=i[3]):(this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=n.w3cTraceId()),"00"===this.version&&4!==o&&(this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=n.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=n.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=n.w3cTraceId().substr(0,16),this.traceId=n.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(s){this.parentId=s.slice();var a=r.getRootId(s);e.isValidTraceId(a)||(this.legacyRootId=a,a=n.w3cTraceId()),-1!==s.indexOf("|")&&(s=s.substring(1+s.substring(0,s.length-1).lastIndexOf("."),s.length-1)),this.traceId=a,this.spanId=s}else this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.formatOpenTelemetryTraceFlags=function(e){var t="0"+e.toString(16);return t.substring(t.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=n.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();t.exports=s})),nn=v(((e,t)=>{"use strict";var n=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var n=t[0].trim(),r=t[1].trim(),s=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),i=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return s&&i}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var n=[],r={},s=t.split(",");if(s.length>32)return null;for(var i=0,o=s;i<o.length;i++){var a=o[i].trim();if(0!==a.length){var c=a.split("=");if(2!==c.length||!e.validateKeyChars(c[0])||r[c[0]])return null;r[c[0]]=!0,n.push(a)}}return n},e.strict=!0,e}();t.exports=n})),rn=v(((e,t)=>{"use strict";t.exports=function(){}})),sn=v(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(rn());t.exports=s})),on=v(((e,t)=>{"use strict";t.exports=function(){}})),an=v(((e,t)=>{"use strict";t.exports=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}})),cn=v(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){return e.call(this)||this}return r(t,e),t}(on());t.exports=s})),ln=v(((e,t)=>{"use strict";var n,r;(r=n||(n={}))[r.Measurement=0]="Measurement",r[r.Aggregation=1]="Aggregation",t.exports=n})),un=v(((e,t)=>{"use strict";var n=ln();t.exports=function(){this.kind=n.Measurement}})),pn=v(((e,t)=>{"use strict";t.exports=function(){this.ver=1,this.sampleRate=100,this.tags={}}})),hn=v(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(rn());t.exports=s})),dn=v(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return r(t,e),t}(rn());t.exports=s})),fn=v(((e,t)=>{"use strict";t.exports=function(){this.hasFullStack=!0,this.parsedStack=[]}})),mn=v(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return r(t,e),t}(rn());t.exports=s})),gn=v(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return r(t,e),t}(rn());t.exports=s})),vn=v(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(hn());t.exports=s})),yn=v(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return r(t,e),t}(rn());t.exports=s})),bn=v(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(rn());t.exports=s})),wn=v(((e,t)=>{"use strict";var n,r;(r=n||(n={}))[r.Verbose=0]="Verbose",r[r.Information=1]="Information",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.Critical=4]="Critical",t.exports=n})),Sn=v(((e,t)=>{"use strict";t.exports=function(){}})),En=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=sn(),e.Base=on(),e.ContextTagKeys=an(),e.Data=cn(),e.DataPoint=un(),e.DataPointType=ln(),e.Domain=rn(),e.Envelope=pn(),e.EventData=hn(),e.ExceptionData=dn(),e.ExceptionDetails=fn(),e.MessageData=mn(),e.MetricData=gn(),e.PageViewData=vn(),e.RemoteDependencyData=yn(),e.RequestData=bn(),e.SeverityLevel=wn(),e.StackFrame=Sn()})),_n=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=En(),n=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();e.RemoteDependencyDataConstants=n,e.domainSupportsProperties=function(e){return"properties"in e||e instanceof t.EventData||e instanceof t.ExceptionData||e instanceof t.MessageData||e instanceof t.MetricData||e instanceof t.PageViewData||e instanceof t.RemoteDependencyData||e instanceof t.RequestData}})),xn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Tn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Cn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Pn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),An=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Rn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),In=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),kn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),On=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Mn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Dn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Nn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ln=v((e=>{"use strict";var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0,e.telemetryTypeToBaseType=function(e){switch(e){case t.Event:return"EventData";case t.Exception:return"ExceptionData";case t.Trace:return"MessageData";case t.Metric:return"MetricData";case t.Request:return"RequestData";case t.Dependency:return"RemoteDependencyData";case t.Availability:return"AvailabilityData";case t.PageView:return"PageViewData"}},e.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return t.Event;case"ExceptionData":return t.Exception;case"MessageData":return t.Trace;case"MetricData":return t.Metric;case"RequestData":return t.Request;case"RemoteDependencyData":return t.Dependency;case"AvailabilityData":return t.Availability;case"PageViewData":return t.PageView}},e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},(n=t=e.TelemetryType||(e.TelemetryType={}))[n.Event=0]="Event",n[n.Exception=1]="Exception",n[n.Trace=2]="Trace",n[n.Metric=3]="Metric",n[n.Request=4]="Request",n[n.Dependency=5]="Dependency",n[n.Availability=6]="Availability",n[n.PageView=7]="PageView"})),jn=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(xn(),e),n(Tn(),e),n(Cn(),e),n(Pn(),e),n(An(),e),n(Rn(),e),n(In(),e),n(kn(),e),n(On(),e),n(Mn(),e),n(Dn(),e),n(Nn(),e),n(Ln(),e)})),qn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Bn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Fn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Un=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),$n=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Hn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),zn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Kn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Vn=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(qn(),e),n(Bn(),e),n(Fn(),e),n(Un(),e),n($n(),e),n(Hn(),e),n(zn(),e),n(Kn(),e)})),Wn=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(_n(),e),n(En(),e),n(jn(),e),n(Vn(),e)})),Gn=v(((e,t)=>{"use strict";var n=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var r=this.properties||{};if(t)if("string"==typeof t)r.error=t;else if(t instanceof Error)r.error=t.message;else if("object"==typeof t)for(var s in t)r[s]=t[s]&&t[s].toString&&t[s].toString();this.properties=r},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();t.exports=n})),Yn=v(((e,t)=>{"use strict";var r,s=e&&e.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=n(7310),o=Wn(),a=Zt(),c=Jt(),l=Gn(),u=en(),p=nn(),h=tn(),d=function(e){function t(t,n){var r=e.call(this)||this;return t&&(r.method=t.method,r.url=r._getAbsoluteUrl(t),r.startTime=+new Date,r.socketRemoteAddress=t.socket&&t.socket.remoteAddress,r.parseHeaders(t,n),t.connection&&(r.connectionRemoteAddress=t.connection.remoteAddress,r.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),r}return s(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+i.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e&&e.time?t.time=e.time:this.startTime&&(t.time=new Date(this.startTime)),e){for(var n in e)t[n]||(t[n]=e[n]);if(e.properties)for(var n in e.properties)t.properties[n]=e.properties[n]}return t},t.prototype.getRequestTags=function(e){var n={};for(var r in e)n[r]=e[r];return n[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(e),n[t.keys.operationParentId]=this.getOperationParentId(e),n[t.keys.operationId]=this.getOperationId(e),n},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+i.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,n=i.parse(e.url),r=n.pathname,s=n.search,o=t||"https"==e.headers["x-forwarded-proto"]?"https":"http";return i.format({protocol:o,host:e.headers.host,pathname:r,search:s})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var n=e.exec(t);if(n)return n[0]},n=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!n&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(n="127.0.0.1"),n},t.prototype._getId=function(e){var n=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,n))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var n=e.headers[c.traceStateHeader]?e.headers[c.traceStateHeader].toString():null,r=e.headers[c.traceparentHeader]?e.headers[c.traceparentHeader].toString():null,s=e.headers[c.requestIdHeader]?e.headers[c.requestIdHeader].toString():null,i=e.headers[c.parentIdHeader]?e.headers[c.parentIdHeader].toString():null,o=e.headers[c.rootIdHeader]?e.headers[c.rootIdHeader].toString():null;this.correlationContextHeader=e.headers[c.correlationContextHeader]?e.headers[c.correlationContextHeader].toString():null,u.w3cEnabled&&(r||n)?(this.traceparent=new h(r?r.toString():null),this.tracestate=r&&n&&new p(n?n.toString():null),this.setBackCompatFromThisTraceContext()):s?u.w3cEnabled?(this.traceparent=new h(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=u.generateRequestId(this.parentId),this.operationId=u.getRootId(this.requestId)):u.w3cEnabled?(this.traceparent=new h,this.traceparent.parentId=i,this.traceparent.legacyRootId=o||i,this.setBackCompatFromThisTraceContext()):(this.parentId=i,this.requestId=u.generateRequestId(o||this.parentId),this.correlationContextHeader=null,this.operationId=u.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=u.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new o.ContextTagKeys,t}(l);t.exports=d})),Qn=v(((e,t)=>{var n;e=t.exports=V,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,s=e.re=[],i=e.src=[],o=0,a=o++;i[a]="0|[1-9]\\d*";var c=o++;i[c]="[0-9]+";var l=o++;i[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var u=o++;i[u]="("+i[a]+")\\.("+i[a]+")\\.("+i[a]+")";var p=o++;i[p]="("+i[c]+")\\.("+i[c]+")\\.("+i[c]+")";var h=o++;i[h]="(?:"+i[a]+"|"+i[l]+")";var d=o++;i[d]="(?:"+i[c]+"|"+i[l]+")";var f=o++;i[f]="(?:-("+i[h]+"(?:\\."+i[h]+")*))";var m=o++;i[m]="(?:-?("+i[d]+"(?:\\."+i[d]+")*))";var g=o++;i[g]="[0-9A-Za-z-]+";var v=o++;i[v]="(?:\\+("+i[g]+"(?:\\."+i[g]+")*))";var y=o++,b="v?"+i[u]+i[f]+"?"+i[v]+"?";i[y]="^"+b+"$";var w="[v=\\s]*"+i[p]+i[m]+"?"+i[v]+"?",S=o++;i[S]="^"+w+"$";var E=o++;i[E]="((?:<|>)?=?)";var _=o++;i[_]=i[c]+"|x|X|\\*";var x=o++;i[x]=i[a]+"|x|X|\\*";var T=o++;i[T]="[v=\\s]*("+i[x]+")(?:\\.("+i[x]+")(?:\\.("+i[x]+")(?:"+i[f]+")?"+i[v]+"?)?)?";var C=o++;i[C]="[v=\\s]*("+i[_]+")(?:\\.("+i[_]+")(?:\\.("+i[_]+")(?:"+i[m]+")?"+i[v]+"?)?)?";var P=o++;i[P]="^"+i[E]+"\\s*"+i[T]+"$";var A=o++;i[A]="^"+i[E]+"\\s*"+i[C]+"$";var R=o++;i[R]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var I=o++;i[I]="(?:~>?)";var k=o++;i[k]="(\\s*)"+i[I]+"\\s+",s[k]=new RegExp(i[k],"g");var O=o++;i[O]="^"+i[I]+i[T]+"$";var M=o++;i[M]="^"+i[I]+i[C]+"$";var D=o++;i[D]="(?:\\^)";var N=o++;i[N]="(\\s*)"+i[D]+"\\s+",s[N]=new RegExp(i[N],"g");var L=o++;i[L]="^"+i[D]+i[T]+"$";var j=o++;i[j]="^"+i[D]+i[C]+"$";var q=o++;i[q]="^"+i[E]+"\\s*("+w+")$|^$";var B=o++;i[B]="^"+i[E]+"\\s*("+b+")$|^$";var F=o++;i[F]="(\\s*)"+i[E]+"\\s*("+w+"|"+i[T]+")",s[F]=new RegExp(i[F],"g");var U=o++;i[U]="^\\s*("+i[T]+")\\s+-\\s+("+i[T]+")\\s*$";var $=o++;i[$]="^\\s*("+i[C]+")\\s+-\\s+("+i[C]+")\\s*$";var H,z=o++;for(i[z]="(<|>)?=?\\s*\\*",H=0;H<35;H++)n(H,i[H]),s[H]||(s[H]=new RegExp(i[H]));function K(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof V)return e;if("string"!=typeof e||e.length>256)return null;if(!(t.loose?s[S]:s[y]).test(e))return null;try{return new V(e,t)}catch{return null}}function V(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof V){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof V))return new V(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?s[S]:s[y]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}e.parse=K,e.valid=function(e,t){var n=K(e,t);return n?n.version:null},e.clean=function(e,t){var n=K(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},e.SemVer=V,V.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},V.prototype.toString=function(){return this.version},V.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof V||(e=new V(e,this.options)),this.compareMain(e)||this.comparePre(e)},V.prototype.compareMain=function(e){return e instanceof V||(e=new V(e,this.options)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},V.prototype.comparePre=function(e){if(e instanceof V||(e=new V(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],s=e.prerelease[t];if(n("prerelease compare",t,r,s),void 0===r&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===r)return-1;if(r!==s)return G(r,s)}while(++t)},V.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new V(e,n).inc(t,r).version}catch{return null}},e.diff=function(e,t){if(J(e,t))return null;var n=K(e),r=K(t),s="";if(n.prerelease.length||r.prerelease.length){s="pre";var i="prerelease"}for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==r[o])return s+o;return i},e.compareIdentifiers=G;var W=/^[0-9]+$/;function G(e,t){var n=W.test(e),r=W.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function Y(e,t,n){return new V(e,n).compare(new V(t,n))}function Q(e,t,n){return Y(e,t,n)>0}function X(e,t,n){return Y(e,t,n)<0}function J(e,t,n){return 0===Y(e,t,n)}function Z(e,t,n){return 0!==Y(e,t,n)}function ee(e,t,n){return Y(e,t,n)>=0}function te(e,t,n){return Y(e,t,n)<=0}function ne(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return J(e,n,r);case"!=":return Z(e,n,r);case">":return Q(e,n,r);case">=":return ee(e,n,r);case"<":return X(e,n,r);case"<=":return te(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function re(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof re))return new re(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===se?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}e.rcompareIdentifiers=function(e,t){return G(t,e)},e.major=function(e,t){return new V(e,t).major},e.minor=function(e,t){return new V(e,t).minor},e.patch=function(e,t){return new V(e,t).patch},e.compare=Y,e.compareLoose=function(e,t){return Y(e,t,!0)},e.rcompare=function(e,t,n){return Y(t,e,n)},e.sort=function(t,n){return t.sort((function(t,r){return e.compare(t,r,n)}))},e.rsort=function(t,n){return t.sort((function(t,r){return e.rcompare(t,r,n)}))},e.gt=Q,e.lt=X,e.eq=J,e.neq=Z,e.gte=ee,e.lte=te,e.cmp=ne,e.Comparator=re;var se={};function ie(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ie)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ie(e.raw,t);if(e instanceof re)return new ie(e.value,t);if(!(this instanceof ie))return new ie(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function oe(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,n,r,s,i,o,a,c,l,u,p,h){return((t=oe(n)?"":oe(r)?">="+n+".0.0":oe(s)?">="+n+"."+r+".0":">="+t)+" "+(a=oe(c)?"":oe(l)?"<"+(+c+1)+".0.0":oe(u)?"<"+c+"."+(+l+1)+".0":p?"<="+c+"."+l+"."+u+"-"+p:"<="+a)).trim()}function ce(e,t,r){for(var s=0;s<e.length;s++)if(!e[s].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(s=0;s<e.length;s++)if(n(e[s].semver),e[s].semver!==se&&e[s].semver.prerelease.length>0){var i=e[s].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new ie(t,n)}catch{return!1}return t.test(e)}function ue(e,t,n,r){var s,i,o,a,c;switch(e=new V(e,r),t=new ie(t,r),n){case">":s=Q,i=te,o=X,a=">",c=">=";break;case"<":s=X,i=ee,o=Q,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],p=null,h=null;if(u.forEach((function(e){e.semver===se&&(e=new re(">=0.0.0")),p=p||e,h=h||e,s(e.semver,p.semver,r)?p=e:o(e.semver,h.semver,r)&&(h=e)})),p.operator===a||p.operator===c||(!h.operator||h.operator===a)&&i(e,h.semver))return!1;if(h.operator===c&&o(e,h.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.options.loose?s[q]:s[B],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new V(n[2],this.options.loose):this.semver=se},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===se||("string"==typeof e&&(e=new V(e,this.options)),ne(e,this.operator,this.semver,this.options))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new ie(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new ie(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),s=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||s||i&&o||a||c},e.Range=ie,ie.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ie.prototype.toString=function(){return this.range},ie.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?s[$]:s[U];e=e.replace(r,ae),n("hyphen replace",e),e=e.replace(s[F],"$1$2$3"),n("comparator trim",e,s[F]),e=(e=(e=e.replace(s[k],"$1~")).replace(s[N],"$1^")).split(/\s+/).join(" ");var i=t?s[q]:s[B],o=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?s[j]:s[L];return e.replace(r,(function(t,r,s,i,o){var a;return n("caret",e,t,r,s,i,o),oe(r)?a="":oe(s)?a=">="+r+".0.0 <"+(+r+1)+".0.0":oe(i)?a="0"===r?">="+r+"."+s+".0 <"+r+"."+(+s+1)+".0":">="+r+"."+s+".0 <"+(+r+1)+".0.0":o?(n("replaceCaret pr",o),a="0"===r?"0"===s?">="+r+"."+s+"."+i+"-"+o+" <"+r+"."+s+"."+(+i+1):">="+r+"."+s+"."+i+"-"+o+" <"+r+"."+(+s+1)+".0":">="+r+"."+s+"."+i+"-"+o+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===s?">="+r+"."+s+"."+i+" <"+r+"."+s+"."+(+i+1):">="+r+"."+s+"."+i+" <"+r+"."+(+s+1)+".0":">="+r+"."+s+"."+i+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?s[M]:s[O];return e.replace(r,(function(t,r,s,i,o){var a;return n("tilde",e,t,r,s,i,o),oe(r)?a="":oe(s)?a=">="+r+".0.0 <"+(+r+1)+".0.0":oe(i)?a=">="+r+"."+s+".0 <"+r+"."+(+s+1)+".0":o?(n("replaceTilde pr",o),a=">="+r+"."+s+"."+i+"-"+o+" <"+r+"."+(+s+1)+".0"):a=">="+r+"."+s+"."+i+" <"+r+"."+(+s+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?s[A]:s[P];return e.replace(r,(function(t,r,s,i,o,a){n("xRange",e,t,r,s,i,o,a);var c=oe(s),l=c||oe(i),u=l||oe(o);return"="===r&&u&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&u?(l&&(i=0),o=0,">"===r?(r=">=",l?(s=+s+1,i=0,o=0):(i=+i+1,o=0)):"<="===r&&(r="<",l?s=+s+1:i=+i+1),t=r+s+"."+i+"."+o):l?t=">="+s+".0.0 <"+(+s+1)+".0.0":u&&(t=">="+s+"."+i+".0 <"+s+"."+(+i+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(s[z],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o.map((function(e){return new re(e,this.options)}),this)},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new ie(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ie.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new V(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,n){var r=null,s=null;try{var i=new ie(t,n)}catch{return null}return e.forEach((function(e){i.test(e)&&(!r||-1===s.compare(e))&&(s=new V(r=e,n))})),r},e.minSatisfying=function(e,t,n){var r=null,s=null;try{var i=new ie(t,n)}catch{return null}return e.forEach((function(e){i.test(e)&&(!r||1===s.compare(e))&&(s=new V(r=e,n))})),r},e.minVersion=function(e,t){e=new ie(e,t);var n=new V("0.0.0");if(e.test(n)||(n=new V("0.0.0-0"),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new V(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!n||Q(n,t))&&(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},e.validRange=function(e,t){try{return new ie(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,n){return ue(e,t,"<",n)},e.gtr=function(e,t,n){return ue(e,t,">",n)},e.outside=ue,e.prerelease=function(e,t){var n=K(e,t);return n&&n.prerelease.length?n.prerelease:null},e.intersects=function(e,t,n){return e=new ie(e,n),t=new ie(t,n),e.intersects(t)},e.coerce=function(e){if(e instanceof V)return e;if("string"!=typeof e)return null;var t=e.match(s[R]);return null==t?null:K(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),Xn=v(((e,t)=>{"use strict";function n(e){return"function"==typeof e}var r=console.error.bind(console);function s(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function i(e){e&&e.logger&&(n(e.logger)?r=e.logger:r("new logger isn't a function, not replacing"))}function o(e,t,i){if(e&&e[t]){if(!i)return r("no wrapper function"),void r((new Error).stack);if(n(e[t])&&n(i)){var o=e[t],a=i(o,t);return s(a,"__original",o),s(a,"__unwrap",(function(){e[t]===a&&s(e,t,o)})),s(a,"__wrapped",!0),s(e,t,a),a}r("original object and wrapper must be functions")}else r("no original function "+t+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void r("no original to unwrap to -- has "+t+" already been unwrapped?"):(r("no function to unwrap."),void r((new Error).stack))}i.wrap=o,i.massWrap=function(e,t,n){if(!e)return r("must provide one or more modules to patch"),void r((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){o(e,t,n)}))})):r("must provide one or more functions to wrap on modules")},i.unwrap=a,i.massUnwrap=function(e,t){if(!e)return r("must provide one or more modules to patch"),void r((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):r("must provide one or more functions to unwrap on modules")},t.exports=i})),Jn=v(((e,t)=>{"use strict";var n=Xn(),r=n.wrap,s=n.unwrap,i="wrap@before";function o(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function a(e,t){var n;return n=e._events&&e._events[t],Array.isArray(n)||(n=n?[n]:[]),n}function c(e,t){if(e){var n=e;if("function"==typeof e)n=t(e);else if(Array.isArray(e)){n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r])}return n}}t.exports=function(e,t,n){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function l(e){return function(t,n){var s=a(this,t).slice();try{var o=e.call(this,t,n);return function(e,t,n){var r=a(e,t).filter((function(e){return-1===n.indexOf(e)}));r.length>0&&function(e,t){for(var n=t.length,r=0;r<n;r++){var s=t[r],o=e[i];if("function"==typeof o)o(s);else if(Array.isArray(o))for(var a=o.length,c=0;c<a;c++)o[c](s)}}(e,r)}(this,t,s),o}finally{this.on.__wrapped||r(this,"on",l),this.addListener.__wrapped||r(this,"addListener",l)}}}e[i]?"function"==typeof e[i]?o(e,i,[e[i],t]):Array.isArray(e[i])&&e[i].push(t):o(e,i,t),e.__wrapped||(r(e,"addListener",l),r(e,"on",l),r(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var i=this._events[t];function o(e){return function(){this._events[t]=i;try{return e.apply(this,arguments)}finally{i=this._events[t],this._events[t]=c(i,n)}}}r(this,"removeListener",o);try{return this._events[t]=c(i,n),e.apply(this,arguments)}finally{s(this,"removeListener"),this._events[t]=i}}})),o(e,"__unwrap",(function(){s(e,"addListener"),s(e,"on"),s(e,"emit"),delete e[i],delete e.__wrapped})),o(e,"__wrapped",!0))}})),Zn=v(((e,t)=>{"use strict";var r=n(3837),s=n(9491),i=Jn(),o=n(852),a="cls@contexts",c="error@context",l=process.env.DEBUG_CLS_HOOKED,u=-1;function p(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function h(e){return process.namespaces[e]}function d(e){let t=h(e);s.ok(t,"can't delete nonexistent namespace! \""+e+'"'),s.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t)),process.namespaces[e]=null}function f(...e){l&&process._rawDebug(`${r.format(...e)}`)}t.exports={getNamespace:h,createNamespace:function(e){s.ok(e,"namespace must be given a name."),l&&f(`NS-CREATING NAMESPACE (${e})`);let t=new p(e);return t.id=u,o.createHook({init(n,s,i,a){if(u=o.executionAsyncId(),t.active)t._contexts.set(n,t.active),l&&f(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${s}] (${e}) asyncId:${n} currentUid:${u} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`);else if(0===u){let i=o.triggerAsyncId(),c=t._contexts.get(i);c?(t._contexts.set(n,c),l&&f(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${s}] (${e}) asyncId:${n} currentUid:${u} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)):l&&f(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${s}] (${e}) asyncId:${n} currentUid:${u} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}if(l&&"PROMISE"===s){f(r.inspect(a,{showHidden:!0}));let o=a.parentId;f(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${s}] (${e}) parentId:${o} asyncId:${n} currentUid:${u} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}},before(n){let s;if(u=o.executionAsyncId(),s=t._contexts.get(n)||t._contexts.get(u),s){if(l){let i=o.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${n} currentUid:${u} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(s)}`),t._indent+=2}t.enter(s)}else if(l){let s=o.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${u} triggerId:${s} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(n){let s;if(u=o.executionAsyncId(),s=t._contexts.get(n)||t._contexts.get(u),s){if(l){let i=o.triggerAsyncId();t._indent-=2,f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${n} currentUid:${u} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(s)}`)}t.exit(s)}else if(l){let i=o.triggerAsyncId();t._indent-=2,f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${u} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(s)}`)}},destroy(n){if(u=o.executionAsyncId(),l){let s=o.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${u} asyncId:${n} triggerId:${s} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(t._contexts.get(u))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:d,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){d(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},p.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,l&&f(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),t},p.prototype.get=function(e){if(this.active){if(l){let t=o.executionAsyncId(),n=o.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);f(s+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),f(`${s}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${u} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[e]}if(l){let t=o.currentId(),n=o.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${u} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length}`)}},p.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=u,l){let t=o.executionAsyncId(),n=o.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${u} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} context:${r.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},p.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(l){let e=o.triggerAsyncId(),n=o.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${u} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} context:${r.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[c]=t),e}finally{if(l){let e=o.triggerAsyncId(),n=o.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${u} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} ${r.inspect(t)}`)}this.exit(t)}},p.prototype.runAndReturn=function(e){let t;return this.run((function(n){t=e(n)})),t},p.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return l&&f("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(t)),n.then((e=>(l&&f("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,l&&f("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e}))},p.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{n.exit(t)}}},p.prototype.enter=function(e){if(s.ok(e,"context must be provided for entering"),l){let t=o.executionAsyncId(),n=o.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${u} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}this._set.push(this.active),this.active=e},p.prototype.exit=function(e){if(s.ok(e,"context must be provided for exiting"),l){let t=o.executionAsyncId(),n=o.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${u} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}if(this.active===e)return s.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(l&&f("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e)),s.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))):(s.ok(t,"can't remove top context"),this._set.splice(t,1))},p.prototype.bindEmitter=function(e){s.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;i(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,n=e[a];return Object.keys(n).forEach((function(e){let r=n[e];t=r.namespace.bind(t,r.context)})),t}))},p.prototype.fromException=function(e){return e[c]},process.namespaces={}})),er=v(((e,t)=>{"use strict";function n(){}t.exports=function(){let e=this._hooks,t=this._state,r=process.nextTick;process.nextTick=function(){if(!t.enabled)return r.apply(process,arguments);let s=new Array(arguments.length);for(let e=0;e<arguments.length;e++)s[e]=arguments[e];let i=s[0];if("function"!=typeof i)throw new TypeError("callback is not a function");let o=new n,a=--t.counter;return e.init.call(o,a,0,null,null),s[0]=function(){e.pre.call(o,a);let t=!0;try{i.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(o,a,!0),e.destroy.call(null,a)}))}e.post.call(o,a,!1),e.destroy.call(null,a)},r.apply(process,s)}}})),tr=v(((e,t)=>{"use strict";function n(){}t.exports=function(){let e=this._hooks,t=this._state,r=global.Promise,s=r.prototype.then;function i(t,n,r,s){return"function"!=typeof t?s?function(t){return function(n){return e.destroy.call(null,t),n}}(r):function(t){return function(n){throw e.destroy.call(null,t),n}}(r):function(){e.pre.call(n,r);try{return t.apply(this,arguments)}finally{e.post.call(n,r,!1),e.destroy.call(null,r)}}}r.prototype.then=function(r,o){if(!t.enabled)return s.call(this,r,o);let a=new n,c=--t.counter;return e.init.call(a,c,0,null,null),s.call(this,i(r,a,c,!0),i(o,a,c,!1))}}})),nr=v(((e,t)=>{"use strict";var r=n(9512);function s(){}function i(){}function o(){}var a=new Map,c=new Map,l=new Map,u=null,p=!1;function h(e,t,n,s,i,o,a){let c=r[n],l=r[s];r[n]=function(){if(!t.enabled)return c.apply(r,arguments);let n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];let s=n[0];if("function"!=typeof s)throw new TypeError('"callback" argument must be a function');let l,h=new i,d=--t.counter;return e.init.call(h,d,0,null,null),n[0]=function(){u=l,e.pre.call(h,d);let t=!0;try{s.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(h,d,!0),o.delete(l),e.destroy.call(null,d)}))}e.post.call(h,d,!1),u=null,(a||p)&&(p=!1,o.delete(l),e.destroy.call(null,d))},l=c.apply(r,n),o.set(l,d),l},r[s]=function(t){if(u===t&&null!==t)p=!0;else if(o.has(t)){let n=o.get(t);o.delete(t),e.destroy.call(null,n)}l.apply(r,arguments)}}t.exports=function(){h(this._hooks,this._state,"setTimeout","clearTimeout",s,a,!0),h(this._hooks,this._state,"setInterval","clearInterval",i,c,!1),h(this._hooks,this._state,"setImmediate","clearImmediate",o,l,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate}})),rr=v(((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}})),sr=v(((e,t)=>{"use strict";var n=process.binding("async_wrap"),r=n.Providers.TIMERWRAP,s={nextTick:er(),promise:tr(),timers:nr()},i=new Set;function o(){this.enabled=!1,this.counter=0}function a(){let e=this.initFns=[],t=this.preFns=[],n=this.postFns=[],s=this.destroyFns=[];this.init=function(t,n,s,o){if(n!==r)for(let r of e)r(t,this,n,s,o);else i.add(t)},this.pre=function(e){if(!i.has(e))for(let n of t)n(e,this)},this.post=function(e,t){if(!i.has(e))for(let r of n)r(e,this,t)},this.destroy=function(e){if(i.has(e))i.delete(e);else for(let t of s)t(e)}}function c(e,t){let n=e.indexOf(t);-1!==n&&e.splice(n,1)}function l(){this._state=new o,this._hooks=new a,this.version=rr().version,this.providers=n.Providers;for(let e of Object.keys(s))s[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),n.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}a.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},a.prototype.remove=function(e){e.init&&c(this.initFns,e.init),e.pre&&c(this.preFns,e.pre),e.post&&c(this.postFns,e.post),e.destroy&&c(this.destroyFns,e.destroy)},t.exports=l,l.prototype.addHooks=function(e){this._hooks.add(e)},l.prototype.removeHooks=function(e){this._hooks.remove(e)},l.prototype.enable=function(){this._state.enabled=!0,n.enable()},l.prototype.disable=function(){this._state.enabled=!1,n.disable()}})),ir=v(((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}})),or=v(((e,t)=>{t.exports=function(e,t){var n=[];n.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}(e));for(var r=0;r<t.length;r++){var s,i=t[r];try{s=i.toString()}catch(e){try{s="<error: "+e+">"}catch{s="<error>"}}n.push("    at "+s)}return n.join("\n")}})),ar=v(((e,t)=>{var n=or();function r(){this.extend=new o,this.filter=new o,this.format=new a,this.version=ir().version}var s=!1;r.prototype.callSite=function e(t){t||(t={}),s=!0;var n={};Error.captureStackTrace(n,e);var r=n.stack;return s=!1,r=r.slice(t.slice||0),t.extend&&(r=this.extend._modify(n,r)),t.filter&&(r=this.filter._modify(n,r)),r};var i=new r;function o(){this._modifiers=[]}function a(){this._formater=n,this._previous=void 0}o.prototype._modify=function(e,t){for(var n=0,r=this._modifiers.length;n<r;n++)t=this._modifiers[n](e,t);return t},o.prototype.attach=function(e){this._modifiers.push(e)},o.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},a.prototype.replace=function(e){e?this._formater=e:this.restore()},a.prototype.restore=function(){this._formater=n,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===n?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&i.format.replace(Error.prepareStackTrace);var c=!1;function l(e,t){if(s)return t;if(c)return n(e,t);var r=t.concat();r=i.extend._modify(e,r),r=(r=i.filter._modify(e,r)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:r}),c=!0;var o=i.format._formater(e,r);return c=!1,o}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(e){e===l?i.format._roolback():(i.format._backup(),i.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),t.exports=i})),cr=v(((e,t)=>{if(global._stackChain){if(global._stackChain.version!==ir().version)throw new Error("Conflicting version of stack-chain found");t.exports=global._stackChain}else t.exports=global._stackChain=ar()})),lr=v(((e,t)=>{"use strict";var n=sr();if(global._asyncHook){if(global._asyncHook.version!==rr().version)throw new Error("Conflicting version of async-hook-jl found");t.exports=global._asyncHook}else cr().filter.attach((function(e,t){return t.filter((function(e){let t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),t.exports=global._asyncHook=new n})),ur=v(((e,t)=>{"use strict";var r=n(3837),s=n(9491),i=Jn(),o=lr(),a="cls@contexts",c="error@context",l=[];for(let e in o.providers)l[o.providers[e]]=e;var u,p,h=process.env.DEBUG_CLS_HOOKED,d=-1;function f(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function m(e){return process.namespaces[e]}function g(e){let t=m(e);s.ok(t,"can't delete nonexistent namespace! \""+e+'"'),s.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t)),process.namespaces[e]=null}function v(e){process.env.DEBUG&&process._rawDebug(e)}function y(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(t.exports={getNamespace:m,createNamespace:function(e){s.ok(e,"namespace must be given a name."),h&&v("CREATING NAMESPACE "+e);let t=new f(e);return t.id=d,o.addHooks({init(n,s,i,o,a){d=n,o?(t._contexts.set(n,t._contexts.get(o)),h&&v("PARENTID: "+e+" uid:"+n+" parent:"+o+" provider:"+i)):t._contexts.set(d,t.active),h&&v("INIT "+e+" uid:"+n+" parent:"+o+" provider:"+l[i]+" active:"+r.inspect(t.active,!0))},pre(n,s){d=n;let i=t._contexts.get(n);i?(h&&v(" PRE "+e+" uid:"+n+" handle:"+y(s)+" context:"+r.inspect(i)),t.enter(i)):h&&v(" PRE MISSING CONTEXT "+e+" uid:"+n+" handle:"+y(s))},post(n,s){d=n;let i=t._contexts.get(n);i?(h&&v(" POST "+e+" uid:"+n+" handle:"+y(s)+" context:"+r.inspect(i)),t.exit(i)):h&&v(" POST MISSING CONTEXT "+e+" uid:"+n+" handle:"+y(s))},destroy(n){d=n,h&&v("DESTROY "+e+" uid:"+n+" context:"+r.inspect(t._contexts.get(d))+" active:"+r.inspect(t.active,!0)),t._contexts.delete(n)}}),process.namespaces[e]=t,t},destroyNamespace:g,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){g(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},f.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return h&&v("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0)),this.active[e]=t,t},f.prototype.get=function(e){if(this.active)return h&&v("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0)),this.active[e];h&&v("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0))},f.prototype.createContext=function(){h&&v("   CREATING Context: "+this.name+" uid:"+d+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=d,h&&v("   CREATED Context: "+this.name+" uid:"+d+" len:"+this._set.length+"  context:"+r.inspect(e,!0,2,!0)),e},f.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return h&&v(" BEFORE RUN: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(t)),e(t),t}catch(e){throw e&&(e[c]=t),e}finally{h&&v(" AFTER RUN: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t)}},f.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},f.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return h&&v(" BEFORE runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(t)),n.then((e=>(h&&v(" AFTER runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,h&&v(" AFTER runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e}))},f.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{n.exit(t)}}},f.prototype.enter=function(e){s.ok(e,"context must be provided for entering"),h&&v("  ENTER "+this.name+" uid:"+d+" len:"+this._set.length+" context: "+r.inspect(e)),this._set.push(this.active),this.active=e},f.prototype.exit=function(e){if(s.ok(e,"context must be provided for exiting"),h&&v("  EXIT "+this.name+" uid:"+d+" len:"+this._set.length+" context: "+r.inspect(e)),this.active===e)return s.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(h&&v("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e)),s.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))):(s.ok(t,"can't remove top context"),this._set.splice(t,1))},f.prototype.bindEmitter=function(e){s.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;i(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,n=e[a];return Object.keys(n).forEach((function(e){let r=n[e];t=r.namespace.bind(t,r.context)})),t}))},f.prototype.fromException=function(e){return e[c]},process.namespaces={},o._state&&!o._state.enabled&&o.enable(),h)for(p in(u=cr()).filter._modifiers)u.filter.deattach(p)})),pr=v(((e,t)=>{"use strict";var n=Qn();process&&n.gte(process.versions.node,"8.0.0")?t.exports=Zn():t.exports=ur()})),hr=v(((e,t)=>{var n;e=t.exports=V,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,s=e.re=[],i=e.src=[],o=0,a=o++;i[a]="0|[1-9]\\d*";var c=o++;i[c]="[0-9]+";var l=o++;i[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var u=o++;i[u]="("+i[a]+")\\.("+i[a]+")\\.("+i[a]+")";var p=o++;i[p]="("+i[c]+")\\.("+i[c]+")\\.("+i[c]+")";var h=o++;i[h]="(?:"+i[a]+"|"+i[l]+")";var d=o++;i[d]="(?:"+i[c]+"|"+i[l]+")";var f=o++;i[f]="(?:-("+i[h]+"(?:\\."+i[h]+")*))";var m=o++;i[m]="(?:-?("+i[d]+"(?:\\."+i[d]+")*))";var g=o++;i[g]="[0-9A-Za-z-]+";var v=o++;i[v]="(?:\\+("+i[g]+"(?:\\."+i[g]+")*))";var y=o++,b="v?"+i[u]+i[f]+"?"+i[v]+"?";i[y]="^"+b+"$";var w="[v=\\s]*"+i[p]+i[m]+"?"+i[v]+"?",S=o++;i[S]="^"+w+"$";var E=o++;i[E]="((?:<|>)?=?)";var _=o++;i[_]=i[c]+"|x|X|\\*";var x=o++;i[x]=i[a]+"|x|X|\\*";var T=o++;i[T]="[v=\\s]*("+i[x]+")(?:\\.("+i[x]+")(?:\\.("+i[x]+")(?:"+i[f]+")?"+i[v]+"?)?)?";var C=o++;i[C]="[v=\\s]*("+i[_]+")(?:\\.("+i[_]+")(?:\\.("+i[_]+")(?:"+i[m]+")?"+i[v]+"?)?)?";var P=o++;i[P]="^"+i[E]+"\\s*"+i[T]+"$";var A=o++;i[A]="^"+i[E]+"\\s*"+i[C]+"$";var R=o++;i[R]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var I=o++;i[I]="(?:~>?)";var k=o++;i[k]="(\\s*)"+i[I]+"\\s+",s[k]=new RegExp(i[k],"g");var O=o++;i[O]="^"+i[I]+i[T]+"$";var M=o++;i[M]="^"+i[I]+i[C]+"$";var D=o++;i[D]="(?:\\^)";var N=o++;i[N]="(\\s*)"+i[D]+"\\s+",s[N]=new RegExp(i[N],"g");var L=o++;i[L]="^"+i[D]+i[T]+"$";var j=o++;i[j]="^"+i[D]+i[C]+"$";var q=o++;i[q]="^"+i[E]+"\\s*("+w+")$|^$";var B=o++;i[B]="^"+i[E]+"\\s*("+b+")$|^$";var F=o++;i[F]="(\\s*)"+i[E]+"\\s*("+w+"|"+i[T]+")",s[F]=new RegExp(i[F],"g");var U=o++;i[U]="^\\s*("+i[T]+")\\s+-\\s+("+i[T]+")\\s*$";var $=o++;i[$]="^\\s*("+i[C]+")\\s+-\\s+("+i[C]+")\\s*$";var H,z=o++;for(i[z]="(<|>)?=?\\s*\\*",H=0;H<35;H++)n(H,i[H]),s[H]||(s[H]=new RegExp(i[H]));function K(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof V)return e;if("string"!=typeof e||e.length>256)return null;if(!(t.loose?s[S]:s[y]).test(e))return null;try{return new V(e,t)}catch{return null}}function V(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof V){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof V))return new V(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?s[S]:s[y]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}e.parse=K,e.valid=function(e,t){var n=K(e,t);return n?n.version:null},e.clean=function(e,t){var n=K(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},e.SemVer=V,V.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},V.prototype.toString=function(){return this.version},V.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof V||(e=new V(e,this.options)),this.compareMain(e)||this.comparePre(e)},V.prototype.compareMain=function(e){return e instanceof V||(e=new V(e,this.options)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},V.prototype.comparePre=function(e){if(e instanceof V||(e=new V(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],s=e.prerelease[t];if(n("prerelease compare",t,r,s),void 0===r&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===r)return-1;if(r!==s)return G(r,s)}while(++t)},V.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new V(e,n).inc(t,r).version}catch{return null}},e.diff=function(e,t){if(J(e,t))return null;var n=K(e),r=K(t),s="";if(n.prerelease.length||r.prerelease.length){s="pre";var i="prerelease"}for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==r[o])return s+o;return i},e.compareIdentifiers=G;var W=/^[0-9]+$/;function G(e,t){var n=W.test(e),r=W.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function Y(e,t,n){return new V(e,n).compare(new V(t,n))}function Q(e,t,n){return Y(e,t,n)>0}function X(e,t,n){return Y(e,t,n)<0}function J(e,t,n){return 0===Y(e,t,n)}function Z(e,t,n){return 0!==Y(e,t,n)}function ee(e,t,n){return Y(e,t,n)>=0}function te(e,t,n){return Y(e,t,n)<=0}function ne(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return J(e,n,r);case"!=":return Z(e,n,r);case">":return Q(e,n,r);case">=":return ee(e,n,r);case"<":return X(e,n,r);case"<=":return te(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function re(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof re))return new re(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===se?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}e.rcompareIdentifiers=function(e,t){return G(t,e)},e.major=function(e,t){return new V(e,t).major},e.minor=function(e,t){return new V(e,t).minor},e.patch=function(e,t){return new V(e,t).patch},e.compare=Y,e.compareLoose=function(e,t){return Y(e,t,!0)},e.rcompare=function(e,t,n){return Y(t,e,n)},e.sort=function(t,n){return t.sort((function(t,r){return e.compare(t,r,n)}))},e.rsort=function(t,n){return t.sort((function(t,r){return e.rcompare(t,r,n)}))},e.gt=Q,e.lt=X,e.eq=J,e.neq=Z,e.gte=ee,e.lte=te,e.cmp=ne,e.Comparator=re;var se={};function ie(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ie)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ie(e.raw,t);if(e instanceof re)return new ie(e.value,t);if(!(this instanceof ie))return new ie(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function oe(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,n,r,s,i,o,a,c,l,u,p,h){return((t=oe(n)?"":oe(r)?">="+n+".0.0":oe(s)?">="+n+"."+r+".0":">="+t)+" "+(a=oe(c)?"":oe(l)?"<"+(+c+1)+".0.0":oe(u)?"<"+c+"."+(+l+1)+".0":p?"<="+c+"."+l+"."+u+"-"+p:"<="+a)).trim()}function ce(e,t,r){for(var s=0;s<e.length;s++)if(!e[s].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(s=0;s<e.length;s++)if(n(e[s].semver),e[s].semver!==se&&e[s].semver.prerelease.length>0){var i=e[s].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new ie(t,n)}catch{return!1}return t.test(e)}function ue(e,t,n,r){var s,i,o,a,c;switch(e=new V(e,r),t=new ie(t,r),n){case">":s=Q,i=te,o=X,a=">",c=">=";break;case"<":s=X,i=ee,o=Q,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],p=null,h=null;if(u.forEach((function(e){e.semver===se&&(e=new re(">=0.0.0")),p=p||e,h=h||e,s(e.semver,p.semver,r)?p=e:o(e.semver,h.semver,r)&&(h=e)})),p.operator===a||p.operator===c||(!h.operator||h.operator===a)&&i(e,h.semver))return!1;if(h.operator===c&&o(e,h.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.options.loose?s[q]:s[B],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new V(n[2],this.options.loose):this.semver=se},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===se||("string"==typeof e&&(e=new V(e,this.options)),ne(e,this.operator,this.semver,this.options))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new ie(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new ie(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),s=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||s||i&&o||a||c},e.Range=ie,ie.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ie.prototype.toString=function(){return this.range},ie.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?s[$]:s[U];e=e.replace(r,ae),n("hyphen replace",e),e=e.replace(s[F],"$1$2$3"),n("comparator trim",e,s[F]),e=(e=(e=e.replace(s[k],"$1~")).replace(s[N],"$1^")).split(/\s+/).join(" ");var i=t?s[q]:s[B],o=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?s[j]:s[L];return e.replace(r,(function(t,r,s,i,o){var a;return n("caret",e,t,r,s,i,o),oe(r)?a="":oe(s)?a=">="+r+".0.0 <"+(+r+1)+".0.0":oe(i)?a="0"===r?">="+r+"."+s+".0 <"+r+"."+(+s+1)+".0":">="+r+"."+s+".0 <"+(+r+1)+".0.0":o?(n("replaceCaret pr",o),a="0"===r?"0"===s?">="+r+"."+s+"."+i+"-"+o+" <"+r+"."+s+"."+(+i+1):">="+r+"."+s+"."+i+"-"+o+" <"+r+"."+(+s+1)+".0":">="+r+"."+s+"."+i+"-"+o+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===s?">="+r+"."+s+"."+i+" <"+r+"."+s+"."+(+i+1):">="+r+"."+s+"."+i+" <"+r+"."+(+s+1)+".0":">="+r+"."+s+"."+i+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?s[M]:s[O];return e.replace(r,(function(t,r,s,i,o){var a;return n("tilde",e,t,r,s,i,o),oe(r)?a="":oe(s)?a=">="+r+".0.0 <"+(+r+1)+".0.0":oe(i)?a=">="+r+"."+s+".0 <"+r+"."+(+s+1)+".0":o?(n("replaceTilde pr",o),a=">="+r+"."+s+"."+i+"-"+o+" <"+r+"."+(+s+1)+".0"):a=">="+r+"."+s+"."+i+" <"+r+"."+(+s+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?s[A]:s[P];return e.replace(r,(function(t,r,s,i,o,a){n("xRange",e,t,r,s,i,o,a);var c=oe(s),l=c||oe(i),u=l||oe(o);return"="===r&&u&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&u?(l&&(i=0),o=0,">"===r?(r=">=",l?(s=+s+1,i=0,o=0):(i=+i+1,o=0)):"<="===r&&(r="<",l?s=+s+1:i=+i+1),t=r+s+"."+i+"."+o):l?t=">="+s+".0.0 <"+(+s+1)+".0.0":u&&(t=">="+s+"."+i+".0 <"+s+"."+(+i+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(s[z],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o.map((function(e){return new re(e,this.options)}),this)},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new ie(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ie.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new V(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,n){var r=null,s=null;try{var i=new ie(t,n)}catch{return null}return e.forEach((function(e){i.test(e)&&(!r||-1===s.compare(e))&&(s=new V(r=e,n))})),r},e.minSatisfying=function(e,t,n){var r=null,s=null;try{var i=new ie(t,n)}catch{return null}return e.forEach((function(e){i.test(e)&&(!r||1===s.compare(e))&&(s=new V(r=e,n))})),r},e.minVersion=function(e,t){e=new ie(e,t);var n=new V("0.0.0");if(e.test(n)||(n=new V("0.0.0-0"),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new V(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!n||Q(n,t))&&(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},e.validRange=function(e,t){try{return new ie(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,n){return ue(e,t,"<",n)},e.gtr=function(e,t,n){return ue(e,t,">",n)},e.outside=ue,e.prerelease=function(e,t){var n=K(e,t);return n&&n.prerelease.length?n.prerelease:null},e.intersects=function(e,t,n){return e=new ie(e,n),t=new ie(t,n),e.intersects(t)},e.coerce=function(e){if(e instanceof V)return e;if("string"!=typeof e)return null;var t=e.match(s[R]);return null==t?null:K(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),dr=v(((e,t)=>{var n,r,s,i,o,a=Xn().wrap,c=[],l=0,u=!1,p=[];function h(e,t){var n=e.length,r=t.length,s=[];if(0===n&&0===r)return s;for(var i=0;i<n;i++)s[i]=e[i];if(0===r)return s;for(var o=0;o<r;o++){var a=!0;for(i=0;i<n;i++)if(e[i].uid===t[o].uid){a=!1;break}a&&s.push(t[o])}return s}function d(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=1),"function"==typeof e.before&&(this.before=e.before,this.flags|=2),"function"==typeof e.after&&(this.after=e.after,this.flags|=4),"function"==typeof e.error&&(this.error=e.error,this.flags|=8),this.uid=++l,this.data=void 0===t?null:t}function f(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof d?e:new d(e,t)}process._fatalException?(s=!1,n=function(e){var t=c.length;if(s||0===t)return!1;var n=!1;s=!0;for(var r=0;r<t;++r){var o=c[r];if(0!=(8&o.flags)){var a=i&&i[o.uid];n=o.error(a,e)||n}}return s=!1,p.length>0&&(c=p.pop()),i=void 0,n&&!u},r=function(e,t,n){var r=[];u=!0;for(var s=0;s<n;++s){var o=t[s];if(r[o.uid]=o.data,0!=(1&o.flags)){var a=o.create(o.data);void 0!==a&&(r[o.uid]=a)}}return u=!1,function(){i=r,p.push(c),c=h(t,c),u=!0;for(var s=0;s<n;++s)(2&t[s].flags)>0&&t[s].before(this,r[t[s].uid]);u=!1;var o=e.apply(this,arguments);for(u=!0,s=0;s<n;++s)(4&t[s].flags)>0&&t[s].after(this,r[t[s].uid]);return u=!1,c=p.pop(),i=void 0,o}},a(process,"_fatalException",(function(e){return function(t){return n(t)||e(t)}}))):(o=!1,n=function(e){if(o)throw e;for(var t=!1,n=c.length,r=0;r<n;++r){var s=c[r];0!=(8&s.flags)&&(t=s.error(null,e)||t)}if(!t&&u)throw e},r=function(e,t,r){var s=[];u=!0;for(var i=0;i<r;++i){var a=t[i];if(s[a.uid]=a.data,0!=(1&a.flags)){var l=a.create(a.data);void 0!==l&&(s[a.uid]=l)}}return u=!1,function(){var i,a=!1,l=!1;p.push(c),c=h(t,c),u=!0;for(var d=0;d<r;++d)(2&t[d].flags)>0&&t[d].before(this,s[t[d].uid]);u=!1;try{i=e.apply(this,arguments)}catch(e){for(a=!0,d=0;d<r;++d)if(0!=(8&c[d].flags))try{l=c[d].error(s[t[d].uid],e)||l}catch(e){throw o=!0,e}if(!l)throw process.removeListener("uncaughtException",n),process._originalNextTick((function(){process.addListener("uncaughtException",n)})),e}finally{if(!a||l){for(u=!0,d=0;d<r;++d)(4&t[d].flags)>0&&t[d].after(this,s[t[d].uid]);u=!1}c=p.pop()}return i}},process.addListener("uncaughtException",n)),d.prototype.create=void 0,d.prototype.before=void 0,d.prototype.after=void 0,d.prototype.error=void 0,d.prototype.data=void 0,d.prototype.uid=0,d.prototype.flags=0,process.createAsyncListener=f,process.addAsyncListener=function(e,t){var n;n=e instanceof d?e:f(e,t);for(var r=!1,s=0;s<c.length;s++)if(n===c[s]){r=!0;break}return r||c.push(n),n},process.removeAsyncListener=function(e){for(var t=0;t<c.length;t++)if(e===c[t]){c.splice(t,1);break}},t.exports=function(e){var t=c.length;if(0===t)return e;for(var n=c.slice(),s=0;s<t;++s)if(n[s].flags>0)return r(e,n,t);return function(e,t,n){u=!0;for(var r=0;r<n;++r){var s=t[r];s.create&&s.create(s.data)}return u=!1,function(){p.push(c),c=h(t,c);var n=e.apply(this,arguments);return c=p.pop(),n}}(e,n,t)}})),fr=v(((e,t)=>{"use strict";t.exports=(e,t)=>class extends e{constructor(e){var n,r;super((function(e,i){n=this,r=[function(n){return t(s,!1),e(n)},function(e){return t(s,!1),i(e)}]}));var s=this;try{e.apply(n,r)}catch(e){r[1](e)}return s}}})),mr=v((()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=Xn(),t=hr(),r=e.wrap,s=e.massWrap,i=dr(),o=n(3837),a=t.gte(process.version,"6.0.0"),c=t.gte(process.version,"7.0.0"),l=t.gte(process.version,"8.0.0"),u=t.gte(process.version,"11.0.0"),p=n(1808);function h(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=i(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=i(this._handle.onconnection))}}}function d(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=i(t._originalOnread)}}c&&!p._normalizeArgs?p._normalizeArgs=function(e){if(0===e.length)return[{},null];var t=e[0],n={};"object"==typeof t&&null!==t?n=t:function(e){return"string"==typeof e&&!1===function(e){return(e=Number(e))>=0&&e}(e)}(t)?n.path=t:(n.port=t,e.length>1&&"string"==typeof e[1]&&(n.host=e[1]));var r=e[e.length-1];return"function"!=typeof r?[n,null]:[n,r]}:!c&&!p._normalizeConnectArgs&&(p._normalizeConnectArgs=function(e){var t={};"object"==typeof e[0]&&null!==e[0]?t=e[0]:"string"==typeof e[0]&&!1===function(e){return(e=Number(e))>=0&&e}(e[0])?t.path=e[0]:(t.port=e[0],"string"==typeof e[1]&&(t.host=e[1]));var n=e[e.length-1];return"function"==typeof n?[t,n]:[t]}),"_setUpListenHandle"in p.Server.prototype?r(p.Server.prototype,"_setUpListenHandle",h):r(p.Server.prototype,"_listen2",h),r(p.Socket.prototype,"connect",(function(e){return function(){var t;(t=l&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:c?p._normalizeArgs(arguments):p._normalizeConnectArgs(arguments))[1]&&(t[1]=i(t[1]));var n=e.apply(this,t);return d(this),n}}));var f=n(3685);r(f.Agent.prototype,"addRequest",(function(e){return function(t){var n=t.onSocket;return t.onSocket=i((function(e){return d(e),n.apply(this,arguments)})),e.apply(this,arguments)}}));var m=n(2081);function g(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=i(e._handle.onread),r(e._handle,"close",I))})),e._handle&&(e._handle.onexit=i(e._handle.onexit))}m.ChildProcess?r(m.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return g(this),t}})):s(m,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return g(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var v=[];process._nextDomainTick&&v.push("_nextDomainTick"),process._tickDomainCallback&&v.push("_tickDomainCallback"),s(process,v,R),r(process,"nextTick",I);var y=["setTimeout","setInterval"];global.setImmediate&&y.push("setImmediate");var b=n(9512),w=global.setTimeout===b.setTimeout;s(b,y,I),w&&s(global,y,I);var S=n(9523);s(S,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],R),S.resolveNaptr&&r(S,"resolveNaptr",R);var E,_,x,T=n(7147);s(T,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],R),T.lchown&&r(T,"lchown",R),T.lchmod&&r(T,"lchmod",R),T.ftruncate&&r(T,"ftruncate",R);try{E=n(9796)}catch{}E&&E.Deflate&&E.Deflate.prototype&&((_=Object.getPrototypeOf(E.Deflate.prototype))._transform?r(_,"_transform",R):_.write&&_.flush&&_.end&&s(_,["write","flush","end"],R));try{x=n(6113)}catch{}x&&(C=["pbkdf2","randomBytes"],u||C.push("pseudoRandomBytes"),s(x,C,R));var C,P,A=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();function R(e){var t=function(){var t,n=arguments.length-1;if("function"==typeof arguments[n]){t=Array(arguments.length);for(var r=0;r<arguments.length-1;r++)t[r]=arguments[r];t[n]=i(arguments[n])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=i(n)),e.call(this,n))};case 2:return function(n,r){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,n,r))};case 3:return function(n,r,s){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=i(s)),e.call(this,n,r,s))};case 4:return function(n,r,s,o){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof o&&(o=i(o)),e.call(this,n,r,s,o))};case 5:return function(n,r,s,o,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof a&&(a=i(a)),e.call(this,n,r,s,o,a))};case 6:return function(n,r,s,o,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=i(c)),e.call(this,n,r,s,o,a,c))};default:return t}}function I(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=i(arguments[0]);for(var n=1;n<arguments.length;n++)t[n]=arguments[n]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=i(n)),e.call(this,n))};case 2:return function(n,r){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=i(n)),e.call(this,n,r))};case 3:return function(n,r,s){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=i(n)),e.call(this,n,r,s))};case 4:return function(n,r,s,o){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=i(n)),e.call(this,n,r,s,o))};case 5:return function(n,r,s,o,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=i(n)),e.call(this,n,r,s,o,a))};case 6:return function(n,r,s,o,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=i(n)),e.call(this,n,r,s,o,a,c))};default:return t}}A&&(P=process.addAsyncListener({create:function(){A=!1}}),global.Promise.resolve(!0).then((function(){A=!1})),process.removeAsyncListener(P)),A&&function(){var e=global.Promise;function t(r){if(!(this instanceof t))return e(r);if("function"!=typeof r)return new e(r);var s,i,o=new e((function(e,t){s=this,i=[function(t){return n(o,!1),e(t)},function(e){return n(o,!1),t(e)}]}));o.__proto__=t.prototype;try{r.apply(s,i)}catch(e){i[1](e)}return o}function n(e,t){(!e.__asl_wrapper||t)&&(e.__asl_wrapper=i(s))}function s(t,r,i,o){var a;try{return{returnVal:a=r.call(t,i),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{a instanceof e?o.__asl_wrapper=function(){var e=a.__asl_wrapper||s;return e.apply(this,arguments)}:n(o,!0)}}function c(e){return function(){var t=this,n=e.apply(t,Array.prototype.map.call(arguments,r));return n.__asl_wrapper=function(e,r,i,o){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,n),n.__asl_wrapper(e,r,i,o)):s(e,r,i,o)},n;function r(e){return"function"!=typeof e?e:i((function(r){var i=(t.__asl_wrapper||s)(this,e,r,n);if(i.error)throw i.errorVal;return i.returnVal}))}}}o.inherits(t,e),r(e.prototype,"then",c),e.prototype.chain&&r(e.prototype,"chain",c),a?global.Promise=fr()(e,n):(["all","race","reject","resolve","accept","defer"].forEach((function(n){"function"==typeof e[n]&&(t[n]=e[n])})),global.Promise=t)}()})),gr=v(((e,t)=>{"use strict";var r=n(9491),s=Jn(),i="cls@contexts",o="error@context";function a(e){this.name=e,this.active=null,this._set=[],this.id=null}function c(e){return process.namespaces[e]}function l(e){var t=c(e);r.ok(t,"can't delete nonexistent namespace!"),r.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){l(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||mr(),a.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},a.prototype.get=function(e){if(this.active)return this.active[e]},a.prototype.createContext=function(){return Object.create(this.active)},a.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[o]=t),e}finally{this.exit(t)}},a.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},a.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[o]=t),e}finally{n.exit(t)}}},a.prototype.enter=function(e){r.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},a.prototype.exit=function(e){if(r.ok(e,"context must be provided for exiting"),this.active===e)return r.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);r.ok(t>=0,"context not currently entered; can't exit"),r.ok(t,"can't remove top context"),this._set.splice(t,1)},a.prototype.bindEmitter=function(e){r.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,n="context@"+this.name;s(e,(function(e){!e||(e[i]||(e[i]=Object.create(null)),e[i][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[i])return e;var t=e,n=e[i];return Object.keys(n).forEach((function(e){var r=n[e];t=r.namespace.bind(t,r.context)})),t}))},a.prototype.fromException=function(e){return e[o]},process.namespaces||u(),t.exports={getNamespace:c,createNamespace:function(e){r.ok(e,"namespace must be given a name!");var t=new a(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,n){n&&t.enter(n)},after:function(e,n){n&&t.exit(n)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:l,reset:u}})),vr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=w(),n=Xt(),r=tn(),s=nn(),i=Yn(),o=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,n,r,s,i){return t=t||e,this.enabled?{operation:{name:n,id:e,parentId:t,traceparent:s,tracestate:i},customProperties:new a(r)}:null},e.spanToContextObject=function(t,n,s){var i=new r;return i.traceId=t.traceId,i.spanId=t.spanId,i.traceFlag=r.formatOpenTelemetryTraceFlags(t.traceFlags)||r.DEFAULT_TRACE_FLAG,i.parentId=n,e.generateContextObject(i.traceId,i.parentId,s,null,i)},e.runWithContext=function(t,n){var r;return e.enabled?e.session.bind(n,((r={})[e.CONTEXT_NAME]=t,r))():n()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,n){var r;return e.enabled?e.session.bind(t,n?((r={})[e.CONTEXT_NAME]=n,r):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible())return void(this.enabled=!1);e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,typeof this.cls>"u"&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=pr():this.cls=gr()),e.session=this.cls.createNamespace("AI-CLS-Session"),n.registerContextPreservation((function(t){return e.session.bind(t)}))),this.enabled=!0}},e.startOperation=function(n,o){var a=n&&n.traceContext||null,c=n&&n.traceId?n:null,l=n&&n.headers;if(c){var u=new r("00-"+c.traceId+"-"+c.spanId+"-01"),p=new s(c.traceState?c.traceState.serialize():null);return e.generateContextObject(c.traceId,"|"+c.traceId+"."+c.spanId+".","string"==typeof o?o:"",void 0,u,p)}if(a){u=new r(a.traceparent),p=new s(a.tracestate);var h="object"==typeof o?new i(o):null;return e.generateContextObject(u.traceId,u.parentId,"string"==typeof o?o:h.getOperationName({}),h&&h.getCorrelationContextHeader()||void 0,u,p)}return l?(u=new r(l.traceparent?l.traceparent.toString():null),p=new s(l.tracestate?l.tracestate.toString():null),h=new i(n),e.generateContextObject(u.traceId,u.parentId,h.getOperationName({}),h.getCorrelationContextHeader(),u,p)):(t.warn("startOperation was called with invalid arguments",arguments),null)},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,r=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&n)&&r},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();e.CorrelationContextManager=o;var a=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e)return n.value}},e.prototype.setProperty=function(n,r){if(e.bannedCharacters.test(n)||e.bannedCharacters.test(r))t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+n+" and value: "+r);else{for(var s=0;s<this.props.length;++s){var i=this.props[s];if(i.key===n)return void(i.value=r)}this.props.push({key:n,value:r})}},e.bannedCharacters=/[,=]/,e}()})),yr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Wn(),n=T(),r=[],s=function(e){var n=e.data.message;r.forEach((function(r){n instanceof Error?r.trackException({exception:n}):(n.lastIndexOf("\n")==n.length-1&&(n=n.substring(0,n.length-1)),r.trackTrace({message:n,severity:e.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))}))};e.enable=function(e,t){e?(0===r.length&&n.channel.subscribe("console",s),r.push(t)):0===(r=r.filter((function(e){return e!=t}))).length&&n.channel.unsubscribe("console",s)},e.dispose=function(){n.channel.unsubscribe("console",s),r=[]}})),br=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Wn(),n=T(),r=[],s={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},i=function(e){var t=e.data.result;r.forEach((function(n){var r=s[e.data.level];t instanceof Error?n.trackException({exception:t}):n.trackTrace({message:t,severity:r})}))};e.enable=function(e,t){e?(0===r.length&&n.channel.subscribe("bunyan",i),r.push(t)):0===(r=r.filter((function(e){return e!=t}))).length&&n.channel.unsubscribe("bunyan",i)},e.dispose=function(){n.channel.unsubscribe("bunyan",i),r=[]}})),wr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Wn(),n=T(),r=[],s={syslog:function(e){var n={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return void 0===n[e]?t.SeverityLevel.Information:n[e]},npm:function(e){var n={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return void 0===n[e]?t.SeverityLevel.Information:n[e]},unknown:function(e){return t.SeverityLevel.Information}},i=function(e){var t=e.data.message;r.forEach((function(n){if(t instanceof Error)n.trackException({exception:t,properties:e.data.meta});else{var r=s[e.data.levelKind](e.data.level);n.trackTrace({message:t,severity:r,properties:e.data.meta})}}))};e.enable=function(e,t){e?(0===r.length&&n.channel.subscribe("winston",i),r.push(t)):0===(r=r.filter((function(e){return e!=t}))).length&&n.channel.unsubscribe("winston",i)},e.dispose=function(){n.channel.unsubscribe("winston",i),r=[]}})),Sr=v(((e,t)=>{"use strict";var n=Xt(),r=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){n.IsInitialized&&(yr().enable(e&&t,this._client),br().enable(e,this._client),wr().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();t.exports=r})),Er=v(((e,t)=>{"use strict";var n=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var n=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(n[0])>13||13===parseInt(n[0])&&parseInt(n[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var n=this;if(t){if(this._isInitialized=!0,!this._exceptionListenerHandle){var r=function(t,r,s){void 0===s&&(s=new Error(e._FALLBACK_ERROR_MESSAGE)),n._client.trackException({exception:s}),n._client.flush({isAppCrashing:!0}),t&&r&&1===process.listeners(r).length&&(console.error(s),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=r.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=r.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=r.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();t.exports=n})),_r=v((e=>{"use strict";var t,n,r,s;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",(r=n=e.QuickPulseCounter||(e.QuickPulseCounter={})).COMMITTED_BYTES="\\Memory\\Committed Bytes",r.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",r.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",r.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",r.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",r.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",r.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",r.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",r.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec",function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(s=e.PerformanceCounter||(e.PerformanceCounter={})),function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"}(e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=((t={})[s.PROCESSOR_TIME]=n.PROCESSOR_TIME,t[s.REQUEST_RATE]=n.REQUEST_RATE,t[s.REQUEST_DURATION]=n.REQUEST_DURATION,t[n.COMMITTED_BYTES]=n.COMMITTED_BYTES,t[n.REQUEST_FAILURE_RATE]=n.REQUEST_FAILURE_RATE,t[n.DEPENDENCY_RATE]=n.DEPENDENCY_RATE,t[n.DEPENDENCY_FAILURE_RATE]=n.DEPENDENCY_FAILURE_RATE,t[n.DEPENDENCY_DURATION]=n.DEPENDENCY_DURATION,t[n.EXCEPTION_RATE]=n.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"})),xr=v(((e,t)=>{"use strict";var r=n(2037),s=_r(),i=function(){function e(t,n,r){void 0===n&&(n=6e4),void 0===r&&(r=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=n,this._enableLiveMetricsCounters=r}return e.prototype.enable=function(t,n){var s=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=n||this._collectionInterval,this._handle=setInterval((function(){return s.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,n){var r;if(e.isEnabled()){if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}e._intervalRequestExecutionTime+=r,!1===n&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,n){var r;if(e.isEnabled()){if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}e._intervalDependencyExecutionTime+=r,!1===n&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=r.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,n=0,i=0,o=0,a=0,c=0;e&&c<e.length;c++){var l=e[c],u=this._lastCpus[c],p=(l.model,l.speed,l.times),h=u.times;t+=p.user-h.user||0,n+=p.sys-h.sys||0,i+=p.nice-h.nice||0,o+=p.idle-h.idle||0,a+=p.irq-h.irq||0}var d=void 0;if("function"==typeof process.cpuUsage){var f=process.cpuUsage(),m=process.hrtime(),g=f.user-this._lastAppCpuUsage.user+(f.system-this._lastAppCpuUsage.system)||0;typeof this._lastHrtime<"u"&&2===this._lastHrtime.length&&(d=100*g/((1e6*(m[0]-this._lastHrtime[0])+(m[1]-this._lastHrtime[1])/1e3||0)*e.length)),this._lastAppCpuUsage=f,this._lastHrtime=m}var v=t+n+i+o+a||1;this._client.trackMetric({name:s.PerformanceCounter.PROCESSOR_TIME,value:(v-o)/v*100}),this._client.trackMetric({name:s.PerformanceCounter.PROCESS_TIME,value:d||t/v*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=r.freemem(),t=process.memoryUsage().rss,n=r.totalmem()-e;this._client.trackMetric({name:s.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:s.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:s.QuickPulseCounter.COMMITTED_BYTES,value:n})},e.prototype._trackNetwork=function(){var t=this._lastRequests,n={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},r=n.totalRequestCount-t.totalRequestCount||0,i=n.totalFailedRequestCount-t.totalFailedRequestCount||0,o=n.time-t.time,a=o/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/r||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,o>0){var l=r/a,u=i/a;this._client.trackMetric({name:s.PerformanceCounter.REQUEST_RATE,value:l}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:s.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:s.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=n},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,n={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},r=n.totalDependencyCount-t.totalDependencyCount||0,i=n.totalFailedDependencyCount-t.totalFailedDependencyCount||0,o=n.time-t.time,a=o/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/r||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,o>0){var l=r/a,u=i/a;this._client.trackMetric({name:s.QuickPulseCounter.DEPENDENCY_RATE,value:l}),this._client.trackMetric({name:s.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:s.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=n}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,n={totalExceptionCount:e._totalExceptionCount,time:+new Date},r=n.totalExceptionCount-t.totalExceptionCount||0,i=n.time-t.time;if(i>0){var o=r/(i/1e3);this._client.trackMetric({name:s.QuickPulseCounter.EXCEPTION_RATE,value:o})}this._lastExceptions=n}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();t.exports=i})),Tr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;e.AggregatedMetricCounter=function(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}})),Cr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}})),Pr=v(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)},r=_r(),s=Tr(),i=Cr(),o=function(){function e(t,n){void 0===n&&(n=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=n}return e.prototype.enable=function(e,t){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=t||this._collectionInterval,this._handle=setInterval((function(){return n.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._exceptionCountersCollection).totalCount++},e.countTrace=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._traceCountersCollection).totalCount++},e.countRequest=function(t,n){if(e.isEnabled()){var r,s=e._getAggregatedCounter(n,this._requestCountersCollection);if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}s.intervalExecutionTime+=r,s.totalCount++}},e.countDependency=function(t,n){if(e.isEnabled()){var r,s=e._getAggregatedCounter(n,this._dependencyCountersCollection);if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}s.intervalExecutionTime+=r,s.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(e,t){for(var n=!1,r=0;r<t.length;r++){if(e===t[r].dimensions)return t[r];if(Object.keys(e).length===Object.keys(t[r].dimensions).length){for(var i in e)if(e[i]!=t[r].dimensions[i]){n=!0;break}if(!n)return t[r];n=!1}}var o=new s.AggregatedMetricCounter(e);return t.push(o),o},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var n=e._requestCountersCollection[t];n.time=+new Date;var s=n.totalCount-n.lastTotalCount||0,i=n.time-n.lastTime,o=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/s||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,i>0&&s>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:n.dimensions,value:o,count:s,aggregationInterval:i,metricType:r.MetricId.REQUESTS_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var n=e._dependencyCountersCollection[t];n.time=+new Date;var s=n.totalCount-n.lastTotalCount||0,i=n.time-n.lastTime,o=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/s||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,i>0&&s>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:n.dimensions,value:o,count:s,aggregationInterval:i,metricType:r.MetricId.DEPENDENCIES_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var n=e._exceptionCountersCollection[t],s=n.totalCount-n.lastTotalCount||0,i=n.time-n.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:n.dimensions,value:s,count:s,aggregationInterval:i,metricType:r.MetricId.EXCEPTIONS_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var n=e._traceCountersCollection[t],s=n.totalCount-n.lastTotalCount||0,i=n.time-n.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:n.dimensions,value:s,count:s,aggregationInterval:i,metricType:r.MetricId.TRACES_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackPreAggregatedMetric=function(e){var t={};for(var r in e.dimensions)t[i.PreaggregatedMetricPropertyNames[r]]=e.dimensions[r];t=n(n({},t),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var s={name:e.name,value:e.value,count:e.count,properties:t,kind:"Aggregation"};this._client.trackMetric(s)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();t.exports=o})),Ar=v(((e,t)=>{"use strict";var r=n(2037),s=n(7147),i=n(1017),o=Wn(),a=w(),c=function(){function e(e){this.keys=new o.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||i.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var n=JSON.parse(s.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.appVersion[t]=n.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},e.prototype._loadInternalContext=function(){var t=i.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var n=JSON.parse(s.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.sdkVersion=n.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();t.exports=c})),Rr=v(((e,t)=>{"use strict";var r,s=e&&e.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=n(7310),o=Wn(),a=Zt(),c=Jt(),l=Gn(),u=en(),p=function(e){function t(n,r){var s=e.call(this)||this;return r&&r.method&&n&&(s.method=r.method,s.url=t._getUrlFromRequestOptions(n,r),s.startTime=+new Date),s}return s(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var n=i.parse(this.url);n.search=void 0,n.hash=void 0;var r=this.method.toUpperCase()+" "+n.pathname,s=o.RemoteDependencyDataConstants.TYPE_HTTP,a=n.hostname;n.port&&(a+=":"+n.port),this.correlationId?(s=o.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==u.correlationIdPrefix&&(a+=" | "+this.correlationId)):s=o.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:r,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:a};if(e&&e.time?c.time=e.time:this.startTime&&(c.time=new Date(this.startTime)),e){for(var l in e)c[l]||(c[l]=e[l]);if(e.properties)for(var l in e.properties)c.properties[l]=e.properties[l]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)if(0===e.indexOf("http://")||0===e.indexOf("https://"))e=i.parse(e);else{var n=i.parse(e);e="443"===n.host?i.parse("https://"+e):i.parse("http://"+e)}else{if(e&&"function"==typeof i.URL&&e instanceof i.URL)return i.format(e);var r=e;e={},r&&Object.keys(r).forEach((function(t){e[t]=r[t]}))}if(e.path){var s=i.parse(e.path);e.pathname=s.pathname,e.search=s.search}return e.host&&e.port&&!i.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host),e.protocol=e.protocol||t.agent&&t.agent.protocol||t.protocol||void 0,e.hostname=e.hostname||"localhost",i.format(e)},t}(l);t.exports=p})),Ir=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var n=we(),r=_r();function s(e){var n=t({},e);return Object.keys(r.SpanAttribute).forEach((function(e){delete n[e]})),n}e.spanToTelemetryContract=function(e){var i="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",o=Math.round(1e3*e._duration[0]+e._duration[1]/1e6),a=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",c=e.attributes.component?e.attributes.component.toString():"",l=c.toUpperCase()===r.DependencyTypeName.Http||!!e.attributes[r.SpanAttribute.HttpUrl],u=c.toLowerCase()===r.DependencyTypeName.Grpc;if(l){var p=e.attributes[r.SpanAttribute.HttpMethod]||"GET",h=new URL(e.attributes[r.SpanAttribute.HttpUrl].toString()),d=e.attributes[r.SpanAttribute.HttpHost]||h.host,f=e.attributes[r.SpanAttribute.HttpPort]||h.port||null,m=p+" "+(h.pathname||"/"),g=r.DependencyTypeName.Http,v=f?(d+":"+f).toString():d.toString(),y=h.toString(),b=e.attributes[r.SpanAttribute.HttpStatusCode]||e.status.code||0;return{id:i,name:m,dependencyTypeName:g,target:v,data:y,success:b<400,duration:o,url:y,resultCode:String(b),properties:s(e.attributes)}}if(u){p=e.attributes[r.SpanAttribute.GrpcMethod]||"rpc";var w=e.attributes[r.SpanAttribute.GrpcService],S=w?p+" "+w:e.name;return{id:i,duration:o,name:S,target:w.toString(),data:w.toString()||S,url:w.toString()||S,dependencyTypeName:r.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:0===e.status.code,properties:s(e.attributes)}}var E=e.name,_=e.links&&e.links.map((function(e){return{operation_Id:e.context.traceId,id:e.context.spanId}}));return{id:i,duration:o,name:E,target:a,data:a||E,url:a||E,dependencyTypeName:e.kind===n.SpanKind.INTERNAL?r.DependencyTypeName.InProc:c||e.name,resultCode:String(e.status.code||0),success:0===e.status.code,properties:t(t({},s(e.attributes)),{"_MS.links":_||void 0})}}})),kr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=we(),n=T(),r=tn(),s=Ir(),i=S(),o=[];e.subscriber=function(e){var n=e.data,a=s.spanToTelemetryContract(n),c=n.spanContext(),l=new r;l.traceId=c.traceId,l.spanId=c.spanId,l.traceFlag=r.formatOpenTelemetryTraceFlags(c.traceFlags),l.parentId=n.parentSpanId?"|"+c.traceId+"."+n.parentSpanId+".":null,i.AsyncScopeManager.with(n,(function(){o.forEach((function(e){n.kind===t.SpanKind.SERVER?e.trackRequest(a):(n.kind===t.SpanKind.CLIENT||n.kind===t.SpanKind.INTERNAL)&&e.trackDependency(a)}))}))},e.enable=function(t,r){t?(0===o.length&&n.channel.subscribe("azure-coretracing",e.subscriber),o.push(r)):0===(o=o.filter((function(e){return e!=r}))).length&&n.channel.unsubscribe("azure-coretracing",e.subscriber)}})),Or=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=T(),n=[];e.subscriber=function(e){"ismaster"!==e.data.event.commandName&&n.forEach((function(t){var n=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:n,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})}))},e.enable=function(r,s){r?(0===n.length&&t.channel.subscribe("mongodb",e.subscriber),n.push(s)):0===(n=n.filter((function(e){return e!=s}))).length&&t.channel.unsubscribe("mongodb",e.subscriber)}})),Mr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=T(),n=[];e.subscriber=function(e){n.forEach((function(t){var n=e.data.query||{},r=n.sql||"Unknown query",s=!e.data.err,i=(n._connection||{}).config||{},o=i.socketPath?i.socketPath:(i.host||"localhost")+":"+i.port;t.trackDependency({target:o,data:r,name:r,duration:e.data.duration,success:s,resultCode:s?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})}))},e.enable=function(r,s){r?(0===n.length&&t.channel.subscribe("mysql",e.subscriber),n.push(s)):0===(n=n.filter((function(e){return e!=s}))).length&&t.channel.unsubscribe("mysql",e.subscriber)}})),Dr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=T(),n=[];e.subscriber=function(e){n.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})}))},e.enable=function(r,s){r?(0===n.length&&t.channel.subscribe("redis",e.subscriber),n.push(s)):0===(n=n.filter((function(e){return e!=s}))).length&&t.channel.unsubscribe("redis",e.subscriber)}})),Nr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=T(),n=[];e.subscriber=function(e){n.forEach((function(t){var n=e.data.query,r=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",s=!e.data.error,i=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:i,data:r,name:r,duration:e.data.duration,success:s,resultCode:s?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})}))},e.enable=function(r,s){r?(0===n.length&&t.channel.subscribe("postgres",e.subscriber),n.push(s)):0===(n=n.filter((function(e){return e!=s}))).length&&t.channel.unsubscribe("postgres",e.subscriber)}})),Lr=v(((e,t)=>{"use strict";var r=e&&e.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r},s=n(3685),i=n(5687),o=w(),a=Zt(),c=Jt(),l=Rr(),u=vr(),p=en(),h=tn(),d=Xt(),f=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),d.IsInitialized&&(kr().enable(!0,this._client),Or().enable(e,this._client),Mr().enable(e,this._client),Dr().enable(e,this._client),Nr().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=s.request,o=i.request,a=function(n,r){var s=!r[e.disableCollectionRequestOption]&&!n[e.alreadyAutoCollectedFlag];r.headers&&r.headers["user-agent"]&&-1!==r.headers["user-agent"].toString().indexOf("azsdk-js")&&(s=!1),n[e.alreadyAutoCollectedFlag]=!0,n&&r&&s&&(u.CorrelationContextManager.wrapEmitter(n),e.trackRequest(t._client,{options:r,request:n}))};s.request=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=n.call.apply(n,r([s,e],t));return a(o,e),o},i.request=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var s=o.call.apply(o,r([i,e],t));return a(s,e),s},s.get=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(t=s.request).call.apply(t,r([s,e],n));return o.end(),o},i.get=function(e){for(var t,n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var o=(t=i.request).call.apply(t,r([i,e],n));return o.end(),o}},e.trackRequest=function(t,n){if(n.options&&n.request&&t){var r,s,i=new l(n.options,n.request),d=u.CorrelationContextManager.getCurrentContext();if(d&&d.operation&&d.operation.traceparent&&h.isValidTraceId(d.operation.traceparent.traceId)?(d.operation.traceparent.updateSpanId(),r=d.operation.traceparent.getBackCompatRequestId()):p.w3cEnabled?(s=(m=new h).toString(),r=m.getBackCompatRequestId()):r=d&&d.operation&&d.operation.parentId+e.requestNumber+++".",a.canIncludeCorrelationHeader(t,i.getUrl())&&n.request.getHeader&&n.request.setHeader&&t.config&&t.config.correlationId){var f=n.request.getHeader(c.requestContextHeader);try{a.safeIncludeCorrelationHeader(t,n.request,f)}catch(e){o.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(d&&d.operation)try{if(n.request.setHeader(c.requestIdHeader,r),t.config.ignoreLegacyHeaders||(n.request.setHeader(c.parentIdHeader,d.operation.id),n.request.setHeader(c.rootIdHeader,r)),s||d.operation.traceparent)n.request.setHeader(c.traceparentHeader,s||d.operation.traceparent.toString());else if(p.w3cEnabled){var m=(new h).toString();n.request.setHeader(c.traceparentHeader,m)}if(d.operation.tracestate){var g=d.operation.tracestate.toString();g&&n.request.setHeader(c.traceStateHeader,g)}var v=d.customProperties.serializeToHeader();v&&n.request.setHeader(c.correlationContextHeader,v)}catch(e){o.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}n.request.on&&(n.request.on("response",(function(e){i.onResponse(e);var s=i.getDependencyTelemetry(n,r);s.contextObjects=s.contextObjects||{},s.contextObjects["http.RequestOptions"]=n.options,s.contextObjects["http.ClientRequest"]=n.request,s.contextObjects["http.ClientResponse"]=e,t.trackDependency(s)})),n.request.on("error",(function(e){i.onError(e);var s=i.getDependencyTelemetry(n,r);s.contextObjects=s.contextObjects||{},s.contextObjects["http.RequestOptions"]=n.options,s.contextObjects["http.ClientRequest"]=n.request,s.contextObjects.Error=e,t.trackDependency(s)})),n.request.on("abort",(function(){i.onError(new Error);var e=i.getDependencyTelemetry(n,r);e.contextObjects=e.contextObjects||{},e.contextObjects["http.RequestOptions"]=n.options,e.contextObjects["http.ClientRequest"]=n.request,t.trackDependency(e)})))}else o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!n.options,!n.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=f})),jr=v(((e,t)=>{"use strict";var r=n(2037),s=_r(),i=Zt(),o=Ar(),a=Lr(),c=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(e,t){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval((function(){return n.trackHeartBeat(t,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(e,t){var n=this,i=!1,a={},c=o.sdkVersion;a.sdk=c,a.osType=r.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&(void 0===this._isVM?(i=!0,this._getAzureComputeMetadata(e,(function(){n._isVM&&Object.keys(n._vmData).length>0&&(a.azInst_vmId=n._vmData.vmId||"",a.azInst_subscriptionId=n._vmData.subscriptionId||"",a.azInst_osType=n._vmData.osType||"",n._azInst_vmId=n._vmData.vmId||"",n._azInst_subscriptionId=n._vmData.subscriptionId||"",n._azInst_osType=n._vmData.osType||""),n._client.trackMetric({name:s.HeartBeatMetricName,value:0,properties:a}),t()}))):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),i||(this._client.trackMetric({name:s.HeartBeatMetricName,value:0,properties:a}),t())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(e,t){var n,r=this,s=((n={method:"GET"})[a.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),o=i.makeRequest(e,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",s,(function(e){if(200===e.statusCode){r._isVM=!0;var n="";e.on("data",(function(e){n+=e})),e.on("end",(function(){r._vmData=r._isJSON(n)?JSON.parse(n):{},t()}))}else t()}));o&&(o.on("error",(function(e){e&&e.message&&e.message.indexOf("ENETUNREACH")>-1&&(r._isVM=!1),t()})),o.end())},e.prototype._isJSON=function(e){try{return JSON.parse(e)&&!!e}catch{return!1}},e}();t.exports=c})),qr=v(((e,t)=>{"use strict";var r=n(3685),s=n(5687),i=w(),o=Zt(),a=Jt(),c=Yn(),l=vr(),u=xr(),p=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||u.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?l.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&l.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return l.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=function(n){if(n){if("function"!=typeof n)throw new Error("onRequest handler must be a function");return function(r,s){l.CorrelationContextManager.wrapEmitter(r),l.CorrelationContextManager.wrapEmitter(s);var i=r&&!r[e.alreadyAutoCollectedFlag];if(r&&i){var o=new c(r),a=t._generateCorrelationContext(o);l.CorrelationContextManager.runWithContext(a,(function(){t._isEnabled&&(r[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:r,response:s},o)),"function"==typeof n&&n(r,s)}))}else"function"==typeof n&&n(r,s)}}},i=function(e){var t=e.addListener.bind(e);e.addListener=function(e,r){switch(e){case"request":case"checkContinue":return t(e,n(r));default:return t(e,r)}},e.on=e.addListener},o=r.createServer;r.createServer=function(e,t){if(t&&"function"==typeof t){var r=o(e,n(t));return i(r),r}return r=o(n(e)),i(r),r};var a=s.createServer;s.createServer=function(e,t){var r=a(e,n(t));return i(r),r}},e.trackRequestSync=function(t,n){if(n.request&&n.response&&t){e.addResponseCorrelationIdHeader(t,n.response);var r=l.CorrelationContextManager.getCurrentContext(),s=new c(n.request,r&&r.operation.parentId);r&&(r.operation.id=s.getOperationId(t.context.tags)||r.operation.id,r.operation.name=s.getOperationName(t.context.tags)||r.operation.name,r.operation.parentId=s.getRequestId()||r.operation.parentId,r.customProperties.addHeaderData(s.getCorrelationContextHeader())),e.endRequest(t,s,n,n.duration,n.error)}else i.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!n.request,!n.response,!t)},e.trackRequest=function(t,n,r){if(n.request&&n.response&&t){var s=l.CorrelationContextManager.getCurrentContext(),a=r||new c(n.request,s&&s.operation.parentId);o.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,n.response),s&&!r&&(s.operation.id=a.getOperationId(t.context.tags)||s.operation.id,s.operation.name=a.getOperationName(t.context.tags)||s.operation.name,s.operation.parentId=a.getOperationParentId(t.context.tags)||s.operation.parentId,s.customProperties.addHeaderData(a.getCorrelationContextHeader())),n.response.once&&n.response.once("finish",(function(){e.endRequest(t,a,n,null,null)})),n.request.on&&n.request.on("error",(function(r){e.endRequest(t,a,n,null,r)})),n.request.on&&n.request.on("aborted",(function(){e.endRequest(t,a,n,null,"The request has been aborted and the network socket has closed.")}))}else i.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!n.request,!n.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(a.requestContextHeader);o.safeIncludeCorrelationHeader(e,t,n)}},e.endRequest=function(e,t,n,r,s){s?t.onError(s,r):t.onResponse(n.response,r);var i=t.getRequestTelemetry(n);if(i.tagOverrides=t.getRequestTags(e.context.tags),n.tagOverrides)for(var o in n.tagOverrides)i.tagOverrides[o]=n.tagOverrides[o];var a=t.getLegacyRootId();a&&(i.properties.ai_legacyRootId=a),i.contextObjects=i.contextObjects||{},i.contextObjects["http.ServerRequest"]=n.request,i.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,l.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=p})),Br=v(((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},s=n(2037),i=Wn(),o=_r(),a=Zt(),c=w(),l=a.w3cTraceId(),u=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,n,r){var i=s&&"function"==typeof s.hostname&&s.hostname()||"Unknown",o=r.tags&&r.keys&&r.keys.cloudRoleInstance&&r.tags[r.keys.cloudRoleInstance]||i,a=r.tags&&r.keys&&r.keys.cloudRole&&r.tags[r.keys.cloudRole]||null;return{Documents:t.length>0?t:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:r.tags[r.keys.internalSdkVersion],StreamId:l,MachineName:i,Instance:o,RoleName:a}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case i.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case i.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case i.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case i.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case i.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var n=e.createQuickPulseDocument(t),s=t.data.baseData.name;return r(r({},n),{Name:s})},e.createQuickPulseTraceDocument=function(t){var n=e.createQuickPulseDocument(t),s=t.data.baseData.severityLevel||0;return r(r({},n),{Message:t.data.baseData.message,SeverityLevel:i.SeverityLevel[s]})},e.createQuickPulseExceptionDocument=function(t){var n=e.createQuickPulseDocument(t),s=t.data.baseData.exceptions,i="",o="",a="";return s&&s.length>0&&(s[0].parsedStack&&s[0].parsedStack.length>0?s[0].parsedStack.forEach((function(e){i+=e.assembly+"\n"})):s[0].stack&&s[0].stack.length>0&&(i=s[0].stack),o=s[0].message,a=s[0].typeName),r(r({},n),{Exception:i,ExceptionMessage:o,ExceptionType:a})},e.createQuickPulseRequestDocument=function(t){var n=e.createQuickPulseDocument(t),s=t.data.baseData;return r(r({},n),{Name:s.name,Success:s.success,Duration:s.duration,ResponseCode:s.responseCode,OperationName:s.name})},e.createQuickPulseDependencyDocument=function(t){var n=e.createQuickPulseDocument(t),s=t.data.baseData;return r(r({},n),{Name:s.name,Target:s.target,Success:s.success,Duration:s.duration,ResultCode:s.resultCode,CommandName:s.data,OperationName:n.OperationId,DependencyTypeName:s.type})},e.createQuickPulseDocument=function(t){var n,r;return t.data.baseType?(r=o.TelemetryTypeStringToQuickPulseType[t.data.baseType],n=o.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:n,__type:r,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],n=e.data.baseData.measurements||{};for(var r in n)if(n.hasOwnProperty(r)){var s={key:r,value:n[r]};t.push(s)}var i=e.data.baseData.properties||{};for(var r in i)i.hasOwnProperty(r)&&(s={key:r,value:i[r]},t.push(s));return t},e.keys=new i.ContextTagKeys,e}();t.exports=u})),Fr=v(((e,t)=>{"use strict";t.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}})),Ur=v(((e,t)=>{"use strict";var r=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?s(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=e&&e.__generator||function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=n(5687),o=Lr(),a=w(),c=Fr(),l=Zt(),u="x-ms-qps-service-polling-interval-hint",p="x-ms-qps-service-endpoint-redirect",h=function(){function e(e){this._config=e,this._consecutiveErrors=0}return e.prototype.ping=function(e,t,n){var r=[{name:"x-ms-qps-stream-id",value:e.StreamId},{name:"x-ms-qps-machine-name",value:e.MachineName},{name:"x-ms-qps-role-name",value:e.RoleName},{name:"x-ms-qps-instance-name",value:e.Instance},{name:"x-ms-qps-invariant-version",value:e.InvariantVersion.toString()}];this._submitData(e,t,n,"ping",r)},e.prototype.post=function(e,t,n){return r(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,this._submitData([e],t,n,"post")];case 1:return r.sent(),[2]}}))}))},e.prototype._submitData=function(e,t,n,a,h){return r(this,void 0,void 0,(function(){var r,d,f,m,g,v=this;return s(this,(function(s){return r=JSON.stringify(e),(m={})[o.disableCollectionRequestOption]=!0,m.host=t&&t.length>0?t:this._config.quickPulseHost,m.method="POST",m.path="/QuickPulseService.svc/"+a+"?ikey="+this._config.instrumentationKey,m.headers=((g={Expect:"100-continue"})["x-ms-qps-transmission-time"]=c.getTransmissionTime(),g["Content-Type"]="application/json",g["Content-Length"]=Buffer.byteLength(r),g),d=m,h&&h.length>0&&h.forEach((function(e){return d.headers[e.name]=e.value})),this._config.httpsAgent?d.agent=this._config.httpsAgent:d.agent=l.tlsRestrictedAgent,(f=i.request(d,(function(e){if(200==e.statusCode){var t="true"===e.headers["x-ms-qps-subscribed"],r=e.headers[p]?e.headers[p].toString():null,s=e.headers[u]?parseInt(e.headers[u].toString()):null;v._consecutiveErrors=0,n(t,e,r,s)}else v._onError("StatusCode:"+e.statusCode+" StatusMessage:"+e.statusMessage),n()}))).on("error",(function(e){v._onError(e),n()})),f.write(r),f.end(),[2]}))}))},e.prototype._onError=function(t){this._consecutiveErrors++;var n="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(n="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",a.warn(e.TAG,n,t)):a.info(e.TAG,n,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();t.exports=h})),$r=v(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?s(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}c((r=r.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=w(),i=Br(),o=Ur(),a=_r(),c=Ar(),l=function(){function e(e,t){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=t||new c,this._sender=new o(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){var t=i.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,n=e.count||1,r=a.PerformanceToQuickPulseCounter[e.name];r&&(this._metrics[r]?(this._metrics[r].Value=(this._metrics[r].Value*this._metrics[r].Weight+t*n)/(this._metrics[r].Weight+n),this._metrics[r].Weight+=n):(this._metrics[r]=i.createQuickPulseMetric(e),this._metrics[r].Name=r,this._metrics[r].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return n(this,void 0,void 0,(function(){var t,n,s,o,a=this;return r(this,(function(r){switch(r.label){case 0:return t=Object.keys(this._metrics).map((function(e){return a._metrics[e]})),n=i.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(n)]:[3,2];case 1:return r.sent(),[3,3];case 2:this._ping(n),r.label=3;case 3:return s=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,o=this._isCollectingData?e.POST_INTERVAL:s,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,o=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(o=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),o),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(e,t,n,r){null!=e?(this._isCollectingData!==e&&(s.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,s.info("Redirecting endpoint to: ",n)),r&&r>0&&(this._pollingIntervalHint=r),t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();t.exports=l})),Hr=v(((e,t)=>{"use strict";var n=_r(),r=function(){function e(){}return e.parse=function(t){if(!t)return{};var r=t.split(e._FIELDS_SEPARATOR).reduce((function(t,n){var r=n.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===r.length){var s=r[0].toLowerCase(),i=r[1];t[s]=i}return t}),{});if(Object.keys(r).length>0){if(r.endpointsuffix){var s=r.location?r.location+".":"";r.ingestionendpoint=r.ingestionendpoint||"https://"+s+"dc."+r.endpointsuffix,r.liveendpoint=r.liveendpoint||"https://"+s+"live."+r.endpointsuffix}r.ingestionendpoint=r.ingestionendpoint||n.DEFAULT_BREEZE_ENDPOINT,r.liveendpoint=r.liveendpoint||n.DEFAULT_LIVEMETRICS_ENDPOINT}return r},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();t.exports=r})),zr=v(((e,t)=>{"use strict";var r=en(),s=Hr(),i=(w(),_r()),o=n(7310),a=function(){function e(t){var n=this;this.endpointBase=i.DEFAULT_BREEZE_ENDPOINT;var r=process.env[e.ENV_connectionString],a=s.parse(t),c=s.parse(r),l=!a.instrumentationkey&&Object.keys(a).length>0?null:t;this.instrumentationKey=a.instrumentationkey||l||c.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(a.ingestionendpoint||c.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(e){return n.correlationId=e},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=a.ingestionendpoint||c.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=a.liveendpoint||c.liveendpoint||process.env[e.ENV_quickPulseHost]||i.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=o.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();t.exports=a})),Kr=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var r=zr(),s=Ar(),i=w(),o=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},e.prototype.enable=function(t,r,s){var o=this;if(void 0===r&&(r={}),void 0===s&&(s=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&t&&!this._isInitialized)try{var a=n(Object(function(){var e=new Error("Cannot find module 'applicationinsights-native-metrics'");throw e.code="MODULE_NOT_FOUND",e}()));e._emitter=new a,e._metricsAvailable=!0,i.info("Native metrics module successfully loaded!")}catch{return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,s),this._handle||(this._handle=setInterval((function(){return o._trackNativeMetrics()}),s),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e){var n=process.env[r.ENV_nativeMetricsDisableAll],s=process.env[r.ENV_nativeMetricsDisablers];if(n)return{isEnabled:!1,disabledMetrics:{}};if(s){var i=s.split(","),o={};if(i.length>0)for(var a=0,c=i;a<c.length;a++)o[c[a]]=!0;return"object"==typeof e?{isEnabled:!0,disabledMetrics:t(t({},e),o)}:{isEnabled:e,disabledMetrics:o}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var n=e._emitter.getGCData();for(var r in n){var i=n[r].metrics,o=r+" Garbage Collection Duration",a=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:o,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+s.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var n=e._emitter.getLoopData().loopUsage;if(0!=n.count){var r=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:n.total,count:n.count,min:n.min,max:n.max,stdDev:r,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+s.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var e,t,n;if(!this._disabledMetrics.heap){var r=process.memoryUsage(),i=r.heapUsed,o=r.heapTotal,a=r.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:i,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+s.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:o,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+s.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-o,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+s.sdkVersion,n)})}},e}();e.AutoCollectNativePerformance=o})),Vr=v(((e,t)=>{"use strict";var n=w(),r=function(){function e(e,t,n,r){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=n,this._sender=r}return e.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)},e.prototype.send=function(e){var t=this;if(!this._isDisabled()){if(!e)return void n.warn("Cannot send null/undefined telemetry");if(this._buffer.push(e),this._buffer.length>=this._getBatchSize())return void this.triggerSend(!1);!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;n||(e?(this._sender.saveOnCrash(this._buffer),"function"==typeof t&&t("data saved on crash")):this._sender.send(this._buffer,t)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&"function"==typeof t&&t("no data to send")},e}();t.exports=r})),Wr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0,e.azureRoleEnvironmentTelemetryProcessor=function(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}})),Gr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=Wn();function n(e){var t=2147483647,n=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var r=0;r<e.length;r++)n=((n<<5)+n|0)+e.charCodeAt(r)|0;return(n=n<=-2147483648?t:Math.abs(n))/t*100}e.samplingTelemetryProcessor=function(e,r){var s=e.sampleRate;return!!(null==s||s>=100||e.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(e.data.baseType))||(r.correlationContext&&r.correlationContext.operation?n(r.correlationContext.operation.id)<s:100*Math.random()<s)},e.getSamplingHashCode=n})),Yr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=xr(),n=Wn();e.performanceMetricsTelemetryProcessor=function(e,r){switch(r&&r.addDocument(e),e.data.baseType){case n.TelemetryTypeString.Exception:t.countException();break;case n.TelemetryTypeString.Request:var s=e.data.baseData;t.countRequest(s.duration,s.success);break;case n.TelemetryTypeString.Dependency:var i=e.data.baseData;t.countDependency(i.duration,i.success)}return!0}})),Qr=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var n=Wn(),r=Pr(),s=Wn();e.preAggregatedMetricsTelemetryProcessor=function(e,i){if(r.isEnabled())switch(e.data.baseType){case s.TelemetryTypeString.Exception:var o=e.data.baseData;o.properties=t(t({},o.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole]};r.countException(a);break;case s.TelemetryTypeString.Trace:var c=e.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var l={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole],traceSeverityLevel:n.SeverityLevel[c.severity]};r.countTrace(l);break;case s.TelemetryTypeString.Request:var u=e.data.baseData;u.properties=t(t({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole],operationSynthetic:e.tags[i.keys.operationSyntheticSource],requestSuccess:u.success,requestResultCode:u.responseCode};r.countRequest(u.duration,p);break;case s.TelemetryTypeString.Dependency:var h=e.data.baseData;h.properties=t(t({},h.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var d={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole],operationSynthetic:e.tags[i.keys.operationSyntheticSource],dependencySuccess:h.success,dependencyType:h.type,dependencyTarget:h.target,dependencyResultCode:h.resultCode};r.countDependency(h.duration,d)}return!0}})),Xr=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Wr(),e),n(Gr(),e),n(Yr(),e),n(Qr(),e)})),Jr=v(((e,t)=>{"use strict";var r=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?s(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=e&&e.__generator||function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=n(7147),o=n(2037),a=n(1017),c=n(9796),l=n(2081),u=w(),p=Lr(),h=Zt(),d=function(){function e(t,n,r){if(this._redirectedHost=null,this._config=t,this._onSuccess=n,this._onError=r,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=a.join(o.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=i.existsSync(e.ICACLS_PATH)}catch{}e.OS_PROVIDES_FILE_PROTECTION||u.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,n,r){var s=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof n&&n>=0&&(this._resendInterval=Math.floor(n)),"number"==typeof r&&r>=0&&(this._maxBytesOnDisk=Math.floor(r)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,u.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){s._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,n){return r(this,void 0,void 0,(function(){var r,i,o,a,l=this;return s(this,(function(s){return t&&(r=this._redirectedHost||this._config.endpointUrl,i={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},o="",t.forEach((function(e){var t=l._stringify(e);"string"==typeof t&&(o+=t+"\n")})),o.length>0&&(o=o.substring(0,o.length-1)),a=Buffer.from?Buffer.from(o):new Buffer(o),c.gzip(a,(function(s,o){var c=o;s?(u.warn(s),c=a,i.headers["Content-Length"]=a.length.toString()):(i.headers["Content-Encoding"]="gzip",i.headers["Content-Length"]=o.length.toString()),u.info(e.TAG,i),i[p.disableCollectionRequestOption]=!0;var d=h.makeRequest(l._config,r,i,(function(r){r.setEncoding("utf-8");var s="";r.on("data",(function(e){s+=e})),r.on("end",(function(){if(l._numConsecutiveFailures=0,l._enableDiskRetryMode)if(200===r.statusCode)l._resendTimer||(l._resendTimer=setTimeout((function(){l._resendTimer=null,l._sendFirstFileOnDisk()}),l._resendInterval),l._resendTimer.unref());else if(l._isRetriable(r.statusCode))try{var i=JSON.parse(s),o=[];i.errors.forEach((function(e){l._isRetriable(e.statusCode)&&o.push(t[e.index])})),o.length>0&&l._storeToDisk(o)}catch{l._storeToDisk(t)}if(307===r.statusCode||308===r.statusCode)if(l._numConsecutiveRedirects++,l._numConsecutiveRedirects<10){var a=r.headers.location?r.headers.location.toString():null;a&&(l._redirectedHost=a,l.send(t,n))}else"function"==typeof n&&n("Error sending telemetry because of circular redirects.");else l._numConsecutiveRedirects=0,"function"==typeof n&&n(s),u.info(e.TAG,s),"function"==typeof l._onSuccess&&l._onSuccess(s)}))}));d.on("error",(function(r){if(l._numConsecutiveFailures++,!l._enableDiskRetryMode||l._numConsecutiveFailures>0&&l._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var s="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";l._enableDiskRetryMode&&(s="Ingestion endpoint could not be reached "+l._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),u.warn(e.TAG,s,h.dumpObj(r))}else s="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:",u.info(e.TAG,s,h.dumpObj(r));l._onErrorHelper(r),"function"==typeof n&&(r&&n(h.dumpObj(r)),n("Error sending telemetry")),l._enableDiskRetryMode&&l._storeToDisk(t)})),d.write(c),d.end()}))),[2]}))}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(e))},e.prototype._isRetriable=function(e){return 206===e||408===e||429===e||439===e||500===e||503===e},e.prototype._runICACLS=function(t,n){var r=l.spawn(e.ICACLS_PATH,t,{windowsHide:!0});r.on("error",(function(e){return n(e)})),r.on("close",(function(e,t){return n(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))},e.prototype._runICACLSSync=function(t){if(!l.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var n=l.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(n.error)throw n.error;if(0!==n.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+n.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var n=l.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),r="";n.stdout.on("data",(function(e){return r+=e})),n.on("error",(function(e){return t(e,null)})),n.on("close",(function(n,s){return e.ACL_IDENTITY=r&&r.trim(),t(0===n?null:new Error("Getting ACL identity did not succeed (PS returned code "+n+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(l.spawnSync){var t=l.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,n){var r=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?n(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity((function(s,i){if(s)return e.ACLED_DIRECTORIES[t]=!1,n(s);r._runICACLS(r._getACLArguments(t,i),(function(r){return e.ACLED_DIRECTORIES[t]=!r,n(r)}))}))):n(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var n=this;i.lstat(e,(function(r,s){r&&"ENOENT"===r.code?i.mkdir(e,(function(r){r&&"EEXIST"!==r.code?t(r):n._applyACLRules(e,t)})):!r&&s.isDirectory()?n._applyACLRules(e,t):t(r||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(e,t){i.readdir(e,(function(n,r){if(n)return t(n,-1);var s=null,o=0,c=0;if(0!==r.length)for(var l=0;l<r.length;l++)i.stat(a.join(e,r[l]),(function(e,n){c++,e?s=e:n.isFile()&&(o+=n.size),c===r.length&&t(s,s?-1:o)}));else t(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=i.readdirSync(e),n=0,r=0;r<t.length;r++)n+=i.statSync(a.join(e,t[r])).size;return n},e.prototype._storeToDisk=function(t){var n=this;u.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,(function(r){if(r)return u.warn(e.TAG,"Error while checking/creating directory: "+(r&&r.message)),void n._onErrorHelper(r);n._getShallowDirectorySize(n._tempDir,(function(r,s){if(r||s<0)return u.warn(e.TAG,"Error while checking directory size: "+(r&&r.message)),void n._onErrorHelper(r);if(s>n._maxBytesOnDisk)u.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+s);else{var o=(new Date).getTime()+".ai.json",c=a.join(n._tempDir,o);u.info(e.TAG,"saving data to disk at: "+c),i.writeFile(c,n._stringify(t),{mode:384},(function(e){return n._onErrorHelper(e)}))}}))}))},e.prototype._storeToDiskSync=function(t){try{u.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),i.existsSync(this._tempDir)||i.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var n=this._getShallowDirectorySizeSync(this._tempDir);if(n>this._maxBytesOnDisk)return void u.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+n);var r=(new Date).getTime()+".ai.json",s=a.join(this._tempDir,r);u.info(e.TAG,"saving data before crash to disk at: "+s),i.writeFileSync(s,t,{mode:384})}catch(t){u.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var e=this;i.exists(this._tempDir,(function(t){t&&i.readdir(e._tempDir,(function(t,n){if(t)e._onErrorHelper(t);else if((n=n.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0){var r=n[0],s=a.join(e._tempDir,r);i.readFile(s,(function(t,n){t?e._onErrorHelper(t):i.unlink(s,(function(t){if(t)e._onErrorHelper(t);else try{var r=JSON.parse(n.toString());e.send(r)}catch(e){u.warn("Failed to read persisted file",e)}}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){u.warn("Failed to serialize payload",t,e)}},e.prototype._fileCleanupTask=function(){var t=this;i.exists(this._tempDir,(function(n){n&&i.readdir(t._tempDir,(function(n,r){n?t._onErrorHelper(n):(r=r.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0&&r.forEach((function(n){var r=new Date(parseInt(n.split(".ai.json")[0]));if(new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>r){var s=a.join(t._tempDir,n);i.unlink(s,(function(e){e&&t._onErrorHelper(e)}))}}))}))}))},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===o.type(),e}();t.exports=d})),Zr=v(((e,t)=>{"use strict";var n=Wn(),r=Zt(),s=vr(),i=function(){function e(){}return e.createEnvelope=function(t,s,i,o,a){var c=null;switch(s){case n.TelemetryType.Trace:c=e.createTraceData(t);break;case n.TelemetryType.Dependency:c=e.createDependencyData(t);break;case n.TelemetryType.Event:c=e.createEventData(t);break;case n.TelemetryType.Exception:c=e.createExceptionData(t);break;case n.TelemetryType.Request:c=e.createRequestData(t);break;case n.TelemetryType.Metric:c=e.createMetricData(t);break;case n.TelemetryType.Availability:c=e.createAvailabilityData(t);break;case n.TelemetryType.PageView:c=e.createPageViewData(t)}if(i&&n.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var l in i)c.baseData.properties[l]||(c.baseData.properties[l]=i[l]);else c.baseData.properties=i;c.baseData.properties=r.validateStringMap(c.baseData.properties)}var u=a&&a.instrumentationKey||"",p=new n.Envelope;return p.data=c,p.iKey=u,p.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),p.tags=this.getTags(o,t.tagOverrides),p.time=(new Date).toISOString(),p.ver=1,p.sampleRate=a?a.samplingPercentage:100,s===n.TelemetryType.Metric&&(p.sampleRate=100),p},e.createTraceData=function(e){var t=new n.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=n.SeverityLevel.Information:t.severityLevel=e.severity;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Trace),r.baseData=t,r},e.createDependencyData=function(e){var t=new n.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=r.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=r.w3cTraceId();var s=new n.Data;return s.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Dependency),s.baseData=t,s},e.createEventData=function(e){var t=new n.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Event),r.baseData=t,r},e.createExceptionData=function(e){var t=new n.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=n.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var s=e.exception.stack,i=new n.ExceptionDetails;i.message=e.exception.message,i.typeName=e.exception.name,i.parsedStack=this.parseStack(s),i.hasFullStack=r.isArray(i.parsedStack)&&i.parsedStack.length>0,t.exceptions.push(i);var o=new n.Data;return o.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Exception),o.baseData=t,o},e.createRequestData=function(e){var t=new n.RequestData;e.id?t.id=e.id:t.id=r.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=r.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var s=new n.Data;return s.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Request),s.baseData=t,s},e.createMetricData=function(e){var t=new n.MetricData;t.metrics=[];var r=new n.DataPoint;r.count=isNaN(e.count)?1:e.count,r.kind=n.DataPointType.Aggregation,r.max=isNaN(e.max)?e.value:e.max,r.min=isNaN(e.min)?e.value:e.min,r.name=e.name,r.stdDev=isNaN(e.stdDev)?0:e.stdDev,r.value=e.value,t.metrics.push(r),t.properties=e.properties;var s=new n.Data;return s.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Metric),s.baseData=t,s},e.createAvailabilityData=function(e){var t=new n.AvailabilityData;e.id?t.id=e.id:t.id=r.w3cTraceId(),t.name=e.name,t.duration=r.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var s=new n.Data;return s.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Availability),s.baseData=t,s},e.createPageViewData=function(e){var t=new n.PageViewData;t.name=e.name,t.duration=r.msToTimeSpan(e.duration),t.url=e.url,t.measurements=e.measurements,t.properties=e.properties;var s=new n.Data;return s.baseType=n.telemetryTypeToBaseType(n.TelemetryType.PageView),s.baseData=t,s},e.getTags=function(e,t){var n=s.CorrelationContextManager.getCurrentContext(),r={};if(e&&e.tags)for(var i in e.tags)r[i]=e.tags[i];if(t)for(var i in t)r[i]=t[i];return n&&(r[e.keys.operationId]=r[e.keys.operationId]||n.operation.id,r[e.keys.operationName]=r[e.keys.operationName]||n.operation.name,r[e.keys.operationParentId]=r[e.keys.operationParentId]||n.operation.parentId),r},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var r=0,s=0,i=0;i<=n.length;i++){var a=n[i];if(o.regex.test(a)){var c=new o(n[i],r++);s+=c.sizeInBytes,t.push(c)}}if(s>32768)for(var l=0,u=t.length-1,p=0,h=l,d=u;l<u;){if((p+=t[l].sizeInBytes+t[u].sizeInBytes)>32768){var f=d-h+1;t.splice(h,f);break}h=l,d=u,l++,u--}}return t},e}(),o=function(){function e(t,n){this.sizeInBytes=0,this.level=n,this.method="<no_method>",this.assembly=r.trim(t);var s=t.match(e.regex);s&&s.length>=5&&(this.method=r.trim(s[2])||this.method,this.fileName=r.trim(s[4])||"<no_filename>",this.line=parseInt(s[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();t.exports=i})),es=v(((e,t)=>{"use strict";var r=n(7310),s=zr(),i=Ar(),o=Wn(),a=Vr(),c=Xr(),l=vr(),u=Jr(),p=Zt(),h=w(),d=Zr(),f=function(){function e(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var t=new s(e);this.config=t,this.context=new i,this.commonProperties={};var n=new u(this.config);this.channel=new a((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),n)}return e.prototype.trackAvailability=function(e){this.track(e,o.TelemetryType.Availability)},e.prototype.trackPageView=function(e){this.track(e,o.TelemetryType.PageView)},e.prototype.trackTrace=function(e){this.track(e,o.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,o.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!p.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,o.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,o.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,o.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=r.parse(e.data).host),this.track(e,o.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&o.telemetryTypeToBaseType(t)){var n=d.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString()),this._enableAzureProperties&&c.azureRoleEnvironmentTelemetryProcessor(n,this.context);var r=this.runTelemetryProcessors(n,e.contextObjects);r=r&&c.samplingTelemetryProcessor(n,{correlationContext:l.CorrelationContextManager.getCurrentContext()}),c.preAggregatedMetricsTelemetryProcessor(n,this.context),r&&(c.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else h.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var n=!0,r=this._telemetryProcessors.length;if(0===r)return n;(t=t||{}).correlationContext=l.CorrelationContextManager.getCurrentContext();for(var s=0;s<r;++s)try{var i=this._telemetryProcessors[s];if(i&&!1===i.apply(null,[e,t])){n=!1;break}}catch(t){n=!0,h.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return n&&(e&&e.tags&&(e.tags=p.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=p.validateStringMap(e.data.baseData.properties))),n},e}();t.exports=f})),ts=v(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=es(),i=qr(),o=Lr(),a=w(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?i.trackRequestSync(this,e):a.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&a.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?i.trackRequest(this,e):a.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?o.trackRequest(this,e):a.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(s);t.exports=c})),ns=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),rs=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t,n,r=vr(),s=Sr(),i=Er(),o=xr(),a=Pr(),c=jr(),l=Lr(),u=qr(),p=en(),h=w(),d=$r(),f=Kr();e.TelemetryClient=ts(),e.Contracts=Wn(),e.azureFunctionsTypes=ns(),(n=t=e.DistributedTracingModes||(e.DistributedTracingModes={}))[n.AI=0]="AI",n[n.AI_AND_W3C=1]="AI_AND_W3C";var m,g,v,y,b,S,E,_,x,T,C,P=!0,A=!1,R=!0,I=!0,k=!0,O=!1,M=!0,D=!0,N=!0,L=!0,j=!1,q=!0,B=void 0,F=void 0,U=!1;function $(){return e.defaultClient?(U=!0,v.enable(P,A),y.enable(R),b.enable(I),S.enable(k),E.enable(O,e.defaultClient.config),_.enable(q,g),x.useAutoCorrelation(L,m),x.enable(M),T.enable(D),e.liveMetricsClient&&j&&e.liveMetricsClient.enable(j)):h.warn("Start cannot be called before setup"),H}e.setup=function(t){return e.defaultClient?h.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(t),v=new s(e.defaultClient),y=new i(e.defaultClient),b=new o(e.defaultClient),S=new a(e.defaultClient),E=new c(e.defaultClient),x=new u(e.defaultClient),T=new l(e.defaultClient),_||(_=new f.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(N,B,F),H},e.start=$,e.getCorrelationContext=function(){return L?r.CorrelationContextManager.getCurrentContext():null},e.startOperation=function(e,t){return r.CorrelationContextManager.startOperation(e,t)},e.wrapWithCorrelationContext=function(e,t){return r.CorrelationContextManager.wrapCallback(e,t)};var H=function(){function n(){}return n.setDistributedTracingMode=function(e){return p.w3cEnabled=e===t.AI_AND_W3C,n},n.setAutoCollectConsole=function(e,t){return void 0===t&&(t=!1),P=e,A=t,U&&v.enable(e,t),n},n.setAutoCollectExceptions=function(e){return R=e,U&&y.enable(e),n},n.setAutoCollectPerformance=function(e,t){void 0===t&&(t=!0),I=e;var r=f.AutoCollectNativePerformance.parseEnabled(t);return q=r.isEnabled,g=r.disabledMetrics,U&&(b.enable(e),_.enable(r.isEnabled,r.disabledMetrics)),n},n.setAutoCollectPreAggregatedMetrics=function(e){return k=e,U&&S.enable(e),n},n.setAutoCollectHeartbeat=function(t){return O=t,U&&E.enable(t,e.defaultClient.config),n},n.setAutoCollectRequests=function(e){return M=e,U&&x.enable(e),n},n.setAutoCollectDependencies=function(e){return D=e,U&&T.enable(e),n},n.setAutoDependencyCorrelation=function(e,t){return L=e,m=t,U&&x.useAutoCorrelation(e,t),n},n.setUseDiskRetryCaching=function(t,r,s){return N=t,B=r,F=s,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(t,r,s),n},n.setInternalLogging=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),h.enableDebug=e,h.disableWarnings=!t,n},n.setSendLiveMetrics=function(t){return void 0===t&&(t=!1),e.defaultClient?(!e.liveMetricsClient&&t?(e.liveMetricsClient=new d(e.defaultClient.config,null),C=new o(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(C),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(t),j=t,n):(h.warn("Live metrics client cannot be setup without the default client"),n)},n.start=$,n}();e.Configuration=H,e.dispose=function(){p.w3cEnabled=!0,e.defaultClient=null,U=!1,v&&v.dispose(),y&&y.dispose(),b&&b.dispose(),S&&S.dispose(),E&&E.dispose(),_&&_.dispose(),x&&x.dispose(),T&&T.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),j=!1,e.liveMetricsClient=void 0)}})),ss={};((e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})})(ss,{default:()=>ls}),e.exports=(r=ss,y(i({},"__esModule",{value:!0}),r));var is=b(n(2037)),os=b(n(9496)),as=b(n(5687)),cs=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){try{let e=this.vscodeAPI.env.telemetryConfiguration;return e.isUsageEnabled&&e.isErrorsEnabled&&e.isCrashEnabled?"on":e.isErrorsEnabled&&e.isCrashEnabled?"error":"off"}catch{return void 0!==this.vscodeAPI.env.isTelemetryEnabled?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration("telemetry").get("enableTelemetry")?"on":"off"}}static applyReplacements(e,t){for(let n of Object.keys(e))for(let r of t)r.lookup.test(n)&&(void 0!==r.replacementString?e[n]=r.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getInstance(e){return cs._instance||(cs._instance=new cs(e)),cs._instance}},ls=class extends class{constructor(e,t,n,r,s,i){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=n,this.osShim=r,this.vscodeAPI=s,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),void 0!==s.env.onDidChangeTelemetryEnabled?(this.disposables.push(s.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus()))),this.disposables.push(s.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))):this.disposables.push(s.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))}updateUserOptStatus(){let e=cs.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn="on"===e,this.errorOptIn="error"===e||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach((n=>{0===e.indexOf(`${n}`)&&(t=n)})),t}get extension(){return void 0===this._extension&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let n={};for(let r in e)n[r]=t(r,e[r]);return n}shouldSendErrorTelemetry(){return!(!1===this.errorOptIn||this.firstParty&&this.vscodeAPI.env.remoteName&&"other"===this.cleanRemoteName(this.vscodeAPI.env.remoteName))}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,t){let n;if(null==e)return"";let r=[];""!==this.vscodeAPI.env.appRoot&&r.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&r.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let s=e;if(t){let t=[];for(let s of r)for(;(n=s.exec(e))&&n;)t.push([n.index,s.lastIndex]);let i=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,o=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(s="";(n=o.exec(e))&&n;)n[0]&&!i.test(n[0])&&t.every((([e,t])=>n.index<e||n.index>=t))&&(s+=e.substring(a,n.index)+"<REDACTED: user-file-path>",a=o.lastIndex);a<e.length&&(s+=e.substr(a))}for(let e of r)s=s.replace(e,"");return s}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t={};for(let n of Object.keys(e)){let r=e[n];if(!r)continue;let s=/@[a-zA-Z0-9-.]+/,i=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/.test(r.toLowerCase())?t[n]="<REDACTED: secret>":s.test(r)?t[n]="<REDACTED: email>":i.test(r)?t[n]="<REDACTED: token>":t[n]=r}return t}get telemetryLevel(){switch(cs.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,t,n,r,s){if((this.userOptIn||s)&&""!==e){if(t=m(m({},t),this.getCommonProperties()),r){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=t??{},n=n??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:n})}}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!0,!1)}sendRawTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1,!1)}sendDangerousTelemetryEvent(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,t,n,r,!0)}internalSendTelemetryErrorEvent(e,t,n,r,s){if((this.shouldSendErrorTelemetry()||s)&&""!==e){if(t=m(m({},t),this.getCommonProperties()),r){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=t??{},n=n??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:n})}}sendTelemetryErrorEvent(e,t,n){this.internalSendTelemetryErrorEvent(e,t,n,!0,!1)}sendDangerousTelemetryErrorEvent(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,t,n,r,!0)}internalSendTelemetryException(e,t,n,r,s){if((this.shouldSendErrorTelemetry()||s)&&e){if(t=m(m({},t),this.getCommonProperties()),r){let n=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),t=this.removePropertiesWithPossibleUserInfo(n)}t=t??{},n=n??{},this.telemetryAppender.logException(e,{properties:t,measurements:n})}}sendTelemetryException(e,t,n){this.internalSendTelemetryException(e,t,n,!0,!1)}sendDangerousTelemetryException(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,t,n,r,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map((e=>e.dispose())))}}{constructor(e,t,r,s,i){let o=e=>(async(e,t)=>{let n;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let t=await Promise.resolve().then((()=>b(rs())));t.defaultClient?(n=new t.TelemetryClient(e),n.channel.setUseDiskRetryCaching(!0)):(t.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),n=t.defaultClient),os&&os.env&&(n.context.tags[n.context.keys.userId]=os.env.machineId,n.context.tags[n.context.keys.sessionId]=os.env.sessionId,n.context.tags[n.context.keys.cloudRole]=os.env.appName,n.context.tags[n.context.keys.cloudRoleInstance]=os.env.appName),e&&0===e.indexOf("AIF-")&&(n.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(e){return Promise.reject("Failed to initialize app insights!\n"+e.message)}return null!=t&&t.length&&function(e,t){e.addTelemetryProcessor((e=>(Array.isArray(e.tags)?e.tags.forEach((e=>cs.applyReplacements(e,t))):e.tags&&cs.applyReplacements(e.tags,t),e.data.baseData&&cs.applyReplacements(e.data.baseData,t),!0)))}(n,t),{logEvent:(e,t)=>{try{null==n||n.trackEvent({name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{try{null==n||n.trackException({exception:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}catch(e){throw new Error("Failed to log exception to app insights!\n"+e.message)}},flush:async()=>{try{null==n||n.flush()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,i);cs.shouldUseOneDataSystemSDK(r)&&(o=e=>(async(e,t,r)=>{let s=await(async(e,t,r)=>{let s=await Promise.all([n.e(98),n.e(657)]).then(n.bind(n,6657)),i=await Promise.all([n.e(98),n.e(278)]).then(n.bind(n,278)),o=new s.AppInsightsCore,a=new i.PostChannel,c={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[a]]};if(r){c.extensionConfig={};let e={alwaysUseXhrOverride:!0,httpXHROverride:r};c.extensionConfig[a.identifier]=e}let l=t.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(c,[]),o.addTelemetryInitializer((e=>{!l||(e.ext=e.ext??{},e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),o})(e,t,r);return{logEvent:(e,t)=>{try{null==s||s.track({name:e,baseData:{name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{null==s||s.unload()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,os,{sendPOST:(e,t)=>{let n={method:"POST",headers:g(m({},e.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)})};try{let r=as.request(e.urlString,n,(e=>{e.on("data",(function(n){t(e.statusCode??200,e.headers,n.toString())})),e.on("error",(function(){t(0,{})}))}));r.write(e.data),r.end()}catch{t(0,{})}}}));let a=new class{constructor(e,t){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}logEvent(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):2!==this._instantiationStatus&&this._eventQueue.push({eventName:e,data:t})}logException(e,t){this._telemetryClient?this._telemetryClient.logException(e,t):2!==this._instantiationStatus&&this._exceptionQueue.push({exception:e,data:t})}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.logEvent(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.logException(e,t))),this._exceptionQueue=[]}instantiateAppender(){0===this._instantiationStatus&&(this._instantiationStatus=1,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=2})))}}(r,o);r&&(0===r.indexOf("AIF-")||cs.shouldUseOneDataSystemSDK(r))&&(s=!0),super(e,t,a,{release:is.release(),platform:is.platform(),architecture:is.arch()},os,s)}}},2761:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const s=n(2361),i=r(n(8423)),o=r(n(1881)),a=i.default("agent-base");function c(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}function l(e,t){return new l.Agent(e,t)}!function(e){class t extends s.EventEmitter{constructor(e,t){super();let n=t;"function"==typeof e?this.callback=e:e&&(n=e),this.timeout=null,n&&"number"==typeof n.timeout&&(this.timeout=n.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:c()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:c()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const n=Object.assign({},t);"boolean"!=typeof n.secureEndpoint&&(n.secureEndpoint=c()),null==n.host&&(n.host="localhost"),null==n.port&&(n.port=n.secureEndpoint?443:80),null==n.protocol&&(n.protocol=n.secureEndpoint?"https:":"http:"),n.host&&n.path&&delete n.path,delete n.agent,delete n.hostname,delete n._defaultAgent,delete n.defaultPort,delete n.createConnection,e._last=!0,e.shouldKeepAlive=!1;let r=!1,s=null;const i=n.timeout||this.timeout,l=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},u=()=>{s=null,r=!0;const e=new Error(`A "socket" was not created for HTTP request before ${i}ms`);e.code="ETIMEOUT",l(e)},p=e=>{r||(null!==s&&(clearTimeout(s),s=null),l(e))},h=t=>{if(r)return;if(null!=s&&(clearTimeout(s),s=null),i=t,Boolean(i)&&"function"==typeof i.addRequest)return a("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,n);var i;if(t)return t.once("free",(()=>{this.freeSocket(t,n)})),void e.onSocket(t);const o=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);l(o)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(a("Converting legacy callback function to promise"),this.promisifiedCallback=o.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof i&&i>0&&(s=setTimeout(u,i)),"port"in n&&"number"!=typeof n.port&&(n.port=Number(n.port));try{a("Resolving socket for %o request: %o",n.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,n)).then(h,p)}catch(e){Promise.reject(e).catch(p)}}else l(new Error("`callback` is not defined"))}freeSocket(e,t){a("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(l||(l={})),e.exports=l},1881:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){return new Promise(((r,s)=>{e.call(this,t,n,((e,t)=>{e?s(e):r(t)}))}))}}},4932:e=>{e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},6846:(e,t,n)=>{var r=n(4932),s=n(170),i=n(4588),o=n(4241);for(var a in e.exports={Reader:i,Writer:o},s)s.hasOwnProperty(a)&&(e.exports[a]=s[a]);for(var c in r)r.hasOwnProperty(c)&&(e.exports[c]=r[c])},4588:(e,t,n)=>{var r=n(9491),s=n(443).Buffer,i=n(170),o=n(4932).newInvalidAsn1Error;function a(e){if(!e||!s.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(a.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(a.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),a.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},a.prototype.peek=function(){return this.readByte(!0)},a.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128==(128&t)){if(0==(t&=127))throw o("Indefinite length not supported");if(t>4)throw o("encoding too long");if(this._size-e<t)return null;this._len=0;for(var n=0;n<t;n++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},a.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw o("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var n=this.readLength(this._offset+1);return null===n?null:(this._offset=n,t)},a.prototype.readInt=function(){return this._readTag(i.Integer)},a.prototype.readBoolean=function(){return 0!==this._readTag(i.Boolean)},a.prototype.readEnumeration=function(){return this._readTag(i.Enumeration)},a.prototype.readString=function(e,t){e||(e=i.OctetString);var n=this.peek();if(null===n)return null;if(n!==e)throw o("Expected 0x"+e.toString(16)+": got 0x"+n.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>this._size-r)return null;if(this._offset=r,0===this.length)return t?s.alloc(0):"";var a=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?a:a.toString("utf8")},a.prototype.readOID=function(e){e||(e=i.OID);var t=this.readString(e,!0);if(null===t)return null;for(var n=[],r=0,s=0;s<t.length;s++){var o=255&t[s];r<<=7,r+=127&o,0==(128&o)&&(n.push(r),r=0)}return r=n.shift(),n.unshift(r%40),n.unshift(r/40>>0),n.join(".")},a.prototype._readTag=function(e){r.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw o("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>4)throw o("Integer too long: "+this.length);if(this.length>this._size-n)return null;this._offset=n;for(var s=this._buf[this._offset],i=0,a=0;a<this.length;a++)i<<=8,i|=255&this._buf[this._offset++];return 128==(128&s)&&4!==a&&(i-=1<<8*a),i>>0},e.exports=a},170:e=>{e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},4241:(e,t,n)=>{var r=n(9491),s=n(443).Buffer,i=n(170),o=n(4932).newInvalidAsn1Error,a={size:1024,growthFactor:8};function c(e){var t,n;t=a,n=e||{},r.ok(t),r.equal(typeof t,"object"),r.ok(n),r.equal(typeof n,"object"),Object.getOwnPropertyNames(t).forEach((function(e){if(!n[e]){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r)}})),e=n,this._buf=s.alloc(e.size||1024),this._size=this._buf.length,this._offset=0,this._options=e,this._seq=[]}Object.defineProperty(c.prototype,"buffer",{get:function(){if(this._seq.length)throw o(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),c.prototype.writeByte=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=e},c.prototype.writeInt=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");"number"!=typeof t&&(t=i.Integer);for(var n=4;(0==(4286578688&e)||-8388608==(4286578688&e))&&n>1;)n--,e<<=8;if(n>4)throw o("BER ints cannot be > 0xffffffff");for(this._ensure(2+n),this._buf[this._offset++]=t,this._buf[this._offset++]=n;n-- >0;)this._buf[this._offset++]=(4278190080&e)>>>24,e<<=8},c.prototype.writeNull=function(){this.writeByte(i.Null),this.writeByte(0)},c.prototype.writeEnumeration=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");return"number"!=typeof t&&(t=i.Enumeration),this.writeInt(e,t)},c.prototype.writeBoolean=function(e,t){if("boolean"!=typeof e)throw new TypeError("argument must be a Boolean");"number"!=typeof t&&(t=i.Boolean),this._ensure(3),this._buf[this._offset++]=t,this._buf[this._offset++]=1,this._buf[this._offset++]=e?255:0},c.prototype.writeString=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string (was: "+typeof e+")");"number"!=typeof t&&(t=i.OctetString);var n=s.byteLength(e);this.writeByte(t),this.writeLength(n),n&&(this._ensure(n),this._buf.write(e,this._offset),this._offset+=n)},c.prototype.writeBuffer=function(e,t){if("number"!=typeof t)throw new TypeError("tag must be a number");if(!s.isBuffer(e))throw new TypeError("argument must be a buffer");this.writeByte(t),this.writeLength(e.length),this._ensure(e.length),e.copy(this._buf,this._offset,0,e.length),this._offset+=e.length},c.prototype.writeStringArray=function(e){if(!e instanceof Array)throw new TypeError("argument must be an Array[String]");var t=this;e.forEach((function(e){t.writeString(e)}))},c.prototype.writeOID=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string");if("number"!=typeof t&&(t=i.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(e))throw new Error("argument is not a valid OID string");var n=e.split("."),r=[];r.push(40*parseInt(n[0],10)+parseInt(n[1],10)),n.slice(2).forEach((function(e){!function(e,t){t<128?e.push(t):t<16384?(e.push(t>>>7|128),e.push(127&t)):t<2097152?(e.push(t>>>14|128),e.push(255&(t>>>7|128)),e.push(127&t)):t<268435456?(e.push(t>>>21|128),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t)):(e.push(255&(t>>>28|128)),e.push(255&(t>>>21|128)),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t))}(r,parseInt(e,10))}));var s=this;this._ensure(2+r.length),this.writeByte(t),this.writeLength(r.length),r.forEach((function(e){s.writeByte(e)}))},c.prototype.writeLength=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");if(this._ensure(4),e<=127)this._buf[this._offset++]=e;else if(e<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=e;else if(e<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e;else{if(!(e<=16777215))throw o("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=e>>16,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e}},c.prototype.startSequence=function(e){"number"!=typeof e&&(e=i.Sequence|i.Constructor),this.writeByte(e),this._seq.push(this._offset),this._ensure(3),this._offset+=3},c.prototype.endSequence=function(){var e=this._seq.pop(),t=e+3,n=this._offset-t;if(n<=127)this._shift(t,n,-2),this._buf[e]=n;else if(n<=255)this._shift(t,n,-1),this._buf[e]=129,this._buf[e+1]=n;else if(n<=65535)this._buf[e]=130,this._buf[e+1]=n>>8,this._buf[e+2]=n;else{if(!(n<=16777215))throw o("Sequence too long");this._shift(t,n,1),this._buf[e]=131,this._buf[e+1]=n>>16,this._buf[e+2]=n>>8,this._buf[e+3]=n}},c.prototype._shift=function(e,t,n){r.ok(void 0!==e),r.ok(void 0!==t),r.ok(n),this._buf.copy(this._buf,e+n,e,e+t),this._offset+=n},c.prototype._ensure=function(e){if(r.ok(e),this._size-this._offset<e){var t=this._size*this._options.growthFactor;t-this._offset<e&&(t+=e);var n=s.alloc(t);this._buf.copy(n,0,0,this._offset),this._buf=n,this._size=t}},e.exports=c},2701:(e,t,n)=>{var r=n(6846);e.exports={Ber:r,BerReader:r.Reader,BerWriter:r.Writer}},2216:(e,t,n)=>{e.exports={parallel:n(9968),serial:n(2371),serialOrdered:n(6577)}},7312:e=>{function t(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}e.exports=function(e){Object.keys(e.jobs).forEach(t.bind(e)),e.jobs={}}},3514:(e,t,n)=>{var r=n(206);e.exports=function(e){var t=!1;return r((function(){t=!0})),function(n,s){t?e(n,s):r((function(){e(n,s)}))}}},206:e=>{e.exports=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)}},9645:(e,t,n)=>{var r=n(3514),s=n(7312);e.exports=function(e,t,n,i){var o=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[o]=function(e,t,n,s){return 2==e.length?e(n,r(s)):e(n,t,r(s))}(t,o,e[o],(function(e,t){o in n.jobs&&(delete n.jobs[o],e?s(n):n.results[o]=t,i(e,n.results))}))}},2317:e=>{e.exports=function(e,t){var n=!Array.isArray(e),r={index:0,keyedList:n||t?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};return t&&r.keyedList.sort(n?t:function(n,r){return t(e[n],e[r])}),r}},3499:(e,t,n)=>{var r=n(7312),s=n(3514);e.exports=function(e){Object.keys(this.jobs).length&&(this.index=this.size,r(this),s(e)(null,this.results))}},9968:(e,t,n)=>{var r=n(9645),s=n(2317),i=n(3499);e.exports=function(e,t,n){for(var o=s(e);o.index<(o.keyedList||e).length;)r(e,t,o,(function(e,t){e?n(e,t):0!==Object.keys(o.jobs).length||n(null,o.results)})),o.index++;return i.bind(o,n)}},2371:(e,t,n)=>{var r=n(6577);e.exports=function(e,t,n){return r(e,t,null,n)}},6577:(e,t,n)=>{var r=n(9645),s=n(2317),i=n(3499);function o(e,t){return e<t?-1:e>t?1:0}e.exports=function(e,t,n,o){var a=s(e,n);return r(e,t,a,(function n(s,i){s?o(s,i):(a.index++,a.index<(a.keyedList||e).length?r(e,t,a,n):o(null,a.results))})),i.bind(a,o)},e.exports.ascending=o,e.exports.descending=function(e,t){return-1*o(e,t)}},4857:e=>{"use strict";e.exports={mask:(e,t,n,r,s)=>{for(var i=0;i<s;i++)n[r+i]=e[i]^t[3&i]},unmask:(e,t)=>{const n=e.length;for(var r=0;r<n;r++)e[r]^=t[3&r]}}},848:(e,t,n)=>{"use strict";try{e.exports=n(816)(__dirname)}catch(t){e.exports=n(4857)}},9500:(e,t,n)=>{var r=n(3837),s=n(2781).Stream,i=n(6710);function o(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}e.exports=o,r.inherits(o,s),o.create=function(e){var t=new this;for(var n in e=e||{})t[n]=e[n];return t},o.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},o.prototype.append=function(e){if(o.isStreamLike(e)){if(!(e instanceof i)){var t=i.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},o.prototype.pipe=function(e,t){return s.prototype.pipe.call(this,e,t),this.resume(),e},o.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},o.prototype._realGetNext=function(){var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){o.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e):this.end()},o.prototype._pipeNext=function(e){if(this._currentStream=e,o.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var t=e;this.write(t),this._getNext()},o.prototype._handleErrors=function(e){var t=this;e.on("error",(function(e){t._emitError(e)}))},o.prototype.write=function(e){this.emit("data",e)},o.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},o.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},o.prototype.end=function(){this._reset(),this.emit("end")},o.prototype.destroy=function(){this._reset(),this.emit("close")},o.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},o.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},o.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach((function(t){t.dataSize&&(e.dataSize+=t.dataSize)})),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},o.prototype._emitError=function(e){this._reset(),this.emit("error",e)}},3847:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(s=r))})),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(1311)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},1311:(e,t,n)=>{e.exports=function(e){function t(e){let n,s,i,o=null;function a(...e){if(!a.enabled)return;const r=a,s=Number(new Date),i=s-(n||s);r.diff=i,r.prev=n,r.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,s)=>{if("%%"===n)return"%";o++;const i=t.formatters[s];if("function"==typeof i){const t=e[o];n=i.call(r,t),e.splice(o,1),o--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==t.namespaces&&(s=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(s),...t.skips.map(s).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length;for(n=0;n<s;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(2807),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},8423:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(3847):e.exports=n(8825)},8825:(e,t,n)=>{const r=n(6224),s=n(3837);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(s.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:s}=this;if(s){const t=this.color,s="[3"+(t<8?t:"8;5;"+t),i=`  ${s};1m${r} [0m`;n[0]=i+n[0].split("\n").join("\n"+i),n.push(s+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=s.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(6795);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{}),e.exports=n(1311)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)}},6710:(e,t,n)=>{var r=n(2781).Stream,s=n(3837);function i(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}e.exports=i,s.inherits(i,r),i.create=function(e,t){var n=new this;for(var r in t=t||{})n[r]=t[r];n.source=e;var s=e.emit;return e.emit=function(){return n._handleEmit(arguments),s.apply(e,arguments)},e.on("error",(function(){})),n.pauseStream&&e.pause(),n},Object.defineProperty(i.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),i.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},i.prototype.resume=function(){this._released||this.release(),this.source.resume()},i.prototype.pause=function(){this.source.pause()},i.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},i.prototype.pipe=function(){var e=r.prototype.pipe.apply(this,arguments);return this.resume(),e},i.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},i.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}},2257:(e,t,n)=>{var r=n(6113);t.DiffieHellmanGroup=r.DiffieHellmanGroup,t.createDiffieHellmanGroup=r.createDiffieHellmanGroup,t.getDiffieHellman=r.getDiffieHellman,t.createDiffieHellman=r.createDiffieHellman,t.DiffieHellman=r.DiffieHellman},7730:(e,t,n)=>{var r;e.exports=function(){if(!r){try{r=n(8423)("follow-redirects")}catch(e){}"function"!=typeof r&&(r=function(){})}r.apply(null,arguments)}},2298:(e,t,n)=>{var r=n(7310),s=r.URL,i=n(3685),o=n(5687),a=n(2781).Writable,c=n(9491),l=n(7730),u=!1;try{c(new s)}catch(e){u="ERR_INVALID_URL"===e.code}var p=["auth","host","hostname","href","path","pathname","port","protocol","query","search"],h=["abort","aborted","connect","error","socket","timeout"],d=Object.create(null);h.forEach((function(e){d[e]=function(t,n,r){this._redirectable.emit(e,t,n,r)}}));var f=P("ERR_INVALID_URL","Invalid URL",TypeError),m=P("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),g=P("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",m),v=P("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),y=P("ERR_STREAM_WRITE_AFTER_END","write after end"),b=a.prototype.destroy||E;function w(e,t){a.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(e){try{n._processResponse(e)}catch(e){n.emit("error",e instanceof m?e:new m({cause:e}))}},this._performRequest()}function S(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach((function(r){var i=r+":",o=n[i]=e[r],a=t[r]=Object.create(o);Object.defineProperties(a,{request:{value:function(e,r,o){return s&&e instanceof s?e=T(e):R(e)?e=T(_(e)):(o=r,r=x(e),e={protocol:i}),I(r)&&(o=r,r=null),(r=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,r)).nativeProtocols=n,R(r.host)||R(r.hostname)||(r.hostname="::1"),c.equal(r.protocol,i,"protocol mismatch"),l("options",r),new w(r,o)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,n){var r=a.request(e,t,n);return r.end(),r},configurable:!0,enumerable:!0,writable:!0}})})),t}function E(){}function _(e){var t;if(u)t=new s(e);else if(!R((t=x(r.parse(e))).protocol))throw new f({input:e});return t}function x(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new f({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new f({input:e.href||e});return e}function T(e,t){var n=t||{};for(var r of p)n[r]=e[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),""!==n.port&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function C(e,t){var n;for(var r in t)e.test(r)&&(n=t[r],delete t[r]);return null==n?void 0:String(n).trim()}function P(e,t,n){function r(n){Error.captureStackTrace(this,this.constructor),Object.assign(this,n||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),r}function A(e,t){for(var n of h)e.removeListener(n,d[n]);e.on("error",E),e.destroy(t)}function R(e){return"string"==typeof e||e instanceof String}function I(e){return"function"==typeof e}w.prototype=Object.create(a.prototype),w.prototype.abort=function(){A(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},w.prototype.destroy=function(e){return A(this._currentRequest,e),b.call(this,e),this},w.prototype.write=function(e,t,n){if(this._ending)throw new y;if(!(R(e)||"object"==typeof(r=e)&&"length"in r))throw new TypeError("data should be a string, Buffer or Uint8Array");var r;I(t)&&(n=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new v),this.abort()):n&&n()},w.prototype.end=function(e,t,n){if(I(e)?(n=e,e=t=null):I(t)&&(n=t,t=null),e){var r=this,s=this._currentRequest;this.write(e,t,(function(){r._ended=!0,s.end(null,null,n)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,n)},w.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},w.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},w.prototype.setTimeout=function(e,t){var n=this;function r(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function s(t){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){n.emit("timeout"),i()}),e),r(t)}function i(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",i),n.removeListener("error",i),n.removeListener("response",i),n.removeListener("close",i),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",s)}return t&&this.on("timeout",t),this.socket?s(this.socket):this._currentRequest.once("socket",s),this.on("socket",r),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){w.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(w.prototype,e,{get:function(){return this._currentRequest[e]}})})),w.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},w.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var s=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var i of(s._redirectable=this,h))s.on(i,d[i]);if(this._currentUrl=/^\//.test(this._options.path)?r.format(this._options):this._options.path,this._isRedirect){var o=0,a=this,c=this._requestBodyBuffers;!function e(t){if(s===a._currentRequest)if(t)a.emit("error",t);else if(o<c.length){var n=c[o++];s.finished||s.write(n.data,n.encoding,e)}else a._ended&&s.end()}()}},w.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n,i=e.headers.location;if(!i||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(A(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new g;var o=this._options.beforeRedirect;o&&(n=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var a=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],C(/^content-/i,this._options.headers));var p,h,d=C(/^host$/i,this._options.headers),f=_(this._currentUrl),m=d||f.host,v=/^\w+:/.test(i)?this._currentUrl:r.format(Object.assign(f,{host:m})),y=(p=i,h=v,u?new s(p,h):_(r.resolve(h,p)));if(l("redirecting to",y.href),this._isRedirect=!0,T(y,this._options),(y.protocol!==f.protocol&&"https:"!==y.protocol||y.host!==m&&!function(e,t){c(R(e)&&R(t));var n=e.length-t.length-1;return n>0&&"."===e[n]&&e.endsWith(t)}(y.host,m))&&C(/^(?:authorization|cookie)$/i,this._options.headers),I(o)){var b={headers:e.headers,statusCode:t},w={url:v,method:a,headers:n};o(this._options,b,w),this._sanitizeOptions(this._options)}this._performRequest()},e.exports=S({http:i,https:o}),e.exports.wrap=S},4102:(e,t,n)=>{var r=n(9500),s=n(3837),i=n(1017),o=n(3685),a=n(5687),c=n(7310).parse,l=n(7147),u=n(2781).Stream,p=n(8757),h=n(2216),d=n(516);function f(e){if(!(this instanceof f))return new f(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],r.call(this),e=e||{})this[t]=e[t]}e.exports=f,s.inherits(f,r),f.LINE_BREAK="\r\n",f.DEFAULT_CONTENT_TYPE="application/octet-stream",f.prototype.append=function(e,t,n){"string"==typeof(n=n||{})&&(n={filename:n});var i=r.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),s.isArray(t))this._error(new Error("Arrays are not supported."));else{var o=this._multiPartHeader(e,t,n),a=this._multiPartFooter();i(o),i(t),i(a),this._trackLength(o,t,n)}},f.prototype._trackLength=function(e,t,n){var r=0;null!=n.knownLength?r+=+n.knownLength:Buffer.isBuffer(t)?r=t.length:"string"==typeof t&&(r=Buffer.byteLength(t)),this._valueLength+=r,this._overheadLength+=Buffer.byteLength(e)+f.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion")||t instanceof u)&&(n.knownLength||this._valuesToMeasure.push(t))},f.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):l.stat(e.path,(function(n,r){var s;n?t(n):(s=r.size-(e.start?e.start:0),t(null,s))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),t(null,+n.headers["content-length"])})),e.resume()):t("Unknown stream")},f.prototype._multiPartHeader=function(e,t,n){if("string"==typeof n.header)return n.header;var r,s=this._getContentDisposition(t,n),i=this._getContentType(t,n),o="",a={"Content-Disposition":["form-data",'name="'+e+'"'].concat(s||[]),"Content-Type":[].concat(i||[])};for(var c in"object"==typeof n.header&&d(a,n.header),a)a.hasOwnProperty(c)&&null!=(r=a[c])&&(Array.isArray(r)||(r=[r]),r.length&&(o+=c+": "+r.join("; ")+f.LINE_BREAK));return"--"+this.getBoundary()+f.LINE_BREAK+o+f.LINE_BREAK},f.prototype._getContentDisposition=function(e,t){var n,r;return"string"==typeof t.filepath?n=i.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=i.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=i.basename(e.client._httpMessage.path||"")),n&&(r='filename="'+n+'"'),r},f.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=p.lookup(e.name)),!n&&e.path&&(n=p.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!t.filepath&&!t.filename||(n=p.lookup(t.filepath||t.filename)),n||"object"!=typeof e||(n=f.DEFAULT_CONTENT_TYPE),n},f.prototype._multiPartFooter=function(){return function(e){var t=f.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},f.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+f.LINE_BREAK},f.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n},f.prototype.setBoundary=function(e){this._boundary=e},f.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},f.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,r=this._streams.length;n<r;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(f.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},f.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},f.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},f.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},f.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?h.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,r){n?e(n):(r.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},f.prototype.submit=function(e,t){var n,r,s={method:"post"};return"string"==typeof e?(e=c(e),r=d({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},s)):(r=d(e,s)).port||(r.port="https:"==r.protocol?443:80),r.headers=this.getHeaders(e.headers),n="https:"==r.protocol?a.request(r):o.request(r),this.getLength(function(e,r){if(e&&"Unknown stream"!==e)this._error(e);else if(r&&n.setHeader("Content-Length",r),this.pipe(n),t){var s,i=function(e,r){return n.removeListener("error",i),n.removeListener("response",s),t.call(this,e,r)};s=i.bind(this,null),n.on("error",i),n.on("response",s)}}.bind(this)),n},f.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},f.prototype.toString=function(){return"[object FormData]"}},516:e=>{e.exports=function(e,t){return Object.keys(t).forEach((function(n){e[n]=e[n]||t[n]})),e}},9002:e=>{"use strict";e.exports=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),s=t.indexOf("--");return-1!==r&&(-1===s||r<s)}},7211:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(1808)),o=s(n(4404)),a=s(n(7310)),c=s(n(9491)),l=s(n(8423)),u=n(2761),p=s(n(807)),h=l.default("https-proxy-agent:agent");class d extends u.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");h("creating new HttpsProxyAgent instance: %o",t),super(t);const n=Object.assign({},t);var r;this.secureProxy=t.secureProxy||"string"==typeof(r=n.protocol)&&/^https:?$/i.test(r),n.host=n.hostname||n.host,"string"==typeof n.port&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return r(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:r}=this;let s;r?(h("Creating `tls.Socket`: %o",n),s=o.default.connect(n)):(h("Creating `net.Socket`: %o",n),s=i.default.connect(n));const a=Object.assign({},n.headers);let l=`CONNECT ${t.host}:${t.port} HTTP/1.1\r\n`;n.auth&&(a["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:u,port:d,secureEndpoint:m}=t;(function(e,t){return Boolean(!t&&80===e||t&&443===e)})(d,m)||(u+=`:${d}`),a.Host=u,a.Connection="close";for(const e of Object.keys(a))l+=`${e}: ${a[e]}\r\n`;const g=p.default(s);s.write(`${l}\r\n`);const{statusCode:v,buffered:y}=yield g;if(200===v){if(e.once("socket",f),t.secureEndpoint){h("Upgrading socket connection to TLS");const e=t.servername||t.host;return o.default.connect(Object.assign(Object.assign({},function(e,...t){const n={};let r;for(r in e)t.includes(r)||(n[r]=e[r]);return n}(t,"host","hostname","path","port")),{socket:s,servername:e}))}return s}s.destroy();const b=new i.default.Socket({writable:!1});return b.readable=!0,e.once("socket",(e=>{h("replaying proxy buffer for failed request"),c.default(e.listenerCount("data")>0),e.push(y),e.push(null)})),b}))}}function f(e){e.resume()}t.default=d},3795:function(e,t,n){"use strict";const r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(7211));function s(e){return new r.default(e)}!function(e){e.HttpsProxyAgent=r.default,e.prototype=r.default.prototype}(s||(s={})),e.exports=s},807:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(8423)).default("https-proxy-agent:parse-proxy-response");t.default=function(e){return new Promise(((t,n)=>{let r=0;const i=[];function o(){const n=e.read();n?function(e){i.push(e),r+=e.length;const n=Buffer.concat(i,r);if(-1===n.indexOf("\r\n\r\n"))return s("have not received end of HTTP headers yet..."),void o();const a=n.toString("ascii",0,n.indexOf("\r\n")),c=+a.split(" ")[1];s("got proxy server response: %o",a),t({statusCode:c,buffered:n})}(n):e.once("readable",o)}function a(e){s("onclose had error %o",e)}function c(){s("onend")}e.on("error",(function t(r){e.removeListener("end",c),e.removeListener("error",t),e.removeListener("close",a),e.removeListener("readable",o),s("onerror %o",r),n(r)})),e.on("close",a),e.on("end",c),o()}))}},4957:e=>{e.exports=r,r.strict=s,r.loose=i;var t=Object.prototype.toString,n={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function r(e){return s(e)||i(e)}function s(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function i(e){return n[t.call(e)]}},1748:(e,t,n)=>{e.exports=n(7392)},8757:(e,t,n)=>{"use strict";var r,s,i,o=n(1748),a=n(1017).extname,c=/^\s*([^;\s]*)(?:;|\s|$)/,l=/^text\//i;function u(e){if(!e||"string"!=typeof e)return!1;var t=c.exec(e),n=t&&o[t[1].toLowerCase()];return n&&n.charset?n.charset:!(!t||!l.test(t[1]))&&"UTF-8"}t.charset=u,t.charsets={lookup:u},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var n=-1===e.indexOf("/")?t.lookup(e):e;if(!n)return!1;if(-1===n.indexOf("charset")){var r=t.charset(n);r&&(n+="; charset="+r.toLowerCase())}return n},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var n=c.exec(e),r=n&&t.extensions[n[1].toLowerCase()];return!(!r||!r.length)&&r[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var n=a("x."+e).toLowerCase().substr(1);return n&&t.types[n]||!1},t.types=Object.create(null),r=t.extensions,s=t.types,i=["nginx","apache",void 0,"iana"],Object.keys(o).forEach((function(e){var t=o[e],n=t.extensions;if(n&&n.length){r[e]=n;for(var a=0;a<n.length;a++){var c=n[a];if(s[c]){var l=i.indexOf(o[s[c]].source),u=i.indexOf(t.source);if("application/octet-stream"!==s[c]&&(l>u||l===u&&"application/"===s[c].substr(0,12)))continue}s[c]=e}}}))},2807:e=>{var t=1e3,n=60*t,r=60*n,s=24*r;function i(e,t,n,r){var s=t>=1.5*n;return Math.round(e/n)+" "+r+(s?"s":"")}e.exports=function(e,o){o=o||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var o=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===l&&isFinite(e))return o.long?(a=e,(c=Math.abs(a))>=s?i(a,c,s,"day"):c>=r?i(a,c,r,"hour"):c>=n?i(a,c,n,"minute"):c>=t?i(a,c,t,"second"):a+" ms"):function(e){var i=Math.abs(e);return i>=s?Math.round(e/s)+"d":i>=r?Math.round(e/r)+"h":i>=n?Math.round(e/n)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},4841:(e,t,n)=>{if(!globalThis.DOMException)try{const{MessageChannel:e}=n(1267),t=(new e).port1,r=new ArrayBuffer;t.postMessage(r,[r,r])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}e.exports=globalThis.DOMException},816:(e,t,n)=>{var r=n(7147),s=n(1017),i=n(2037),o=require,a=process.config&&process.config.variables||{},c=!!process.env.PREBUILDS_ONLY,l=process.versions.modules,u=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",p=i.arch(),h=i.platform(),d=process.env.LIBC||(function(e){return"linux"===e&&r.existsSync("/etc/alpine-release")}(h)?"musl":"glibc"),f=process.env.ARM_VERSION||("arm64"===p?"8":a.arm_version)||"",m=(process.versions.uv||"").split(".")[0];function g(e){return o(g.path(e))}function v(e){try{return r.readdirSync(e)}catch(e){return[]}}function y(e,t){var n=v(e).filter(t);return n[0]&&s.join(e,n[0])}function b(e){return/\.node$/.test(e)}function w(e){var t=e.split("-");if(2===t.length){var n=t[0],r=t[1].split("+");if(n&&r.length&&r.every(Boolean))return{name:e,platform:n,architectures:r}}}function S(e,t){return function(n){return null!=n&&n.platform===e&&n.architectures.includes(t)}}function E(e,t){return e.architectures.length-t.architectures.length}function _(e){var t=e.split("."),n={file:e,specificity:0};if("node"===t.pop()){for(var r=0;r<t.length;r++){var s=t[r];if("node"===s||"electron"===s||"node-webkit"===s)n.runtime=s;else if("napi"===s)n.napi=!0;else if("abi"===s.slice(0,3))n.abi=s.slice(3);else if("uv"===s.slice(0,2))n.uv=s.slice(2);else if("armv"===s.slice(0,4))n.armv=s.slice(4);else{if("glibc"!==s&&"musl"!==s)continue;n.libc=s}n.specificity++}return n}}function x(e,t){return function(n){return!(null==n||n.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(n)||n.abi!==t&&!n.napi||n.uv&&n.uv!==m||n.armv&&n.armv!==f||n.libc&&n.libc!==d)}}function T(e){return function(t,n){return t.runtime!==n.runtime?t.runtime===e?-1:1:t.abi!==n.abi?t.abi?-1:1:t.specificity!==n.specificity?t.specificity>n.specificity?-1:1:0}}e.exports=g,g.path=function(e){e=s.resolve(e||".");try{var t=o(s.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!c){var n=y(s.join(e,"build/Release"),b);if(n)return n;var r=y(s.join(e,"build/Debug"),b);if(r)return r}var i=C(e);if(i)return i;var a=C(s.dirname(process.execPath));if(a)return a;var g=["platform="+h,"arch="+p,"runtime="+u,"abi="+l,"uv="+m,f?"armv="+f:"","libc="+d,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+g+"\n    loaded from: "+e+"\n");function C(e){var t=v(s.join(e,"prebuilds")).map(w).filter(S(h,p)).sort(E)[0];if(t){var n=s.join(e,"prebuilds",t.name),r=v(n).map(_).filter(x(u,l)).sort(T(u))[0];return r?s.join(n,r.file):void 0}}},g.parseTags=_,g.matchTags=x,g.compareTags=T,g.parseTuple=w,g.matchTuple=S,g.compareTuples=E},4024:(e,t,n)=>{var r=n(2057),s=n(450),i=(n(6113),n(2701).Ber,n(3016)._),o=n(3016),a=n(5954),c=n(4969);void 0===r.RSA_NO_PADDING&&(r.RSA_NO_PADDING=3),e.exports=function(){var e={node10:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],node:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],iojs:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],browser:["md5","ripemd160","sha1","sha256","sha512"]},t="pkcs1_oaep",n="pkcs1",r={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function l(e,r,a){if(!(this instanceof l))return new l(e,r,a);i.isObject(r)&&(a=r,r=void 0),this.$options={signingScheme:n,signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:t,encryptionSchemeOptions:{hash:"sha1",label:null},environment:o.detectEnvironment(),rsaUtils:this},this.keyPair=new s.Key,this.$cache={},Buffer.isBuffer(e)||i.isString(e)?this.importKey(e,r):i.isObject(e)&&this.generateKeyPair(e.b,e.e),this.setOptions(a)}return l.prototype.setOptions=function(r){if((r=r||{}).environment&&(this.$options.environment=r.environment),r.signingScheme){if(i.isString(r.signingScheme)){var s=r.signingScheme.toLowerCase().split("-");1==s.length?e.node.indexOf(s[0])>-1?(this.$options.signingSchemeOptions={hash:s[0]},this.$options.signingScheme=n):(this.$options.signingScheme=s[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:s[1]},this.$options.signingScheme=s[0])}else i.isObject(r.signingScheme)&&(this.$options.signingScheme=r.signingScheme.scheme||n,this.$options.signingSchemeOptions=i.omit(r.signingScheme,"scheme"));if(!a.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(r.encryptionScheme){if(i.isString(r.encryptionScheme)?(this.$options.encryptionScheme=r.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):i.isObject(r.encryptionScheme)&&(this.$options.encryptionScheme=r.encryptionScheme.scheme||t,this.$options.encryptionSchemeOptions=i.omit(r.encryptionScheme,"scheme")),!a.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},l.prototype.generateKeyPair=function(e,t){if(t=t||65537,(e=e||2048)%8!=0)throw Error("Key size must be a multiple of 8.");return this.keyPair.generate(e,t.toString(16)),this.$cache={},this},l.prototype.importKey=function(e,t){if(!e)throw Error("Empty key given");if(t&&(t=r[t]||t),!c.detectAndImport(this.keyPair,e,t)&&void 0===t)throw Error("Key format must be specified");return this.$cache={},this},l.prototype.exportKey=function(e){return e=r[e=e||"private"]||e,this.$cache[e]||(this.$cache[e]=c.detectAndExport(this.keyPair,e)),this.$cache[e]},l.prototype.isPrivate=function(){return this.keyPair.isPrivate()},l.prototype.isPublic=function(e){return this.keyPair.isPublic(e)},l.prototype.isEmpty=function(e){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},l.prototype.encrypt=function(e,t,n){return this.$$encryptKey(!1,e,t,n)},l.prototype.decrypt=function(e,t){return this.$$decryptKey(!1,e,t)},l.prototype.encryptPrivate=function(e,t,n){return this.$$encryptKey(!0,e,t,n)},l.prototype.decryptPublic=function(e,t){return this.$$decryptKey(!0,e,t)},l.prototype.$$encryptKey=function(e,t,n,r){try{var s=this.keyPair.encrypt(this.$getDataForEncrypt(t,r),e);return"buffer"!=n&&n?s.toString(n):s}catch(e){throw Error("Error during encryption. Original error: "+e)}},l.prototype.$$decryptKey=function(e,t,n){try{t=i.isString(t)?Buffer.from(t,"base64"):t;var r=this.keyPair.decrypt(t,e);if(null===r)throw Error("Key decrypt method returns null.");return this.$getDecryptedData(r,n)}catch(e){throw Error("Error during decryption (probably incorrect key). Original error: "+e)}},l.prototype.sign=function(e,t,n){if(!this.isPrivate())throw Error("This is not private key");var r=this.keyPair.sign(this.$getDataForEncrypt(e,n));return t&&"buffer"!=t&&(r=r.toString(t)),r},l.prototype.verify=function(e,t,n,r){if(!this.isPublic())throw Error("This is not public key");return r=r&&"buffer"!=r?r:null,this.keyPair.verify(this.$getDataForEncrypt(e,n),t,r)},l.prototype.getKeySize=function(){return this.keyPair.keySize},l.prototype.getMaxMessageSize=function(){return this.keyPair.maxMessageLength},l.prototype.$getDataForEncrypt=function(e,t){if(i.isString(e)||i.isNumber(e))return Buffer.from(""+e,t||"utf8");if(Buffer.isBuffer(e))return e;if(i.isObject(e))return Buffer.from(JSON.stringify(e));throw Error("Unexpected data type")},l.prototype.$getDecryptedData=function(e,t){return"buffer"==(t=t||"buffer")?e:"json"==t?JSON.parse(e.toString()):e.toString(t)},l}()},6591:(e,t,n)=>{var r=n(6113);e.exports={getEngine:function(e,t){var s=n(4689);return"node"===t.environment&&"function"==typeof r.publicEncrypt&&"function"==typeof r.privateDecrypt&&(s="function"==typeof r.privateEncrypt&&"function"==typeof r.publicDecrypt?n(5536):n(8170)),s(e,t)}}},5536:(e,t,n)=>{var r=n(6113),s=n(2057),i=n(5954);e.exports=function(e,t){var n=i.pkcs1.makeScheme(e,t);return{encrypt:function(e,i){var o;if(i)return o=s.RSA_PKCS1_PADDING,t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(o=t.encryptionSchemeOptions.padding),r.privateEncrypt({key:t.rsaUtils.exportKey("private"),padding:o},e);o=s.RSA_PKCS1_OAEP_PADDING,"pkcs1"===t.encryptionScheme&&(o=s.RSA_PKCS1_PADDING),t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(o=t.encryptionSchemeOptions.padding);var a=e;return o===s.RSA_NO_PADDING&&(a=n.pkcs0pad(e)),r.publicEncrypt({key:t.rsaUtils.exportKey("public"),padding:o},a)},decrypt:function(e,i){var o;if(i)return o=s.RSA_PKCS1_PADDING,t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(o=t.encryptionSchemeOptions.padding),r.publicDecrypt({key:t.rsaUtils.exportKey("public"),padding:o},e);o=s.RSA_PKCS1_OAEP_PADDING,"pkcs1"===t.encryptionScheme&&(o=s.RSA_PKCS1_PADDING),t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(o=t.encryptionSchemeOptions.padding);var a=r.privateDecrypt({key:t.rsaUtils.exportKey("private"),padding:o},e);return o===s.RSA_NO_PADDING?n.pkcs0unpad(a):a}}}},4689:(e,t,n)=>{var r=n(6200),s=n(5954);e.exports=function(e,t){var n=s.pkcs1.makeScheme(e,t);return{encrypt:function(t,s){var i,o;return s?(i=new r(n.encPad(t,{type:1})),o=e.$doPrivate(i)):(i=new r(e.encryptionScheme.encPad(t)),o=e.$doPublic(i)),o.toBuffer(e.encryptedDataLength)},decrypt:function(t,s){var i,o=new r(t);return s?(i=e.$doPublic(o),n.encUnPad(i.toBuffer(e.encryptedDataLength),{type:1})):(i=e.$doPrivate(o),e.encryptionScheme.encUnPad(i.toBuffer(e.encryptedDataLength)))}}}},8170:(e,t,n)=>{var r=n(6113),s=n(2057),i=n(5954);e.exports=function(e,t){var o=n(4689)(e,t),a=i.pkcs1.makeScheme(e,t);return{encrypt:function(e,n){if(n)return o.encrypt(e,n);var i=s.RSA_PKCS1_OAEP_PADDING;"pkcs1"===t.encryptionScheme&&(i=s.RSA_PKCS1_PADDING),t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(i=t.encryptionSchemeOptions.padding);var c=e;return i===s.RSA_NO_PADDING&&(c=a.pkcs0pad(e)),r.publicEncrypt({key:t.rsaUtils.exportKey("public"),padding:i},c)},decrypt:function(e,n){if(n)return o.decrypt(e,n);var i=s.RSA_PKCS1_OAEP_PADDING;"pkcs1"===t.encryptionScheme&&(i=s.RSA_PKCS1_PADDING),t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(i=t.encryptionSchemeOptions.padding);var c=r.privateDecrypt({key:t.rsaUtils.exportKey("private"),padding:i},e);return i===s.RSA_NO_PADDING?a.pkcs0unpad(c):c}}}},5624:(e,t,n)=>{n(3016)._,n(3016),e.exports={privateExport:function(e,t){return{n:e.n.toBuffer(),e:e.e,d:e.d.toBuffer(),p:e.p.toBuffer(),q:e.q.toBuffer(),dmp1:e.dmp1.toBuffer(),dmq1:e.dmq1.toBuffer(),coeff:e.coeff.toBuffer()}},privateImport:function(e,t,n){if(!(t.n&&t.e&&t.d&&t.p&&t.q&&t.dmp1&&t.dmq1&&t.coeff))throw Error("Invalid key data");e.setPrivate(t.n,t.e,t.d,t.p,t.q,t.dmp1,t.dmq1,t.coeff)},publicExport:function(e,t){return{n:e.n.toBuffer(),e:e.e}},publicImport:function(e,t,n){if(!t.n||!t.e)throw Error("Invalid key data");e.setPublic(t.n,t.e)},autoImport:function(t,n){return!(!n.n||!n.e||(n.d&&n.p&&n.q&&n.dmp1&&n.dmq1&&n.coeff?(e.exports.privateImport(t,n),0):(e.exports.publicImport(t,n),0)))}}},4969:(e,t,n)=>{function r(e){e=e.split("-");for(var t="private",n={type:"default"},r=1;r<e.length;r++)if(e[r])switch(e[r]){case"public":case"private":t=e[r];break;case"pem":case"der":n.type=e[r]}return{scheme:e[0],keyType:t,keyOpt:n}}n(3016)._,e.exports={pkcs1:n(2768),pkcs8:n(6769),components:n(5624),openssh:n(7789),isPrivateExport:function(t){return e.exports[t]&&"function"==typeof e.exports[t].privateExport},isPrivateImport:function(t){return e.exports[t]&&"function"==typeof e.exports[t].privateImport},isPublicExport:function(t){return e.exports[t]&&"function"==typeof e.exports[t].publicExport},isPublicImport:function(t){return e.exports[t]&&"function"==typeof e.exports[t].publicImport},detectAndImport:function(t,n,s){if(void 0===s){for(var i in e.exports)if("function"==typeof e.exports[i].autoImport&&e.exports[i].autoImport(t,n))return!0}else if(s){var o=r(s);if(!e.exports[o.scheme])throw Error("Unsupported key format");"private"===o.keyType?e.exports[o.scheme].privateImport(t,n,o.keyOpt):e.exports[o.scheme].publicImport(t,n,o.keyOpt)}return!1},detectAndExport:function(t,n){if(n){var s=r(n);if(e.exports[s.scheme]){if("private"===s.keyType){if(!t.isPrivate())throw Error("This is not private key");return e.exports[s.scheme].privateExport(t,s.keyOpt)}if(!t.isPublic())throw Error("This is not public key");return e.exports[s.scheme].publicExport(t,s.keyOpt)}throw Error("Unsupported key format")}}}},7789:(e,t,n)=>{var r=n(3016)._,s=n(3016),i=n(6200);const o="-----BEGIN OPENSSH PRIVATE KEY-----",a="-----END OPENSSH PRIVATE KEY-----";function c(e){const t=e.buf.readInt32BE(e.off);e.off+=4;const n=e.buf.slice(e.off,e.off+t);return e.off+=t,n}function l(e,t){e.buf.writeInt32BE(t.byteLength,e.off),e.off+=4,e.off+=t.copy(e.buf,e.off)}e.exports={privateExport:function(e,t){const n=e.n.toBuffer();let r=Buffer.alloc(4);for(r.writeUInt32BE(e.e,0);0===r[0];)r=r.slice(1);const i=e.d.toBuffer(),c=e.coeff.toBuffer(),u=e.p.toBuffer(),p=e.q.toBuffer();let h;h=void 0!==e.sshcomment?Buffer.from(e.sshcomment):Buffer.from([]);const d=15+r.byteLength+4+n.byteLength,f=23+n.byteLength+4+r.byteLength+4+i.byteLength+4+c.byteLength+4+u.byteLength+4+p.byteLength+4+h.byteLength;let m=43+d+4+f;m+=8*Math.ceil(f/8)-f;const g=Buffer.alloc(m),v={buf:g,off:0};g.write("openssh-key-v1","utf8"),g.writeUInt8(0,14),v.off+=15,l(v,Buffer.from("none")),l(v,Buffer.from("none")),l(v,Buffer.from("")),v.off=v.buf.writeUInt32BE(1,v.off),v.off=v.buf.writeUInt32BE(d,v.off),l(v,Buffer.from("ssh-rsa")),l(v,r),l(v,n),v.off=v.buf.writeUInt32BE(m-47-d,v.off),v.off+=8,l(v,Buffer.from("ssh-rsa")),l(v,n),l(v,r),l(v,i),l(v,c),l(v,u),l(v,p),l(v,h);let y=1;for(;v.off<m;)v.off=v.buf.writeUInt8(y++,v.off);return"der"===t.type?v.buf:o+"\n"+s.linebrk(g.toString("base64"),70)+"\n"+a+"\n"},privateImport:function(e,t,n){var l;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),!r.isString(t))throw Error("Unsupported key format");var u=s.trimSurroundingText(t,o,a).replace(/\s+|\n\r|\n|\r$/gm,"");l=Buffer.from(u,"base64")}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");l=t}const p={buf:l,off:0};if("openssh-key-v1"!==l.slice(0,14).toString("ascii"))throw"Invalid file format.";if(p.off+=15,"none"!==c(p).toString("ascii"))throw Error("Unsupported key type");if("none"!==c(p).toString("ascii"))throw Error("Unsupported key type");if(""!==c(p).toString("ascii"))throw Error("Unsupported key type");if(p.off+=4,p.off+=4,"ssh-rsa"!==c(p).toString("ascii"))throw Error("Unsupported key type");if(c(p),c(p),p.off+=12,"ssh-rsa"!==c(p).toString("ascii"))throw Error("Unsupported key type");const h=c(p),d=c(p),f=c(p),m=c(p),g=c(p),v=c(p),y=new i(f),b=new i(v),w=new i(g),S=y.mod(w.subtract(i.ONE)),E=y.mod(b.subtract(i.ONE));e.setPrivate(h,d,f,g,v,S.toBuffer(),E.toBuffer(),m),e.sshcomment=c(p).toString("ascii")},publicExport:function(e,t){let n=Buffer.alloc(4);for(n.writeUInt32BE(e.e,0);0===n[0];)n=n.slice(1);const r=e.n.toBuffer(),s=Buffer.alloc(n.byteLength+4+r.byteLength+4+"ssh-rsa".length+4),i={buf:s,off:0};l(i,Buffer.from("ssh-rsa")),l(i,n),l(i,r);let o=e.sshcomment||"";return"der"===t.type?i.buf:"ssh-rsa "+s.toString("base64")+" "+o+"\n"},publicImport:function(e,t,n){var s;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),!r.isString(t))throw Error("Unsupported key format");{if("ssh-rsa "!==t.substring(0,8))throw Error("Unsupported key format");let n=t.indexOf(" ",8);-1===n?n=t.length:e.sshcomment=t.substring(n+1).replace(/\s+|\n\r|\n|\r$/gm,"");const r=t.substring(8,n).replace(/\s+|\n\r|\n|\r$/gm,"");s=Buffer.from(r,"base64")}}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");s=t}const i={buf:s,off:0},o=c(i).toString("ascii");if("ssh-rsa"!==o)throw Error("Invalid key type: "+o);const a=c(i),l=c(i);e.setPublic(l,a)},autoImport:function(t,n){return/^[\S\s]*-----BEGIN OPENSSH PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END OPENSSH PRIVATE KEY-----[\S\s]*$/g.test(n)?(e.exports.privateImport(t,n),!0):!!/^[\S\s]*ssh-rsa \s*(?=(([A-Za-z0-9+/=]+\s*)+))\1[\S\s]*$/g.test(n)&&(e.exports.publicImport(t,n),!0)}}},2768:(e,t,n)=>{var r=n(2701).Ber,s=n(3016)._,i=n(3016);const o="-----BEGIN RSA PRIVATE KEY-----",a="-----END RSA PRIVATE KEY-----",c="-----BEGIN RSA PUBLIC KEY-----",l="-----END RSA PUBLIC KEY-----";e.exports={privateExport:function(e,t){t=t||{};var n=e.n.toBuffer(),s=e.d.toBuffer(),c=e.p.toBuffer(),l=e.q.toBuffer(),u=e.dmp1.toBuffer(),p=e.dmq1.toBuffer(),h=e.coeff.toBuffer(),d=n.length+s.length+c.length+l.length+u.length+p.length+h.length+512,f=new r.Writer({size:d});return f.startSequence(),f.writeInt(0),f.writeBuffer(n,2),f.writeInt(e.e),f.writeBuffer(s,2),f.writeBuffer(c,2),f.writeBuffer(l,2),f.writeBuffer(u,2),f.writeBuffer(p,2),f.writeBuffer(h,2),f.endSequence(),"der"===t.type?f.buffer:o+"\n"+i.linebrk(f.buffer.toString("base64"),64)+"\n"+a},privateImport:function(e,t,n){var c;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),!s.isString(t))throw Error("Unsupported key format");var l=i.trimSurroundingText(t,o,a).replace(/\s+|\n\r|\n|\r$/gm,"");c=Buffer.from(l,"base64")}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");c=t}var u=new r.Reader(c);u.readSequence(),u.readString(2,!0),e.setPrivate(u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0))},publicExport:function(e,t){t=t||{};var n=e.n.toBuffer(),s=n.length+512,o=new r.Writer({size:s});return o.startSequence(),o.writeBuffer(n,2),o.writeInt(e.e),o.endSequence(),"der"===t.type?o.buffer:c+"\n"+i.linebrk(o.buffer.toString("base64"),64)+"\n"+l},publicImport:function(e,t,n){var o;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),s.isString(t)){var a=i.trimSurroundingText(t,c,l).replace(/\s+|\n\r|\n|\r$/gm,"");o=Buffer.from(a,"base64")}}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");o=t}var u=new r.Reader(o);u.readSequence(),e.setPublic(u.readString(2,!0),u.readString(2,!0))},autoImport:function(t,n){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(n)?(e.exports.privateImport(t,n),!0):!!/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(n)&&(e.exports.publicImport(t,n),!0)}}},6769:(e,t,n)=>{var r=n(2701).Ber,s=n(3016)._,i="1.2.840.113549.1.1.1",o=n(3016);const a="-----BEGIN PRIVATE KEY-----",c="-----END PRIVATE KEY-----",l="-----BEGIN PUBLIC KEY-----",u="-----END PUBLIC KEY-----";e.exports={privateExport:function(e,t){t=t||{};var n=e.n.toBuffer(),s=e.d.toBuffer(),l=e.p.toBuffer(),u=e.q.toBuffer(),p=e.dmp1.toBuffer(),h=e.dmq1.toBuffer(),d=e.coeff.toBuffer(),f=n.length+s.length+l.length+u.length+p.length+h.length+d.length+512,m=new r.Writer({size:f});m.startSequence(),m.writeInt(0),m.writeBuffer(n,2),m.writeInt(e.e),m.writeBuffer(s,2),m.writeBuffer(l,2),m.writeBuffer(u,2),m.writeBuffer(p,2),m.writeBuffer(h,2),m.writeBuffer(d,2),m.endSequence();var g=new r.Writer({size:f});return g.startSequence(),g.writeInt(0),g.startSequence(),g.writeOID(i),g.writeNull(),g.endSequence(),g.writeBuffer(m.buffer,4),g.endSequence(),"der"===t.type?g.buffer:a+"\n"+o.linebrk(g.buffer.toString("base64"),64)+"\n"+c},privateImport:function(e,t,n){var l;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),!s.isString(t))throw Error("Unsupported key format");var u=o.trimSurroundingText(t,a,c).replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");l=Buffer.from(u,"base64")}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");l=t}var p=new r.Reader(l);if(p.readSequence(),p.readInt(0),new r.Reader(p.readString(48,!0)).readOID(6,!0)!==i)throw Error("Invalid Public key format");var h=new r.Reader(p.readString(4,!0));h.readSequence(),h.readString(2,!0),e.setPrivate(h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0))},publicExport:function(e,t){t=t||{};var n=e.n.toBuffer(),s=n.length+512,a=new r.Writer({size:s});a.writeByte(0),a.startSequence(),a.writeBuffer(n,2),a.writeInt(e.e),a.endSequence();var c=new r.Writer({size:s});return c.startSequence(),c.startSequence(),c.writeOID(i),c.writeNull(),c.endSequence(),c.writeBuffer(a.buffer,3),c.endSequence(),"der"===t.type?c.buffer:l+"\n"+o.linebrk(c.buffer.toString("base64"),64)+"\n"+u},publicImport:function(e,t,n){var a;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),s.isString(t)){var c=o.trimSurroundingText(t,l,u).replace(/\s+|\n\r|\n|\r$/gm,"");a=Buffer.from(c,"base64")}}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");a=t}var p=new r.Reader(a);if(p.readSequence(),new r.Reader(p.readString(48,!0)).readOID(6,!0)!==i)throw Error("Invalid Public key format");var h=new r.Reader(p.readString(3,!0));h.readByte(),h.readSequence(),e.setPublic(h.readString(2,!0),h.readString(2,!0))},autoImport:function(t,n){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(n)?(e.exports.privateImport(t,n),!0):!!/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(n)&&(e.exports.publicImport(t,n),!0)}}},6200:(e,t,n)=>{var r=n(6113),s=n(3016)._;function i(e,t){null!=e&&("number"==typeof e?this.fromNumber(e,t):Buffer.isBuffer(e)?this.fromBuffer(e):null==t&&"string"!=typeof e?this.fromByteArray(e):this.fromString(e,t))}function o(){return new i(null)}i.prototype.am=function(e,t,n,r,s,i){for(var o=16383&t,a=t>>14;--i>=0;){var c=16383&this[e],l=this[e++]>>14,u=a*c+l*o;s=((c=o*c+((16383&u)<<14)+n[r]+s)>>28)+(u>>14)+a*l,n[r++]=268435455&c}return s},i.prototype.DB=28,i.prototype.DM=268435455,i.prototype.DV=1<<28,i.prototype.FV=Math.pow(2,52),i.prototype.F1=24,i.prototype.F2=4;var a,c,l=new Array;for(a="0".charCodeAt(0),c=0;c<=9;++c)l[a++]=c;for(a="a".charCodeAt(0),c=10;c<36;++c)l[a++]=c;for(a="A".charCodeAt(0),c=10;c<36;++c)l[a++]=c;function u(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function p(e,t){var n=l[e.charCodeAt(t)];return null==n?-1:n}function h(e){var t=o();return t.fromInt(e),t}function d(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function f(e){this.m=e}function m(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function g(e,t){return e&t}function v(e,t){return e|t}function y(e,t){return e^t}function b(e,t){return e&~t}function w(e){if(0===e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function S(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function E(){}function _(e){return e}function x(e){this.r2=o(),this.q3=o(),i.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}f.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},f.prototype.revert=function(e){return e},f.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},f.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},f.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},m.prototype.convert=function(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(i.ZERO)>0&&this.m.subTo(t,t),t},m.prototype.revert=function(e){var t=o();return e.copyTo(t),this.reduce(t),t},m.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},m.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},E.prototype.convert=_,E.prototype.revert=_,E.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},E.prototype.sqrTo=function(e,t){e.squareTo(t)},x.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=o();return e.copyTo(t),this.reduce(t),t},x.prototype.revert=function(e){return e},x.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},x.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},x.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var T=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],C=(1<<26)/T[T.length-1];i.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},i.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},i.prototype.fromString=function(e,t,n){var r;switch(t){case 2:r=1;break;case 4:r=2;break;case 8:r=3;break;case 16:r=4;break;case 32:r=5;break;case 256:r=8;break;default:return void this.fromRadix(e,t)}this.t=0,this.s=0;for(var s=e.length,o=!1,a=0;--s>=0;){var c=8==r?255&e[s]:p(e,s);c<0?"-"==e.charAt(s)&&(o=!0):(o=!1,0===a?this[this.t++]=c:a+r>this.DB?(this[this.t-1]|=(c&(1<<this.DB-a)-1)<<a,this[this.t++]=c>>this.DB-a):this[this.t-1]|=c<<a,(a+=r)>=this.DB&&(a-=this.DB))}n||8!=r||0==(128&e[0])||(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&i.ZERO.subTo(this,this)},i.prototype.fromByteArray=function(e,t){this.fromString(e,256,t)},i.prototype.fromBuffer=function(e){this.fromString(e,256,!0)},i.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},i.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},i.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},i.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,s=this.DB-r,i=(1<<s)-1,o=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>s|a,a=(this[n]&i)<<r;for(n=o-1;n>=0;--n)t[n]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},i.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,s=this.DB-r,i=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&i)<<s,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&i)<<s),t.t=this.t-n,t.clamp()}},i.prototype.subTo=function(e,t){for(var n=0,r=0,s=Math.min(e.t,this.t);n<s;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},i.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),s=n.t;for(t.t=s+r.t;--s>=0;)t[s]=0;for(s=0;s<r.t;++s)t[s+n.t]=n.am(0,r[s],t,s,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&i.ZERO.subTo(t,t)},i.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},i.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var s=this.abs();if(s.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=o());var a=o(),c=this.s,l=e.s,u=this.DB-d(r[r.t-1]);u>0?(r.lShiftTo(u,a),s.lShiftTo(u,n)):(r.copyTo(a),s.copyTo(n));var p=a.t,h=a[p-1];if(0!==h){var f=h*(1<<this.F1)+(p>1?a[p-2]>>this.F2:0),m=this.FV/f,g=(1<<this.F1)/f,v=1<<this.F2,y=n.t,b=y-p,w=null==t?o():t;for(a.dlShiftTo(b,w),n.compareTo(w)>=0&&(n[n.t++]=1,n.subTo(w,n)),i.ONE.dlShiftTo(p,w),w.subTo(a,a);a.t<p;)a[a.t++]=0;for(;--b>=0;){var S=n[--y]==h?this.DM:Math.floor(n[y]*m+(n[y-1]+v)*g);if((n[y]+=a.am(0,S,n,b,0,p))<S)for(a.dlShiftTo(b,w),n.subTo(w,n);n[y]<--S;)n.subTo(w,n)}null!=t&&(n.drShiftTo(p,t),c!=l&&i.ZERO.subTo(t,t)),n.t=p,n.clamp(),u>0&&n.rShiftTo(u,n),c<0&&i.ZERO.subTo(n,n)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},i.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},i.prototype.exp=function(e,t){if(e>4294967295||e<1)return i.ONE;var n=o(),r=o(),s=t.convert(this),a=d(e)-1;for(s.copyTo(n);--a>=0;)if(t.sqrTo(n,r),(e&1<<a)>0)t.mulTo(r,s,n);else{var c=n;n=r,r=c}return t.revert(n)},i.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},i.prototype.toRadix=function(e){if(null==e&&(e=10),0===this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=h(n),s=o(),i=o(),a="";for(this.divRemTo(r,s,i);s.signum()>0;)a=(n+i.intValue()).toString(e).substr(1)+a,s.divRemTo(r,s,i);return i.intValue().toString(e)+a},i.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),s=!1,o=0,a=0,c=0;c<e.length;++c){var l=p(e,c);l<0?"-"==e.charAt(c)&&0===this.signum()&&(s=!0):(a=t*a+l,++o>=n&&(this.dMultiply(r),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(a,0)),s&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(e,t){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e),this.testBit(e-1)||this.bitwiseTo(i.ONE.shiftLeft(e-1),v,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(i.ONE.shiftLeft(e-1),this);else{var n=r.randomBytes(1+(e>>3)),s=7&e;s>0?n[0]&=(1<<s)-1:n[0]=0,this.fromByteArray(n)}},i.prototype.bitwiseTo=function(e,t,n){var r,s,i=Math.min(e.t,this.t);for(r=0;r<i;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(s=e.s&this.DM,r=i;r<this.t;++r)n[r]=t(this[r],s);n.t=this.t}else{for(s=this.s&this.DM,r=i;r<e.t;++r)n[r]=t(s,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},i.prototype.changeBit=function(e,t){var n=i.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},i.prototype.addTo=function(e,t){for(var n=0,r=0,s=Math.min(e.t,this.t);n<s;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},i.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(e,t){if(0!==e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},i.prototype.multiplyLowerTo=function(e,t,n){var r,s=Math.min(this.t+e.t,t);for(n.s=0,n.t=s;s>0;)n[--s]=0;for(r=n.t-this.t;s<r;++s)n[s+this.t]=this.am(0,e[s],n,s,0,this.t);for(r=Math.min(e.t,t);s<r;++s)this.am(0,e[s],n,s,0,t-s);n.clamp()},i.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},i.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0===t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},i.prototype.millerRabin=function(e){var t=this.subtract(i.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);(e=e+1>>1)>T.length&&(e=T.length);for(var s=o(),a=0;a<e;++a){s.fromInt(T[Math.floor(Math.random()*T.length)]);var c=s.modPow(r,this);if(0!=c.compareTo(i.ONE)&&0!=c.compareTo(t)){for(var l=1;l++<n&&0!=c.compareTo(t);)if(0===(c=c.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},i.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,s=!1,i="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(s=!0,i=u(n));o>=0;)a<t?(n=(this[o]&(1<<a)-1)<<t-a,n|=this[--o]>>(a+=this.DB-t)):(n=this[o]>>(a-=t)&r,a<=0&&(a+=this.DB,--o)),n>0&&(s=!0),s&&(i+=u(n));return s?i:"0"},i.prototype.negate=function(){var e=o();return i.ZERO.subTo(this,e),e},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this[this.t-1]^this.s&this.DM)},i.prototype.mod=function(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(i.ZERO)>0&&e.subTo(t,t),t},i.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new f(t):new m(t),this.exp(e,n)},i.prototype.clone=function(){var e=o();return this.copyTo(e),e},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},i.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,s=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[s++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0===s&&(128&this.s)!=(128&n)&&++s,(s>0||n!=this.s)&&(t[s++]=n);return t},i.prototype.toBuffer=function(e){var t=Buffer.from(this.toByteArray());if(!0===e&&0===t[0])t=t.slice(1);else if(s.isNumber(e)){if(t.length>e){for(var n=0;n<t.length-e;n++)if(0!==t[n])return null;return t.slice(t.length-e)}if(t.length<e){var r=Buffer.alloc(e);return r.fill(0,0,e-t.length),t.copy(r,e-t.length),r}}return t},i.prototype.equals=function(e){return 0==this.compareTo(e)},i.prototype.min=function(e){return this.compareTo(e)<0?this:e},i.prototype.max=function(e){return this.compareTo(e)>0?this:e},i.prototype.and=function(e){var t=o();return this.bitwiseTo(e,g,t),t},i.prototype.or=function(e){var t=o();return this.bitwiseTo(e,v,t),t},i.prototype.xor=function(e){var t=o();return this.bitwiseTo(e,y,t),t},i.prototype.andNot=function(e){var t=o();return this.bitwiseTo(e,b,t),t},i.prototype.not=function(){for(var e=o(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},i.prototype.shiftLeft=function(e){var t=o();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},i.prototype.shiftRight=function(e){var t=o();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},i.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+w(this[e]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=S(this[n]^t);return e},i.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},i.prototype.setBit=function(e){return this.changeBit(e,v)},i.prototype.clearBit=function(e){return this.changeBit(e,b)},i.prototype.flipBit=function(e){return this.changeBit(e,y)},i.prototype.add=function(e){var t=o();return this.addTo(e,t),t},i.prototype.subtract=function(e){var t=o();return this.subTo(e,t),t},i.prototype.multiply=function(e){var t=o();return this.multiplyTo(e,t),t},i.prototype.divide=function(e){var t=o();return this.divRemTo(e,t,null),t},i.prototype.remainder=function(e){var t=o();return this.divRemTo(e,null,t),t},i.prototype.divideAndRemainder=function(e){var t=o(),n=o();return this.divRemTo(e,t,n),new Array(t,n)},i.prototype.modPow=function(e,t){var n,r,s=e.bitLength(),i=h(1);if(s<=0)return i;n=s<18?1:s<48?3:s<144?4:s<768?5:6,r=s<8?new f(t):t.isEven()?new x(t):new m(t);var a=new Array,c=3,l=n-1,u=(1<<n)-1;if(a[1]=r.convert(this),n>1){var p=o();for(r.sqrTo(a[1],p);c<=u;)a[c]=o(),r.mulTo(p,a[c-2],a[c]),c+=2}var g,v,y=e.t-1,b=!0,w=o();for(s=d(e[y])-1;y>=0;){for(s>=l?g=e[y]>>s-l&u:(g=(e[y]&(1<<s+1)-1)<<l-s,y>0&&(g|=e[y-1]>>this.DB+s-l)),c=n;0==(1&g);)g>>=1,--c;if((s-=c)<0&&(s+=this.DB,--y),b)a[g].copyTo(i),b=!1;else{for(;c>1;)r.sqrTo(i,w),r.sqrTo(w,i),c-=2;c>0?r.sqrTo(i,w):(v=i,i=w,w=v),r.mulTo(w,a[g],i)}for(;y>=0&&0==(e[y]&1<<s);)r.sqrTo(i,w),v=i,i=w,w=v,--s<0&&(s=this.DB-1,--y)}return r.revert(i)},i.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0===e.signum())return i.ZERO;for(var n=e.clone(),r=this.clone(),s=h(1),o=h(0),a=h(0),c=h(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),t?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(e,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);n.compareTo(r)>=0?(n.subTo(r,n),t&&s.subTo(a,s),o.subTo(c,o)):(r.subTo(n,r),t&&a.subTo(s,a),c.subTo(o,c))}return 0!=r.compareTo(i.ONE)?i.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},i.prototype.pow=function(e){return this.exp(e,new E)},i.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var s=t.getLowestSetBit(),i=n.getLowestSetBit();if(i<0)return t;for(s<i&&(i=s),i>0&&(t.rShiftTo(i,t),n.rShiftTo(i,n));t.signum()>0;)(s=t.getLowestSetBit())>0&&t.rShiftTo(s,t),(s=n.getLowestSetBit())>0&&n.rShiftTo(s,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return i>0&&n.lShiftTo(i,n),n},i.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=T[T.length-1]){for(t=0;t<T.length;++t)if(n[0]==T[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<T.length;){for(var r=T[t],s=t+1;s<T.length&&r<C;)r*=T[s++];for(r=n.modInt(r);t<s;)if(r%T[t++]==0)return!1}return n.millerRabin(e)},i.int2char=u,i.ZERO=h(0),i.ONE=h(1),i.prototype.square=function(){var e=o();return this.squareTo(e),e},e.exports=i},450:(e,t,n)=>{var r=n(3016)._,s=(n(6113),n(6200)),i=n(3016),o=n(5954),a=n(6591);t.BigInteger=s,e.exports.Key=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.setOptions=function(e){var t=o[e.signingScheme],n=o[e.encryptionScheme];t===n?this.signingScheme=this.encryptionScheme=n.makeScheme(this,e):(this.encryptionScheme=n.makeScheme(this,e),this.signingScheme=t.makeScheme(this,e)),this.encryptEngine=a.getEngine(this,e)},e.prototype.generate=function(e,t){var n=e>>1;this.e=parseInt(t,16);for(var r=new s(t,16);;){for(;this.p=new s(e-n,1),0!==this.p.subtract(s.ONE).gcd(r).compareTo(s.ONE)||!this.p.isProbablePrime(10););for(;this.q=new s(n,1),0!==this.q.subtract(s.ONE).gcd(r).compareTo(s.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var i=this.p;this.p=this.q,this.q=i}var o=this.p.subtract(s.ONE),a=this.q.subtract(s.ONE),c=o.multiply(a);if(0===c.gcd(r).compareTo(s.ONE)){if(this.n=this.p.multiply(this.q),this.n.bitLength()<e)continue;this.d=r.modInverse(c),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.$$recalculateCache()},e.prototype.setPrivate=function(e,t,n,o,a,c,l,u){if(!(e&&t&&n&&e.length>0&&(r.isNumber(t)||t.length>0)&&n.length>0))throw Error("Invalid RSA private key");this.n=new s(e),this.e=r.isNumber(t)?t:i.get32IntFromBuffer(t,0),this.d=new s(n),o&&a&&c&&l&&u&&(this.p=new s(o),this.q=new s(a),this.dmp1=new s(c),this.dmq1=new s(l),this.coeff=new s(u)),this.$$recalculateCache()},e.prototype.setPublic=function(e,t){if(!(e&&t&&e.length>0&&(r.isNumber(t)||t.length>0)))throw Error("Invalid RSA public key");this.n=new s(e),this.e=r.isNumber(t)?t:i.get32IntFromBuffer(t,0),this.$$recalculateCache()},e.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},e.prototype.$doPublic=function(e){return e.modPowInt(this.e,this.n)},e.prototype.encrypt=function(e,t){var n=[],r=[],s=e.length,i=Math.ceil(s/this.maxMessageLength)||1,o=Math.ceil(s/i||1);if(1==i)n.push(e);else for(var a=0;a<i;a++)n.push(e.slice(a*o,(a+1)*o));for(var c=0;c<n.length;c++)r.push(this.encryptEngine.encrypt(n[c],t));return Buffer.concat(r)},e.prototype.decrypt=function(e,t){if(e.length%this.encryptedDataLength>0)throw Error("Incorrect data or key");for(var n=[],r=0,s=0,i=e.length/this.encryptedDataLength,o=0;o<i;o++)s=(r=o*this.encryptedDataLength)+this.encryptedDataLength,n.push(this.encryptEngine.decrypt(e.slice(r,Math.min(s,e.length)),t));return Buffer.concat(n)},e.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},e.prototype.verify=function(e,t,n){return this.signingScheme.verify.apply(this.signingScheme,arguments)},e.prototype.isPrivate=function(){return!!(this.n&&this.e&&this.d)},e.prototype.isPublic=function(e){return this.n&&this.e&&!(e&&this.d)||!1},Object.defineProperty(e.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(e.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(e.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),e.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},e}()},2313:(e,t,n)=>{n(6200);var r=n(6113);e.exports={isEncryption:!0,isSignature:!1},e.exports.digestLength={md4:16,md5:16,ripemd160:20,rmd160:20,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64};var s="sha1";e.exports.eme_oaep_mgf1=function(t,n,i){i=i||s;for(var o=e.exports.digestLength[i],a=Math.ceil(n/o),c=Buffer.alloc(o*a),l=Buffer.alloc(4),u=0;u<a;++u){var p=r.createHash(i);p.update(t),l.writeUInt32BE(u,0),p.update(l),p.digest().copy(c,u*o)}return c.slice(0,n)},e.exports.makeScheme=function(t,n){function i(e,t){this.key=e,this.options=t}return i.prototype.maxMessageLength=function(){return this.key.encryptedDataLength-2*e.exports.digestLength[this.options.encryptionSchemeOptions.hash||s]-2},i.prototype.encPad=function(t){var n=this.options.encryptionSchemeOptions.hash||s,i=this.options.encryptionSchemeOptions.mgf||e.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||Buffer.alloc(0),a=this.key.encryptedDataLength,c=e.exports.digestLength[n];if(t.length>a-2*c-2)throw new Error("Message is too long to encode into an encoded message with a length of "+a+" bytes, increaseemLen to fix this error (minimum value for given parameters and options: "+(a-2*c-2)+")");var l=r.createHash(n);l.update(o),l=l.digest();var u=Buffer.alloc(a-t.length-2*c-1);u.fill(0),u[u.length-1]=1;for(var p=Buffer.concat([l,u,t]),h=r.randomBytes(c),d=i(h,p.length,n),f=0;f<p.length;f++)p[f]^=d[f];for(d=i(p,c,n),f=0;f<h.length;f++)h[f]^=d[f];var m=Buffer.alloc(1+h.length+p.length);return m[0]=0,h.copy(m,1),p.copy(m,1+h.length),m},i.prototype.encUnPad=function(t){var n=this.options.encryptionSchemeOptions.hash||s,i=this.options.encryptionSchemeOptions.mgf||e.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||Buffer.alloc(0),a=e.exports.digestLength[n];if(t.length<2*a+2)throw new Error("Error decoding message, the supplied message is not long enough to be a valid OAEP encoded message");for(var c=t.slice(1,a+1),l=t.slice(1+a),u=i(l,a,n),p=0;p<c.length;p++)c[p]^=u[p];for(u=i(c,l.length,n),p=0;p<l.length;p++)l[p]^=u[p];var h=r.createHash(n);if(h.update(o),h=h.digest(),l.slice(0,a).toString("hex")!=h.toString("hex"))throw new Error("Error decoding message, the lHash calculated from the label provided and the lHash in the encrypted data do not match.");for(p=a;0===l[p++]&&p<l.length;);if(1!=l[p-1])throw new Error("Error decoding message, there is no padding message separator byte");return l.slice(p)},new i(t,n)}},1381:(e,t,n)=>{var r=n(6200),s=n(6113),i=n(2057),o={md2:Buffer.from("3020300c06082a864886f70d020205000410","hex"),md5:Buffer.from("3020300c06082a864886f70d020505000410","hex"),sha1:Buffer.from("3021300906052b0e03021a05000414","hex"),sha224:Buffer.from("302d300d06096086480165030402040500041c","hex"),sha256:Buffer.from("3031300d060960864801650304020105000420","hex"),sha384:Buffer.from("3041300d060960864801650304020205000430","hex"),sha512:Buffer.from("3051300d060960864801650304020305000440","hex"),ripemd160:Buffer.from("3021300906052b2403020105000414","hex"),rmd160:Buffer.from("3021300906052b2403020105000414","hex")},a={ripemd160:"rmd160"},c="sha256";e.exports={isEncryption:!0,isSignature:!0},e.exports.makeScheme=function(e,t){function n(e,t){this.key=e,this.options=t}return n.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==i.RSA_NO_PADDING?this.key.encryptedDataLength:this.key.encryptedDataLength-11},n.prototype.encPad=function(e,t){var n;if(t=t||{},e.length>this.key.maxMessageLength)throw new Error("Message too long for RSA (n="+this.key.encryptedDataLength+", l="+e.length+")");if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==i.RSA_NO_PADDING)return(n=Buffer.alloc(this.key.maxMessageLength-e.length)).fill(0),Buffer.concat([n,e]);if(1===t.type)return(n=Buffer.alloc(this.key.encryptedDataLength-e.length-1)).fill(255,0,n.length-1),n[0]=1,n[n.length-1]=0,Buffer.concat([n,e]);(n=Buffer.alloc(this.key.encryptedDataLength-e.length))[0]=0,n[1]=2;for(var r=s.randomBytes(n.length-3),o=0;o<r.length;o++){for(var a=r[o];0===a;)a=s.randomBytes(1)[0];n[o+2]=a}return n[n.length-1]=0,Buffer.concat([n,e])},n.prototype.encUnPad=function(e,t){t=t||{};var n=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==i.RSA_NO_PADDING)return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length);if(e.length<4)return null;if(1===t.type){if(0!==e[0]||1!==e[1])return null;for(n=3;0!==e[n];)if(255!=e[n]||++n>=e.length)return null}else{if(0!==e[0]||2!==e[1])return null;for(n=3;0!==e[n];)if(++n>=e.length)return null}return e.slice(n+1,e.length)},n.prototype.sign=function(e){var t=this.options.signingSchemeOptions.hash||c;if("browser"===this.options.environment){t=a[t]||t;var n=s.createHash(t);n.update(e);var i=this.pkcs1pad(n.digest(),t);return this.key.$doPrivate(new r(i)).toBuffer(this.key.encryptedDataLength)}var o=s.createSign("RSA-"+t.toUpperCase());return o.update(e),o.sign(this.options.rsaUtils.exportKey("private"))},n.prototype.verify=function(e,t,n){if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==i.RSA_NO_PADDING)return!1;var o=this.options.signingSchemeOptions.hash||c;if("browser"===this.options.environment){o=a[o]||o,n&&(t=Buffer.from(t,n));var l=s.createHash(o);l.update(e);var u=this.pkcs1pad(l.digest(),o);return this.key.$doPublic(new r(t)).toBuffer().toString("hex")==u.toString("hex")}var p=s.createVerify("RSA-"+o.toUpperCase());return p.update(e),p.verify(this.options.rsaUtils.exportKey("public"),t,n)},n.prototype.pkcs0pad=function(e){var t=Buffer.alloc(this.key.maxMessageLength-e.length);return t.fill(0),Buffer.concat([t,e])},n.prototype.pkcs0unpad=function(e){return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length)},n.prototype.pkcs1pad=function(e,t){var n=o[t];if(!n)throw Error("Unsupported hash algorithm");var r=Buffer.concat([n,e]);if(r.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+t+")");var s=Buffer.alloc(this.key.encryptedDataLength-r.length-1);return s.fill(255,0,s.length-1),s[0]=1,s[s.length-1]=0,Buffer.concat([s,r])},new n(e,t)}},7971:(e,t,n)=>{var r=n(6200),s=n(6113);e.exports={isEncryption:!1,isSignature:!0};var i="sha1";e.exports.makeScheme=function(e,t){var o=n(5954).pkcs1_oaep;function a(e,t){this.key=e,this.options=t}return a.prototype.sign=function(e){var t=s.createHash(this.options.signingSchemeOptions.hash||i);t.update(e);var n=this.emsa_pss_encode(t.digest(),this.key.keySize-1);return this.key.$doPrivate(new r(n)).toBuffer(this.key.encryptedDataLength)},a.prototype.verify=function(e,t,n){n&&(t=Buffer.from(t,n)),t=new r(t);var o=Math.ceil((this.key.keySize-1)/8),a=this.key.$doPublic(t).toBuffer(o),c=s.createHash(this.options.signingSchemeOptions.hash||i);return c.update(e),this.emsa_pss_verify(c.digest(),a,this.key.keySize-1)},a.prototype.emsa_pss_encode=function(e,t){var n=this.options.signingSchemeOptions.hash||i,r=this.options.signingSchemeOptions.mgf||o.eme_oaep_mgf1,a=this.options.signingSchemeOptions.saltLength||20,c=o.digestLength[n],l=Math.ceil(t/8);if(l<c+a+2)throw new Error("Output length passed to emBits("+t+") is too small for the options specified("+n+", "+a+"). To fix this issue increase the value of emBits. (minimum size: "+(8*c+8*a+9)+")");var u=s.randomBytes(a),p=Buffer.alloc(8+c+a);p.fill(0,0,8),e.copy(p,8),u.copy(p,8+e.length);var h=s.createHash(n);h.update(p),h=h.digest();var d=Buffer.alloc(l-u.length-c-2);d.fill(0);var f=Buffer.alloc(d.length+1+u.length);d.copy(f),f[d.length]=1,u.copy(f,d.length+1);for(var m=r(h,f.length,n),g=Buffer.alloc(f.length),v=0;v<m.length;v++)g[v]=f[v]^m[v];var y=8*l-t,b=255^255>>8-y<<8-y;g[0]=g[0]&b;var w=Buffer.alloc(g.length+h.length+1);return g.copy(w,0),h.copy(w,g.length),w[w.length-1]=188,w},a.prototype.emsa_pss_verify=function(e,t,n){var r=this.options.signingSchemeOptions.hash||i,a=this.options.signingSchemeOptions.mgf||o.eme_oaep_mgf1,c=this.options.signingSchemeOptions.saltLength||20,l=o.digestLength[r],u=Math.ceil(n/8);if(u<l+c+2||188!=t[t.length-1])return!1;var p=Buffer.alloc(u-l-1);t.copy(p,0,0,u-l-1);for(var h=0,d=0,f=8*u-n;d<f;d++)h|=1<<7-d;if(0!=(p[0]&h))return!1;var m=t.slice(u-l-1,u-1),g=a(m,p.length,r);for(d=0;d<p.length;d++)p[d]^=g[d];for(h=255^255>>8-(f=8*u-n)<<8-f,p[0]=p[0]&h,d=0;0===p[d]&&d<p.length;d++);if(1!=p[d])return!1;var v=p.slice(p.length-c),y=Buffer.alloc(8+l+c);y.fill(0,0,8),e.copy(y,8),v.copy(y,8+e.length);var b=s.createHash(r);return b.update(y),b=b.digest(),m.toString("hex")===b.toString("hex")},new a(e,t)}},5954:(e,t,n)=>{e.exports={pkcs1:n(1381),pkcs1_oaep:n(2313),pss:n(7971),isEncryption:function(t){return e.exports[t]&&e.exports[t].isEncryption},isSignature:function(t){return e.exports[t]&&e.exports[t].isSignature}}},3016:(e,t,n)=>{n(6113),e.exports.linebrk=function(e,t){for(var n="",r=0;r+t<e.length;)n+=e.substring(r,r+t)+"\n",r+=t;return n+e.substring(r,e.length)},e.exports.detectEnvironment=function(){return"undefined"==typeof window||!window||process&&"node"===process.title?"node":"browser"},e.exports.get32IntFromBuffer=function(e,t){var n;if(t=t||0,(n=e.length-t)>0){if(n>=4)return e.readUIntBE(t,n);for(var r=0,s=t+n,i=0;s>t;s--,i+=2)r+=e[s-1]*Math.pow(16,i);return r}return NaN},e.exports._={isObject:function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e||!isNaN(parseFloat(e))&&isFinite(e)},omit:function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&r!==t&&(n[r]=e[r]);return n}},e.exports.trimSurroundingText=function(e,t,n){var r=0,s=e.length,i=e.indexOf(t);i>=0&&(r=i+t.length);var o=e.indexOf(n,i);return o>=0&&(s=o),e.substring(r,s)}},328:(e,t,n)=>{"use strict";var r=n(7310).parse,s={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},i=String.prototype.endsWith||function(e){return e.length<=this.length&&-1!==this.indexOf(e,this.length-e.length)};function o(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}t.getProxyForUrl=function(e){var t="string"==typeof e?r(e):e||{},n=t.protocol,a=t.host,c=t.port;if("string"!=typeof a||!a||"string"!=typeof n)return"";if(n=n.split(":",1)[0],!function(e,t){var n=(o("npm_config_no_proxy")||o("no_proxy")).toLowerCase();return!n||"*"!==n&&n.split(/[,\s]/).every((function(n){if(!n)return!0;var r=n.match(/^(.+):(\d+)$/),s=r?r[1]:n,o=r?parseInt(r[2]):0;return!(!o||o===t)||(/^[.*]/.test(s)?("*"===s.charAt(0)&&(s=s.slice(1)),!i.call(e,s)):e!==s)}))}(a=a.replace(/:\d*$/,""),c=parseInt(c)||s[n]||0))return"";var l=o("npm_config_"+n+"_proxy")||o(n+"_proxy")||o("npm_config_proxy")||o("all_proxy");return l&&-1===l.indexOf("://")&&(l=n+"://"+l),l}},443:(e,t,n)=>{"use strict";var r,s=n(4300),i=s.Buffer,o={};for(r in s)s.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(o[r]=s[r]);var a=o.Buffer={};for(r in i)i.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(a[r]=i[r]);if(o.Buffer.prototype=i.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return i(e,t,n)}),a.alloc||(a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=i(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!o.kStringMaxLength)try{o.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),e.exports=o},6795:(e,t,n)=>{"use strict";const r=n(2037),s=n(9002),i=process.env;let o;function a(e){const t=function(e){if(!1===o)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(e&&!e.isTTY&&!0!==o)return 0;const t=o?1:0;if("win32"===process.platform){const e=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((e=>e in i))||"codeship"===i.CI_NAME?1:t;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if("truecolor"===i.COLORTERM)return 3;if("TERM_PROGRAM"in i){const e=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:(i.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}s("no-color")||s("no-colors")||s("color=false")?o=!1:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(o=!0),"FORCE_COLOR"in i&&(o=0===i.FORCE_COLOR.length||0!==parseInt(i.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},901:(e,t,n)=>{var r=n(4957).strict;e.exports=function(e){if(r(e)){var t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return Buffer.from(e)}},533:e=>{"use strict";e.exports=function(e){const t=e.length;let n=0;for(;n<t;)if(0==(128&e[n]))n++;else if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0}},3682:(e,t,n)=>{"use strict";try{e.exports=n(816)(__dirname)}catch(t){e.exports=n(533)}},1328:(e,t,n)=>{var r=n(5195),s=n(6876),i=s;i.v1=r,i.v4=s,e.exports=i},6746:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,s=t;return[s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]]].join("")}},2373:(e,t,n)=>{var r=n(6113);e.exports=function(){return r.randomBytes(16)}},5195:(e,t,n)=>{var r,s,i=n(2373),o=n(6746),a=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],p=(e=e||{}).node||r,h=void 0!==e.clockseq?e.clockseq:s;if(null==p||null==h){var d=i();null==p&&(p=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=s=16383&(d[6]<<8|d[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=f-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||f>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=m,s=h;var v=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var y=f/4294967296*1e4&268435455;u[l++]=y>>>8&255,u[l++]=255&y,u[l++]=y>>>24&15|16,u[l++]=y>>>16&255,u[l++]=h>>>8|128,u[l++]=255&h;for(var b=0;b<6;++b)u[l+b]=p[b];return t||o(u)}},6876:(e,t,n)=>{var r=n(2373),s=n(6746);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[i+a]=o[a];return t||s(o)}},2962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8957),s=n(5897);var i;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||s.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(i=t.CancellationToken||(t.CancellationToken={}));const o=Object.freeze((function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?o:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}dispose(){this.cancel()}}},8957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}},function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class n{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,r=0,s=this._callbacks.length;r<s;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0),s=0,i=n.length;s<i;s++)try{t.push(n[s].apply(r[s],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,s)=>{let i;return this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),i={dispose:()=>{this._callbacks.remove(e,t),i.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(s)&&s.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}r._noop=function(){},t.Emitter=r},5897:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))}},4274:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(n=t.Touch||(t.Touch={})),t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,r=n.None){let s=this._map.get(e);if(s)s.value=t,r!==n.None&&this.touch(s,r);else{switch(s={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(s);break;case n.First:this.addItemFirst(s);break;case n.Last:default:this.addItemLast(s)}this._map.set(e,s),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===n.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},5844:(e,t,n)=>{"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const s=n(5897),i=n(1907);t.RequestType=i.RequestType,t.RequestType0=i.RequestType0,t.RequestType1=i.RequestType1,t.RequestType2=i.RequestType2,t.RequestType3=i.RequestType3,t.RequestType4=i.RequestType4,t.RequestType5=i.RequestType5,t.RequestType6=i.RequestType6,t.RequestType7=i.RequestType7,t.RequestType8=i.RequestType8,t.RequestType9=i.RequestType9,t.ResponseError=i.ResponseError,t.ErrorCodes=i.ErrorCodes,t.NotificationType=i.NotificationType,t.NotificationType0=i.NotificationType0,t.NotificationType1=i.NotificationType1,t.NotificationType2=i.NotificationType2,t.NotificationType3=i.NotificationType3,t.NotificationType4=i.NotificationType4,t.NotificationType5=i.NotificationType5,t.NotificationType6=i.NotificationType6,t.NotificationType7=i.NotificationType7,t.NotificationType8=i.NotificationType8,t.NotificationType9=i.NotificationType9;const o=n(8152);t.MessageReader=o.MessageReader,t.StreamMessageReader=o.StreamMessageReader,t.IPCMessageReader=o.IPCMessageReader,t.SocketMessageReader=o.SocketMessageReader;const a=n(1618);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const c=n(8957);t.Disposable=c.Disposable,t.Event=c.Event,t.Emitter=c.Emitter;const l=n(2962);t.CancellationTokenSource=l.CancellationTokenSource,t.CancellationToken=l.CancellationToken;const u=n(4274);var p,h,d,f,m,g,v;r(n(3718)),r(n(2351)),function(e){e.type=new i.NotificationType("$/cancelRequest")}(p||(p={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(h=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(d=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new i.NotificationType("$/setTraceNotification")}(f=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new i.NotificationType("$/logTraceNotification")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(g=t.ConnectionErrors||(t.ConnectionErrors={}));class y extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,y.prototype)}}function b(e,t,n,r){let o=0,a=0,b=0;const w="2.0";let S,E,_,x,T=Object.create(null),C=Object.create(null),P=new u.LinkedMap,A=Object.create(null),R=Object.create(null),I=h.Off,k=d.Text,O=v.New,M=new c.Emitter,D=new c.Emitter,N=new c.Emitter,L=new c.Emitter;function j(e){return"req-"+e.toString()}function q(e){}function B(){return O===v.Listening}function F(){return O===v.Closed}function U(){return O===v.Disposed}function $(){O!==v.New&&O!==v.Listening||(O=v.Closed,D.fire(void 0))}function H(){_||0===P.size||(_=setImmediate((()=>{_=void 0,function(){if(0===P.size)return;let e=P.shift();try{i.isRequestMessage(e)?function(e){if(U())return;function n(n,r,s){let o={jsonrpc:w,id:e.id};n instanceof i.ResponseError?o.error=n.toJson():o.result=void 0===n?null:n,K(o,r,s),t.write(o)}function r(n,r,s){let i={jsonrpc:w,id:e.id,error:n.toJson()};K(i,r,s),t.write(i)}!function(e){if(I!==h.Off&&x)if(k===d.Text){let t;I===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),x.log(`Received request '${e.method} - (${e.id})'.`,t)}else V("receive-request",e)}(e);let o,a,c=T[e.method];c&&(o=c.type,a=c.handler);let u=Date.now();if(a||S){let c=new l.CancellationTokenSource,p=String(e.id);R[p]=c;try{let l;l=void 0===e.params||void 0!==o&&0===o.numberOfParams?a?a(c.token):S(e.method,c.token):s.array(e.params)&&(void 0===o||o.numberOfParams>1)?a?a(...e.params,c.token):S(e.method,...e.params,c.token):a?a(e.params,c.token):S(e.method,e.params,c.token);let h=l;l?h.then?h.then((t=>{delete R[p],n(t,e.method,u)}),(t=>{delete R[p],t instanceof i.ResponseError?r(t,e.method,u):t&&s.string(t.message)?r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)})):(delete R[p],n(l,e.method,u)):(delete R[p],function(n,r,s){void 0===n&&(n=null);let i={jsonrpc:w,id:e.id,result:n};K(i,r,s),t.write(i)}(l,e.method,u))}catch(t){delete R[p],t instanceof i.ResponseError?n(t,e.method,u):t&&s.string(t.message)?r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else r(new i.ResponseError(i.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):i.isNotificationMessage(e)?function(e){if(U())return;let t,r;if(e.method===p.type.method)r=e=>{let t=e.id,n=R[String(t)];n&&n.cancel()};else{let n=C[e.method];n&&(r=n.handler,t=n.type)}if(r||E)try{!function(e){if(I!==h.Off&&x&&e.method!==m.type.method)if(k===d.Text){let t;I===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),x.log(`Received notification '${e.method}'.`,t)}else V("receive-notification",e)}(e),void 0===e.params||void 0!==t&&0===t.numberOfParams?r?r():E(e.method):s.array(e.params)&&(void 0===t||t.numberOfParams>1)?r?r(...e.params):E(e.method,...e.params):r?r(e.params):E(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else N.fire(e)}(e):i.isResponseMessage(e)?function(e){if(!U())if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),r=A[t];if(function(e,t){if(I!==h.Off&&x)if(k===d.Text){let n;if(I===h.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";x.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else x.log(`Received response ${e.id} without active response promise.`,n)}else V("receive-response",e)}(e,r),r){delete A[t];try{if(e.error){let t=e.error;r.reject(new i.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${r.method}' failed with message: ${e.message}`):n.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(s.string(t.id)||s.number(t.id)){let e=String(t.id),n=A[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{H()}}()})))}e.onClose($),e.onError((function(e){M.fire([e,void 0,void 0])})),t.onClose($),t.onError((function(e){M.fire(e)}));let z=e=>{try{if(i.isNotificationMessage(e)&&e.method===p.type.method){let n=j(e.params.id),s=P.get(n);if(i.isRequestMessage(s)){let i=r&&r.cancelUndispatched?r.cancelUndispatched(s,q):void 0;if(i&&(void 0!==i.error||void 0!==i.result))return P.delete(n),i.id=s.id,K(i,e.method,Date.now()),void t.write(i)}}!function(e,t){var n;i.isRequestMessage(t)?e.set(j(t.id),t):i.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++b).toString():"res-"+n.toString(),t):e.set("not-"+(++a).toString(),t)}(P,e)}finally{H()}};function K(e,t,n){if(I!==h.Off&&x)if(k===d.Text){let r;I===h.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),x.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else V("send-response",e)}function V(e,t){if(!x||I===h.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};x.log(n)}function W(){if(F())throw new y(g.Closed,"Connection is closed.");if(U())throw new y(g.Disposed,"Connection is disposed.")}function G(e){return void 0===e?null:e}function Y(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=null;break;case 1:n=G(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(G(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}let Q={sendNotification:(e,...n)=>{let r,i;if(W(),s.string(e))switch(r=e,n.length){case 0:i=null;break;case 1:i=n[0];break;default:i=n}else r=e.method,i=Y(e,n);let o={jsonrpc:w,method:r,params:i};!function(e){if(I!==h.Off&&x)if(k===d.Text){let t;I===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),x.log(`Sending notification '${e.method}'.`,t)}else V("send-notification",e)}(o),t.write(o)},onNotification:(e,t)=>{W(),s.func(e)?E=e:t&&(s.string(e)?C[e]={type:void 0,handler:t}:C[e.method]={type:e,handler:t})},sendRequest:(e,...n)=>{let r,a,c;if(W(),function(){if(!B())throw new Error("Call listen() first.")}(),s.string(e))switch(r=e,n.length){case 0:a=null;break;case 1:l.CancellationToken.is(n[0])?(a=null,c=n[0]):a=G(n[0]);break;default:const e=n.length-1;l.CancellationToken.is(n[e])?(c=n[e],a=2===n.length?G(n[0]):n.slice(0,e).map((e=>G(e)))):a=n.map((e=>G(e)))}else{r=e.method,a=Y(e,n);let t=e.numberOfParams;c=l.CancellationToken.is(n[t])?n[t]:void 0}let u=o++,f=new Promise(((e,n)=>{let s={jsonrpc:w,id:u,method:r,params:a},o={method:r,timerStart:Date.now(),resolve:e,reject:n};!function(e){if(I!==h.Off&&x)if(k===d.Text){let t;I===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),x.log(`Sending request '${e.method} - (${e.id})'.`,t)}else V("send-request",e)}(s);try{t.write(s)}catch(e){o.reject(new i.ResponseError(i.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),o=null}o&&(A[String(u)]=o)}));return c&&c.onCancellationRequested((()=>{Q.sendNotification(p.type,{id:u})})),f},onRequest:(e,t)=>{W(),s.func(e)?S=e:t&&(s.string(e)?T[e]={type:void 0,handler:t}:T[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let r=!1,i=d.Text;void 0!==n&&(s.boolean(n)?r=n:(r=n.sendNotification||!1,i=n.traceFormat||d.Text)),I=e,k=i,x=I===h.Off?void 0:t,!r||F()||U()||Q.sendNotification(f.type,{value:h.toString(e)})},onError:M.event,onClose:D.event,onUnhandledNotification:N.event,onDispose:L.event,dispose:()=>{if(U())return;O=v.Disposed,L.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(A).forEach((e=>{A[e].reject(n)})),A=Object.create(null),R=Object.create(null),P=new u.LinkedMap,s.func(t.dispose)&&t.dispose(),s.func(e.dispose)&&e.dispose()},listen:()=>{W(),function(){if(B())throw new y(g.AlreadyListening,"Connection is already listening")}(),O=v.Listening,e.listen(z)},inspect:()=>{console.log("inspect")}};return Q.onNotification(m.type,(e=>{I!==h.Off&&x&&x.log(e.message,I===h.Verbose?e.verbose:void 0)})),Q}t.ConnectionError=y,(t.ConnectionStrategy||(t.ConnectionStrategy={})).is=function(e){let t=e;return t&&s.func(t.cancelUndispatched)},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(v||(v={})),t.createMessageConnection=function(e,n,r,s){r||(r=t.NullLogger);let i=void 0!==(c=e).listen&&void 0===c.read?e:new o.StreamMessageReader(e);var c;let l=function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new a.StreamMessageWriter(n);return b(i,l,r,s)}},8152:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8957),s=n(5897);let i=8192,o=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0];class c{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(i)}append(e){var t=e;if("string"==typeof e){var n=e,r=Buffer.byteLength(n,this.encoding);(t=Buffer.allocUnsafe(r)).write(n,0,r,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var s=(Math.ceil((this.index+t.length)/i)+1)*i;0===this.index?(this.buffer=Buffer.allocUnsafe(s),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],s)}this.index+=t.length}tryReadHeaders(){let e,t=0;for(;t+3<this.index&&(this.buffer[t]!==o||this.buffer[t+1]!==a||this.buffer[t+2]!==o||this.buffer[t+3]!==a);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach((t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let r=t.substr(0,n),s=t.substr(n+1).trim();e[r]=s}));let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&s.func(t.listen)&&s.func(t.dispose)&&s.func(t.onError)&&s.func(t.onClose)&&s.func(t.onPartialMessage)};class l{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${s.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=l;class u extends l{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new c(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",(e=>{this.onData(e)})),this.readable.on("error",(e=>this.fireError(e))),this.readable.on("close",(()=>this.fireClose()))}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=u,t.IPCMessageReader=class extends l{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){this.process.on("message",e)}},t.SocketMessageReader=class extends u{constructor(e,t="utf-8"){super(e,t)}}},1618:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8957),s=n(5897);let i="Content-Length: ",o="\r\n";(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&s.func(t.dispose)&&s.func(t.onClose)&&s.func(t.onError)&&s.func(t.write)};class a{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${s.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=a,t.StreamMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",(e=>this.fireError(e))),this.writable.on("close",(()=>this.fireClose()))}write(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[i,n.toString(),o,o];try{this.writable.write(r.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.IPCMessageWriter=class extends a{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,(t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.SocketMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",(e=>this.fireError(e))),this.socket.on("close",(()=>this.fireClose()))}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[i,n.toString(),o,o];try{this.sending=!0,this.socket.write(r.join(""),"ascii",(n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,(t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(n){this.handleError(n,e)}}))}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},1907:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5897);var s;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(s=t.ErrorCodes||(t.ErrorCodes={}));class i extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:s.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,i.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=i;class o{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=o,t.RequestType0=class extends o{constructor(e){super(e,0),this._=void 0}},t.RequestType=class extends o{constructor(e){super(e,1),this._=void 0}},t.RequestType1=class extends o{constructor(e){super(e,1),this._=void 0}},t.RequestType2=class extends o{constructor(e){super(e,2),this._=void 0}},t.RequestType3=class extends o{constructor(e){super(e,3),this._=void 0}},t.RequestType4=class extends o{constructor(e){super(e,4),this._=void 0}},t.RequestType5=class extends o{constructor(e){super(e,5),this._=void 0}},t.RequestType6=class extends o{constructor(e){super(e,6),this._=void 0}},t.RequestType7=class extends o{constructor(e){super(e,7),this._=void 0}},t.RequestType8=class extends o{constructor(e){super(e,8),this._=void 0}},t.RequestType9=class extends o{constructor(e){super(e,9),this._=void 0}},t.NotificationType=class extends o{constructor(e){super(e,1),this._=void 0}},t.NotificationType0=class extends o{constructor(e){super(e,0),this._=void 0}},t.NotificationType1=class extends o{constructor(e){super(e,1),this._=void 0}},t.NotificationType2=class extends o{constructor(e){super(e,2),this._=void 0}},t.NotificationType3=class extends o{constructor(e){super(e,3),this._=void 0}},t.NotificationType4=class extends o{constructor(e){super(e,4),this._=void 0}},t.NotificationType5=class extends o{constructor(e){super(e,5),this._=void 0}},t.NotificationType6=class extends o{constructor(e){super(e,6),this._=void 0}},t.NotificationType7=class extends o{constructor(e){super(e,7),this._=void 0}},t.NotificationType8=class extends o{constructor(e){super(e,8),this._=void 0}},t.NotificationType9=class extends o{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},3718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1017),s=n(2037),i=n(6113),o=n(1808),a=n(8152),c=n(1618);t.generateRandomPipeName=function(){const e=i.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:r.join(s.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,r=new Promise(((e,t)=>{n=e}));return new Promise(((s,i)=>{let l=o.createServer((e=>{l.close(),n([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])}));l.on("error",i),l.listen(e,(()=>{l.removeListener("error",i),s({onConnected:()=>r})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const n=o.createConnection(e);return[new a.SocketMessageReader(n,t),new c.SocketMessageWriter(n,t)]}},2351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1808),s=n(8152),i=n(1618);t.createClientSocketTransport=function(e,t="utf-8"){let n,o=new Promise(((e,t)=>{n=e}));return new Promise(((a,c)=>{let l=r.createServer((e=>{l.close(),n([new s.SocketMessageReader(e,t),new i.SocketMessageWriter(e,t)])}));l.on("error",c),l.listen(e,"127.0.0.1",(()=>{l.removeListener("error",c),a({onConnected:()=>o})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const n=r.createConnection(e,"127.0.0.1");return[new s.SocketMessageReader(n,t),new i.SocketMessageWriter(n,t)]}},5952:function(e,t){var n;n=function(e){"use strict";const t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function n(){}const r="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;function s(e){return"object"==typeof e&&null!==e||"function"==typeof e}const i=n,o=Promise,a=Promise.prototype.then,c=Promise.resolve.bind(o),l=Promise.reject.bind(o);function u(e){return new o(e)}function p(e){return c(e)}function h(e){return l(e)}function d(e,t,n){return a.call(e,t,n)}function f(e,t,n){d(d(e,t,n),void 0,i)}function m(e,t){f(e,t)}function g(e,t){f(e,void 0,t)}function v(e,t,n){return d(e,t,n)}function y(e){d(e,void 0,i)}const b=(()=>{const e=r&&r.queueMicrotask;if("function"==typeof e)return e;const t=p(void 0);return e=>d(t,e)})();function w(e,t,n){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,n)}function S(e,t,n){try{return p(w(e,t,n))}catch(e){return h(e)}}class E{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let n=t;16383===t._elements.length&&(n={_elements:[],_next:void 0}),t._elements.push(e),n!==t&&(this._back=n,t._next=n),++this._size}shift(){const e=this._front;let t=e;const n=this._cursor;let r=n+1;const s=e._elements,i=s[n];return 16384===r&&(t=e._next,r=0),--this._size,this._cursor=r,e!==t&&(this._front=t),s[n]=void 0,i}forEach(e){let t=this._cursor,n=this._front,r=n._elements;for(;!(t===r.length&&void 0===n._next||t===r.length&&(n=n._next,r=n._elements,t=0,0===r.length));)e(r[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}function _(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?P(e):"closed"===t._state?function(e){P(e),I(e)}(e):A(e,t._storedError)}function x(e,t){return Sn(e._ownerReadableStream,t)}function T(e){"readable"===e._ownerReadableStream._state?R(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e,t){A(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))}(e),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function C(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function P(e){e._closedPromise=u(((t,n)=>{e._closedPromise_resolve=t,e._closedPromise_reject=n}))}function A(e,t){P(e),R(e,t)}function R(e,t){void 0!==e._closedPromise_reject&&(y(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function I(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const k=t("[[AbortSteps]]"),O=t("[[ErrorSteps]]"),M=t("[[CancelSteps]]"),D=t("[[PullSteps]]"),N=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},L=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function j(e,t){if(void 0!==e&&"object"!=typeof(n=e)&&"function"!=typeof n)throw new TypeError(`${t} is not an object.`);var n}function q(e,t){if("function"!=typeof e)throw new TypeError(`${t} is not a function.`)}function B(e,t){if(!function(e){return"object"==typeof e&&null!==e||"function"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function F(e,t,n){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${n}'.`)}function U(e,t,n){if(void 0===e)throw new TypeError(`${t} is required in '${n}'.`)}function $(e){return Number(e)}function H(e){return 0===e?0:e}function z(e,t){const n=Number.MAX_SAFE_INTEGER;let r=Number(e);if(r=H(r),!N(r))throw new TypeError(`${t} is not a finite number`);if(r=function(e){return H(L(e))}(r),r<0||r>n)throw new TypeError(`${t} is outside the accepted range of 0 to ${n}, inclusive`);return N(r)&&0!==r?r:0}function K(e,t){if(!bn(e))throw new TypeError(`${t} is not a ReadableStream.`)}function V(e){return new X(e)}function W(e,t){e._reader._readRequests.push(t)}function G(e,t,n){const r=e._reader._readRequests.shift();n?r._closeSteps():r._chunkSteps(t)}function Y(e){return e._reader._readRequests.length}function Q(e){const t=e._reader;return void 0!==t&&!!J(t)}class X{constructor(e){if(F(e,1,"ReadableStreamDefaultReader"),K(e,"First parameter"),wn(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");_(this,e),this._readRequests=new E}get closed(){return J(this)?this._closedPromise:h(ee("closed"))}cancel(e){return J(this)?void 0===this._ownerReadableStream?h(C("cancel")):x(this,e):h(ee("cancel"))}read(){if(!J(this))return h(ee("read"));if(void 0===this._ownerReadableStream)return h(C("read from"));let e,t;const n=u(((n,r)=>{e=n,t=r}));return Z(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),n}releaseLock(){if(!J(this))throw ee("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");T(this)}}}function J(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof X}function Z(e,t){const n=e._ownerReadableStream;n._disturbed=!0,"closed"===n._state?t._closeSteps():"errored"===n._state?t._errorSteps(n._storedError):n._readableStreamController[D](t)}function ee(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(X.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(X.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});const te=Object.getPrototypeOf(Object.getPrototypeOf((async function*(){})).prototype);class ne{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?v(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise?v(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;if(void 0===e._ownerReadableStream)return h(C("iterate"));let t,n;const r=u(((e,r)=>{t=e,n=r}));return Z(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,b((()=>t({value:e,done:!1})))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,T(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,T(e),n(t)}}),r}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(void 0===t._ownerReadableStream)return h(C("finish iterating"));if(!this._preventCancel){const n=x(t,e);return T(t),v(n,(()=>({value:e,done:!0})))}return T(t),p({value:e,done:!0})}}const re={next(){return se(this)?this._asyncIteratorImpl.next():h(ie("next"))},return(e){return se(this)?this._asyncIteratorImpl.return(e):h(ie("return"))}};function se(e){if(!s(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ne}catch(e){return!1}}function ie(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==te&&Object.setPrototypeOf(re,te);const oe=Number.isNaN||function(e){return e!=e};function ae(e){return e.slice()}function ce(e,t,n,r,s){new Uint8Array(e).set(new Uint8Array(n,r,s),t)}function le(e,t,n){if(e.slice)return e.slice(t,n);const r=n-t,s=new ArrayBuffer(r);return ce(s,0,e,t,r),s}function ue(e){const t=le(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function pe(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function he(e,t,n){if("number"!=typeof(r=n)||oe(r)||r<0||n===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var r;e._queue.push({value:t,size:n}),e._queueTotalSize+=n}function de(e){e._queue=new E,e._queueTotalSize=0}class fe{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!ve(this))throw Be("view");return this._view}respond(e){if(!ve(this))throw Be("respond");if(F(e,1,"respond"),e=z(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,Le(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!ve(this))throw Be("respondWithNewView");if(F(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");e.buffer,je(this._associatedReadableByteStreamController,e)}}Object.defineProperties(fe.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(fe.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class me{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ge(this))throw Fe("byobRequest");return De(this)}get desiredSize(){if(!ge(this))throw Fe("desiredSize");return Ne(this)}close(){if(!ge(this))throw Fe("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);ke(this)}enqueue(e){if(!ge(this))throw Fe("enqueue");if(F(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);Oe(this,e)}error(e){if(!ge(this))throw Fe("error");Me(this,e)}[M](e){be(this),de(this);const t=this._cancelAlgorithm(e);return Ie(this),t}[D](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0){const t=this._queue.shift();this._queueTotalSize-=t.byteLength,Te(this);const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return void e._chunkSteps(n)}const n=this._autoAllocateChunkSize;if(void 0!==n){let t;try{t=new ArrayBuffer(n)}catch(t){return void e._errorSteps(t)}const r={buffer:t,bufferByteLength:n,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(r)}W(t,e),ye(this)}}function ge(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof me}function ve(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof fe}function ye(e){const t=function(e){const t=e._controlledReadableByteStream;return"readable"===t._state&&!e._closeRequested&&!!e._started&&(!!(Q(t)&&Y(t)>0)||!!(ze(t)&&He(t)>0)||Ne(e)>0)}(e);t&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,f(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ye(e))}),(t=>{Me(e,t)}))))}function be(e){Ce(e),e._pendingPullIntos=new E}function we(e,t){let n=!1;"closed"===e._state&&(n=!0);const r=Se(t);"default"===t.readerType?G(e,r,n):function(e,t,n){const r=e._reader._readIntoRequests.shift();n?r._closeSteps(t):r._chunkSteps(t)}(e,r,n)}function Se(e){const t=e.bytesFilled,n=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/n)}function Ee(e,t,n,r){e._queue.push({buffer:t,byteOffset:n,byteLength:r}),e._queueTotalSize+=r}function _e(e,t){const n=t.elementSize,r=t.bytesFilled-t.bytesFilled%n,s=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),i=t.bytesFilled+s,o=i-i%n;let a=s,c=!1;o>r&&(a=o-t.bytesFilled,c=!0);const l=e._queue;for(;a>0;){const n=l.peek(),r=Math.min(a,n.byteLength),s=t.byteOffset+t.bytesFilled;ce(t.buffer,s,n.buffer,n.byteOffset,r),n.byteLength===r?l.shift():(n.byteOffset+=r,n.byteLength-=r),e._queueTotalSize-=r,xe(0,r,t),a-=r}return c}function xe(e,t,n){n.bytesFilled+=t}function Te(e){0===e._queueTotalSize&&e._closeRequested?(Ie(e),En(e._controlledReadableByteStream)):ye(e)}function Ce(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Pe(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;const t=e._pendingPullIntos.peek();_e(e,t)&&(Re(e),we(e._controlledReadableByteStream,t))}}function Ae(e,t){const n=e._pendingPullIntos.peek();Ce(e),"closed"===e._controlledReadableByteStream._state?function(e,t){const n=e._controlledReadableByteStream;if(ze(n))for(;He(n)>0;)we(n,Re(e))}(e):function(e,t,n){if(xe(0,t,n),n.bytesFilled<n.elementSize)return;Re(e);const r=n.bytesFilled%n.elementSize;if(r>0){const t=n.byteOffset+n.bytesFilled,s=le(n.buffer,t-r,t);Ee(e,s,0,s.byteLength)}n.bytesFilled-=r,we(e._controlledReadableByteStream,n),Pe(e)}(e,t,n),ye(e)}function Re(e){return e._pendingPullIntos.shift()}function Ie(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function ke(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Me(e,t),t}Ie(e),En(t)}}function Oe(e,t){const n=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==n._state)return;const r=t.buffer,s=t.byteOffset,i=t.byteLength,o=r;if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();t.buffer,t.buffer=t.buffer}Ce(e),Q(n)?0===Y(n)?Ee(e,o,s,i):(e._pendingPullIntos.length>0&&Re(e),G(n,new Uint8Array(o,s,i),!1)):ze(n)?(Ee(e,o,s,i),Pe(e)):Ee(e,o,s,i),ye(e)}function Me(e,t){const n=e._controlledReadableByteStream;"readable"===n._state&&(be(e),de(e),Ie(e),_n(n,t))}function De(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),n=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),r=Object.create(fe.prototype);!function(e,t,n){e._associatedReadableByteStreamController=t,e._view=n}(r,e,n),e._byobRequest=r}return e._byobRequest}function Ne(e){const t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function Le(e,t){const n=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+t>n.byteLength)throw new RangeError("bytesWritten out of range")}n.buffer=n.buffer,Ae(e,t)}function je(e,t){const n=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+t.byteLength>n.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const r=t.byteLength;n.buffer=t.buffer,Ae(e,r)}function qe(e,t,n,r,s,i,o){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,de(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=i,t._pullAlgorithm=r,t._cancelAlgorithm=s,t._autoAllocateChunkSize=o,t._pendingPullIntos=new E,e._readableStreamController=t,f(p(n()),(()=>{t._started=!0,ye(t)}),(e=>{Me(t,e)}))}function Be(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Fe(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ue(e){return new Ke(e)}function $e(e,t){e._reader._readIntoRequests.push(t)}function He(e){return e._reader._readIntoRequests.length}function ze(e){const t=e._reader;return void 0!==t&&!!Ve(t)}Object.defineProperties(me.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(me.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class Ke{constructor(e){if(F(e,1,"ReadableStreamBYOBReader"),K(e,"First parameter"),wn(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ge(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");_(this,e),this._readIntoRequests=new E}get closed(){return Ve(this)?this._closedPromise:h(Ge("closed"))}cancel(e){return Ve(this)?void 0===this._ownerReadableStream?h(C("cancel")):x(this,e):h(Ge("cancel"))}read(e){if(!Ve(this))return h(Ge("read"));if(!ArrayBuffer.isView(e))return h(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return h(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return h(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return h(C("read from"));let t,n;const r=u(((e,r)=>{t=e,n=r}));return We(this,e,{_chunkSteps:e=>t({value:e,done:!1}),_closeSteps:e=>t({value:e,done:!0}),_errorSteps:e=>n(e)}),r}releaseLock(){if(!Ve(this))throw Ge("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");T(this)}}}function Ve(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof Ke}function We(e,t,n){const r=e._ownerReadableStream;r._disturbed=!0,"errored"===r._state?n._errorSteps(r._storedError):function(e,t,n){const r=e._controlledReadableByteStream;let s=1;t.constructor!==DataView&&(s=t.constructor.BYTES_PER_ELEMENT);const i=t.constructor,o=t.buffer,a={buffer:o,bufferByteLength:o.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:s,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(a),void $e(r,n);if("closed"!==r._state){if(e._queueTotalSize>0){if(_e(e,a)){const t=Se(a);return Te(e),void n._chunkSteps(t)}if(e._closeRequested){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");return Me(e,t),void n._errorSteps(t)}}e._pendingPullIntos.push(a),$e(r,n),ye(e)}else{const e=new i(a.buffer,a.byteOffset,0);n._closeSteps(e)}}(r._readableStreamController,t,n)}function Ge(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Ye(e,t){const{highWaterMark:n}=e;if(void 0===n)return t;if(oe(n)||n<0)throw new RangeError("Invalid highWaterMark");return n}function Qe(e){const{size:t}=e;return t||(()=>1)}function Xe(e,t){j(e,t);const n=null==e?void 0:e.highWaterMark,r=null==e?void 0:e.size;return{highWaterMark:void 0===n?void 0:$(n),size:void 0===r?void 0:Je(r,`${t} has member 'size' that`)}}function Je(e,t){return q(e,t),t=>$(e(t))}function Ze(e,t,n){return q(e,n),n=>S(e,t,[n])}function et(e,t,n){return q(e,n),()=>S(e,t,[])}function tt(e,t,n){return q(e,n),n=>w(e,t,[n])}function nt(e,t,n){return q(e,n),(n,r)=>S(e,t,[n,r])}function rt(e,t){if(!ct(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(Ke.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Ke.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const st="function"==typeof AbortController;class it{constructor(e={},t={}){void 0===e?e=null:B(e,"First parameter");const n=Xe(t,"Second parameter"),r=function(e,t){j(e,t);const n=null==e?void 0:e.abort,r=null==e?void 0:e.close,s=null==e?void 0:e.start,i=null==e?void 0:e.type,o=null==e?void 0:e.write;return{abort:void 0===n?void 0:Ze(n,e,`${t} has member 'abort' that`),close:void 0===r?void 0:et(r,e,`${t} has member 'close' that`),start:void 0===s?void 0:tt(s,e,`${t} has member 'start' that`),write:void 0===o?void 0:nt(o,e,`${t} has member 'write' that`),type:i}}(e,"First parameter");if(at(this),void 0!==r.type)throw new RangeError("Invalid type is specified");const s=Qe(n);!function(e,t,n,r){const s=Object.create(Tt.prototype);let i=()=>{},o=()=>p(void 0),a=()=>p(void 0),c=()=>p(void 0);void 0!==t.start&&(i=()=>t.start(s)),void 0!==t.write&&(o=e=>t.write(e,s)),void 0!==t.close&&(a=()=>t.close()),void 0!==t.abort&&(c=e=>t.abort(e)),Pt(e,s,i,o,a,c,n,r)}(this,r,Ye(n,1),s)}get locked(){if(!ct(this))throw Dt("locked");return lt(this)}abort(e){return ct(this)?lt(this)?h(new TypeError("Cannot abort a stream that already has a writer")):ut(this,e):h(Dt("abort"))}close(){return ct(this)?lt(this)?h(new TypeError("Cannot close a stream that already has a writer")):mt(this)?h(new TypeError("Cannot close an already-closing stream")):pt(this):h(Dt("close"))}getWriter(){if(!ct(this))throw Dt("getWriter");return ot(this)}}function ot(e){return new yt(e)}function at(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new E,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function ct(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof it}function lt(e){return void 0!==e._writer}function ut(e,t){var n;if("closed"===e._state||"errored"===e._state)return p(void 0);e._writableStreamController._abortReason=t,null===(n=e._writableStreamController._abortController)||void 0===n||n.abort();const r=e._state;if("closed"===r||"errored"===r)return p(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let s=!1;"erroring"===r&&(s=!0,t=void 0);const i=u(((n,r)=>{e._pendingAbortRequest={_promise:void 0,_resolve:n,_reject:r,_reason:t,_wasAlreadyErroring:s}}));return e._pendingAbortRequest._promise=i,s||dt(e,t),i}function pt(e){const t=e._state;if("closed"===t||"errored"===t)return h(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const n=u(((t,n)=>{const r={_resolve:t,_reject:n};e._closeRequest=r})),r=e._writer;var s;return void 0!==r&&e._backpressure&&"writable"===t&&Vt(r),he(s=e._writableStreamController,xt,0),It(s),n}function ht(e,t){"writable"!==e._state?ft(e):dt(e,t)}function dt(e,t){const n=e._writableStreamController;e._state="erroring",e._storedError=t;const r=e._writer;void 0!==r&&St(r,t),!function(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&n._started&&ft(e)}function ft(e){e._state="errored",e._writableStreamController[O]();const t=e._storedError;if(e._writeRequests.forEach((e=>{e._reject(t)})),e._writeRequests=new E,void 0===e._pendingAbortRequest)return void gt(e);const n=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,n._wasAlreadyErroring)return n._reject(t),void gt(e);f(e._writableStreamController[k](n._reason),(()=>{n._resolve(),gt(e)}),(t=>{n._reject(t),gt(e)}))}function mt(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function gt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&Ft(t,e._storedError)}function vt(e,t){const n=e._writer;void 0!==n&&t!==e._backpressure&&(t?function(e){$t(e)}(n):Vt(n)),e._backpressure=t}Object.defineProperties(it.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(it.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});class yt{constructor(e){if(F(e,1,"WritableStreamDefaultWriter"),rt(e,"First parameter"),lt(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const t=e._state;if("writable"===t)!mt(e)&&e._backpressure?$t(this):zt(this),qt(this);else if("erroring"===t)Ht(this,e._storedError),qt(this);else if("closed"===t)zt(this),qt(this),Ut(this);else{const t=e._storedError;Ht(this,t),Bt(this,t)}}get closed(){return bt(this)?this._closedPromise:h(Lt("closed"))}get desiredSize(){if(!bt(this))throw Lt("desiredSize");if(void 0===this._ownerWritableStream)throw jt("desiredSize");return function(e){const t=e._ownerWritableStream,n=t._state;return"errored"===n||"erroring"===n?null:"closed"===n?0:Rt(t._writableStreamController)}(this)}get ready(){return bt(this)?this._readyPromise:h(Lt("ready"))}abort(e){return bt(this)?void 0===this._ownerWritableStream?h(jt("abort")):function(e,t){return ut(e._ownerWritableStream,t)}(this,e):h(Lt("abort"))}close(){if(!bt(this))return h(Lt("close"));const e=this._ownerWritableStream;return void 0===e?h(jt("close")):mt(e)?h(new TypeError("Cannot close an already-closing stream")):wt(this)}releaseLock(){if(!bt(this))throw Lt("releaseLock");void 0!==this._ownerWritableStream&&Et(this)}write(e){return bt(this)?void 0===this._ownerWritableStream?h(jt("write to")):_t(this,e):h(Lt("write"))}}function bt(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof yt}function wt(e){return pt(e._ownerWritableStream)}function St(e,t){"pending"===e._readyPromiseState?Kt(e,t):function(e,t){Ht(e,t)}(e,t)}function Et(e){const t=e._ownerWritableStream,n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");St(e,n),function(e,t){"pending"===e._closedPromiseState?Ft(e,t):function(e,t){Bt(e,t)}(e,t)}(e,n),t._writer=void 0,e._ownerWritableStream=void 0}function _t(e,t){const n=e._ownerWritableStream,r=n._writableStreamController,s=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return kt(e,t),1}}(r,t);if(n!==e._ownerWritableStream)return h(jt("write to"));const i=n._state;if("errored"===i)return h(n._storedError);if(mt(n)||"closed"===i)return h(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===i)return h(n._storedError);const o=function(e){return u(((t,n)=>{const r={_resolve:t,_reject:n};e._writeRequests.push(r)}))}(n);return function(e,t,n){try{he(e,t,n)}catch(t){return void kt(e,t)}const r=e._controlledWritableStream;mt(r)||"writable"!==r._state||vt(r,Ot(e)),It(e)}(r,t,s),o}Object.defineProperties(yt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(yt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const xt={};class Tt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Ct(this))throw Nt("abortReason");return this._abortReason}get signal(){if(!Ct(this))throw Nt("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e){if(!Ct(this))throw Nt("error");"writable"===this._controlledWritableStream._state&&Mt(this,e)}[k](e){const t=this._abortAlgorithm(e);return At(this),t}[O](){de(this)}}function Ct(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof Tt}function Pt(e,t,n,r,s,i,o,a){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,de(t),t._abortReason=void 0,t._abortController=function(){if(st)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=a,t._strategyHWM=o,t._writeAlgorithm=r,t._closeAlgorithm=s,t._abortAlgorithm=i;const c=Ot(t);vt(e,c),f(p(n()),(()=>{t._started=!0,It(t)}),(n=>{t._started=!0,ht(e,n)}))}function At(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Rt(e){return e._strategyHWM-e._queueTotalSize}function It(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if("erroring"===t._state)return void ft(t);if(0===e._queue.length)return;const n=e._queue.peek().value;n===xt?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),pe(e);const n=e._closeAlgorithm();At(e),f(n,(()=>{!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";const t=e._writer;void 0!==t&&Ut(t)}(t)}),(e=>{!function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),ht(e,t)}(t,e)}))}(e):function(e,t){const n=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(n),f(e._writeAlgorithm(t),(()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(n);const t=n._state;if(pe(e),!mt(n)&&"writable"===t){const t=Ot(e);vt(n,t)}It(e)}),(t=>{"writable"===n._state&&At(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,ht(e,t)}(n,t)}))}(e,n)}function kt(e,t){"writable"===e._controlledWritableStream._state&&Mt(e,t)}function Ot(e){return Rt(e)<=0}function Mt(e,t){const n=e._controlledWritableStream;At(e),dt(n,t)}function Dt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Nt(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Lt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function jt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function qt(e){e._closedPromise=u(((t,n)=>{e._closedPromise_resolve=t,e._closedPromise_reject=n,e._closedPromiseState="pending"}))}function Bt(e,t){qt(e),Ft(e,t)}function Ft(e,t){void 0!==e._closedPromise_reject&&(y(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Ut(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function $t(e){e._readyPromise=u(((t,n)=>{e._readyPromise_resolve=t,e._readyPromise_reject=n})),e._readyPromiseState="pending"}function Ht(e,t){$t(e),Kt(e,t)}function zt(e){$t(e),Vt(e)}function Kt(e,t){void 0!==e._readyPromise_reject&&(y(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Vt(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Tt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Tt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const Wt="undefined"!=typeof DOMException?DOMException:void 0,Gt=function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}(Wt)?Wt:function(){const e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Yt(e,t,r,s,i,o){const a=V(e),c=ot(t);e._disturbed=!0;let l=!1,v=p(void 0);return u(((b,w)=>{let S;if(void 0!==o){if(S=()=>{const n=new Gt("Aborted","AbortError"),r=[];s||r.push((()=>"writable"===t._state?ut(t,n):p(void 0))),i||r.push((()=>"readable"===e._state?Sn(e,n):p(void 0))),A((()=>Promise.all(r.map((e=>e())))),!0,n)},o.aborted)return void S();o.addEventListener("abort",S)}var E,_,x;if(P(e,a._closedPromise,(e=>{s?R(!0,e):A((()=>ut(t,e)),!0,e)})),P(t,c._closedPromise,(t=>{i?R(!0,t):A((()=>Sn(e,t)),!0,t)})),E=e,_=a._closedPromise,x=()=>{r?R():A((()=>function(e){const t=e._ownerWritableStream,n=t._state;return mt(t)||"closed"===n?p(void 0):"errored"===n?h(t._storedError):wt(e)}(c)))},"closed"===E._state?x():m(_,x),mt(t)||"closed"===t._state){const t=new TypeError("the destination writable stream closed before all data could be piped to it");i?R(!0,t):A((()=>Sn(e,t)),!0,t)}function C(){const e=v;return d(v,(()=>e!==v?C():void 0))}function P(e,t,n){"errored"===e._state?n(e._storedError):g(t,n)}function A(e,n,r){function s(){f(e(),(()=>I(n,r)),(e=>I(!0,e)))}l||(l=!0,"writable"!==t._state||mt(t)?s():m(C(),s))}function R(e,n){l||(l=!0,"writable"!==t._state||mt(t)?I(e,n):m(C(),(()=>I(e,n))))}function I(e,t){Et(c),T(a),void 0!==o&&o.removeEventListener("abort",S),e?w(t):b(void 0)}y(u(((e,t)=>{!function r(s){s?e():d(l?p(!0):d(c._readyPromise,(()=>u(((e,t)=>{Z(a,{_chunkSteps:t=>{v=d(_t(c,t),void 0,n),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})))),r,t)}(!1)})))}))}class Qt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Xt(this))throw cn("desiredSize");return sn(this)}close(){if(!Xt(this))throw cn("close");if(!on(this))throw new TypeError("The stream is not in a state that permits close");tn(this)}enqueue(e){if(!Xt(this))throw cn("enqueue");if(!on(this))throw new TypeError("The stream is not in a state that permits enqueue");return nn(this,e)}error(e){if(!Xt(this))throw cn("error");rn(this,e)}[M](e){de(this);const t=this._cancelAlgorithm(e);return en(this),t}[D](e){const t=this._controlledReadableStream;if(this._queue.length>0){const n=pe(this);this._closeRequested&&0===this._queue.length?(en(this),En(t)):Jt(this),e._chunkSteps(n)}else W(t,e),Jt(this)}}function Xt(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof Qt}function Jt(e){Zt(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,f(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Jt(e))}),(t=>{rn(e,t)}))))}function Zt(e){const t=e._controlledReadableStream;return!!on(e)&&!!e._started&&(!!(wn(t)&&Y(t)>0)||sn(e)>0)}function en(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function tn(e){if(!on(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(en(e),En(t))}function nn(e,t){if(!on(e))return;const n=e._controlledReadableStream;if(wn(n)&&Y(n)>0)G(n,t,!1);else{let n;try{n=e._strategySizeAlgorithm(t)}catch(t){throw rn(e,t),t}try{he(e,t,n)}catch(t){throw rn(e,t),t}}Jt(e)}function rn(e,t){const n=e._controlledReadableStream;"readable"===n._state&&(de(e),en(e),_n(n,t))}function sn(e){const t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function on(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function an(e,t,n,r,s,i,o){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,de(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=o,t._strategyHWM=i,t._pullAlgorithm=r,t._cancelAlgorithm=s,e._readableStreamController=t,f(p(n()),(()=>{t._started=!0,Jt(t)}),(e=>{rn(t,e)}))}function cn(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function ln(e,t,n){return q(e,n),n=>S(e,t,[n])}function un(e,t,n){return q(e,n),n=>S(e,t,[n])}function pn(e,t,n){return q(e,n),n=>w(e,t,[n])}function hn(e,t){if("bytes"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function dn(e,t){if("byob"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function fn(e,t){j(e,t);const n=null==e?void 0:e.preventAbort,r=null==e?void 0:e.preventCancel,s=null==e?void 0:e.preventClose,i=null==e?void 0:e.signal;return void 0!==i&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(i,`${t} has member 'signal' that`),{preventAbort:Boolean(n),preventCancel:Boolean(r),preventClose:Boolean(s),signal:i}}Object.defineProperties(Qt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Qt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class mn{constructor(e={},t={}){void 0===e?e=null:B(e,"First parameter");const n=Xe(t,"Second parameter"),r=function(e,t){j(e,t);const n=e,r=null==n?void 0:n.autoAllocateChunkSize,s=null==n?void 0:n.cancel,i=null==n?void 0:n.pull,o=null==n?void 0:n.start,a=null==n?void 0:n.type;return{autoAllocateChunkSize:void 0===r?void 0:z(r,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===s?void 0:ln(s,n,`${t} has member 'cancel' that`),pull:void 0===i?void 0:un(i,n,`${t} has member 'pull' that`),start:void 0===o?void 0:pn(o,n,`${t} has member 'start' that`),type:void 0===a?void 0:hn(a,`${t} has member 'type' that`)}}(e,"First parameter");if(yn(this),"bytes"===r.type){if(void 0!==n.size)throw new RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,n){const r=Object.create(me.prototype);let s=()=>{},i=()=>p(void 0),o=()=>p(void 0);void 0!==t.start&&(s=()=>t.start(r)),void 0!==t.pull&&(i=()=>t.pull(r)),void 0!==t.cancel&&(o=e=>t.cancel(e));const a=t.autoAllocateChunkSize;if(0===a)throw new TypeError("autoAllocateChunkSize must be greater than 0");qe(e,r,s,i,o,n,a)}(this,r,Ye(n,0))}else{const e=Qe(n);!function(e,t,n,r){const s=Object.create(Qt.prototype);let i=()=>{},o=()=>p(void 0),a=()=>p(void 0);void 0!==t.start&&(i=()=>t.start(s)),void 0!==t.pull&&(o=()=>t.pull(s)),void 0!==t.cancel&&(a=e=>t.cancel(e)),an(e,s,i,o,a,n,r)}(this,r,Ye(n,1),e)}}get locked(){if(!bn(this))throw xn("locked");return wn(this)}cancel(e){return bn(this)?wn(this)?h(new TypeError("Cannot cancel a stream that already has a reader")):Sn(this,e):h(xn("cancel"))}getReader(e){if(!bn(this))throw xn("getReader");return void 0===function(e,t){j(e,t);const n=null==e?void 0:e.mode;return{mode:void 0===n?void 0:dn(n,`${t} has member 'mode' that`)}}(e,"First parameter").mode?V(this):Ue(this)}pipeThrough(e,t={}){if(!bn(this))throw xn("pipeThrough");F(e,1,"pipeThrough");const n=function(e,t){j(e,t);const n=null==e?void 0:e.readable;U(n,"readable","ReadableWritablePair"),K(n,`${t} has member 'readable' that`);const r=null==e?void 0:e.writable;return U(r,"writable","ReadableWritablePair"),rt(r,`${t} has member 'writable' that`),{readable:n,writable:r}}(e,"First parameter"),r=fn(t,"Second parameter");if(wn(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(lt(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return y(Yt(this,n.writable,r.preventClose,r.preventAbort,r.preventCancel,r.signal)),n.readable}pipeTo(e,t={}){if(!bn(this))return h(xn("pipeTo"));if(void 0===e)return h("Parameter 1 is required in 'pipeTo'.");if(!ct(e))return h(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let n;try{n=fn(t,"Second parameter")}catch(e){return h(e)}return wn(this)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):lt(e)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Yt(this,e,n.preventClose,n.preventAbort,n.preventCancel,n.signal)}tee(){if(!bn(this))throw xn("tee");return ae(ge((e=this)._readableStreamController)?function(e){let t,n,r,s,i,o=V(e),a=!1,c=!1,l=!1,h=!1,d=!1;const f=u((e=>{i=e}));function m(e){g(e._closedPromise,(t=>{e===o&&(Me(r._readableStreamController,t),Me(s._readableStreamController,t),h&&d||i(void 0))}))}function v(){Ve(o)&&(T(o),o=V(e),m(o)),Z(o,{_chunkSteps:t=>{b((()=>{c=!1,l=!1;const n=t;let o=t;if(!h&&!d)try{o=ue(t)}catch(t){return Me(r._readableStreamController,t),Me(s._readableStreamController,t),void i(Sn(e,t))}h||Oe(r._readableStreamController,n),d||Oe(s._readableStreamController,o),a=!1,c?w():l&&S()}))},_closeSteps:()=>{a=!1,h||ke(r._readableStreamController),d||ke(s._readableStreamController),r._readableStreamController._pendingPullIntos.length>0&&Le(r._readableStreamController,0),s._readableStreamController._pendingPullIntos.length>0&&Le(s._readableStreamController,0),h&&d||i(void 0)},_errorSteps:()=>{a=!1}})}function y(t,n){J(o)&&(T(o),o=Ue(e),m(o));const u=n?s:r,p=n?r:s;We(o,t,{_chunkSteps:t=>{b((()=>{c=!1,l=!1;const r=n?d:h;if(n?h:d)r||je(u._readableStreamController,t);else{let n;try{n=ue(t)}catch(t){return Me(u._readableStreamController,t),Me(p._readableStreamController,t),void i(Sn(e,t))}r||je(u._readableStreamController,t),Oe(p._readableStreamController,n)}a=!1,c?w():l&&S()}))},_closeSteps:e=>{a=!1;const t=n?d:h,r=n?h:d;t||ke(u._readableStreamController),r||ke(p._readableStreamController),void 0!==e&&(t||je(u._readableStreamController,e),!r&&p._readableStreamController._pendingPullIntos.length>0&&Le(p._readableStreamController,0)),t&&r||i(void 0)},_errorSteps:()=>{a=!1}})}function w(){if(a)return c=!0,p(void 0);a=!0;const e=De(r._readableStreamController);return null===e?v():y(e._view,!1),p(void 0)}function S(){if(a)return l=!0,p(void 0);a=!0;const e=De(s._readableStreamController);return null===e?v():y(e._view,!0),p(void 0)}function E(){}return r=vn(E,w,(function(r){if(h=!0,t=r,d){const r=ae([t,n]),s=Sn(e,r);i(s)}return f})),s=vn(E,S,(function(r){if(d=!0,n=r,h){const r=ae([t,n]),s=Sn(e,r);i(s)}return f})),m(o),[r,s]}(e):function(e,t){const n=V(e);let r,s,i,o,a,c=!1,l=!1,h=!1,d=!1;const f=u((e=>{a=e}));function m(){return c?(l=!0,p(void 0)):(c=!0,Z(n,{_chunkSteps:e=>{b((()=>{l=!1;const t=e,n=e;h||nn(i._readableStreamController,t),d||nn(o._readableStreamController,n),c=!1,l&&m()}))},_closeSteps:()=>{c=!1,h||tn(i._readableStreamController),d||tn(o._readableStreamController),h&&d||a(void 0)},_errorSteps:()=>{c=!1}}),p(void 0))}function v(){}return i=gn(v,m,(function(t){if(h=!0,r=t,d){const t=ae([r,s]),n=Sn(e,t);a(n)}return f})),o=gn(v,m,(function(t){if(d=!0,s=t,h){const t=ae([r,s]),n=Sn(e,t);a(n)}return f})),g(n._closedPromise,(e=>{rn(i._readableStreamController,e),rn(o._readableStreamController,e),h&&d||a(void 0)})),[i,o]}(e));var e}values(e){if(!bn(this))throw xn("values");return function(e,t){const n=V(e),r=new ne(n,t),s=Object.create(re);return s._asyncIteratorImpl=r,s}(this,function(e,t){j(e,"First parameter");const n=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(n)}}(e).preventCancel)}}function gn(e,t,n,r=1,s=(()=>1)){const i=Object.create(mn.prototype);return yn(i),an(i,Object.create(Qt.prototype),e,t,n,r,s),i}function vn(e,t,n){const r=Object.create(mn.prototype);return yn(r),qe(r,Object.create(me.prototype),e,t,n,0,void 0),r}function yn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function bn(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof mn}function wn(e){return void 0!==e._reader}function Sn(e,t){if(e._disturbed=!0,"closed"===e._state)return p(void 0);if("errored"===e._state)return h(e._storedError);En(e);const r=e._reader;return void 0!==r&&Ve(r)&&(r._readIntoRequests.forEach((e=>{e._closeSteps(void 0)})),r._readIntoRequests=new E),v(e._readableStreamController[M](t),n)}function En(e){e._state="closed";const t=e._reader;void 0!==t&&(I(t),J(t)&&(t._readRequests.forEach((e=>{e._closeSteps()})),t._readRequests=new E))}function _n(e,t){e._state="errored",e._storedError=t;const n=e._reader;void 0!==n&&(R(n,t),J(n)?(n._readRequests.forEach((e=>{e._errorSteps(t)})),n._readRequests=new E):(n._readIntoRequests.forEach((e=>{e._errorSteps(t)})),n._readIntoRequests=new E))}function xn(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Tn(e,t){j(e,t);const n=null==e?void 0:e.highWaterMark;return U(n,"highWaterMark","QueuingStrategyInit"),{highWaterMark:$(n)}}Object.defineProperties(mn.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(mn.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof t.asyncIterator&&Object.defineProperty(mn.prototype,t.asyncIterator,{value:mn.prototype.values,writable:!0,configurable:!0});const Cn=e=>e.byteLength;try{Object.defineProperty(Cn,"name",{value:"size",configurable:!0})}catch(e){}class Pn{constructor(e){F(e,1,"ByteLengthQueuingStrategy"),e=Tn(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Rn(this))throw An("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Rn(this))throw An("size");return Cn}}function An(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Rn(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof Pn}Object.defineProperties(Pn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Pn.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const In=()=>1;try{Object.defineProperty(In,"name",{value:"size",configurable:!0})}catch(e){}class kn{constructor(e){F(e,1,"CountQueuingStrategy"),e=Tn(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Mn(this))throw On("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Mn(this))throw On("size");return In}}function On(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Mn(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof kn}function Dn(e,t,n){return q(e,n),n=>S(e,t,[n])}function Nn(e,t,n){return q(e,n),n=>w(e,t,[n])}function Ln(e,t,n){return q(e,n),(n,r)=>S(e,t,[n,r])}Object.defineProperties(kn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(kn.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class jn{constructor(e={},t={},n={}){void 0===e&&(e=null);const r=Xe(t,"Second parameter"),s=Xe(n,"Third parameter"),i=function(e,t){j(e,t);const n=null==e?void 0:e.flush,r=null==e?void 0:e.readableType,s=null==e?void 0:e.start,i=null==e?void 0:e.transform,o=null==e?void 0:e.writableType;return{flush:void 0===n?void 0:Dn(n,e,`${t} has member 'flush' that`),readableType:r,start:void 0===s?void 0:Nn(s,e,`${t} has member 'start' that`),transform:void 0===i?void 0:Ln(i,e,`${t} has member 'transform' that`),writableType:o}}(e,"First parameter");if(void 0!==i.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==i.writableType)throw new RangeError("Invalid writableType specified");const o=Ye(s,0),a=Qe(s),c=Ye(r,1),l=Qe(r);let d;!function(e,t,n,r,s,i){function o(){return t}e._writable=function(e,t,n,r,s=1,i=(()=>1)){const o=Object.create(it.prototype);return at(o),Pt(o,Object.create(Tt.prototype),e,t,n,r,s,i),o}(o,(function(t){return function(e,t){const n=e._transformStreamController;return e._backpressure?v(e._backpressureChangePromise,(()=>{const r=e._writable;if("erroring"===r._state)throw r._storedError;return Vn(n,t)})):Vn(n,t)}(e,t)}),(function(){return function(e){const t=e._readable,n=e._transformStreamController,r=n._flushAlgorithm();return zn(n),v(r,(()=>{if("errored"===t._state)throw t._storedError;tn(t._readableStreamController)}),(n=>{throw Bn(e,n),t._storedError}))}(e)}),(function(t){return function(e,t){return Bn(e,t),p(void 0)}(e,t)}),n,r),e._readable=gn(o,(function(){return function(e){return Un(e,!1),e._backpressureChangePromise}(e)}),(function(t){return Fn(e,t),p(void 0)}),s,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Un(e,!0),e._transformStreamController=void 0}(this,u((e=>{d=e})),c,l,o,a),function(e,t){const n=Object.create($n.prototype);let r=e=>{try{return Kn(n,e),p(void 0)}catch(e){return h(e)}},s=()=>p(void 0);void 0!==t.transform&&(r=e=>t.transform(e,n)),void 0!==t.flush&&(s=()=>t.flush(n)),function(e,t,n,r){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=n,t._flushAlgorithm=r}(e,n,r,s)}(this,i),void 0!==i.start?d(i.start(this._transformStreamController)):d(void 0)}get readable(){if(!qn(this))throw Gn("readable");return this._readable}get writable(){if(!qn(this))throw Gn("writable");return this._writable}}function qn(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof jn}function Bn(e,t){rn(e._readable._readableStreamController,t),Fn(e,t)}function Fn(e,t){zn(e._transformStreamController),kt(e._writable._writableStreamController,t),e._backpressure&&Un(e,!1)}function Un(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=u((t=>{e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(jn.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(jn.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});class $n{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Hn(this))throw Wn("desiredSize");return sn(this._controlledTransformStream._readable._readableStreamController)}enqueue(e){if(!Hn(this))throw Wn("enqueue");Kn(this,e)}error(e){if(!Hn(this))throw Wn("error");var t;t=e,Bn(this._controlledTransformStream,t)}terminate(){if(!Hn(this))throw Wn("terminate");!function(e){const t=e._controlledTransformStream;tn(t._readable._readableStreamController);Fn(t,new TypeError("TransformStream terminated"))}(this)}}function Hn(e){return!!s(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof $n}function zn(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Kn(e,t){const n=e._controlledTransformStream,r=n._readable._readableStreamController;if(!on(r))throw new TypeError("Readable side is not in a state that permits enqueue");try{nn(r,t)}catch(e){throw Fn(n,e),n._readable._storedError}const s=function(e){return!Zt(e)}(r);s!==n._backpressure&&Un(n,!0)}function Vn(e,t){return v(e._transformAlgorithm(t),void 0,(t=>{throw Bn(e._controlledTransformStream,t),t}))}function Wn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Gn(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties($n.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty($n.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Pn,e.CountQueuingStrategy=kn,e.ReadableByteStreamController=me,e.ReadableStream=mn,e.ReadableStreamBYOBReader=Ke,e.ReadableStreamBYOBRequest=fe,e.ReadableStreamDefaultController=Qt,e.ReadableStreamDefaultReader=X,e.TransformStream=jn,e.TransformStreamDefaultController=$n,e.WritableStream=it,e.WritableStreamDefaultController=Tt,e.WritableStreamDefaultWriter=yt,Object.defineProperty(e,"__esModule",{value:!0})},n(t)},8766:(e,t,n)=>{e.exports=n(5729)},9168:e=>{var t={disableWarnings:!1,deprecationWarningMap:{},warn:function(e){!this.disableWarnings&&this.deprecationWarningMap[e]&&(console.warn("DEPRECATION WARNING: "+this.deprecationWarningMap[e]),this.deprecationWarningMap[e]=!1)}};e.exports=t},348:(e,t,n)=>{var r=n(2339),s=n(901),i=n(1334);const o=0,a=1,c=2,l=3;function u(e,t,n,s,a,c){i.EventTarget.call(this),(c=c||{}).assembleFragments=!0;var l=this;this._url=e,this._readyState=o,this._protocol=void 0,this._extensions="",this._bufferedAmount=0,this._binaryType="arraybuffer",this._connection=void 0,this._client=new r(c),this._client.on("connect",(function(e){d.call(l,e)})),this._client.on("connectFailed",(function(){f.call(l)})),this._client.connect(e,t,n,s,a)}function p(e,t){var n=new i.Event("close");return n.code=e,n.reason=t,n.wasClean=void 0===e||1e3===e,n}function h(e){var t=new i.Event("message");return t.data=e,t}function d(e){var t=this;this._readyState=a,this._connection=e,this._protocol=e.protocol,this._extensions=e.extensions,this._connection.on("close",(function(e,n){m.call(t,e,n)})),this._connection.on("message",(function(e){g.call(t,e)})),this.dispatchEvent(new i.Event("open"))}function f(){v.call(this),this._readyState=l;try{this.dispatchEvent(new i.Event("error"))}finally{this.dispatchEvent(p(1006,"connection failed"))}}function m(e,t){v.call(this),this._readyState=l,this.dispatchEvent(p(e,t||""))}function g(e){if(e.utf8Data)this.dispatchEvent(h(e.utf8Data));else if(e.binaryData&&"arraybuffer"===this.binaryType){for(var t=e.binaryData,n=new ArrayBuffer(t.length),r=new Uint8Array(n),s=0,i=t.length;s<i;++s)r[s]=t[s];this.dispatchEvent(h(n))}}function v(){this._client.removeAllListeners(),this._connection&&this._connection.removeAllListeners()}e.exports=u,Object.defineProperties(u.prototype,{url:{get:function(){return this._url}},readyState:{get:function(){return this._readyState}},protocol:{get:function(){return this._protocol}},extensions:{get:function(){return this._extensions}},bufferedAmount:{get:function(){return this._bufferedAmount}}}),Object.defineProperties(u.prototype,{binaryType:{get:function(){return this._binaryType},set:function(e){if("arraybuffer"!==e)throw new SyntaxError('just "arraybuffer" type allowed for "binaryType" attribute');this._binaryType=e}}}),[["CONNECTING",o],["OPEN",a],["CLOSING",c],["CLOSED",l]].forEach((function(e){Object.defineProperty(u.prototype,e[0],{get:function(){return e[1]}})})),[["CONNECTING",o],["OPEN",a],["CLOSING",c],["CLOSED",l]].forEach((function(e){Object.defineProperty(u,e[0],{get:function(){return e[1]}})})),u.prototype.send=function(e){if(this._readyState!==a)throw new Error("cannot call send() while not connected");if("string"==typeof e||e instanceof String)this._connection.sendUTF(e);else if(e instanceof Buffer)this._connection.sendBytes(e);else{if(!e.byteLength&&0!==e.byteLength)throw new Error("unknown binary data:",e);e=s(e),this._connection.sendBytes(e)}},u.prototype.close=function(e,t){switch(this._readyState){case o:f.call(this),this._client.on("connect",(function(n){e?n.close(e,t):n.close()}));break;case a:this._readyState=c,e?this._connection.close(e,t):this._connection.close()}}},2339:(e,t,n)=>{var r=n(144),s=r.extend,i=n(3837),o=n(2361).EventEmitter,a=n(3685),c=n(5687),l=n(7310),u=n(6113),p=n(4016),h=r.bufferAllocUnsafe,d=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ",String.fromCharCode(9)],f=["hostname","port","method","path","headers"];function m(e){var t;switch(o.call(this),this.config={maxReceivedFrameSize:1048576,maxReceivedMessageSize:8388608,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,webSocketVersion:13,assembleFragments:!0,disableNagleAlgorithm:!0,closeTimeout:5e3,tlsOptions:{}},e&&(e.tlsOptions?(t=e.tlsOptions,delete e.tlsOptions):t={},s(this.config,e),s(this.config.tlsOptions,t)),this._req=null,this.config.webSocketVersion){case 8:case 13:break;default:throw new Error("Requested webSocketVersion is not supported. Allowed values are 8 and 13.")}}i.inherits(m,o),m.prototype.connect=function(e,t,n,i,o){var u=this;if("string"==typeof t&&(t=t.length>0?[t]:[]),t instanceof Array||(t=[]),this.protocols=t,this.origin=n,this.url="string"==typeof e?l.parse(e):e,!this.url.protocol)throw new Error("You must specify a full WebSocket URL, including protocol.");if(!this.url.host)throw new Error("You must specify a full WebSocket URL, including hostname. Relative URLs are not supported.");this.secure="wss:"===this.url.protocol,this.protocols.forEach((function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t),r=e.charAt(t);if(n<33||n>126||-1!==d.indexOf(r))throw new Error('Protocol list contains invalid character "'+String.fromCharCode(n)+'"')}})),this.url.port||(this.url.port={"ws:":"80","wss:":"443"}[this.url.protocol]);for(var p=h(16),m=0;m<16;m++)p[m]=Math.round(255*Math.random());this.base64nonce=p.toString("base64");var g=this.url.hostname;("ws:"===this.url.protocol&&"80"!==this.url.port||"wss:"===this.url.protocol&&"443"!==this.url.port)&&(g+=":"+this.url.port);var v,y={};function b(e){u._req=null,u.emit("connectFailed",e)}this.secure&&this.config.tlsOptions.hasOwnProperty("headers")&&s(y,this.config.tlsOptions.headers),i&&s(y,i),s(y,{Upgrade:"websocket",Connection:"Upgrade","Sec-WebSocket-Version":this.config.webSocketVersion.toString(10),"Sec-WebSocket-Key":this.base64nonce,Host:y.Host||g}),this.protocols.length>0&&(y["Sec-WebSocket-Protocol"]=this.protocols.join(", ")),this.origin&&(13===this.config.webSocketVersion?y.Origin=this.origin:8===this.config.webSocketVersion&&(y["Sec-WebSocket-Origin"]=this.origin)),v=this.url.pathname?this.url.path:this.url.path?"/"+this.url.path:"/";var w={agent:!1};if(o&&s(w,o),s(w,{hostname:this.url.hostname,port:this.url.port,method:"GET",path:v,headers:y}),this.secure){var S=this.config.tlsOptions;for(var E in S)S.hasOwnProperty(E)&&-1===f.indexOf(E)&&(w[E]=S[E])}var _=this._req=(this.secure?c:a).request(w);_.on("upgrade",(function(e,t,n){u._req=null,_.removeListener("error",b),u.socket=t,u.response=e,u.firstDataChunk=n,u.validateHandshake()})),_.on("error",b),_.on("response",(function(e){if(u._req=null,r.eventEmitterListenerCount(u,"httpResponse")>0)u.emit("httpResponse",e,u),e.socket&&e.socket.end();else{var t=[];for(var n in e.headers)t.push(n+": "+e.headers[n]);u.failHandshake("Server responded with a non-101 status: "+e.statusCode+" "+e.statusMessage+"\nResponse Headers Follow:\n"+t.join("\n")+"\n")}})),_.end()},m.prototype.validateHandshake=function(){var e=this.response.headers;if(this.protocols.length>0){if(this.protocol=e["sec-websocket-protocol"],!this.protocol)return void this.failHandshake("Expected a Sec-WebSocket-Protocol header.");if(-1===this.protocols.indexOf(this.protocol))return void this.failHandshake("Server did not respond with a requested protocol.")}if(e.connection&&"upgrade"===e.connection.toLocaleLowerCase())if(e.upgrade&&"websocket"===e.upgrade.toLocaleLowerCase()){var t=u.createHash("sha1");t.update(this.base64nonce+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var n=t.digest("base64");e["sec-websocket-accept"]?e["sec-websocket-accept"]===n?this.succeedHandshake():this.failHandshake("Sec-WebSocket-Accept header from server didn't match expected value of "+n):this.failHandshake("Expected Sec-WebSocket-Accept header from server")}else this.failHandshake("Expected an Upgrade: websocket header from the server");else this.failHandshake("Expected a Connection: Upgrade header from the server")},m.prototype.failHandshake=function(e){this.socket&&this.socket.writable&&this.socket.end(),this.emit("connectFailed",new Error(e))},m.prototype.succeedHandshake=function(){var e=new p(this.socket,[],this.protocol,!0,this.config);e.webSocketVersion=this.config.webSocketVersion,e._addSocketEventListeners(),this.emit("connect",e),this.firstDataChunk.length>0&&e.handleSocketData(this.firstDataChunk),this.firstDataChunk=null},m.prototype.abort=function(){this._req&&this._req.abort()},e.exports=m},4016:(e,t,n)=>{var r=n(3837),s=n(144),i=n(2361).EventEmitter,o=n(347),a=n(8452),c=n(3682),l=s.bufferAllocUnsafe,u=s.bufferFromString;const p="open",h="peer_requested_close",d="ending",f="closed";var m="setImmediate"in global?global.setImmediate.bind(global):process.nextTick.bind(process),g=0;function v(e,t,n,r,c){if(this._debug=s.BufferingLogger("websocket:connection",++g),this._debug("constructor"),this._debug.enabled&&function(e,t){if(e._debug.enabled){var n=t.emit;for(var r in t.emit=function(t){e._debug("||| Socket Event  '%s'",t),n.apply(this,arguments)},t)"function"==typeof t[r]&&-1===["emit"].indexOf(r)&&function(n){var r=t[n];t[n]="on"!==n?function(){return e._debug("||| Socket method called:  %s",n),r.apply(this,arguments)}:function(){return e._debug("||| Socket method called:  %s (%s)",n,arguments[0]),r.apply(this,arguments)}}(r)}}(this,e),i.call(this),this._pingListenerCount=0,this.on("newListener",(function(e){"ping"===e&&this._pingListenerCount++})).on("removeListener",(function(e){"ping"===e&&this._pingListenerCount--})),this.config=c,this.socket=e,this.protocol=n,this.extensions=t,this.remoteAddress=e.remoteAddress,this.closeReasonCode=-1,this.closeDescription=null,this.closeEventEmitted=!1,this.maskOutgoingPackets=r,this.maskBytes=l(4),this.frameHeader=l(10),this.bufferList=new a,this.currentFrame=new o(this.maskBytes,this.frameHeader,this.config),this.fragmentationSize=0,this.frameQueue=[],this.connected=!0,this.state=p,this.waitingForCloseResponse=!1,this.receivedEnd=!1,this.closeTimeout=this.config.closeTimeout,this.assembleFragments=this.config.assembleFragments,this.maxReceivedMessageSize=this.config.maxReceivedMessageSize,this.outputBufferFull=!1,this.inputPaused=!1,this.receivedDataHandler=this.processReceivedData.bind(this),this._closeTimerHandler=this.handleCloseTimer.bind(this),this.socket.setNoDelay(this.config.disableNagleAlgorithm),this.socket.setTimeout(0),this.config.keepalive&&!this.config.useNativeKeepalive){if("number"!=typeof this.config.keepaliveInterval)throw new Error("keepaliveInterval must be specified and numeric if keepalive is true.");if(this._keepaliveTimerHandler=this.handleKeepaliveTimer.bind(this),this.setKeepaliveTimer(),this.config.dropConnectionOnKeepaliveTimeout){if("number"!=typeof this.config.keepaliveGracePeriod)throw new Error("keepaliveGracePeriod  must be specified and numeric if dropConnectionOnKeepaliveTimeout is true.");this._gracePeriodTimerHandler=this.handleGracePeriodTimer.bind(this)}}else if(this.config.keepalive&&this.config.useNativeKeepalive){if(!("setKeepAlive"in this.socket))throw new Error("Unable to use native keepalive: unsupported by this version of Node.");this.socket.setKeepAlive(!0,this.config.keepaliveInterval)}this.socket.removeAllListeners("error")}function y(e){return!(e<1e3)&&(e>=1e3&&e<=2999?-1!==[1e3,1001,1002,1003,1007,1008,1009,1010,1011,1012,1013,1014,1015].indexOf(e):e>=3e3&&e<=3999||e>=4e3&&e<=4999||!(e>=5e3)&&void 0)}v.CLOSE_REASON_NORMAL=1e3,v.CLOSE_REASON_GOING_AWAY=1001,v.CLOSE_REASON_PROTOCOL_ERROR=1002,v.CLOSE_REASON_UNPROCESSABLE_INPUT=1003,v.CLOSE_REASON_RESERVED=1004,v.CLOSE_REASON_NOT_PROVIDED=1005,v.CLOSE_REASON_ABNORMAL=1006,v.CLOSE_REASON_INVALID_DATA=1007,v.CLOSE_REASON_POLICY_VIOLATION=1008,v.CLOSE_REASON_MESSAGE_TOO_BIG=1009,v.CLOSE_REASON_EXTENSION_REQUIRED=1010,v.CLOSE_REASON_INTERNAL_SERVER_ERROR=1011,v.CLOSE_REASON_TLS_HANDSHAKE_FAILED=1015,v.CLOSE_DESCRIPTIONS={1e3:"Normal connection closure",1001:"Remote peer is going away",1002:"Protocol error",1003:"Unprocessable input",1004:"Reserved",1005:"Reason not provided",1006:"Abnormal closure, no further detail available",1007:"Invalid data received",1008:"Policy violation",1009:"Message too big",1010:"Extension requested by client is required",1011:"Internal Server Error",1015:"TLS Handshake Failed"},r.inherits(v,i),v.prototype._addSocketEventListeners=function(){this.socket.on("error",this.handleSocketError.bind(this)),this.socket.on("end",this.handleSocketEnd.bind(this)),this.socket.on("close",this.handleSocketClose.bind(this)),this.socket.on("drain",this.handleSocketDrain.bind(this)),this.socket.on("pause",this.handleSocketPause.bind(this)),this.socket.on("resume",this.handleSocketResume.bind(this)),this.socket.on("data",this.handleSocketData.bind(this))},v.prototype.setKeepaliveTimer=function(){this._debug("setKeepaliveTimer"),this.config.keepalive&&!this.config.useNativeKeepalive&&(this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this._keepaliveTimeoutID=setTimeout(this._keepaliveTimerHandler,this.config.keepaliveInterval))},v.prototype.clearKeepaliveTimer=function(){this._keepaliveTimeoutID&&clearTimeout(this._keepaliveTimeoutID)},v.prototype.handleKeepaliveTimer=function(){this._debug("handleKeepaliveTimer"),this._keepaliveTimeoutID=null,this.ping(),this.config.dropConnectionOnKeepaliveTimeout?this.setGracePeriodTimer():this.setKeepaliveTimer()},v.prototype.setGracePeriodTimer=function(){this._debug("setGracePeriodTimer"),this.clearGracePeriodTimer(),this._gracePeriodTimeoutID=setTimeout(this._gracePeriodTimerHandler,this.config.keepaliveGracePeriod)},v.prototype.clearGracePeriodTimer=function(){this._gracePeriodTimeoutID&&clearTimeout(this._gracePeriodTimeoutID)},v.prototype.handleGracePeriodTimer=function(){this._debug("handleGracePeriodTimer"),this._gracePeriodTimeoutID=null,this.drop(v.CLOSE_REASON_ABNORMAL,"Peer not responding.",!0)},v.prototype.handleSocketData=function(e){this._debug("handleSocketData"),this.setKeepaliveTimer(),this.bufferList.write(e),this.processReceivedData()},v.prototype.processReceivedData=function(){if(this._debug("processReceivedData"),this.connected&&!this.inputPaused){var e=this.currentFrame;if(e.addData(this.bufferList)){var t=this;if(e.protocolError)return this._debug("-- protocol error"),void process.nextTick((function(){t.drop(v.CLOSE_REASON_PROTOCOL_ERROR,e.dropReason)}));if(e.frameTooLarge)return this._debug("-- frame too large"),void process.nextTick((function(){t.drop(v.CLOSE_REASON_MESSAGE_TOO_BIG,e.dropReason)}));if(e.rsv1||e.rsv2||e.rsv3)return this._debug("-- illegal rsv flag"),void process.nextTick((function(){t.drop(v.CLOSE_REASON_PROTOCOL_ERROR,"Unsupported usage of rsv bits without negotiated extension.")}));this.assembleFragments||(this._debug("-- emitting frame"),process.nextTick((function(){t.emit("frame",e)}))),process.nextTick((function(){t.processFrame(e)})),this.currentFrame=new o(this.maskBytes,this.frameHeader,this.config),this.bufferList.length>0&&m(this.receivedDataHandler)}else this._debug("-- insufficient data for frame")}},v.prototype.handleSocketError=function(e){this._debug("handleSocketError: %j",e),this.state!==f?(this.closeReasonCode=v.CLOSE_REASON_ABNORMAL,this.closeDescription="Socket Error: "+e.syscall+" "+e.code,this.connected=!1,this.state=f,this.fragmentationSize=0,s.eventEmitterListenerCount(this,"error")>0&&this.emit("error",e),this.socket.destroy(),this._debug.printOutput()):this._debug("  --- Socket 'error' after 'close'")},v.prototype.handleSocketEnd=function(){this._debug("handleSocketEnd: received socket end.  state = %s",this.state),this.receivedEnd=!0,this.state!==f?this.state!==h&&this.state!==d&&(this._debug("  --- UNEXPECTED socket end."),this.socket.end()):this._debug("  --- Socket 'end' after 'close'")},v.prototype.handleSocketClose=function(e){this._debug("handleSocketClose: received socket close"),this.socketHadError=e,this.connected=!1,this.state=f,-1===this.closeReasonCode&&(this.closeReasonCode=v.CLOSE_REASON_ABNORMAL,this.closeDescription="Connection dropped by remote peer."),this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("-- Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription))},v.prototype.handleSocketDrain=function(){this._debug("handleSocketDrain: socket drain event"),this.outputBufferFull=!1,this.emit("drain")},v.prototype.handleSocketPause=function(){this._debug("handleSocketPause: socket pause event"),this.inputPaused=!0,this.emit("pause")},v.prototype.handleSocketResume=function(){this._debug("handleSocketResume: socket resume event"),this.inputPaused=!1,this.emit("resume"),this.processReceivedData()},v.prototype.pause=function(){this._debug("pause: pause requested"),this.socket.pause()},v.prototype.resume=function(){this._debug("resume: resume requested"),this.socket.resume()},v.prototype.close=function(e,t){if(this.connected){if(this._debug("close: Initating clean WebSocket close sequence."),"number"!=typeof e&&(e=v.CLOSE_REASON_NORMAL),!y(e))throw new Error("Close code "+e+" is not valid.");"string"!=typeof t&&(t=v.CLOSE_DESCRIPTIONS[e]),this.closeReasonCode=e,this.closeDescription=t,this.setCloseTimer(),this.sendCloseFrame(this.closeReasonCode,this.closeDescription),this.state=d,this.connected=!1}},v.prototype.drop=function(e,t,n){this._debug("drop"),"number"!=typeof e&&(e=v.CLOSE_REASON_PROTOCOL_ERROR),"string"!=typeof t&&(t=v.CLOSE_DESCRIPTIONS[e]),this._debug("Forcefully dropping connection. skipCloseFrame: %s, code: %d, description: %s",n,e,t),this.closeReasonCode=e,this.closeDescription=t,this.frameQueue=[],this.fragmentationSize=0,n||this.sendCloseFrame(e,t),this.connected=!1,this.state=f,this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription)),this._debug("Drop: destroying socket"),this.socket.destroy()},v.prototype.setCloseTimer=function(){this._debug("setCloseTimer"),this.clearCloseTimer(),this._debug("Setting close timer"),this.waitingForCloseResponse=!0,this.closeTimer=setTimeout(this._closeTimerHandler,this.closeTimeout)},v.prototype.clearCloseTimer=function(){this._debug("clearCloseTimer"),this.closeTimer&&(this._debug("Clearing close timer"),clearTimeout(this.closeTimer),this.waitingForCloseResponse=!1,this.closeTimer=null)},v.prototype.handleCloseTimer=function(){this._debug("handleCloseTimer"),this.closeTimer=null,this.waitingForCloseResponse&&(this._debug("Close response not received from client.  Forcing socket end."),this.waitingForCloseResponse=!1,this.state=f,this.socket.end())},v.prototype.processFrame=function(e){if(this._debug("processFrame"),this._debug(" -- frame: %s",e),0!==this.frameQueue.length&&e.opcode>0&&e.opcode<8)this.drop(v.CLOSE_REASON_PROTOCOL_ERROR,"Illegal frame opcode 0x"+e.opcode.toString(16)+" received in middle of fragmented message.");else switch(e.opcode){case 2:this._debug("-- Binary Frame"),this.assembleFragments&&(e.fin?(this._debug("---- Emitting 'message' event"),this.emit("message",{type:"binary",binaryData:e.binaryPayload})):(this.frameQueue.push(e),this.fragmentationSize=e.length));break;case 1:if(this._debug("-- Text Frame"),this.assembleFragments)if(e.fin){if(!c(e.binaryPayload))return void this.drop(v.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this._debug("---- Emitting 'message' event"),this.emit("message",{type:"utf8",utf8Data:e.binaryPayload.toString("utf8")})}else this.frameQueue.push(e),this.fragmentationSize=e.length;break;case 0:if(this._debug("-- Continuation Frame"),this.assembleFragments){if(0===this.frameQueue.length)return void this.drop(v.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected Continuation Frame");if(this.fragmentationSize+=e.length,this.fragmentationSize>this.maxReceivedMessageSize)return void this.drop(v.CLOSE_REASON_MESSAGE_TOO_BIG,"Maximum message size exceeded.");if(this.frameQueue.push(e),e.fin){var t=0,n=l(this.fragmentationSize),r=this.frameQueue[0].opcode;switch(this.frameQueue.forEach((function(e){e.binaryPayload.copy(n,t),t+=e.binaryPayload.length})),this.frameQueue=[],this.fragmentationSize=0,r){case 2:this.emit("message",{type:"binary",binaryData:n});break;case 1:if(!c(n))return void this.drop(v.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this.emit("message",{type:"utf8",utf8Data:n.toString("utf8")});break;default:return void this.drop(v.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected first opcode in fragmentation sequence: 0x"+r.toString(16))}}}break;case 9:if(this._debug("-- Ping Frame"),this._pingListenerCount>0){var s=!1;this.emit("ping",(function(){s=!0}),e.binaryPayload),s||this.pong(e.binaryPayload)}else this.pong(e.binaryPayload);break;case 10:this._debug("-- Pong Frame"),this.emit("pong",e.binaryPayload);break;case 8:if(this._debug("-- Close Frame"),this.waitingForCloseResponse)return this._debug("---- Got close response from peer.  Completing closing handshake."),this.clearCloseTimer(),this.waitingForCloseResponse=!1,this.state=f,void this.socket.end();var i;if(this._debug("---- Closing handshake initiated by peer."),this.state=h,e.invalidCloseFrameLength?(this.closeReasonCode=1005,i=v.CLOSE_REASON_PROTOCOL_ERROR):-1===e.closeStatus||y(e.closeStatus)?(this.closeReasonCode=e.closeStatus,i=v.CLOSE_REASON_NORMAL):(this.closeReasonCode=e.closeStatus,i=v.CLOSE_REASON_PROTOCOL_ERROR),e.binaryPayload.length>1){if(!c(e.binaryPayload))return void this.drop(v.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this.closeDescription=e.binaryPayload.toString("utf8")}else this.closeDescription=v.CLOSE_DESCRIPTIONS[this.closeReasonCode];this._debug("------ Remote peer %s - code: %d - %s - close frame payload length: %d",this.remoteAddress,this.closeReasonCode,this.closeDescription,e.length),this._debug("------ responding to remote peer's close request."),this.sendCloseFrame(i,null),this.connected=!1;break;default:this._debug("-- Unrecognized Opcode %d",e.opcode),this.drop(v.CLOSE_REASON_PROTOCOL_ERROR,"Unrecognized Opcode: 0x"+e.opcode.toString(16))}},v.prototype.send=function(e,t){if(this._debug("send"),Buffer.isBuffer(e))this.sendBytes(e,t);else{if("function"!=typeof e.toString)throw new Error("Data provided must either be a Node Buffer or implement toString()");this.sendUTF(e,t)}},v.prototype.sendUTF=function(e,t){e=u(e.toString(),"utf8"),this._debug("sendUTF: %d bytes",e.length);var n=new o(this.maskBytes,this.frameHeader,this.config);n.opcode=1,n.binaryPayload=e,this.fragmentAndSend(n,t)},v.prototype.sendBytes=function(e,t){if(this._debug("sendBytes"),!Buffer.isBuffer(e))throw new Error("You must pass a Node Buffer object to WebSocketConnection.prototype.sendBytes()");var n=new o(this.maskBytes,this.frameHeader,this.config);n.opcode=2,n.binaryPayload=e,this.fragmentAndSend(n,t)},v.prototype.ping=function(e){this._debug("ping");var t=new o(this.maskBytes,this.frameHeader,this.config);t.opcode=9,t.fin=!0,e&&(Buffer.isBuffer(e)||(e=u(e.toString(),"utf8")),e.length>125&&(this._debug("WebSocket: Data for ping is longer than 125 bytes.  Truncating."),e=e.slice(0,124)),t.binaryPayload=e),this.sendFrame(t)},v.prototype.pong=function(e){this._debug("pong");var t=new o(this.maskBytes,this.frameHeader,this.config);t.opcode=10,Buffer.isBuffer(e)&&e.length>125&&(this._debug("WebSocket: Data for pong is longer than 125 bytes.  Truncating."),e=e.slice(0,124)),t.binaryPayload=e,t.fin=!0,this.sendFrame(t)},v.prototype.fragmentAndSend=function(e,t){if(this._debug("fragmentAndSend"),e.opcode>7)throw new Error("You cannot fragment control frames.");var n=this.config.fragmentationThreshold,r=e.binaryPayload.length;if(!this.config.fragmentOutgoingMessages||e.binaryPayload&&r<=n)return e.fin=!0,void this.sendFrame(e,t);for(var s=Math.ceil(r/n),i=0,a=function(e){e?"function"==typeof t&&(t(e),t=null):++i===s&&"function"==typeof t&&t()},c=1;c<=s;c++){var l=new o(this.maskBytes,this.frameHeader,this.config);l.opcode=1===c?e.opcode:0,l.fin=c===s;var u=c===s?r-n*(c-1):n,p=n*(c-1);l.binaryPayload=e.binaryPayload.slice(p,p+u),this.sendFrame(l,a)}},v.prototype.sendCloseFrame=function(e,t,n){if("number"!=typeof e&&(e=v.CLOSE_REASON_NORMAL),this._debug("sendCloseFrame state: %s, reasonCode: %d, description: %s",this.state,e,t),this.state===p||this.state===h){var r=new o(this.maskBytes,this.frameHeader,this.config);r.fin=!0,r.opcode=8,r.closeStatus=e,"string"==typeof t&&(r.binaryPayload=u(t,"utf8")),this.sendFrame(r,n),this.socket.end()}},v.prototype.sendFrame=function(e,t){this._debug("sendFrame"),e.mask=this.maskOutgoingPackets;var n=this.socket.write(e.toBuffer(),t);return this.outputBufferFull=!n,n},e.exports=v},347:(e,t,n)=>{var r=n(848),s=n(144).bufferAllocUnsafe;function i(e,t,n){this.maskBytes=e,this.frameHeader=t,this.config=n,this.maxReceivedFrameSize=n.maxReceivedFrameSize,this.protocolError=!1,this.frameTooLarge=!1,this.invalidCloseFrameLength=!1,this.parseState=1,this.closeStatus=-1}i.prototype.addData=function(e){if(1===this.parseState&&e.length>=2){e.joinInto(this.frameHeader,0,0,2),e.advance(2);var t=this.frameHeader[0],n=this.frameHeader[1];if(this.fin=Boolean(128&t),this.rsv1=Boolean(64&t),this.rsv2=Boolean(32&t),this.rsv3=Boolean(16&t),this.mask=Boolean(128&n),this.opcode=15&t,this.length=127&n,this.opcode>=8){if(this.length>125)return this.protocolError=!0,this.dropReason="Illegal control frame longer than 125 bytes.",!0;if(!this.fin)return this.protocolError=!0,this.dropReason="Control frames must not be fragmented.",!0}126===this.length?this.parseState=2:127===this.length?this.parseState=3:this.parseState=4}if(2===this.parseState)e.length>=2&&(e.joinInto(this.frameHeader,2,0,2),e.advance(2),this.length=this.frameHeader.readUInt16BE(2),this.parseState=4);else if(3===this.parseState&&e.length>=8){e.joinInto(this.frameHeader,2,0,8),e.advance(8);var i=[this.frameHeader.readUInt32BE(2),this.frameHeader.readUInt32BE(6)];if(0!==i[0])return this.protocolError=!0,this.dropReason="Unsupported 64-bit length frame received",!0;this.length=i[1],this.parseState=4}if(4===this.parseState&&(this.mask?e.length>=4&&(e.joinInto(this.maskBytes,0,0,4),e.advance(4),this.parseState=5):this.parseState=5),5===this.parseState){if(this.length>this.maxReceivedFrameSize)return this.frameTooLarge=!0,this.dropReason="Frame size of "+this.length.toString(10)+" bytes exceeds maximum accepted frame size",!0;if(0===this.length)return this.binaryPayload=s(0),this.parseState=6,!0;if(e.length>=this.length)return this.binaryPayload=e.take(this.length),e.advance(this.length),this.mask&&r.unmask(this.binaryPayload,this.maskBytes),8===this.opcode&&(1===this.length&&(this.binaryPayload=s(0),this.invalidCloseFrameLength=!0),this.length>=2&&(this.closeStatus=this.binaryPayload.readUInt16BE(0),this.binaryPayload=this.binaryPayload.slice(2))),this.parseState=6,!0}return!1},i.prototype.throwAwayPayload=function(e){return e.length>=this.length&&(e.advance(this.length),this.parseState=6,!0)},i.prototype.toBuffer=function(e){var t,n,i,o=2,a=0,c=0;this.fin&&(a|=128),this.rsv1&&(a|=64),this.rsv2&&(a|=32),this.rsv3&&(a|=16),this.mask&&(c|=128),a|=15&this.opcode,8===this.opcode?(this.length=2,this.binaryPayload&&(this.length+=this.binaryPayload.length),(n=s(this.length)).writeUInt16BE(this.closeStatus,0),this.length>2&&this.binaryPayload.copy(n,2)):this.binaryPayload?(n=this.binaryPayload,this.length=n.length):this.length=0,this.length<=125?c|=127&this.length:this.length>125&&this.length<=65535?(c|=126,o+=2):this.length>65535&&(c|=127,o+=8);var l=s(this.length+o+(this.mask?4:0));return l[0]=a,l[1]=c,i=2,this.length>125&&this.length<=65535?(l.writeUInt16BE(this.length,i),i+=2):this.length>65535&&(l.writeUInt32BE(0,i),l.writeUInt32BE(this.length,i+4),i+=8),this.mask?(t=e?0:4294967295*Math.random()>>>0,this.maskBytes.writeUInt32BE(t,0),this.maskBytes.copy(l,i),i+=4,n&&r.mask(n,this.maskBytes,l,i,this.length)):n&&n.copy(l,i),l},i.prototype.toString=function(){return"Opcode: "+this.opcode+", fin: "+this.fin+", length: "+this.length+", hasPayload: "+Boolean(this.binaryPayload)+", masked: "+this.mask},e.exports=i},9332:(e,t,n)=>{for(var r=n(6113),s=n(3837),i=n(7310),o=n(2361).EventEmitter,a=n(4016),c=/,\s*/,l=/;\s*/,u=/[\r\n]/g,p=/,\s*/,h=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ",String.fromCharCode(9)],d=[String.fromCharCode(127)],f=0;f<31;f++)d.push(String.fromCharCode(f));var m=/([\x00-\x20\x22\x28\x29\x2c\x2f\x3a-\x3f\x40\x5b-\x5e\x7b\x7d\x7f])/,g=/[^\x21\x23-\x2b\x2d-\x3a\x3c-\x5b\x5d-\x7e]/,v=/^"[^"]*"$/,y=/[\x00-\x20\x3b]/g,b=/[;,] */,w={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",406:"Not Acceptable",407:"Proxy Authorization Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Long",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};function S(e,t,n){o.call(this),this.socket=e,this.httpRequest=t,this.resource=t.url,this.remoteAddress=e.remoteAddress,this.remoteAddresses=[this.remoteAddress],this.serverConfig=n,this._socketIsClosing=!1,this._socketCloseHandler=this._handleSocketCloseBeforeAccept.bind(this),this.socket.on("end",this._socketCloseHandler),this.socket.on("close",this._socketCloseHandler),this._resolved=!1}function E(e){process.nextTick((function(){e.drop(1006,"TCP connection lost before handshake completed.",!0)}))}s.inherits(S,o),S.prototype.readHandshake=function(){var e=this,t=this.httpRequest;if(this.resourceURL=i.parse(this.resource,!0),this.host=t.headers.host,!this.host)throw new Error("Client must provide a Host header.");if(this.key=t.headers["sec-websocket-key"],!this.key)throw new Error("Client must provide a value for Sec-WebSocket-Key.");if(this.webSocketVersion=parseInt(t.headers["sec-websocket-version"],10),!this.webSocketVersion||isNaN(this.webSocketVersion))throw new Error("Client must provide a value for Sec-WebSocket-Version.");switch(this.webSocketVersion){case 8:case 13:break;default:var n=new Error("Unsupported websocket client version: "+this.webSocketVersion+"Only versions 8 and 13 are supported.");throw n.httpCode=426,n.headers={"Sec-WebSocket-Version":"13"},n}13===this.webSocketVersion?this.origin=t.headers.origin:8===this.webSocketVersion&&(this.origin=t.headers["sec-websocket-origin"]);var r=t.headers["sec-websocket-protocol"];if(this.protocolFullCaseMap={},this.requestedProtocols=[],r&&r.split(c).forEach((function(t){var n=t.toLocaleLowerCase();e.requestedProtocols.push(n),e.protocolFullCaseMap[n]=t})),!this.serverConfig.ignoreXForwardedFor&&t.headers["x-forwarded-for"]){var s=this.remoteAddress;this.remoteAddresses=t.headers["x-forwarded-for"].split(p),this.remoteAddresses.push(s),this.remoteAddress=this.remoteAddresses[0]}if(this.serverConfig.parseExtensions){var o=t.headers["sec-websocket-extensions"];this.requestedExtensions=this.parseExtensions(o)}else this.requestedExtensions=[];if(this.serverConfig.parseCookies){var a=t.headers.cookie;this.cookies=this.parseCookies(a)}else this.cookies=[]},S.prototype.parseExtensions=function(e){if(!e||0===e.length)return[];var t=e.toLocaleLowerCase().split(c);return t.forEach((function(e,t,n){var r=e.split(l),s=r[0],i=r.slice(1);i.forEach((function(e,t,n){var r=e.split("="),s={name:r[0],value:r[1]};n.splice(t,1,s)}));var o={name:s,params:i};n.splice(t,1,o)})),t},S.prototype.parseCookies=function(e){if(!e||"string"!=typeof e)return[];var t=[];return e.split(b).forEach((function(e){var n=e.indexOf("=");if(-1!==n){var r=e.substr(0,n).trim(),s=e.substr(++n,e.length).trim();'"'===s[0]&&(s=s.slice(1,-1)),t.push({name:r,value:decodeURIComponent(s)})}else t.push({name:e,value:null})})),t},S.prototype.accept=function(e,t,n){var s;this._verifyResolution(),e?void 0===(s=this.protocolFullCaseMap[e.toLocaleLowerCase()])&&(s=e):s=e,this.protocolFullCaseMap=null;var i=r.createHash("sha1");i.update(this.key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var o="HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: "+i.digest("base64")+"\r\n";if(s){for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),p=s.charAt(c);if(l<33||l>126||-1!==h.indexOf(p))throw this.reject(500),new Error('Illegal character "'+String.fromCharCode(p)+'" in subprotocol.')}if(-1===this.requestedProtocols.indexOf(e))throw this.reject(500),new Error("Specified protocol was not requested by the client.");s=s.replace(u,""),o+="Sec-WebSocket-Protocol: "+s+"\r\n"}if(this.requestedProtocols=null,t&&(t=t.replace(u,""),13===this.webSocketVersion?o+="Origin: "+t+"\r\n":8===this.webSocketVersion&&(o+="Sec-WebSocket-Origin: "+t+"\r\n")),n){if(!Array.isArray(n))throw this.reject(500),new Error('Value supplied for "cookies" argument must be an array.');var d={};n.forEach(function(e){if(!e.name||!e.value)throw this.reject(500),new Error('Each cookie to set must at least provide a "name" and "value"');if(e.name=e.name.replace(y,""),e.value=e.value.replace(y,""),d[e.name])throw this.reject(500),new Error("You may not specify the same cookie name twice.");d[e.name]=!0;var t=e.name.match(m);if(t)throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie name");if(t=e.value.match(v)?e.value.slice(1,-1).match(g):e.value.match(g))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie value");var n=[e.name+"="+e.value];if(e.path){if(t=e.path.match(y))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie path");n.push("Path="+e.path)}if(e.domain){if("string"!=typeof e.domain)throw this.reject(500),new Error("Domain must be specified and must be a string.");if(t=e.domain.match(y))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie domain");n.push("Domain="+e.domain.toLowerCase())}if(e.expires){if(!(e.expires instanceof Date))throw this.reject(500),new Error('Value supplied for cookie "expires" must be a vaild date object');n.push("Expires="+e.expires.toGMTString())}if(e.maxage){var r=e.maxage;if("string"==typeof r&&(r=parseInt(r,10)),isNaN(r)||r<=0)throw this.reject(500),new Error('Value supplied for cookie "maxage" must be a non-zero number');r=Math.round(r),n.push("Max-Age="+r.toString(10))}if(e.secure){if("boolean"!=typeof e.secure)throw this.reject(500),new Error('Value supplied for cookie "secure" must be of type boolean');n.push("Secure")}if(e.httponly){if("boolean"!=typeof e.httponly)throw this.reject(500),new Error('Value supplied for cookie "httponly" must be of type boolean');n.push("HttpOnly")}o+="Set-Cookie: "+n.join(";")+"\r\n"}.bind(this))}this._resolved=!0,this.emit("requestResolved",this),o+="\r\n";var f=new a(this.socket,[],e,!1,this.serverConfig);f.webSocketVersion=this.webSocketVersion,f.remoteAddress=this.remoteAddress,f.remoteAddresses=this.remoteAddresses;var b=this;return this._socketIsClosing?E(f):this.socket.write(o,"ascii",(function(e){e?E(f):(b._removeSocketCloseListeners(),f._addSocketEventListeners())})),this.emit("requestAccepted",f),f},S.prototype.reject=function(e,t,n){this._verifyResolution(),this._resolved=!0,this.emit("requestResolved",this),"number"!=typeof e&&(e=403);var r="HTTP/1.1 "+e+" "+w[e]+"\r\nConnection: close\r\n";if(t&&(r+="X-WebSocket-Reject-Reason: "+(t=t.replace(u,""))+"\r\n"),n)for(var s in n){var i=n[s].toString().replace(u,"");r+=s.replace(u,"")+": "+i+"\r\n"}r+="\r\n",this.socket.end(r,"ascii"),this.emit("requestRejected",this)},S.prototype._handleSocketCloseBeforeAccept=function(){this._socketIsClosing=!0,this._removeSocketCloseListeners()},S.prototype._removeSocketCloseListeners=function(){this.socket.removeListener("end",this._socketCloseHandler),this.socket.removeListener("close",this._socketCloseHandler)},S.prototype._verifyResolution=function(){if(this._resolved)throw new Error("WebSocketRequest may only be accepted or rejected one time.")},e.exports=S},3544:(e,t,n)=>{var r=n(144).extend,s=n(3837),i=n(2361).EventEmitter,o=n(7998);function a(e){i.call(this),this.config={server:null},e&&r(this.config,e),this.handlers=[],this._requestHandler=this.handleRequest.bind(this),this.config.server&&this.attachServer(this.config.server)}s.inherits(a,i),a.prototype.attachServer=function(e){if(!e)throw new Error("You must specify a WebSocketServer instance to attach to.");this.server=e,this.server.on("request",this._requestHandler)},a.prototype.detachServer=function(){if(!this.server)throw new Error("Cannot detach from server: not attached.");this.server.removeListener("request",this._requestHandler),this.server=null},a.prototype.mount=function(e,t,n){if(!e)throw new Error("You must specify a path for this handler.");if(t||(t="____no_protocol____"),!n)throw new Error("You must specify a callback for this handler.");if(!((e=this.pathToRegExp(e))instanceof RegExp))throw new Error("Path must be specified as either a string or a RegExp.");var r=e.toString();if(t=t.toLocaleLowerCase(),-1!==this.findHandlerIndex(r,t))throw new Error("You may only mount one handler per path/protocol combination.");this.handlers.push({path:e,pathString:r,protocol:t,callback:n})},a.prototype.unmount=function(e,t){var n=this.findHandlerIndex(this.pathToRegExp(e).toString(),t);if(-1===n)throw new Error("Unable to find a route matching the specified path and protocol.");this.handlers.splice(n,1)},a.prototype.findHandlerIndex=function(e,t){t=t.toLocaleLowerCase();for(var n=0,r=this.handlers.length;n<r;n++){var s=this.handlers[n];if(s.pathString===e&&s.protocol===t)return n}return-1},a.prototype.pathToRegExp=function(e){return"string"==typeof e&&("*"===e?e=/^.*$/:(e=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),e=new RegExp("^"+e+"$"))),e},a.prototype.handleRequest=function(e){var t=e.requestedProtocols;0===t.length&&(t=["____no_protocol____"]);for(var n=0;n<t.length;n++)for(var r=t[n].toLocaleLowerCase(),s=0,i=this.handlers.length;s<i;s++){var a=this.handlers[s];if(a.path.test(e.resourceURL.pathname)&&(r===a.protocol||"*"===a.protocol)){var c=new o(e,r);return void a.callback(c)}}e.reject(404,"No handler is available for the given request.")},e.exports=a},7998:(e,t,n)=>{var r=n(3837),s=n(2361).EventEmitter;function i(e,t){s.call(this),this.webSocketRequest=e,this.protocol="____no_protocol____"===t?null:t,this.origin=e.origin,this.resource=e.resource,this.resourceURL=e.resourceURL,this.httpRequest=e.httpRequest,this.remoteAddress=e.remoteAddress,this.webSocketVersion=e.webSocketVersion,this.requestedExtensions=e.requestedExtensions,this.cookies=e.cookies}r.inherits(i,s),i.prototype.accept=function(e,t){var n=this.webSocketRequest.accept(this.protocol,e,t);return this.emit("requestAccepted",n),n},i.prototype.reject=function(e,t,n){this.webSocketRequest.reject(e,t,n),this.emit("requestRejected",this)},e.exports=i},1172:(e,t,n)=>{var r=n(144).extend,s=n(144),i=n(3837),o=n(8995)("websocket:server"),a=n(2361).EventEmitter,c=n(9332),l=function(e){a.call(this),this._handlers={upgrade:this.handleUpgrade.bind(this),requestAccepted:this.handleRequestAccepted.bind(this),requestResolved:this.handleRequestResolved.bind(this)},this.connections=[],this.pendingRequests=[],e&&this.mount(e)};i.inherits(l,a),l.prototype.mount=function(e){if(this.config={httpServer:null,maxReceivedFrameSize:65536,maxReceivedMessageSize:1048576,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,keepalive:!0,keepaliveInterval:2e4,dropConnectionOnKeepaliveTimeout:!0,keepaliveGracePeriod:1e4,useNativeKeepalive:!1,assembleFragments:!0,autoAcceptConnections:!1,ignoreXForwardedFor:!1,parseCookies:!0,parseExtensions:!0,disableNagleAlgorithm:!0,closeTimeout:5e3},r(this.config,e),!this.config.httpServer)throw new Error("You must specify an httpServer on which to mount the WebSocket server.");Array.isArray(this.config.httpServer)||(this.config.httpServer=[this.config.httpServer]);var t=this._handlers.upgrade;this.config.httpServer.forEach((function(e){e.on("upgrade",t)}))},l.prototype.unmount=function(){var e=this._handlers.upgrade;this.config.httpServer.forEach((function(t){t.removeListener("upgrade",e)}))},l.prototype.closeAllConnections=function(){this.connections.forEach((function(e){e.close()})),this.pendingRequests.forEach((function(e){process.nextTick((function(){e.reject(503)}))}))},l.prototype.broadcast=function(e){Buffer.isBuffer(e)?this.broadcastBytes(e):"function"==typeof e.toString&&this.broadcastUTF(e)},l.prototype.broadcastUTF=function(e){this.connections.forEach((function(t){t.sendUTF(e)}))},l.prototype.broadcastBytes=function(e){this.connections.forEach((function(t){t.sendBytes(e)}))},l.prototype.shutDown=function(){this.unmount(),this.closeAllConnections()},l.prototype.handleUpgrade=function(e,t){var n=this,r=new c(t,e,this.config);try{r.readHandshake()}catch(e){return r.reject(e.httpCode?e.httpCode:400,e.message,e.headers),o("Invalid handshake: %s",e.message),void this.emit("upgradeError",e)}this.pendingRequests.push(r),r.once("requestAccepted",this._handlers.requestAccepted),r.once("requestResolved",this._handlers.requestResolved),t.once("close",(function(){n._handlers.requestResolved(r)})),!this.config.autoAcceptConnections&&s.eventEmitterListenerCount(this,"request")>0?this.emit("request",r):this.config.autoAcceptConnections?r.accept(r.requestedProtocols[0],r.origin):r.reject(404,"No handler is configured to accept the connection.")},l.prototype.handleRequestAccepted=function(e){var t=this;e.once("close",(function(n,r){t.handleConnectionClose(e,n,r)})),this.connections.push(e),this.emit("connect",e)},l.prototype.handleConnectionClose=function(e,t,n){var r=this.connections.indexOf(e);-1!==r&&this.connections.splice(r,1),this.emit("close",e,t,n)},l.prototype.handleRequestResolved=function(e){var t=this.pendingRequests.indexOf(e);-1!==t&&this.pendingRequests.splice(t,1)},e.exports=l},144:(e,t,n)=>{var r=t.noop=function(){};function s(e,t,n){this.logFunction=n,this.identifier=e,this.uniqueID=t,this.buffer=[]}t.extend=function(e,t){for(var n in t)e[n]=t[n]},t.eventEmitterListenerCount=n(2361).EventEmitter.listenerCount||function(e,t){return e.listeners(t).length},t.bufferAllocUnsafe=Buffer.allocUnsafe?Buffer.allocUnsafe:function(e){return new Buffer(e)},t.bufferFromString=Buffer.from?Buffer.from:function(e,t){return new Buffer(e,t)},t.BufferingLogger=function(e,t){var i=n(8995)(e);if(i.enabled){var o=new s(e,t,i),a=o.log.bind(o);return a.printOutput=o.printOutput.bind(o),a.enabled=i.enabled,a}return i.printOutput=r,i},s.prototype.log=function(){return this.buffer.push([new Date,Array.prototype.slice.call(arguments)]),this},s.prototype.clear=function(){return this.buffer=[],this},s.prototype.printOutput=function(e){e||(e=this.logFunction);var t=this.uniqueID;this.buffer.forEach((function(n){var r=n[0].toLocaleString(),s=n[1].slice(),i=s[0];null!=i&&(i="%s - %s - "+i.toString(),s.splice(0,1,i,r,t),e.apply(global,s))}))}},455:(e,t,n)=>{e.exports=n(5232).version},5729:(e,t,n)=>{e.exports={server:n(1172),client:n(2339),router:n(3544),frame:n(347),request:n(9332),connection:n(4016),w3cwebsocket:n(348),deprecation:n(9168),version:n(455)}},5965:(e,t,n)=>{function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(7723)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var s=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(s++,"%c"===e&&(i=s))})),e.splice(i,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},7723:(e,t,n)=>{var r;function s(e){function n(){if(n.enabled){var e=n,s=+new Date,i=s-(r||s);e.diff=i,e.prev=r,e.curr=s,r=s;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var s=t.formatters[r];if("function"==typeof s){var i=o[c];n=s.call(e,i),o.splice(c,1),c--}return n})),t.formatArgs.call(e,o);var l=n.log||t.log||console.log.bind(console);l.apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=s.debug=s.default=s).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,s=0;s<r;s++)n[s]&&("-"===(e=n[s].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(2939),t.names=[],t.skips=[],t.formatters={}},8995:(e,t,n)=>{"undefined"!=typeof process&&"renderer"===process.type?e.exports=n(5965):e.exports=n(6285)},6285:(e,t,n)=>{var r=n(6224),s=n(3837);(t=e.exports=n(7723)).init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(){return o.write(s.format.apply(s,arguments)+"\n")},t.formatArgs=function(e){var n=this.namespace;if(this.useColors){var r=this.color,s="  [3"+r+";1m"+n+" [0m";e[0]=s+e[0].split("\n").join("\n"+s),e.push("[3"+r+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+n+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=a,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(i)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{});var i=parseInt(process.env.DEBUG_FD,10)||2;1!==i&&2!==i&&s.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var o=1===i?process.stdout:2===i?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new r.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":(t=new(n(7147).SyncWriteStream)(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":(t=new(n(1808).Socket)({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(i);function a(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)},t.enable(a())},2939:e=>{var t=1e3,n=60*t,r=60*n,s=24*r;function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,o){o=o||{};var a,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(i){var o=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return o.long?i(a=e,s,"day")||i(a,r,"hour")||i(a,n,"minute")||i(a,t,"second")||a+" ms":function(e){return e>=s?Math.round(e/s)+"d":e>=r?Math.round(e/r)+"h":e>=n?Math.round(e/n)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8452:(e,t,n)=>{var r=n(4300).Buffer,s=n(2361).EventEmitter,i=n(144).bufferAllocUnsafe;function o(e){if(!(this instanceof o))return new o(e);s.call(this);var t=this;void 0===e&&(e={}),t.encoding=e.encoding;var n={next:null,buffer:null},a={next:null,buffer:null},c=0;t.__defineGetter__("length",(function(){return c}));var l=0;t.write=function(e){return n.buffer?(a.next={next:null,buffer:e},a=a.next):(n.buffer=e,a=n),c+=e.length,t.emit("write",e),!0},t.end=function(e){r.isBuffer(e)&&t.write(e)},t.push=function(){var e=[].concat.apply([],arguments);return e.forEach(t.write),t},t.forEach=function(e){if(!n.buffer)return i(0);if(n.buffer.length-l<=0)return t;for(var r={buffer:n.buffer.slice(l),next:n.next};r&&r.buffer&&!e(r.buffer);)r=r.next;return t},t.join=function(e,r){if(!n.buffer)return i(0);null==e&&(e=0),null==r&&(r=t.length);var s=i(r-e),o=0;return t.forEach((function(t){if(e<o+t.length&&o<r&&t.copy(s,Math.max(0,o-e),Math.max(0,e-o),Math.min(t.length,r-o)),(o+=t.length)>r)return!0})),s},t.joinInto=function(e,r,s,o){if(!n.buffer)return new i(0);null==s&&(s=0),null==o&&(o=t.length);var a=e;if(a.length-r<o-s)throw new Error("Insufficient space available in target Buffer.");var c=0;return t.forEach((function(e){if(s<c+e.length&&c<o&&e.copy(a,Math.max(r,r+c-s),Math.max(0,s-c),Math.min(e.length,o-c)),(c+=e.length)>o)return!0})),a},t.advance=function(e){for(l+=e,c-=e;n.buffer&&l>=n.buffer.length;)l-=n.buffer.length,n=n.next?n.next:{buffer:null,next:null};return null===n.buffer&&(a={next:null,buffer:null}),t.emit("advance",e),t},t.take=function(e,n){if(null==e?e=t.length:"number"!=typeof e&&(n=e,e=t.length),n||(n=t.encoding),n){var r="";return t.forEach((function(t){if(e<=0)return!0;r+=t.toString(n,0,Math.min(e,t.length)),e-=t.length})),r}return t.join(0,e)},t.toString=function(){return t.take("binary")}}e.exports=o,e.exports.BufferList=o,n(3837).inherits(o,s)},1334:(e,t,n)=>{e.exports={EventTarget:n(4794),Event:n(2918)}},2918:e=>{e.exports=function(e){this.type=e,this.isTrusted=!1,this._yaeti=!0}},4794:e=>{function t(){"function"!=typeof this.addEventListener&&(this._listeners={},this.addEventListener=n,this.removeEventListener=r,this.dispatchEvent=s)}function n(e,t){var n,r,s;if(e&&t){for(void 0===(n=this._listeners[e])&&(this._listeners[e]=n=[]),r=0;s=n[r];r++)if(s===t)return;n.push(t)}}function r(e,t){var n,r,s;if(e&&t&&void 0!==(n=this._listeners[e])){for(r=0;s=n[r];r++)if(s===t){n.splice(r,1);break}0===n.length&&delete this._listeners[e]}}function s(e){var t,n,r,s,i,o=!1;if(!e||"string"!=typeof e.type)throw new Error("`event` must have a valid `type` property");e._yaeti&&(e.target=this,e.cancelable=!0);try{e.stopImmediatePropagation=function(){o=!0}}catch(e){}for(t=e.type,n=this._listeners[t]||[],"function"==typeof(r=this["on"+t])&&r.call(this,e),s=0;(i=n[s])&&!o;s++)i.call(this,e);return!e.defaultPrevented}e.exports=t,Object.defineProperties(t.prototype,{listeners:{get:function(){return this._listeners}}})},3807:(e,t,n)=>{(()=>{"use strict";var e=[,(e,t,n)=>{n.r(t),n.d(t,{CallHandlers:()=>r.CallHandlers,Connection:()=>r.Connection,ConnectionBearer:()=>r.ConnectionBearer,ConnectionManager:()=>s.ConnectionManager,DeferredPromise:()=>i.DeferredPromise,ExecServer:()=>a.ExecServer,FileSystemProviderErrorCode:()=>a.FileSystemProviderErrorCode,FileType:()=>a.FileType,NetworkError:()=>o.NetworkError,RPCError:()=>r.RPCError,RemoteVersion:()=>c.RemoteVersion,ServerWebSocket:()=>l.ServerWebSocket,TimeoutError:()=>o.TimeoutError,closedDuplexStream:()=>u.closedDuplexStream,msgPackEncode:()=>r.msgPackEncode});var r=n(2),s=n(6),i=n(5),o=n(10),a=n(11),c=n(7),l=n(14),u=n(12)},(e,t,n)=>{n.r(t),n.d(t,{CallHandlers:()=>u,Connection:()=>c,ConnectionBearer:()=>p,RPCError:()=>a,msgPackEncode:()=>l});var r=n(3),s=n(4),i=n(5);let o=0;class a extends Error{constructor(e,t){super(`json rpc error ${e}: message`),this.code=e,this.message=t}}class c{constructor(e,t=s.encode,n=new u){this.tunnel=e,this.globalHandlers=n,this.callbacks=new Map,this.streams=new Map,this.notifyEmitter=new r.EventEmitter,this.closeEmitter=new r.EventEmitter,this.ownHandlers=new u,this.onClose=this.closeEmitter.event,this.registerRequestHandler=this.ownHandlers.register,this.encode=t,(async()=>{try{for await(const t of(0,s.decodeMultiStream)(e)){const e=t;"result"in e||"error"in e?this.callbacks.get(e.id)?.resolve(e):"id"in e&&"number"==typeof e.id?this.handleRequest(e):this.notifyEmitter.fire(e)}}catch(t){e.end(),this.closeEmitter.fire(t)}})(),e.once("close",(()=>{this.rejectAllCalls(new a(0,"Connection closed")),this.closeEmitter.fire(void 0)})),e.once("error",(e=>{const t=new a(0,e.message);this.rejectAllCalls(t),this.closeEmitter.fire(t)})),this.onNotification("stream_data",(e=>{this.streams.get(e.stream)?.pushData(e.segment)})),this.onNotification("stream_ended",(e=>{this.streams.get(e.stream)?.markEnded(),this.streams.delete(e.stream)})),this.onNotification("streams_started",(e=>{const t=e.stream_ids,n=this.callbacks.get(e.for_request_id);if(n?.onStream)for(const e of t){const t=new h(e,this);this.streams.set(e,t),n.onStream(t)}}))}static fromDuplexStreams(e,t){const n={once:(t,n)=>{"close"===t&&e.onEnd.then(n)},write:e=>t.write(e),async*[Symbol.asyncIterator](){let t=new i.DeferredPromise,n=t;for(e.onDidReceiveMessage((e=>{const n=new i.DeferredPromise;t.complete({data:e,next:n}),t=n})),e.onEnd.then((()=>{t.complete(void 0)}));;){const e=await n.p;if(!e)return;yield e.data,n=e.next}},end:()=>t.end()};return new c(n,s.encode)}dispose(){this.tunnel.end()}async call(e,t,n,r){const s=o++;return new Promise(((i,o)=>{this.callbacks.set(s,{onStream:r,resolve:e=>{"error"in e?o(new a(e.error?.code,e.error?.message)):i(e.result)},reject:o}),n?.addEventListener("abort",(()=>o(new a(0,"Operation cancelled")))),this.write(this.encode({id:s,method:e,params:t}))})).finally((()=>this.callbacks.delete(s)))}onNotification(e,t){return this.notifyEmitter.event((n=>{n.method===e&&t(n.params)}))}notify(e,t){this.write(this.encode({method:e,params:t}))}async handleRequest(e){const t=this.ownHandlers.map.get(e.method)||this.globalHandlers.map.get(e.method);if(!t){const t={id:e.id,error:{message:`Unknown method ${e.method}. Cannot resolve request`,code:36}};return void this.write(this.encode(t))}let n;try{n={id:e.id,result:await t(e.params,e.id)}}catch(t){t instanceof a?n={id:e.id,error:{code:t.code,message:t.message}}:(console.warn("Unexpected error handling request",e,t),n={id:e.id,error:{code:-1,message:String(t)}})}this.write(this.encode(n))}write(e){this.tunnel.write(e)}rejectAllCalls(e){for(const{reject:t}of this.callbacks.values())t(e);this.callbacks.clear()}}function l(e){const t=(0,s.encode)(e),n=new Uint8Array(4+t.length);return new DataView(n.buffer).setUint32(0,t.length),n.set(t,4),n}class u{constructor(){this.map=new Map,this.register=(e,t)=>{this.map.has(e)&&console.warn("Overriding previous handler for method: ",e),this.map.set(e,t)}}}class p{constructor(e){this.callHandlers=new u,this.startEmitter=new r.EventEmitter,this.onStartConnecting=this.startEmitter.event,this.notifyEmitter=new r.EventEmitter,this.closeEmitter=new r.EventEmitter,this.onClose=this.closeEmitter.event,this.registerRequestHandler=this.callHandlers.register,this.BEARER_TYPE=e}async checkedAcquire(){if(this.streamPromise){const e=await this.streamPromise;if(await this.isStreamValid(e))return e;e.dispose()}this.streamPromise=this.acquireNow();try{return await this.streamPromise}catch(e){throw this.streamPromise=void 0,e}}async acquire(){this.streamPromise??(this.streamPromise=this.acquireNow());try{return await this.streamPromise}catch(e){throw this.streamPromise=void 0,e}}async isStreamValid(e){return!0}async close(){this.streamPromise?.then((e=>e.dispose())),this.streamPromise=void 0}async acquireNow(){const e=await this.getConnectionTunnel(),t=new c(e,(e=>this.encodeMessage(e)),this.callHandlers);return t.onClose((e=>{this.streamPromise=void 0,this.closeEmitter.fire(e)})),this.startEmitter.fire(t),t}}class h{constructor(e,t){this.id=e,this.connection=t,this.queue=[],this.dataEmitter=new r.EventEmitter,this.endDeferred=new i.DeferredPromise,this.onDidReceiveMessage=(...e)=>(this.queue&&setTimeout((()=>this.dequeue())),this.dataEmitter.event(...e))}get onData(){return this.onDidReceiveMessage}get onEnd(){return this.queue&&setTimeout((()=>this.dequeue())),this.endDeferred.p}write(e){this.connection.notify("stream_data",{stream:this.id,segment:e})}end(){this.connection.notify("stream_ended",{stream:this.id})}pushData(e){this.queue?this.queue.push(e):this.dataEmitter.fire(e)}markEnded(){this.queue?this.queue.push(null):this.endDeferred.complete()}dequeue(){if(!this.queue)return;const e=this.queue;this.queue=void 0;for(const t of e)null===t?this.endDeferred.complete():this.dataEmitter.fire(t)}}},e=>{e.exports=n(9016)},e=>{e.exports=n(2398)},(e,t,n)=>{n.r(t),n.d(t,{DeferredPromise:()=>r});class r{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise(((e,t)=>{this.completeCallback=e,this.errorCallback=t}))}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(e){this.completeCallback(e),this.resolved=!0}error(e){this.errorCallback(e),this.rejected=!0}}},(e,t,n)=>{n.r(t),n.d(t,{ConnectionManager:()=>a});var r=n(3),s=n(8),i=n(5),o=n(7);class a{constructor({bearer:e}){this.socketId=0,this.connectingEmitter=new r.EventEmitter,this.onStartConnecting=this.connectingEmitter.event,this.connectedEmitter=new r.EventEmitter,this.onConnected=this.connectedEmitter.event,this.logEmitter=new r.EventEmitter,this.onLog=this.logEmitter.event,this.versionPromise=new i.DeferredPromise,this.bearer=e,this.bearer.onStartConnecting((e=>{e.onNotification("version",(({version:e,protocol_version:t})=>{this.versionPromise.isSettled&&(this.versionPromise=new i.DeferredPromise),this.versionPromise.complete(new o.RemoteVersion(e,t))}))})),this.onClose=this.bearer.onClose;let t=!0;this.bearer.onStartConnecting((e=>{if(this.connectingEmitter.fire(),e.onNotification("serverlog",(e=>{this.logEmitter.fire(e)})),e.onNotification("makehttpreq",(async({url:t,method:n,req_id:r})=>{this.makeHttpCall(e,t,n,r)})),t){const n=e.onNotification("servermsg",(()=>{t&&(this.connectedEmitter.fire(),n.dispose(),t=!1)}))}}))}get version(){return this.versionPromise.p}async makeHttpCall(e,t,n,r){let i;try{i=await(0,s.fetchFn)(t,{method:n})}catch(t){return e.notify("httpheaders",{headers:[],status_code:503,req_id:r}),void e.notify("httpbody",{segment:(new TextEncoder).encode(String(t)),complete:!0,req_id:r})}e.notify("httpheaders",{headers:[...i.headers],status_code:i.status,req_id:r});const o=()=>e.notify("httpbody",{segment:new Uint8Array,complete:!0,req_id:r});if(i.body&&"function"==typeof i.body.on){const t=i.body;return t.on("data",(t=>e.notify("httpbody",{segment:t,complete:!1,req_id:r}))),t.on("end",o),t.on("error",o),void t.resume()}const a=i.body;if(a)try{const t=a.getReader();for(;;){const{done:n,value:s}=await t.read();if(e.notify("httpbody",{segment:s||new Uint8Array,complete:n,req_id:r}),n)break}}catch(e){throw o(),e}else o()}nextSocketId(){return this.socketId++}async checkForUpdates(e){return(await this.bearer.acquire()).call("update",{do_update:e?.doUpdate??!1})}async call(e,t,n,r){const s=await this.bearer.acquire();return await s.call(e,t,n,r)}}},(e,t,n)=>{n.r(t),n.d(t,{RemoteVersion:()=>r});class r{constructor(e,t=0){this.cliVersion=e,this.protocolVerson=t}shouldWarnOutdated(){return this.protocolVerson<=2}canPing(){return this.protocolVerson>=1}canCompressServerMsg(){return this.protocolVerson>=2}usesConnectionToken(){return this.protocolVerson>=3}shouldLengthPrefixMessages(){return this.protocolVerson<4}}},(e,t,n)=>{n.r(t),n.d(t,{fetchFn:()=>s});var r=n(9);const s=n.n(r)()},e=>{e.exports=n(3765)},(e,t,n)=>{n.r(t),n.d(t,{NetworkError:()=>r,TimeoutError:()=>s});class r extends Error{constructor(e,t="ECONNREFUSED"){super(e.message),this.code=t,this.syscall="connect",this.stack=e.stack}}class s extends Error{constructor(){super("Operation timed out")}}},(e,t,n)=>{n.r(t),n.d(t,{ExecServer:()=>c,FileSystemProviderErrorCode:()=>p,FileType:()=>h});var r=n(3),s=n(13),i=n(2),o=n(5),a=n(12);class c{constructor(e){this.connection=e,this.fs={stat:async e=>{const t=await this.connection.call("fs_stat",{path:e});if(!t.exists)throw new u(`File not found: ${e}`,p.FileNotFound);return{ctime:0,mtime:0,size:0,type:l(t.type)}},mkdirp:async e=>{await this.connection.call("fs_mkdirp",{path:e})},rm:async e=>{await this.connection.call("fs_rm",{path:e})},rename:async(e,t)=>{await this.connection.call("fs_rename",{from_path:e,to_path:t})},readdir:async e=>{const{contents:t}=await this.connection.call("fs_readdir",{path:e});return t.map((({name:e,type:t})=>({name:e,type:l(t)})))},read:e=>{const t=new o.DeferredPromise;return this.connection.call("fs_read",{path:e},void 0,(e=>t.complete(e))).catch((e=>t.error(e))),t.p},write:async e=>{const t=new o.DeferredPromise,n=this.connection.call("fs_write",{path:e},void 0,(e=>t.complete(e))).then((()=>{}),(e=>{if(t.complete)throw e;t.error(e)}));return{stream:await t.p,done:n}},connect:async e=>{const t=new o.DeferredPromise,n=this.connection.call("fs_connect",{path:e},void 0,(e=>t.complete(e))).then((()=>{}),(e=>{if(t.complete)throw e;t.error(e)}));return{stream:await t.p,done:n}}}}async kill(e){await this.connection.call("sys_kill",{pid:e})}async spawn(e,t,{env:n={},cwd:r}={}){const s=Array.from({length:3},(()=>new o.DeferredPromise)),i=Promise.all(s.map((e=>e.p))),c=this.connection.call("spawn",{command:e,args:t,env:n,cwd:r},void 0,(e=>{s.shift()?.complete(e)})).then((e=>(s.forEach((e=>e.complete(a.closedDuplexStream))),{status:e.exit_code,message:e.message}))),[l,u,p]=await i;return{stdin:l,stdout:u,stderr:p,onExit:c}}async spawnRemoteServerConnector(e,t,n={}){const{connection:s,logs:i,onExit:o}=await this.spawnCli(e,t,n),a=new c(s);return{logs:i,onExit:o,connect:async e=>{const t=await a.serve(e),n=new r.EventEmitter,s=new r.EventEmitter;return t.onEnd.then((()=>n.fire())),{send:e=>t.write(e),end:()=>t.end(),onDidEnd:n.event,onDidClose:s.event,onDidReceiveMessage:t.onDidReceiveMessage}}}}async spawnCli(e,t,{env:n={},cwd:r}={}){const s=Array.from({length:3},(()=>new o.DeferredPromise)),c=Promise.all(s.map((e=>e.p))),l=this.connection.call("spawn_cli",{command:e,args:t,env:n,cwd:r},void 0,(e=>{s.shift()?.complete(e)})).then((e=>(s.forEach((e=>e.complete(a.closedDuplexStream))),{status:e.exit_code,message:e.message}))),[u,p,h]=await c;return{connection:i.Connection.fromDuplexStreams(p,u),logs:h,onExit:l}}async downloadCliExecutable(e,t,n,r){return this.connection.call("acquire_cli",{command:t,args:n,platform:e.buildTarget,quality:e.quality,commit_id:e.commit,env:r?.env}).then((e=>({status:e.exit_code,message:e.message})))}async acquireCli(e){return this.connection.call("acquire_cli",{command:e.command,args:e.args,platform:e.buildTarget??e.platform,quality:e.quality,commit_id:e.commit??e.commit_id,env:e.env}).then((e=>({status:e.exit_code,message:e.message})))}async serve(e){const t=e.socketId??e.socket_id;return await this.connection.call("serve",{socket_id:t,commit_id:e.commit??e.commit_id,extensions:e.extensions,quality:e.quality,archive_path:e.archivePath??e.archive_path,compress:e.compress,connection_token:e.connectionToken??e.connection_token}),new d(t,this.connection,!!e.compress)}async env(){const e=await this.connection.call("get_env",{});return{env:e.env,osRelease:e.os_release,osPlatform:e.os_platform}}async fsStat(e){const t=await this.connection.call("fs_stat",{path:e});return t.exists?{exists:!0,size:t.size,type:t.type}:{exists:!1}}async tcpConnect(e,t){const n=new o.DeferredPromise,r=this.connection.call("net_connect",{host:e,port:t},void 0,(e=>n.complete(e))).then((()=>{}),(e=>{if(n.complete)throw e;n.error(e)}));return{stream:await n.p,done:r}}}const l=e=>{switch(e){case"file":return h.File;case"dir":return h.Directory;case"link":return h.SymbolicLink;default:return h.Unknown}};class u extends Error{constructor(e,t){super(e),this.code=t}}var p,h;!function(e){e.FileNotFound="EntryNotFound"}(p||(p={})),function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(h||(h={}));class d{constructor(e,t,n){this.socketId=e,this.connection=t,this.id=0,this.disposables=[],this.onDataEmitter=new r.EventEmitter,this.onDidReceiveMessage=this.onDataEmitter.event,this.onData=this.onDidReceiveMessage,this.onCloseEmitter=new r.EventEmitter,this.onClose=this.onCloseEmitter.event,this.onEndDeferred=new o.DeferredPromise,this.onEnd=this.onEndDeferred.p;let i=Promise.resolve();if(n){const n=this.zip={deflate:(0,s.createDeflateRaw)(),inflate:(0,s.createInflateRaw)()};n.inflate.on("data",(e=>this.onDataEmitter.fire(e))),n.deflate.on("data",(n=>{t.notify("servermsg",{i:e,body:n})})),this.disposables.push({dispose:()=>{n.deflate.close(),n.inflate.close()}})}this.disposables.push(t.onNotification("serverclose",(({i:t})=>{t===e&&(this.zip?i.then((()=>{this.zip.inflate.close((()=>this.onDidClose()))})):this.onDidClose())})),t.onNotification("servermsg",(({i:t,body:n})=>{if(t===e)if(this.zip){const e=new Promise((e=>this.zip.inflate.write(n,e)));i=i.then((()=>e))}else this.onDataEmitter.fire(n)})))}write(e){const t=this.socketId,n=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);this.zip?this.zip.deflate.write(n,void 0,(()=>{this.zip.deflate.flush(2)})):this.connection.notify("servermsg",{i:t,body:n})}end(){this.disposables.forEach((e=>e.dispose()))}onDidClose(){this.onCloseEmitter.fire(),this.onEndDeferred.complete()}}},(e,t,n)=>{n.r(t),n.d(t,{closedDuplexStream:()=>r});const r={id:0,onData:()=>({dispose:()=>{}}),onDidReceiveMessage:()=>({dispose:()=>{}}),onEnd:Promise.resolve(void 0),write:()=>{},end:()=>{}}},e=>{e.exports=n(9796)},(e,t,n)=>{n.r(t),n.d(t,{ServerWebSocket:()=>o});var r=n(3),s=n(10),i=n(11);class o{constructor(e,t){this.options=e,this.version=t,this.SOCKET_TYPE="Local Proxy Server Socket",this.dispose=[],this.onDataEmitter=new r.EventEmitter,this.onData=this.onDataEmitter.event,this.onOpenEmitter=new r.EventEmitter,this.onOpen=this.onOpenEmitter.event,this.onCloseEmitter=new r.EventEmitter,this.onClose=this.onCloseEmitter.event,this.onErrorEmitter=new r.EventEmitter,this.onError=this.onErrorEmitter.event}send(e){const t=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);this.stream?this.stream.write(t):console.warn(new Error("attempted to send data before socket was open").stack)}close(){this.dispose.forEach((e=>e.dispose()))}onMessage(e){this.onDataEmitter.fire(e)}upgradeToWebSocketConnection(){}async initialize(){const e=await this.options.bearer.checkedAcquire(),t=!!(await this.version).canCompressServerMsg()&&(this.options.compress??!0),n=this.stream=await new i.ExecServer(e).serve({socketId:this.options.socketId,extensions:this.options.extensions||[],quality:this.options.product.quality,commit:this.options.product.commit,archivePath:this.options.archivePath,connectionToken:this.options.connectionToken,compress:t});this.dispose.push(n.onDidReceiveMessage(this.onMessage,this)),this.dispose.push(e.onClose((e=>{e&&this.onErrorEmitter.fire(new s.NetworkError(e)),this.onCloseEmitter.fire()}))),this.upgradeToWebSocketConnection()}}},(e,t,n)=>{n.r(t),n.d(t,{ProxyConnection:()=>v,State:()=>g});var r=n(3),s=n(4),i=n(16),o=n(17),a=n(18),c=n(19),l=n(20),u=n(21),p=n(2),h=n(5),d=n(22),f=n(23);const m=!process.env.VSCODE_TUNNELS_DISABLE_PROCESS_REUSE;var g;!function(e){e[e.Idle=0]="Idle",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.Closed=3]="Closed"}(g||(g={}));class v{constructor(e,t){this.args=e,this.logger=t,this.extraHandlers=new p.CallHandlers,this.registerRequestHandler=this.extraHandlers.register.bind(this.extraHandlers),this.bearerPromise=new h.DeferredPromise,this.bearer=this.bearerPromise.p,this.localPortPromise=new h.DeferredPromise,this.localPort=this.localPortPromise.p,this.startEmitter=new r.EventEmitter,this.onStartConnecting=this.startEmitter.event,this.closeEmitter=new r.EventEmitter,this.onClose=this.closeEmitter.event,this.connectedEmitter=new r.EventEmitter,this.onConnected=this.connectedEmitter.event,this.logEmitter=new r.EventEmitter,this.onLog=this.logEmitter.event,this._state=g.Idle,this.initialize(),this.bearer.catch((e=>{this.closeEmitter.fire(e)}))}get state(){return this._state}static async create(e){const t=v.getPathForRunningProxyInTmpDir(e.nonce),n={args:e.args,productInfo:e.productInfo,runningProxyInfoFile:t},r=await v.getValidProxySocket(t);if(r){e.logger.log(3,`Found running server in ${r}`);try{const t=new b({...n,proxySocketPath:r},e.logger);return e.setup?.(t),await(0,d.timeoutPromise)(5e3,t.callOnProxy("greet",{})),t}catch(t){e.logger.log(3,`Error greeting the server, starting a new instance (${t})`)}}e.logger.log(3,"Creating new tunnel proxy server");const s=function(e,t){const n=(0,o.createHash)("sha256").update(e).update("\0").update(t).digest("hex").slice(0,16);return"win32"===process.platform?`\\\\.\\pipe\\vscode-tunneling-${n}-sock`:process.env.XDG_RUNTIME_DIR?u.join(process.env.XDG_RUNTIME_DIR,`vscode-tunneling-${n}.sock`):u.join(l.tmpdir(),`vscode-tunneling-${n}.sock`)}(e.nonce,(0,o.randomBytes)(20).toString("hex")),i=new y({...n,proxySocketPath:s},e.logger,e.serverPath);return e.setup?.(i),i}static async getValidProxySocket(e){try{const t=JSON.parse(await a.promises.readFile(e,"utf-8"));if(t.at>Date.now()-f.proxyFileTimeout)return await a.promises.stat(t.socket),t.socket}catch{}}static getPathForRunningProxyInTmpDir(e){const t=`vscode-server-proxy-${(0,o.createHash)("sha256").update(e).digest("hex").slice(0,16)}-daemon`;return u.join(l.tmpdir(),t)}async callOnProxy(e,t){return(await this.bearer).call(e,t)}async call(e,t,n,r){return(await this.bearer).call("calltunnel",{method:e,params:t,stream:!!r},n,r)}async initialize(){this.connectToProxyServer();const e=await this.bearer;e.onNotification("serverlog",(e=>{this.logger.log(e.level,`[server] ${e.line}`),this.logEmitter.fire(e)})),e.onNotification("proxylog",(e=>this.logger.log(e.level,`[proxy] ${e.message}`,...e.args))),e.onNotification("statechange",(e=>{switch(e.state){case"connecting":this._state=g.Connecting,this.startEmitter.fire();break;case"connected":this._state=g.Connected,this.connectedEmitter.fire();break;case"closed":let t;this._state=g.Closed,e.reason&&(t=new Error(e.reason.message),t.stack=e.reason.stack||t.stack),this.closeEmitter.fire(t)}})),e.onClose((e=>{this.closeEmitter.fire(e)}))}connectToProxyServer(){let e,t=!1;const n=()=>{t=!1,e?.destroy(),e=void 0},r=()=>{t||(n(),e=c.connect(this.args.proxySocketPath),e.on("connect",(async()=>{t=!0,this.bearerPromise.complete(new p.Connection(e,s.encode,this.extraHandlers)),this.getPortOfTunnelProxyServer()})),e.on("error",(e=>{n()})))};let i;const o=()=>{r(),i&&clearTimeout(i),i=setTimeout((async()=>{t||o()}),500)};o()}async getPortOfTunnelProxyServer(){const e=await this.bearer,t=(await e.call("getlocalport",{})).value;this.localPortPromise.complete(t)}async dispose(){(await this.bearer).dispose()}}v.State=g;class y extends v{constructor(e,t,n){const r=i.spawn(process.execPath,[n],{detached:m,stdio:m?"ignore":"pipe",env:{...process.env,VSCODE_TUNNEL_ARGS:JSON.stringify(e)}});r.stdout?.on("data",(e=>console.log("Proxy process stdout:",e.toString().trim()))),r.stderr?.on("data",(e=>console.log("Proxy process stderr:",e.toString().trim()))),m&&r.unref(),super(e,t)}}class b extends v{}},e=>{e.exports=n(2081)},e=>{e.exports=n(6113)},e=>{e.exports=n(7147)},e=>{e.exports=n(1808)},e=>{e.exports=n(2037)},e=>{e.exports=n(1017)},(e,t,n)=>{n.r(t),n.d(t,{timeoutPromise:()=>r});const r=(e,t)=>new Promise(((n,r)=>{const s=setTimeout((()=>{r(new Error("Operation timed out"))}),e);t.finally((()=>clearTimeout(s))).then(n,r)}))},(e,t,n)=>{n.r(t),n.d(t,{proxyFileTimeout:()=>r});const r=6e3},(e,t,n)=>{n.r(t),n.d(t,{ProxyServer:()=>u});var r=n(4),s=n(18),i=n(19),o=n(5),a=n(2),c=n(14),l=n(25);class u{constructor(e){this._options=e,this.serverConnections=new Set,this.disposables=[],this.setupPromise=new o.DeferredPromise,this.setup=this.setupPromise.p,this.didSetup=!1,this.connectionCount=0,this.connectionIdCounter=0,this.args=e.args,this.proxyServer=i.createServer((async e=>{await this.onProxyConnection(e)})),this.disposables.push({dispose:()=>this.proxyServer.close()}),this.controlServer=i.createServer((async e=>{await this.onServerConnection(e)})),this.disposables.push({dispose:()=>this.controlServer.close()}),this.initialize().catch((e=>{this.log(5,`Failed to initialize proxy server: ${e}}`),console.error(e),process.exit(1)})),this.startSavingRunningInfo(),this.delayShutdown(9e4)}incrementConnectionCount(){this.connectionCount+=1,this.shutdownTimer&&(clearTimeout(this.shutdownTimer),this.shutdownTimer=void 0)}decrementConnectionCount(){this.connectionCount-=1,0===this.connectionCount&&this.delayShutdown(3e4)}static readArgsFromEnvironment(){return JSON.parse(process.env.VSCODE_TUNNEL_ARGS)}getWebSocket(e,t){return new c.ServerWebSocket(t,e.version)}onDidSetUpServerConnection(e){}async initialize(){await Promise.all([new Promise(((e,t)=>{this.proxyServer.listen(0,"127.0.0.1",(()=>e())),this.proxyServer.on("error",t)})),new Promise(((e,t)=>{this.controlServer.listen(this._options.proxySocketPath,e),this.controlServer.on("error",t)}))])}delayShutdown(e=3e4){this.shutdownTimer&&clearTimeout(this.shutdownTimer),this.shutdownTimer=setTimeout((()=>{this.dispose(),this.log(2,"Timed out, shutting down"),process.exit(0)}),e)}async onServerConnection(e){this.log(2,"Server connection from:  ",e.localAddress," ",e.localPort),this.incrementConnectionCount();const t=new a.Connection(e,r.encode);this.didSetup||this.acquireTunnel(t),this.serverConnections.add(t),t.onClose((e=>{this.log(2,`Server connection closed (err: ${e})`),this.serverConnections.delete(t),this.decrementConnectionCount()})),t.registerRequestHandler("greet",(()=>(this.log(2,"Server greeted"),Promise.resolve({})))),t.registerRequestHandler("getlocalport",(async()=>({value:this.proxyServer.address().port}))),t.onNotification("stream_data",(e=>t.notify("stream_data",e))),t.onNotification("stream_ended",(e=>t.notify("stream_ended",e))),t.registerRequestHandler("calltunnel",(async({method:e,params:n,stream:r},s)=>(await this.setup).call(e,n,void 0,r?e=>{t.notify("streams_started",{for_request_id:s,stream_ids:[e.id]}),e.onDidReceiveMessage((n=>t.notify("stream_data",{segment:n,stream:e.id}))),e.onEnd.then((()=>t.notify("stream_ended",{stream:e.id})))}:void 0))),this.onDidSetUpServerConnection(t),this.lastState&&t.notify("statechange",this.lastState)}async onProxyConnection(e){const t=`[connection.${this.connectionIdCounter++}]`;this.log(2,`${t} connection from:  ${e.localAddress} ${e.localPort}`),this.incrementConnectionCount();const n=(0,l.writeBuffer)();let r;e.on("data",(e=>n.write(e))),e.on("close",(()=>{r?.close(),this.decrementConnectionCount()}));try{const e=await this.setup,t=this.getWebSocket(e,{bearer:e.bearer,product:this._options.productInfo,socketId:e.nextSocketId(),compress:!0});await t.initialize(),r=t}catch(e){return this.log(5,`${t} error setting up websocket: ${e}`),void this.setState({state:"closed",reason:{message:e.message,stack:e.stack}})}n.connect((e=>r.send(e))),this.disposables.push(r.onData((t=>e.write(new Uint8Array(t)))),r.onError((e=>{this.log(5,`${t} tunnel connection error: ${e}`)})),r.onClose((()=>{this.log(5,`${t} tunnel connection ended`),e.end()}))),this.log(3,`${t} tunnel connection established`)}async acquireTunnel(e){let t;try{t=await this.createConnectionManager(e)}catch(e){return this.log(5,e.message),this.setState({state:"closed",reason:{message:e.message,stack:e.stack}})}this.setupPromise.complete(t),t.onLog((e=>{this.serverConnections.forEach((t=>{t.notify("serverlog",e)}))})),t.onStartConnecting((()=>{this.log(2,"Tunnel started connecting"),this.setState({state:"connecting"})})),t.onConnected((()=>{this.log(3,"Tunnel connection successful"),this.setState({state:"connected"})})),t.onClose((e=>{this.log(5,`Tunnel connection closed with: ${e?.message}`),this.setState({state:"closed",reason:{message:e?.message||"Remote server disconnected"}})}))}setState(e){if(e.state!==this.lastState?.state){this.lastState=e;for(const t of this.serverConnections)t.notify("statechange",e);"closed"===e.state&&process.exit(1)}}startSavingRunningInfo(){this.log(2,`Saving socket path "${this._options.proxySocketPath}" to daemon in: ${this._options.runningProxyInfoFile}`);const e=()=>JSON.stringify({at:Date.now(),socket:this._options.proxySocketPath,pid:process.pid});s.writeFileSync(this._options.runningProxyInfoFile,e());const t=setInterval((()=>s.writeFile(this._options.runningProxyInfoFile,e(),(()=>{}))),3e3);this.disposables.push({dispose:()=>{clearInterval(t);try{s.rmSync(this._options.runningProxyInfoFile)}catch{}}})}log(e,t,...n){for(const r of this.serverConnections)r.notify("proxylog",{level:e,message:t,args:n})}dispose(){this.serverConnections.forEach((e=>{e.notify("statechange",{state:"closed",reason:new Error("Disposing proxy server.")}),e.dispose()})),this.disposables.forEach((e=>e.dispose()))}}},(e,t,n)=>{n.r(t),n.d(t,{writeBuffer:()=>r});const r=()=>{let e=[];return{write:t=>{e.push(t)},connect(t){for(const n of e)t(n);this.write=t,e=void 0}}}}],r={};function s(t){var n=r[t];if(void 0!==n)return n.exports;var i=r[t]={exports:{}};return e[t](i,i.exports,s),i.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{s.r(i),s.d(i,{CallHandlers:()=>e.CallHandlers,Connection:()=>e.Connection,ConnectionBearer:()=>e.ConnectionBearer,ConnectionManager:()=>e.ConnectionManager,DeferredPromise:()=>e.DeferredPromise,ExecServer:()=>e.ExecServer,FileSystemProviderErrorCode:()=>e.FileSystemProviderErrorCode,FileType:()=>e.FileType,NetworkError:()=>e.NetworkError,ProxyConnection:()=>t.ProxyConnection,ProxyServer:()=>n.ProxyServer,RPCError:()=>e.RPCError,RemoteVersion:()=>e.RemoteVersion,ServerWebSocket:()=>e.ServerWebSocket,State:()=>t.State,TimeoutError:()=>e.TimeoutError,closedDuplexStream:()=>e.closedDuplexStream,msgPackEncode:()=>e.msgPackEncode});var e=s(1),t=s(15),n=s(24)})();var o=t;for(var a in i)o[a]=i[a];i.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})()},3758:(e,t,n)=>{(()=>{"use strict";var e,r,s=[(e,t,n)=>{n.r(t),n.d(t,{AccessTokenBasisClient:()=>o.AccessTokenBasisClient,BasisClient:()=>o.BasisClient,BasisConnectionBearer:()=>c.BasisConnectionBearer,BasisWebSocketFactory:()=>l.BasisWebSocketFactory,TunnelNotFoundError:()=>o.TunnelNotFoundError,TunnelNotFoundInSessionsError:()=>g,TunnelProvider:()=>u.TunnelProvider,TunnelTags:()=>p,createLoopbackHandler:()=>b,fixTunnelTags:()=>o.fixTunnelTags,getConnectionToken:()=>v,getMatchingSessionForTunnel:()=>f,getMatchingSessionForTunnelName:()=>d,getProtocolVersionFromTags:()=>y,getTunnelNameFromTags:()=>h});var r=n(1),s=n(2),i=n(3),o=n(4),a=n(8),c=n(10),l=n(12),u=n(15);class p{constructor(e){if(this.value=e,this.protocolVersion=2,e)for(const t of e)t.startsWith("_flag")?this.flags=Number(t.slice("_flag".length)):t.startsWith("protocolv")?this.protocolVersion=Number(t.slice("protocolv".length)):t.startsWith("_")||"vscode-server-launcher"===t||this.name||(this.name=t)}is(e){return this.flags?0!=(this.flags&e):void 0}}function h(e){return new p(e.labels||[]).name||e.name||e.tunnelId}async function d({userAgent:e,name:t,sessions:n}){const r=await m({lookup:t,userAgent:e,getTunnel:async(e,t)=>e.getTunnelForTag(t),lookupToString:e=>e,sessions:n});return void 0!==r?r:f({userAgent:e,sessions:n,tunnel:{name:t}})}async function f({userAgent:e,tunnel:t,sessions:n}){return m({lookup:t,userAgent:e,getTunnel:async(e,t)=>e.getTunnel(t),lookupToString:e=>e.name||e.tunnelId,sessions:n})}async function m({lookup:e,userAgent:t,getTunnel:n,lookupToString:r,sessions:i}){const a=`tunneling-${t}-auth-attempted`,c=`tunneling-${t}-session-${r(e)}`,l=localStorage.getItem(c);if(l){const r=i.find((e=>e.id===l));if(r){const s=new o.AccessTokenBasisClient(r.provider,t,(()=>r.getAccessToken()));try{const t=await n(s,e);if(t)return console.log("Reusing session from localStorage"),localStorage.removeItem(a),{client:s,session:r,tunnel:t};localStorage.removeItem(c)}catch(e){console.error(e)}}}const u=await(0,s.firstPromise)(i.map((async r=>{if(r.id===l)return;const s=new o.AccessTokenBasisClient(r.provider,t,(()=>r.getAccessToken()));try{const t=await n(s,e);if(t)return{client:s,session:r,tunnel:t}}catch(e){console.error(e)}})));if(u)return localStorage.setItem(c,u.session.id),localStorage.removeItem(a),u;if(localStorage.getItem(a))throw localStorage.removeItem(a),new g(r(e));localStorage.setItem(a,"1")}class g extends Error{constructor(e){super(`Could not find a tunnel named ${e}. Please make sure you are logged into the correct account. You can reloading, logging in, then running 'Connect to Remote Server'.`),this.tunnelIdentifier=e}}async function v(e){if(!new r.RemoteVersion("",y(e)).usesConnectionToken())return;const t=await(0,a.sha256)(e.tunnelId),n=(0,i.encodeBase64)(t,!1,!0);return n.startsWith("-")?`a${n}`:n}function y(e){return new p(e.labels||[]).protocolVersion}const b=(e,t)=>async n=>{const r=new URLSearchParams({path:n.uri.path});t&&r.set("tkn",t);try{const t=await e.bearer.acquire(),s=await t.call("callserverhttp",{path:"/vscode-remote-resource?"+r,method:n.method,headers:n.headers}),i=new ArrayBuffer(s.body.length);return new Uint8Array(i).set(s.body),{status:s.status,body:i,headers:s.headers}}catch(e){return{status:500,headers:{},body:(new TextEncoder).encode(e.message).buffer}}}},e=>{e.exports=n(3807)},(e,t,n)=>{n.r(t),n.d(t,{TimeoutError:()=>s,firstPromise:()=>r,timeoutPromise:()=>i});const r=e=>new Promise(((t,n)=>{let r=e.length;for(const s of e)s.then((e=>{r--,void 0===e&&0!==r||(t(e),r=-1)})).catch(n)}));class s extends Error{}const i=(e,t,n)=>new Promise(((r,i)=>{const o=setTimeout((()=>i(new s(n??"Operation timed out"))),t);e.then(r,i).finally((()=>clearTimeout(o)))}))},(e,t,n)=>{function r(e,t=!0,n=!1){const r=n?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let s="";const i=e.byteLength%3;let o=0;for(;o<e.byteLength-i;o+=3){const t=e[o+0],n=e[o+1],i=e[o+2];s+=r[t>>>2],s+=r[63&(t<<4|n>>>4)],s+=r[63&(n<<2|i>>>6)],s+=r[63&i]}if(1===i){const n=e[o+0];s+=r[n>>>2],s+=r[n<<4&63],t&&(s+="==")}else if(2===i){const n=e[o+0],i=e[o+1];s+=r[n>>>2],s+=r[63&(n<<4|i>>>4)],s+=r[i<<2&63],t&&(s+="=")}return s}n.r(t),n.d(t,{encodeBase64:()=>r})},(e,t,n)=>{n.r(t),n.d(t,{AccessTokenBasisClient:()=>a,BasisClient:()=>o,TunnelNotFoundError:()=>c,fixTunnelTags:()=>l});var r=n(5),s=n(6),i=n(7);class o{constructor(){this.managementClient=new i.Lazy((()=>this.createTunnelManagementClient())),this.tunnelLookupCache=new Map,this.taggedTunnelLookupCache=new Map}getManagementClient(){return this.managementClient.getValue()}async connect(e){if(!e.endpoints){const t=await this.getTunnel(e);if(!t)throw new c;e=t}const{TunnelRelayTunnelClient:t}=await Promise.resolve().then(n.t.bind(n,16,23)),r=new t(void 0,await this.getManagementClient());return r.acceptLocalConnectionsForForwardedPorts=!1,r.endpoints=e.endpoints,await r.connect(e),r}async getTunnelForTag(e){const t=e.toLowerCase();return await this._getTunnelForTag(t)??(t!==e?this._getTunnelForTag(e):void 0)}async _getTunnelForTag(e){if(this.taggedTunnelLookupCache.has(e))return this.taggedTunnelLookupCache.get(e);const t=await this.getManagementClient(),[n]=await t.listTunnels(void 0,void 0,{labels:[e,"vscode-server-launcher"],requireAllLabels:!0,limit:1});if(!n)return;l(n);const r=await this.getTunnel(n);return r&&this.taggedTunnelLookupCache.set(e,r),r}async getTunnel(e,t=!0){const n=e.name||e.tunnelId;if(t&&this.tunnelLookupCache.has(n))return this.tunnelLookupCache.get(n);try{const t=await this.getManagementClient(),r=await t.getTunnel(e,{includePorts:!0,tokenScopes:["connect"]});return r&&(l(r),this.tunnelLookupCache.set(n,r)),r||void 0}catch(e){if(e instanceof Error&&e.message.includes("Not Found"))return;throw e}}}o.BASIS_SCOPES=[`${r.TunnelServiceProperties.production.serviceAppId}/.default`];class a extends o{constructor(e,t,n,r){super(),this.provider=e,this.userAgent=t,this.getAccessToken=n,this.agent=r}async createTunnelManagementClient(){const e="microsoft"===this.provider?`Bearer ${await this.getAccessToken()}`:`${this.provider} ${await this.getAccessToken()}`;return new s.TunnelManagementHttpClient(this.userAgent,"2023-09-27-preview",(async()=>e),void 0,this.agent)}}class c extends Error{constructor(){super("Tunnel not found")}}function l(e){const t=e;return t.labels&&(e.labels=t.labels),e}},e=>{e.exports=n(3399)},e=>{e.exports=n(5927)},(e,t,n)=>{n.r(t),n.d(t,{Lazy:()=>r});class r{constructor(e){this.executor=e,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}map(e){return new r((()=>e(this.getValue())))}}},(e,t,n)=>{n.r(t),n.d(t,{sha256:()=>s});var r=n(9);const s=e=>{const t=(0,r.createHash)("sha256");return t.update(e),Promise.resolve(t.digest())}},e=>{e.exports=n(6113)},(e,t,n)=>{n.r(t),n.d(t,{BasisConnectionBearer:()=>c});var r=n(11),s=n(1),i=n(0),o=n(2);const a=3e4;class c extends s.ConnectionBearer{constructor(e,t,n){super("Port Forwarding Service"),this.basis=e,this.tunnel=t,this.port=n,this.tunnelMayBeStale=!1;const o=new s.RemoteVersion("",new i.TunnelTags(t.labels).protocolVersion);this.encodeMessage=o.shouldLengthPrefixMessages()?s.msgPackEncode:r.encode,this.onStartConnecting((e=>{e.onNotification("version",(({version:e,protocol_version:t})=>{this.version=new s.RemoteVersion(e,t)}))}))}async isStreamValid(e){if(!0!==this.version?.canPing())return!0;const t=new AbortController,n=setTimeout((()=>t.abort()),5e3);try{return await e.call("ping",{},t.signal),!0}catch{return!1}finally{clearTimeout(n)}}async getConnectionTunnel(){if(this.tunnelMayBeStale){const e=await this.basis.getTunnel(this.tunnel,!1);e&&(this.tunnel=e)}if(!this.tunnel.endpoints?.length)throw new s.NetworkError(new Error("The VS Code gateway is not currently running."),"EHOSTDOWN");const e=await(0,o.timeoutPromise)(this.basis.connect(this.tunnel),a,"Timeout connecting to relay");try{await(0,o.timeoutPromise)(e.waitForForwardedPort(this.port),a,"Timeout waiting for forwarded port");const t=await(0,o.timeoutPromise)(e.connectToForwardedPort(this.port),a,"Timeout connecting to port");return t.on("close",(()=>{this.tunnelMayBeStale=!0})),t.on("error",(()=>{this.tunnelMayBeStale=!0})),t}catch(t){throw e.dispose(),t}}}},e=>{e.exports=n(2398)},(e,t,n)=>{n.r(t),n.d(t,{BasisWebSocketFactory:()=>s});var r=n(13);class s{constructor(e,t,n){this.manager=e,this.product=t,this.extensions=n}create(e){const t=new r.BasisWebSocket({bearer:this.manager.bearer,product:this.product,socketId:this.manager.nextSocketId(),extensions:this.extensions,url:e},this.manager.version);return t.initialize(),t}}},(e,t,n)=>{n.r(t),n.d(t,{BasisWebSocket:()=>o});var r=n(14),s=n(1),i=n(2);class o extends s.ServerWebSocket{constructor(e,t){super(e,t),this._options=e,this.onDataEmitter=new r.EventEmitter,this.onData=this.onDataEmitter.event,this.onOpenEmitter=new r.EventEmitter,this.onOpen=this.onOpenEmitter.event,this.onCloseEmitter=new r.EventEmitter,this.onClose=this.onCloseEmitter.event,this.onErrorEmitter=new r.EventEmitter,this.onError=this.onErrorEmitter.event,this.waitingForOpen=!0,this.SOCKET_TYPE="Basis Socket"}async initialize(){try{await super.initialize()}catch(e){return e instanceof i.TimeoutError&&(e=new s.NetworkError(e)),void this.onErrorEmitter.fire(e)}}onMessage(e){this.waitingForOpen?(this.onOpenEmitter.fire(),this.waitingForOpen=!1):this.onDataEmitter.fire(e)}async upgradeToWebSocketConnection(){const e=this._options.url.replace(/skipWebSocketFrames=false/gim,"skipWebSocketFrames=true");this.send((new TextEncoder).encode(this.createHandshakeRequest(e)))}createHandshakeRequest(e){return[`GET ${e} HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${this.randomString(32)}`,"\r\n"].join("\r\n")}randomString(e=16){const t=new Uint32Array(e);return crypto.getRandomValues(t),t.toString()}}},e=>{e.exports=n(9016)},(e,t,n)=>{n.r(t),n.d(t,{TunnelProvider:()=>s});var r=n(14);class s{constructor(e){this.rpc=e,this.features={elevation:!1,public:!1},this.tunnelFactory=async(e,t)=>{let n;try{n=await this.rpc.call("forward",{port:e.remoteAddress.port})}catch(e){throw new Error(`Could not forward port: ${e}`)}const s=new r.EventEmitter,i=this.rpc.onClose((()=>s.fire()));return s.event((()=>i.dispose())),{remoteAddress:e.remoteAddress,localAddress:n.uri,public:!1,onDidDispose:s.event,dispose:async()=>{try{await this.rpc.call("unforward",{port:e.remoteAddress.port})}catch{}s.fire()}}}}}},e=>{e.exports=n(1139)}],i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return s[e](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"==typeof t.then)return t}var s=Object.create(null);o.r(s);var i={};e=e||[null,r({}),r([]),r(r)];for(var a=2&n&&t;"object"==typeof a&&!~e.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>t[e]));return i.default=()=>t,o.d(s,i),s},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a=o(0),c=t;for(var l in a)c[l]=a[l];a.__esModule&&Object.defineProperty(c,"__esModule",{value:!0})})()},9496:e=>{"use strict";e.exports=require("vscode")},9491:e=>{"use strict";e.exports=require("assert")},852:e=>{"use strict";e.exports=require("async_hooks")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6206:e=>{"use strict";e.exports=require("console")},2057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},8188:e=>{"use strict";e.exports=require("module")},1808:e=>{"use strict";e.exports=require("net")},7742:e=>{"use strict";e.exports=require("node:process")},2477:e=>{"use strict";e.exports=require("node:stream/web")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},2781:e=>{"use strict";e.exports=require("stream")},9512:e=>{"use strict";e.exports=require("timers")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},1267:e=>{"use strict";e.exports=require("worker_threads")},9796:e=>{"use strict";e.exports=require("zlib")},3315:(e,t,n)=>{"use strict";const r=n(4102),s=n(7310),i=n(328),o=n(3685),a=n(5687),c=n(3837),l=n(2298),u=n(9796),p=n(2781),h=n(2361);function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}const f=d(r),m=d(s),g=d(o),v=d(a),y=d(c),b=d(l),w=d(u),S=d(p),E=d(h);function _(e,t){return function(){return e.apply(t,arguments)}}const{toString:x}=Object.prototype,{getPrototypeOf:T}=Object,C=(P=Object.create(null),e=>{const t=x.call(e);return P[t]||(P[t]=t.slice(8,-1).toLowerCase())});var P;const A=e=>(e=e.toLowerCase(),t=>C(t)===e),R=e=>t=>typeof t===e,{isArray:I}=Array,k=R("undefined"),O=A("ArrayBuffer"),M=R("string"),D=R("function"),N=R("number"),L=e=>null!==e&&"object"==typeof e,j=e=>{if("object"!==C(e))return!1;const t=T(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},q=A("Date"),B=A("File"),F=A("Blob"),U=A("FileList"),$=A("URLSearchParams");function H(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,s;if("object"!=typeof e&&(e=[e]),I(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let o;for(r=0;r<i;r++)o=s[r],t.call(null,e[o],o,e)}}function z(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const K="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,V=e=>!k(e)&&e!==K,W=(G="undefined"!=typeof Uint8Array&&T(Uint8Array),e=>G&&e instanceof G);var G;const Y=A("HTMLFormElement"),Q=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),X=A("RegExp"),J=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};H(n,((n,s)=>{let i;!1!==(i=t(n,s,e))&&(r[s]=i||n)})),Object.defineProperties(e,r)},Z="abcdefghijklmnopqrstuvwxyz",ee="0123456789",te={DIGIT:ee,ALPHA:Z,ALPHA_DIGIT:Z+Z.toUpperCase()+ee},ne=A("AsyncFunction"),re={isArray:I,isArrayBuffer:O,isBuffer:function(e){return null!==e&&!k(e)&&null!==e.constructor&&!k(e.constructor)&&D(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||D(e.append)&&("formdata"===(t=C(e))||"object"===t&&D(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&O(e.buffer),t},isString:M,isNumber:N,isBoolean:e=>!0===e||!1===e,isObject:L,isPlainObject:j,isUndefined:k,isDate:q,isFile:B,isBlob:F,isRegExp:X,isFunction:D,isStream:e=>L(e)&&D(e.pipe),isURLSearchParams:$,isTypedArray:W,isFileList:U,forEach:H,merge:function e(){const{caseless:t}=V(this)&&this||{},n={},r=(r,s)=>{const i=t&&z(n,s)||s;j(n[i])&&j(r)?n[i]=e(n[i],r):j(r)?n[i]=e({},r):I(r)?n[i]=r.slice():n[i]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&H(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(H(t,((t,r)=>{n&&D(t)?e[r]=_(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,i,o;const a={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&T(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:C,kindOfTest:A,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(I(e))return e;let t=e.length;if(!N(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Y,hasOwnProperty:Q,hasOwnProp:Q,reduceDescriptors:J,freezeMethods:e=>{J(e,((t,n)=>{if(D(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];D(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return I(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:z,global:K,isContextDefined:V,ALPHABET:te,generateString:(e=16,t=te.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&D(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(L(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const s=I(e)?[]:{};return H(e,((e,t)=>{const i=n(e,r+1);!k(i)&&(s[t]=i)})),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:ne,isThenable:e=>e&&(L(e)||D(e))&&D(e.then)&&D(e.catch)};function se(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}re.inherits(se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:re.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ie=se.prototype,oe={};function ae(e){return re.isPlainObject(e)||re.isArray(e)}function ce(e){return re.endsWith(e,"[]")?e.slice(0,-2):e}function le(e,t,n){return e?e.concat(t).map((function(e,t){return e=ce(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{oe[e]={value:e}})),Object.defineProperties(se,oe),Object.defineProperty(ie,"isAxiosError",{value:!0}),se.from=(e,t,n,r,s,i)=>{const o=Object.create(ie);return re.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),se.call(o,e.message,t,n,r,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const ue=re.toFlatObject(re,{},null,(function(e){return/^is[A-Z]/.test(e)}));function pe(e,t,n){if(!re.isObject(e))throw new TypeError("target must be an object");t=t||new(f.default||FormData);const r=(n=re.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!re.isUndefined(t[e])}))).metaTokens,s=n.visitor||l,i=n.dots,o=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&re.isSpecCompliantForm(t);if(!re.isFunction(s))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(re.isDate(e))return e.toISOString();if(!a&&re.isBlob(e))throw new se("Blob is not supported. Use a Buffer instead.");return re.isArrayBuffer(e)||re.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,s){let a=e;if(e&&!s&&"object"==typeof e)if(re.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(re.isArray(e)&&function(e){return re.isArray(e)&&!e.some(ae)}(e)||(re.isFileList(e)||re.endsWith(n,"[]"))&&(a=re.toArray(e)))return n=ce(n),a.forEach((function(e,r){!re.isUndefined(e)&&null!==e&&t.append(!0===o?le([n],r,i):null===o?n:n+"[]",c(e))})),!1;return!!ae(e)||(t.append(le(s,n,i),c(e)),!1)}const u=[],p=Object.assign(ue,{defaultVisitor:l,convertValue:c,isVisitable:ae});if(!re.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!re.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),re.forEach(n,(function(n,i){!0===(!(re.isUndefined(n)||null===n)&&s.call(t,n,re.isString(i)?i.trim():i,r,p))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t}function he(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function de(e,t){this._pairs=[],e&&pe(e,this,t)}const fe=de.prototype;function me(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ge(e,t,n){if(!t)return e;const r=n&&n.encode||me,s=n&&n.serialize;let i;if(i=s?s(t,n):re.isURLSearchParams(t)?t.toString():new de(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}fe.append=function(e,t){this._pairs.push([e,t])},fe.toString=function(e){const t=e?function(t){return e.call(this,t,he)}:he;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const ve=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){re.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ye={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},be={isNode:!0,classes:{URLSearchParams:m.default.URLSearchParams,FormData:f.default,Blob:"undefined"!=typeof Blob&&Blob||null},protocols:["http","https","file","data"]},we="undefined"!=typeof window&&"undefined"!=typeof document,Se=(Ee="undefined"!=typeof navigator&&navigator.product,we&&["ReactNative","NativeScript","NS"].indexOf(Ee)<0);var Ee;const _e="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,xe={...Object.freeze({__proto__:null,hasBrowserEnv:we,hasStandardBrowserWebWorkerEnv:_e,hasStandardBrowserEnv:Se}),...be};function Te(e){function t(e,n,r,s){let i=e[s++];const o=Number.isFinite(+i),a=s>=e.length;return i=!i&&re.isArray(r)?r.length:i,a?(re.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!o):(r[i]&&re.isObject(r[i])||(r[i]=[]),t(e,n,r[i],s)&&re.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}(r[i])),!o)}if(re.isFormData(e)&&re.isFunction(e.entries)){const n={};return re.forEachEntry(e,((e,r)=>{t(function(e){return re.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const Ce={transitional:ye,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=re.isObject(e);if(s&&re.isHTMLForm(e)&&(e=new FormData(e)),re.isFormData(e))return r&&r?JSON.stringify(Te(e)):e;if(re.isArrayBuffer(e)||re.isBuffer(e)||re.isStream(e)||re.isFile(e)||re.isBlob(e))return e;if(re.isArrayBufferView(e))return e.buffer;if(re.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return pe(e,new xe.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return xe.isNode&&re.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=re.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return pe(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(re.isString(e))try{return(0,JSON.parse)(e),re.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ce.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&re.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw se.from(e,se.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xe.classes.FormData,Blob:xe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};re.forEach(["delete","get","head","post","put","patch"],(e=>{Ce.headers[e]={}}));const Pe=Ce,Ae=re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Re=Symbol("internals");function Ie(e){return e&&String(e).trim().toLowerCase()}function ke(e){return!1===e||null==e?e:re.isArray(e)?e.map(ke):String(e)}function Oe(e,t,n,r,s){return re.isFunction(r)?r.call(this,t,n):(s&&(t=n),re.isString(t)?re.isString(r)?-1!==t.indexOf(r):re.isRegExp(r)?r.test(t):void 0:void 0)}class Me{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=Ie(t);if(!s)throw new Error("header name must be a non-empty string");const i=re.findKey(r,s);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=ke(e))}const i=(e,t)=>re.forEach(e,((e,n)=>s(e,n,t)));return re.isPlainObject(e)||e instanceof this.constructor?i(e,t):re.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?i((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&Ae[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&s(t,e,n),this}get(e,t){if(e=Ie(e)){const n=re.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(re.isFunction(t))return t.call(this,e,n);if(re.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ie(e)){const n=re.findKey(this,e);return!(!n||void 0===this[n]||t&&!Oe(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=Ie(e)){const s=re.findKey(n,e);!s||t&&!Oe(0,n[s],s,t)||(delete n[s],r=!0)}}return re.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!Oe(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return re.forEach(this,((r,s)=>{const i=re.findKey(n,s);if(i)return t[i]=ke(r),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(s):String(s).trim();o!==s&&delete t[s],t[o]=ke(r),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return re.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&re.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Re]=this[Re]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Ie(e);t[r]||(function(e,t){const n=re.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})}))}(n,e),t[r]=!0)}return re.isArray(e)?e.forEach(r):r(e),this}}Me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),re.reduceDescriptors(Me.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),re.freezeMethods(Me);const De=Me;function Ne(e,t){const n=this||Pe,r=t||n,s=De.from(r.headers);let i=r.data;return re.forEach(e,(function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)})),s.normalize(),i}function Le(e){return!(!e||!e.__CANCEL__)}function je(e,t,n){se.call(this,null==e?"canceled":e,se.ERR_CANCELED,t,n),this.name="CanceledError"}function qe(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new se("Request failed with status code "+n.status,[se.ERR_BAD_REQUEST,se.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function Be(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}re.inherits(je,se,{__CANCEL__:!0});function Fe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const Ue=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function $e(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[o];s||(s=c),n[i]=a,r[i]=c;let u=o,p=0;for(;u!==i;)p+=n[u++],u%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),c-s<t)return;const h=l&&c-l;return h?Math.round(1e3*p/h):void 0}}const He=Symbol("internals");class ze extends S.default.Transform{constructor(e){super({readableHighWaterMark:(e=re.toFlatObject(e,{maxRate:0,chunkSize:65536,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,((e,t)=>!re.isUndefined(t[e])))).chunkSize});const t=this,n=this[He]={length:e.length,timeWindow:e.timeWindow,ticksRate:e.ticksRate,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null},r=$e(n.ticksRate*e.samplesCount,n.timeWindow);this.on("newListener",(e=>{"progress"===e&&(n.isCaptured||(n.isCaptured=!0))}));let s=0;n.updateProgress=function(e,t){let n=0;const r=1e3/t;let s=null;return function(t,i){const o=Date.now();if(t||o-n>r)return s&&(clearTimeout(s),s=null),n=o,e.apply(null,i);s||(s=setTimeout((()=>(s=null,n=Date.now(),e.apply(null,i))),r-(o-n)))}}((function(){const e=n.length,i=n.bytesSeen,o=i-s;if(!o||t.destroyed)return;const a=r(o);s=i,process.nextTick((()=>{t.emit("progress",{loaded:i,total:e,progress:e?i/e:void 0,bytes:o,rate:a||void 0,estimated:a&&e&&i<=e?(e-i)/a:void 0})}))}),n.ticksRate);const i=()=>{n.updateProgress(!0)};this.once("end",i),this.once("error",i)}_read(e){const t=this[He];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,n){const r=this,s=this[He],i=s.maxRate,o=this.readableHighWaterMark,a=s.timeWindow,c=i/(1e3/a),l=!1!==s.minChunkSize?Math.max(s.minChunkSize,.01*c):0,u=(e,t)=>{const n=Buffer.byteLength(e);let u,p=null,h=o,d=0;if(i){const e=Date.now();(!s.ts||(d=e-s.ts)>=a)&&(s.ts=e,u=c-s.bytes,s.bytes=u<0?-u:0,d=0),u=c-s.bytes}if(i){if(u<=0)return setTimeout((()=>{t(null,e)}),a-d);u<h&&(h=u)}h&&n>h&&n-h>l&&(p=e.subarray(h),e=e.subarray(0,h)),function(e,t){const n=Buffer.byteLength(e);s.bytesSeen+=n,s.bytes+=n,s.isCaptured&&s.updateProgress(),r.push(e)?process.nextTick(t):s.onReadCallback=()=>{s.onReadCallback=null,process.nextTick(t)}}(e,p?()=>{process.nextTick(t,null,p)}:t)};u(e,(function e(t,r){if(t)return n(t);r?u(r,e):n(null)}))}setLength(e){return this[He].length=+e,this}}const Ke=ze,{asyncIterator:Ve}=Symbol,We=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[Ve]?yield*e[Ve]():yield e},Ge=re.ALPHABET.ALPHA_DIGIT+"-_",Ye=new c.TextEncoder,Qe="\r\n",Xe=Ye.encode(Qe);class Je{constructor(e,t){const{escapeName:n}=this.constructor,r=re.isString(t);let s=`Content-Disposition: form-data; name="${n(e)}"${!r&&t.name?`; filename="${n(t.name)}"`:""}\r\n`;r?t=Ye.encode(String(t).replace(/\r?\n|\r\n?/g,Qe)):s+=`Content-Type: ${t.type||"application/octet-stream"}\r\n`,this.headers=Ye.encode(s+Qe),this.contentLength=r?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+2,this.name=e,this.value=t}async*encode(){yield this.headers;const{value:e}=this;re.isTypedArray(e)?yield e:yield*We(e),yield Xe}static escapeName(e){return String(e).replace(/[\r\n"]/g,(e=>({"\r":"%0D","\n":"%0A",'"':"%22"}[e])))}}class Ze extends S.default.Transform{__transform(e,t,n){this.push(e),n()}_transform(e,t,n){if(0!==e.length&&(this._transform=this.__transform,120!==e[0])){const e=Buffer.alloc(2);e[0]=120,e[1]=156,this.push(e,t)}this.__transform(e,t,n)}}const et=Ze,tt=(e,t)=>re.isAsyncFn(e)?function(...n){const r=n.pop();e.apply(this,n).then((e=>{try{t?r(null,...t(e)):r(null,e)}catch(e){r(e)}}),r)}:e,nt={flush:w.default.constants.Z_SYNC_FLUSH,finishFlush:w.default.constants.Z_SYNC_FLUSH},rt={flush:w.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:w.default.constants.BROTLI_OPERATION_FLUSH},st=re.isFunction(w.default.createBrotliDecompress),{http:it,https:ot}=b.default,at=/https:?/,ct=xe.protocols.map((e=>e+":"));function lt(e){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e)}function ut(e,t,n){let r=t;if(!r&&!1!==r){const e=i.getProxyForUrl(n);e&&(r=new URL(e))}if(r){if(r.username&&(r.auth=(r.username||"")+":"+(r.password||"")),r.auth){(r.auth.username||r.auth.password)&&(r.auth=(r.auth.username||"")+":"+(r.auth.password||""));const t=Buffer.from(r.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+t}e.headers.host=e.hostname+(e.port?":"+e.port:"");const t=r.hostname||r.host;e.hostname=t,e.host=t,e.port=r.port,e.path=n,r.protocol&&(e.protocol=r.protocol.includes(":")?r.protocol:`${r.protocol}:`)}e.beforeRedirects.proxy=function(e){ut(e,t,e.href)}}const pt="undefined"!=typeof process&&"process"===re.kindOf(process),ht=(e,t)=>(({address:e,family:t})=>{if(!re.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(e.indexOf(".")<0?6:4)}})(re.isObject(e)?e:{address:e,family:t}),dt=pt&&function(e){return t=async function(t,n,r){let{data:s,lookup:i,family:o}=e;const{responseType:a,responseEncoding:c}=e,l=e.method.toUpperCase();let u,h,d=!1;if(i){const e=tt(i,(e=>re.isArray(e)?e:[e]));i=(t,n,r)=>{e(t,n,((e,t,s)=>{const i=re.isArray(t)?t.map((e=>ht(e))):[ht(t,s)];n.all?r(e,i):r(e,i[0].address,i[0].family)}))}}const f=new E.default,m=()=>{e.cancelToken&&e.cancelToken.unsubscribe(b),e.signal&&e.signal.removeEventListener("abort",b),f.removeAllListeners()};function b(t){f.emit("abort",!t||t.type?new je(null,e,h):t)}r(((e,t)=>{u=!0,t&&(d=!0,m())})),f.once("abort",n),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(b),e.signal&&(e.signal.aborted?b():e.signal.addEventListener("abort",b)));const _=Be(e.baseURL,e.url),x=new URL(_,"http://localhost"),T=x.protocol||ct[0];if("data:"===T){let r;if("GET"!==l)return qe(t,n,{status:405,statusText:"method not allowed",headers:{},config:e});try{r=function(e,t,n){const r=n&&n.Blob||xe.classes.Blob,s=Fe(e);if(void 0===t&&r&&(t=!0),"data"===s){e=s.length?e.slice(s.length+1):e;const n=Ue.exec(e);if(!n)throw new se("Invalid URL",se.ERR_INVALID_URL);const i=n[1],o=n[2],a=n[3],c=Buffer.from(decodeURIComponent(a),o?"base64":"utf8");if(t){if(!r)throw new se("Blob is not supported",se.ERR_NOT_SUPPORT);return new r([c],{type:i})}return c}throw new se("Unsupported protocol "+s,se.ERR_NOT_SUPPORT)}(e.url,"blob"===a,{Blob:e.env&&e.env.Blob})}catch(t){throw se.from(t,se.ERR_BAD_REQUEST,e)}return"text"===a?(r=r.toString(c),c&&"utf8"!==c||(r=re.stripBOM(r))):"stream"===a&&(r=S.default.Readable.from(r)),qe(t,n,{data:r,status:200,statusText:"OK",headers:new De,config:e})}if(-1===ct.indexOf(T))return n(new se("Unsupported protocol "+T,se.ERR_BAD_REQUEST,e));const C=De.from(e.headers).normalize();C.set("User-Agent","axios/1.6.2",!1);const P=e.onDownloadProgress,A=e.onUploadProgress,R=e.maxRate;let I,k;if(re.isSpecCompliantForm(s)){const e=C.getContentType(/boundary=([-_\w\d]{10,70})/i);s=((e,t,n)=>{const{tag:r="form-data-boundary",size:s=25,boundary:i=r+"-"+re.generateString(s,Ge)}=n||{};if(!re.isFormData(e))throw TypeError("FormData instance required");if(i.length<1||i.length>70)throw Error("boundary must be 10-70 characters long");const o=Ye.encode("--"+i+Qe),a=Ye.encode("--"+i+"--"+Qe+Qe);let c=a.byteLength;const l=Array.from(e.entries()).map((([e,t])=>{const n=new Je(e,t);return c+=n.size,n}));c+=o.byteLength*l.length,c=re.toFiniteNumber(c);const u={"Content-Type":`multipart/form-data; boundary=${i}`};return Number.isFinite(c)&&(u["Content-Length"]=c),t&&t(u),p.Readable.from(async function*(){for(const e of l)yield o,yield*e.encode();yield a}())})(s,(e=>{C.set(e)}),{tag:"axios-1.6.2-boundary",boundary:e&&e[1]||void 0})}else if(re.isFormData(s)&&re.isFunction(s.getHeaders)){if(C.set(s.getHeaders()),!C.hasContentLength())try{const e=await y.default.promisify(s.getLength).call(s);Number.isFinite(e)&&e>=0&&C.setContentLength(e)}catch(e){}}else if(re.isBlob(s))s.size&&C.setContentType(s.type||"application/octet-stream"),C.setContentLength(s.size||0),s=S.default.Readable.from(We(s));else if(s&&!re.isStream(s)){if(Buffer.isBuffer(s));else if(re.isArrayBuffer(s))s=Buffer.from(new Uint8Array(s));else{if(!re.isString(s))return n(new se("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",se.ERR_BAD_REQUEST,e));s=Buffer.from(s,"utf-8")}if(C.setContentLength(s.length,!1),e.maxBodyLength>-1&&s.length>e.maxBodyLength)return n(new se("Request body larger than maxBodyLength limit",se.ERR_BAD_REQUEST,e))}const O=re.toFiniteNumber(C.getContentLength());let M,D;re.isArray(R)?(I=R[0],k=R[1]):I=k=R,s&&(A||I)&&(re.isStream(s)||(s=S.default.Readable.from(s,{objectMode:!1})),s=S.default.pipeline([s,new Ke({length:O,maxRate:re.toFiniteNumber(I)})],re.noop),A&&s.on("progress",(e=>{A(Object.assign(e,{upload:!0}))}))),e.auth&&(M=(e.auth.username||"")+":"+(e.auth.password||"")),!M&&x.username&&(M=x.username+":"+x.password),M&&C.delete("authorization");try{D=ge(x.pathname+x.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){const r=new Error(t.message);return r.config=e,r.url=e.url,r.exists=!0,n(r)}C.set("Accept-Encoding","gzip, compress, deflate"+(st?", br":""),!1);const N={path:D,method:l,headers:C.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:M,protocol:T,family:o,beforeRedirect:lt,beforeRedirects:{}};let L;!re.isUndefined(i)&&(N.lookup=i),e.socketPath?N.socketPath=e.socketPath:(N.hostname=x.hostname,N.port=x.port,ut(N,e.proxy,T+"//"+x.hostname+(x.port?":"+x.port:"")+N.path));const j=at.test(N.protocol);if(N.agent=j?e.httpsAgent:e.httpAgent,e.transport?L=e.transport:0===e.maxRedirects?L=j?v.default:g.default:(e.maxRedirects&&(N.maxRedirects=e.maxRedirects),e.beforeRedirect&&(N.beforeRedirects.config=e.beforeRedirect),L=j?ot:it),e.maxBodyLength>-1?N.maxBodyLength=e.maxBodyLength:N.maxBodyLength=1/0,e.insecureHTTPParser&&(N.insecureHTTPParser=e.insecureHTTPParser),h=L.request(N,(function(r){if(h.destroyed)return;const s=[r],i=+r.headers["content-length"];if(P){const e=new Ke({length:re.toFiniteNumber(i),maxRate:re.toFiniteNumber(k)});P&&e.on("progress",(e=>{P(Object.assign(e,{download:!0}))})),s.push(e)}let o=r;const u=r.req||h;if(!1!==e.decompress&&r.headers["content-encoding"])switch("HEAD"!==l&&204!==r.statusCode||delete r.headers["content-encoding"],(r.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":s.push(w.default.createUnzip(nt)),delete r.headers["content-encoding"];break;case"deflate":s.push(new et),s.push(w.default.createUnzip(nt)),delete r.headers["content-encoding"];break;case"br":st&&(s.push(w.default.createBrotliDecompress(rt)),delete r.headers["content-encoding"])}o=s.length>1?S.default.pipeline(s,re.noop):s[0];const p=S.default.finished(o,(()=>{p(),m()})),g={status:r.statusCode,statusText:r.statusMessage,headers:new De(r.headers),config:e,request:u};if("stream"===a)g.data=o,qe(t,n,g);else{const r=[];let s=0;o.on("data",(function(t){r.push(t),s+=t.length,e.maxContentLength>-1&&s>e.maxContentLength&&(d=!0,o.destroy(),n(new se("maxContentLength size of "+e.maxContentLength+" exceeded",se.ERR_BAD_RESPONSE,e,u)))})),o.on("aborted",(function(){if(d)return;const t=new se("maxContentLength size of "+e.maxContentLength+" exceeded",se.ERR_BAD_RESPONSE,e,u);o.destroy(t),n(t)})),o.on("error",(function(t){h.destroyed||n(se.from(t,null,e,u))})),o.on("end",(function(){try{let e=1===r.length?r[0]:Buffer.concat(r);"arraybuffer"!==a&&(e=e.toString(c),c&&"utf8"!==c||(e=re.stripBOM(e))),g.data=e}catch(t){return n(se.from(t,null,e,g.request,g))}qe(t,n,g)}))}f.once("abort",(e=>{o.destroyed||(o.emit("error",e),o.destroy())}))})),f.once("abort",(e=>{n(e),h.destroy(e)})),h.on("error",(function(t){n(se.from(t,null,e,h))})),h.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){const t=parseInt(e.timeout,10);if(Number.isNaN(t))return void n(new se("error trying to parse `config.timeout` to int",se.ERR_BAD_OPTION_VALUE,e,h));h.setTimeout(t,(function(){if(u)return;let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||ye;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new se(t,r.clarifyTimeoutError?se.ETIMEDOUT:se.ECONNABORTED,e,h)),b()}))}if(re.isStream(s)){let t=!1,n=!1;s.on("end",(()=>{t=!0})),s.once("error",(e=>{n=!0,h.destroy(e)})),s.on("close",(()=>{t||n||b(new je("Request stream has been aborted",e,h))})),s.pipe(h)}else h.end(s)},new Promise(((e,n)=>{let r,s;const i=(e,t)=>{s||(s=!0,r&&r(e,t))},o=e=>{i(e,!0),n(e)};t((t=>{i(t),e(t)}),o,(e=>r=e)).catch(o)}));var t},ft=xe.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const o=[e+"="+encodeURIComponent(t)];re.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),re.isString(r)&&o.push("path="+r),re.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}},mt=xe.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=re.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function gt(e,t){let n=0;const r=$e(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,c=r(a);n=i;const l={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&i<=o?(o-i)/c:void 0,event:s};l[t?"download":"upload"]=!0,e(l)}}const vt={http:dt,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const s=De.from(e.headers).normalize();let i,o,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}if(re.isFormData(r))if(xe.hasStandardBrowserEnv||xe.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if(!1!==(o=s.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(t+":"+n))}const p=Be(e.baseURL,e.url);function h(){if(!u)return;const r=De.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());qe((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),ge(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(h)},u.onabort=function(){u&&(n(new se("Request aborted",se.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new se("Network Error",se.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||ye;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new se(t,r.clarifyTimeoutError?se.ETIMEDOUT:se.ECONNABORTED,e,u)),u=null},xe.hasStandardBrowserEnv&&(c&&re.isFunction(c)&&(c=c(e)),c||!1!==c&&mt(p))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&ft.read(e.xsrfCookieName);t&&s.set(e.xsrfHeaderName,t)}void 0===r&&s.setContentType(null),"setRequestHeader"in u&&re.forEach(s.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),re.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",gt(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",gt(e.onUploadProgress)),(e.cancelToken||e.signal)&&(i=t=>{u&&(n(!t||t.type?new je(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i)));const d=Fe(p);d&&-1===xe.protocols.indexOf(d)?n(new se("Unsupported protocol "+d+":",se.ERR_BAD_REQUEST,e)):u.send(r||null)}))}};re.forEach(vt,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const yt=e=>`- ${e}`,bt=e=>re.isFunction(e)||null===e||!1===e,wt=e=>{e=re.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!bt(n)&&(r=vt[(t=String(n)).toLowerCase()],void 0===r))throw new se(`Unknown adapter '${t}'`);if(r)break;s[t||"#"+i]=r}if(!r){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new se("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(yt).join("\n"):" "+yt(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function St(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new je(null,e)}function Et(e){return St(e),e.headers=De.from(e.headers),e.data=Ne.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),wt(e.adapter||Pe.adapter)(e).then((function(t){return St(e),t.data=Ne.call(e,e.transformResponse,t),t.headers=De.from(t.headers),t}),(function(t){return Le(t)||(St(e),t&&t.response&&(t.response.data=Ne.call(e,e.transformResponse,t.response),t.response.headers=De.from(t.response.headers))),Promise.reject(t)}))}const _t=e=>e instanceof De?e.toJSON():e;function xt(e,t){t=t||{};const n={};function r(e,t,n){return re.isPlainObject(e)&&re.isPlainObject(t)?re.merge.call({caseless:n},e,t):re.isPlainObject(t)?re.merge({},t):re.isArray(t)?t.slice():t}function s(e,t,n){return re.isUndefined(t)?re.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function i(e,t){if(!re.isUndefined(t))return r(void 0,t)}function o(e,t){return re.isUndefined(t)?re.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,s,i){return i in t?r(n,s):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>s(_t(e),_t(t),!0)};return re.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=c[r]||s,o=i(e[r],t[r],r);re.isUndefined(o)&&i!==a||(n[r]=o)})),n}const Tt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Tt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ct={};Tt.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,i)=>{if(!1===e)throw new se(r(s," has been removed"+(t?" in "+t:"")),se.ERR_DEPRECATED);return t&&!Ct[s]&&(Ct[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,i)}};const Pt={assertOptions:function(e,t,n){if("object"!=typeof e)throw new se("options must be an object",se.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const t=e[i],n=void 0===t||o(t,i,e);if(!0!==n)throw new se("option "+i+" must be "+n,se.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new se("Unknown option "+i,se.ERR_BAD_OPTION)}},validators:Tt},At=Pt.validators;class Rt{constructor(e){this.defaults=e,this.interceptors={request:new ve,response:new ve}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=xt(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&Pt.assertOptions(n,{silentJSONParsing:At.transitional(At.boolean),forcedJSONParsing:At.transitional(At.boolean),clarifyTimeoutError:At.transitional(At.boolean)},!1),null!=r&&(re.isFunction(r)?t.paramsSerializer={serialize:r}:Pt.assertOptions(r,{encode:At.function,serialize:At.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&re.merge(s.common,s[t.method]);s&&re.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=De.concat(i,s);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,p=0;if(!a){const e=[Et.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);p<u;)l=l.then(e[p++],e[p++]);return l}u=o.length;let h=t;for(p=0;p<u;){const e=o[p++],t=o[p++];try{h=e(h)}catch(e){t.call(this,e);break}}try{l=Et.call(this,h)}catch(e){return Promise.reject(e)}for(p=0,u=c.length;p<u;)l=l.then(c[p++],c[p++]);return l}getUri(e){return ge(Be((e=xt(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}re.forEach(["delete","get","head","options"],(function(e){Rt.prototype[e]=function(t,n){return this.request(xt(n||{},{method:e,url:t,data:(n||{}).data}))}})),re.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,s){return this.request(xt(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Rt.prototype[e]=t(),Rt.prototype[e+"Form"]=t(!0)}));const It=Rt;class kt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,s){n.reason||(n.reason=new je(e,r,s),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new kt((function(t){e=t})),cancel:e}}}const Ot=kt,Mt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mt).forEach((([e,t])=>{Mt[t]=e}));const Dt=Mt,Nt=function e(t){const n=new It(t),r=_(It.prototype.request,n);return re.extend(r,It.prototype,n,{allOwnKeys:!0}),re.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(xt(t,n))},r}(Pe);Nt.Axios=It,Nt.CanceledError=je,Nt.CancelToken=Ot,Nt.isCancel=Le,Nt.VERSION="1.6.2",Nt.toFormData=pe,Nt.AxiosError=se,Nt.Cancel=Nt.CanceledError,Nt.all=function(e){return Promise.all(e)},Nt.spread=function(e){return function(t){return e.apply(null,t)}},Nt.isAxiosError=function(e){return re.isObject(e)&&!0===e.isAxiosError},Nt.mergeConfig=xt,Nt.AxiosHeaders=De,Nt.formToJSON=e=>Te(re.isHTMLForm(e)?new FormData(e):e),Nt.getAdapter=wt,Nt.HttpStatusCode=Dt,Nt.default=Nt,e.exports=Nt},8177:(e,t,n)=>{if(!globalThis.ReadableStream)try{const e=n(7742),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,n(2477)),e.emitWarning=t}catch(n){throw e.emitWarning=t,n}}catch(e){Object.assign(globalThis,n(5952))}try{const{Blob:e}=n(4300);e&&!e.prototype.stream&&(e.prototype.stream=function(e){let t=0;const n=this;return new ReadableStream({type:"bytes",async pull(e){const r=n.slice(t,Math.min(n.size,t+65536)),s=await r.arrayBuffer();t+=s.byteLength,e.enqueue(new Uint8Array(s)),t===n.size&&e.close()}})})}catch(e){}},2398:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DataViewIndexOutOfBoundsError:()=>U,DecodeError:()=>w,Decoder:()=>z,EXT_TIMESTAMP:()=>S,Encoder:()=>I,ExtData:()=>y,ExtensionCodec:()=>A,decode:()=>V,decodeArrayStream:()=>ee,decodeAsync:()=>Z,decodeMulti:()=>W,decodeMultiStream:()=>te,decodeStream:()=>ne,decodeTimestampExtension:()=>C,decodeTimestampToTimeSpec:()=>T,encode:()=>O,encodeDateToTimeSpec:()=>_,encodeTimeSpecToTimestamp:()=>E,encodeTimestampExtension:()=>x});var r,s,i,o=4294967295;function a(e,t,n){var r=Math.floor(n/4294967296),s=n;e.setUint32(t,r),e.setUint32(t+4,s)}function c(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var l=("undefined"==typeof process||"never"!==(null===(r=null===process||void 0===process?void 0:process.env)||void 0===r?void 0:r.TEXT_ENCODING))&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function u(e){for(var t=e.length,n=0,r=0;r<t;){var s=e.charCodeAt(r++);if(0!=(4294967168&s))if(0==(4294965248&s))n+=2;else{if(s>=55296&&s<=56319&&r<t){var i=e.charCodeAt(r);56320==(64512&i)&&(++r,s=((1023&s)<<10)+(1023&i)+65536)}n+=0==(4294901760&s)?3:4}else n++}return n}var p=l?new TextEncoder:void 0,h=l?"undefined"!=typeof process&&"force"!==(null===(s=null===process||void 0===process?void 0:process.env)||void 0===s?void 0:s.TEXT_ENCODING)?200:0:o,d=(null==p?void 0:p.encodeInto)?function(e,t,n){p.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(p.encode(e),n)};function f(e,t,n){for(var r=t,s=r+n,i=[],o="";r<s;){var a=e[r++];if(0==(128&a))i.push(a);else if(192==(224&a)){var c=63&e[r++];i.push((31&a)<<6|c)}else if(224==(240&a)){c=63&e[r++];var l=63&e[r++];i.push((31&a)<<12|c<<6|l)}else if(240==(248&a)){var u=(7&a)<<18|(c=63&e[r++])<<12|(l=63&e[r++])<<6|63&e[r++];u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u)}else i.push(a);i.length>=4096&&(o+=String.fromCharCode.apply(String,i),i.length=0)}return i.length>0&&(o+=String.fromCharCode.apply(String,i)),o}var m,g=l?new TextDecoder:null,v=l?"undefined"!=typeof process&&"force"!==(null===(i=null===process||void 0===process?void 0:process.env)||void 0===i?void 0:i.TEXT_DECODER)?200:0:o,y=function(e,t){this.type=e,this.data=t},b=(m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},m(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w=function(e){function t(n){var r=e.call(this,n)||this,s=Object.create(t.prototype);return Object.setPrototypeOf(r,s),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return b(t,e),t}(Error),S=-1;function E(e){var t,n=e.sec,r=e.nsec;if(n>=0&&r>=0&&n<=17179869183){if(0===r&&n<=4294967295){var s=new Uint8Array(4);return(t=new DataView(s.buffer)).setUint32(0,n),s}var i=n/4294967296,o=4294967295&n;return s=new Uint8Array(8),(t=new DataView(s.buffer)).setUint32(0,r<<2|3&i),t.setUint32(4,o),s}return s=new Uint8Array(12),(t=new DataView(s.buffer)).setUint32(0,r),a(t,4,n),s}function _(e){var t=e.getTime(),n=Math.floor(t/1e3),r=1e6*(t-1e3*n),s=Math.floor(r/1e9);return{sec:n+s,nsec:r-1e9*s}}function x(e){return e instanceof Date?E(_(e)):null}function T(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var n=t.getUint32(0);return{sec:4294967296*(3&n)+t.getUint32(4),nsec:n>>>2};case 12:return{sec:c(t,4),nsec:t.getUint32(0)};default:throw new w("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}function C(e){var t=T(e);return new Date(1e3*t.sec+t.nsec/1e6)}var P={type:S,encode:x,decode:C},A=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(P)}return e.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var s=1+t;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++)if(null!=(r=this.builtInEncoders[n])&&null!=(s=r(e,t)))return new y(-1-n,s);for(n=0;n<this.encoders.length;n++){var r,s;if(null!=(r=this.encoders[n])&&null!=(s=r(e,t)))return new y(n,s)}return e instanceof y?e:null},e.prototype.decode=function(e,t,n){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new y(t,e)},e.defaultCodec=new e,e}();function R(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var I=function(){function e(e,t,n,r,s,i,o,a){void 0===e&&(e=A.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===r&&(r=2048),void 0===s&&(s=!1),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=s,this.forceFloat32=i,this.ignoreUndefined=o,this.forceIntegerToFloat=a,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.getUint8Array()},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>h){var t=u(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),d(e,this.bytes,this.pos),this.pos+=t}else t=u(e),this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){for(var r=e.length,s=n,i=0;i<r;){var o=e.charCodeAt(i++);if(0!=(4294967168&o)){if(0==(4294965248&o))t[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){var a=e.charCodeAt(i);56320==(64512&a)&&(++i,o=((1023&o)<<10)+(1023&a)+65536)}0==(4294901760&o)?(t[s++]=o>>12&15|224,t[s++]=o>>6&63|128):(t[s++]=o>>18&7|240,t[s++]=o>>12&63|128,t[s++]=o>>6&63|128)}t[s++]=63&o|128}else t[s++]=o}}(e,this.bytes,this.pos),this.pos+=t},e.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var n=R(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: ".concat(n));this.writeU8(221),this.writeU32(n)}for(var r=0,s=e;r<s.length;r++){var i=s[r];this.doEncode(i,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var n=0,r=0,s=t;r<s.length;r++)void 0!==e[s[r]]&&n++;return n},e.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large map object: ".concat(r));this.writeU8(223),this.writeU32(r)}for(var s=0,i=n;s<i.length;s++){var o=i[s],a=e[o];this.ignoreUndefined&&void 0===a||(this.encodeString(o),this.doEncode(a,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: ".concat(t));this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,n){var r=n/4294967296,s=n;e.setUint32(t,r),e.setUint32(t+4,s)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),a(this.view,this.pos,e),this.pos+=8},e}(),k={};function O(e,t){return void 0===t&&(t=k),new I(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat).encode(e)}function M(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}var D=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){e:for(var r=0,s=this.caches[n-1];r<s.length;r++){for(var i=s[r],o=i.bytes,a=0;a<n;a++)if(o[a]!==e[t+a])continue e;return i.str}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},e.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var s=f(e,t,n),i=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(i,s),s},e}(),N=function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},L=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,s){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,s,(t=e[n](t)).done,t.value)}))}}},j=function(e){return this instanceof j?(this.v=e,this):new j(e)},q=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(e,t||[]),i=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){s[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=s[e](t)).value instanceof j?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}},B=new DataView(new ArrayBuffer(0)),F=new Uint8Array(B.buffer),U=function(){try{B.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),$=new U("Insufficient data"),H=new D,z=function(){function e(e,t,n,r,s,i,a,c){void 0===e&&(e=A.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=o),void 0===r&&(r=o),void 0===s&&(s=o),void 0===i&&(i=o),void 0===a&&(a=o),void 0===c&&(c=H),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=r,this.maxArrayLength=s,this.maxMapLength=i,this.maxExtLength=a,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=B,this.bytes=F,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=R(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=R(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=R(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return new RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return N(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,n,r,s,i,o,a,c;return i=this,o=void 0,c=function(){var i,o,a,c,l,u,p,h;return N(this,(function(d){switch(d.label){case 0:i=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),t=L(e),d.label=2;case 2:return[4,t.next()];case 3:if((n=d.sent()).done)return[3,5];if(a=n.value,i)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{o=this.doDecodeSync(),i=!0}catch(e){if(!(e instanceof U))throw e}this.totalPos+=this.pos,d.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=d.sent(),r={error:c},[3,12];case 7:return d.trys.push([7,,10,11]),n&&!n.done&&(s=t.return)?[4,s.call(t)]:[3,9];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(i){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,o]}throw u=(l=this).headByte,p=l.pos,h=l.totalPos,new RangeError("Insufficient data in parsing ".concat(M(u)," at ").concat(h," (").concat(p," in the current buffer)"))}}))},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{s(c.next(e))}catch(e){t(e)}}function r(e){try{s(c.throw(e))}catch(e){t(e)}}function s(t){var s;t.done?e(t.value):(s=t.value,s instanceof a?s:new a((function(e){e(s)}))).then(n,r)}s((c=c.apply(i,o||[])).next())}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return q(this,arguments,(function(){var n,r,s,i,o,a,c,l,u;return N(this,(function(p){switch(p.label){case 0:n=t,r=-1,p.label=1;case 1:p.trys.push([1,13,14,19]),s=L(e),p.label=2;case 2:return[4,j(s.next())];case 3:if((i=p.sent()).done)return[3,12];if(o=i.value,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),n&&(r=this.readArraySize(),n=!1,this.complete()),p.label=4;case 4:p.trys.push([4,9,,10]),p.label=5;case 5:return[4,j(this.doDecodeSync())];case 6:return[4,p.sent()];case 7:return p.sent(),0==--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((a=p.sent())instanceof U))throw a;return[3,10];case 10:this.totalPos+=this.pos,p.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return c=p.sent(),l={error:c},[3,19];case 14:return p.trys.push([14,,17,18]),i&&!i.done&&(u=s.return)?[4,j(u.call(s))]:[3,16];case 15:p.sent(),p.label=16;case 16:return[3,18];case 17:if(l)throw l.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!=(r=e-128)){this.pushMapState(r),this.complete();continue e}t={}}else if(e<160){if(0!=(r=e-144)){this.pushArrayState(r),this.complete();continue e}t=[]}else{var n=e-160;t=this.decodeUtf8String(n,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e)n=this.lookU8(),t=this.decodeUtf8String(n,1);else if(218===e)n=this.lookU16(),t=this.decodeUtf8String(n,2);else if(219===e)n=this.lookU32(),t=this.decodeUtf8String(n,4);else if(220===e){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(221===e){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(222===e){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue e}t={}}else if(223===e){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue e}t={}}else if(196===e){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(197===e)r=this.lookU16(),t=this.decodeBinary(r,2);else if(198===e)r=this.lookU32(),t=this.decodeBinary(r,4);else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e)r=this.lookU8(),t=this.decodeExtension(r,1);else if(200===e)r=this.lookU16(),t=this.decodeExtension(r,2);else{if(201!==e)throw new w("Unrecognized type byte: ".concat(M(e)));r=this.lookU32(),t=this.decodeExtension(r,4)}this.complete();for(var s=this.stack;s.length>0;){var i=s[s.length-1];if(0===i.type){if(i.array[i.position]=t,i.position++,i.position!==i.size)continue e;s.pop(),t=i.array}else{if(1===i.type){if(void 0,"string"!=(o=typeof t)&&"number"!==o)throw new w("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new w("The key __proto__ is not allowed");i.key=t,i.type=2;continue e}if(i.map[i.key]=t,i.readCount++,i.readCount!==i.size){i.key=null,i.type=1;continue e}s.pop(),t=i.map}}return t}var o},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new w("Unrecognized array type byte: ".concat(M(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new w("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new w("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var n;if(e>this.maxStrLength)throw new w("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw $;var r,s=this.pos+t;return r=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,s,e):e>v?function(e,t,n){var r=e.subarray(t,t+n);return g.decode(r)}(this.bytes,s,e):f(this.bytes,s,e),this.pos+=t+e,r},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new w("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw $;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new w("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=c(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}(),K={};function V(e,t){return void 0===t&&(t=K),new z(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decode(e)}function W(e,t){return void 0===t&&(t=K),new z(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeMulti(e)}var G=function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Y=function(e){return this instanceof Y?(this.v=e,this):new Y(e)},Q=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(e,t||[]),i=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){s[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=s[e](t)).value instanceof Y?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}};function X(e){if(null==e)throw new Error("Assertion Failure: value must not be null nor undefined")}function J(e){return null!=e[Symbol.asyncIterator]?e:function(e){return Q(this,arguments,(function(){var t,n,r,s;return G(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Y(t.read())];case 3:return n=i.sent(),r=n.done,s=n.value,r?[4,Y(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return X(s),[4,Y(s)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e)}function Z(e,t){return void 0===t&&(t=K),n=this,r=void 0,i=function(){var n;return function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(r){return n=J(e),[2,new z(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeAsync(n)]}))},new((s=void 0)||(s=Promise))((function(e,t){function o(e){try{c(i.next(e))}catch(e){t(e)}}function a(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(o,a)}c((i=i.apply(n,r||[])).next())}));var n,r,s,i}function ee(e,t){void 0===t&&(t=K);var n=J(e);return new z(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeArrayStream(n)}function te(e,t){void 0===t&&(t=K);var n=J(e);return new z(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeStream(n)}function ne(e,t){return void 0===t&&(t=K),te(e,t)}},9016:(e,t,n)=>{"use strict";function r(e,t){return t?t.aborted?Promise.resolve(void 0):new Promise((n=>{const r=s(e,(e=>{t.removeEventListener("abort",i),n(e)})),i=()=>{r.dispose(),t.removeEventListener("abort",i),n(void 0)};t.addEventListener("abort",i)})):new Promise((t=>s(e,t)))}n.r(t),n.d(t,{EventEmitter:()=>i,once:()=>s,toPromise:()=>r});const s=(e,t)=>{const n=e((e=>{t(e),n.dispose()}));return n};class i{constructor(){this.event=(e,t,n)=>{const r=this.add(t?e.bind(t):e);return n?.push(r),r}}get size(){return this.listeners?"function"==typeof this.listeners?1:this.listeners.length:0}fire(e){if(this.listeners)if("function"==typeof this.listeners)this.listeners(e);else for(const t of this.listeners)t(e)}dispose(){this.listeners=void 0}add(e){return this.listeners?"function"==typeof this.listeners?this.listeners=[this.listeners,e]:this.listeners.push(e):this.listeners=e,{dispose:()=>this.rm(e)}}rm(e){if(!this.listeners)return;if("function"==typeof this.listeners)return void(this.listeners===e&&(this.listeners=void 0));const t=this.listeners.indexOf(e);-1!==t&&(2===this.listeners.length?this.listeners=0===t?this.listeners[1]:this.listeners[0]:this.listeners=this.listeners.slice(0,t).concat(this.listeners.slice(t+1)))}}},9453:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(7842);const s=class extends r.Z{#e=0;#t="";constructor(e,t,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),null===n&&(n={});const r=void 0===n.lastModified?Date.now():Number(n.lastModified);Number.isNaN(r)||(this.#e=r),this.#t=String(t)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof r.Z&&/^(File)$/.test(e[Symbol.toStringTag])}}},6459:(e,t,n)=>{"use strict";n.d(t,{t6:()=>a.Z,$B:()=>o.Z,xB:()=>u,SX:()=>l,e2:()=>p,RA:()=>h});const r=require("node:fs"),s=require("node:path");var i=n(4841),o=n(9453),a=n(7842);const{stat:c}=r.promises,l=(e,t)=>d((0,r.statSync)(e),e,t),u=(e,t)=>c(e).then((n=>d(n,e,t))),p=(e,t)=>c(e).then((n=>f(n,e,t))),h=(e,t)=>f((0,r.statSync)(e),e,t),d=(e,t,n="")=>new a.Z([new m({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:n}),f=(e,t,n="")=>new o.Z([new m({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],(0,s.basename)(t),{type:n,lastModified:e.mtimeMs});class m{#n;#r;constructor(e){this.#n=e.path,this.#r=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,t){return new m({path:this.#n,lastModified:this.lastModified,size:t-e,start:this.#r+e})}async*stream(){const{mtimeMs:e}=await c(this.#n);if(e>this.lastModified)throw new i("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,r.createReadStream)(this.#n,{start:this.#r,end:this.#r+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}},7842:(e,t,n)=>{"use strict";async function*r(e,t=!0){for(const n of e)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(t){let e=n.byteOffset;const t=n.byteOffset+n.byteLength;for(;e!==t;){const r=Math.min(t-e,65536),s=n.buffer.slice(e,e+r);e+=s.byteLength,yield new Uint8Array(s)}}else yield n;else{let e=0,t=n;for(;e!==t.size;){const n=t.slice(e,Math.min(t.size,e+65536)),r=await n.arrayBuffer();e+=r.byteLength,yield new Uint8Array(r)}}}n.d(t,{Z:()=>i}),n(8177);const s=class e{#s=[];#i="";#o=0;#a="transparent";constructor(t=[],n={}){if("object"!=typeof t||null===t)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof n&&"function"!=typeof n)throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===n&&(n={});const r=new TextEncoder;for(const n of t){let t;t=ArrayBuffer.isView(n)?new Uint8Array(n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)):n instanceof ArrayBuffer?new Uint8Array(n.slice(0)):n instanceof e?n:r.encode(`${n}`),this.#o+=ArrayBuffer.isView(t)?t.byteLength:t.size,this.#s.push(t)}this.#a=`${void 0===n.endings?"transparent":n.endings}`;const s=void 0===n.type?"":String(n.type);this.#i=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#o}get type(){return this.#i}async text(){const e=new TextDecoder;let t="";for await(const n of r(this.#s,!1))t+=e.decode(n,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const n of r(this.#s,!1))e.set(n,t),t+=n.length;return e.buffer}stream(){const e=r(this.#s,!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){const n=await e.next();n.done?t.close():t.enqueue(n.value)},async cancel(){await e.return()}})}slice(t=0,n=this.size,r=""){const{size:s}=this;let i=t<0?Math.max(s+t,0):Math.min(t,s),o=n<0?Math.max(s+n,0):Math.min(n,s);const a=Math.max(o-i,0),c=this.#s,l=[];let u=0;for(const e of c){if(u>=a)break;const t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(i&&t<=i)i-=t,o-=t;else{let n;ArrayBuffer.isView(e)?(n=e.subarray(i,Math.min(t,o)),u+=n.byteLength):(n=e.slice(i,Math.min(t,o)),u+=n.size),o-=t,l.push(n),i=0}}const p=new e([],{type:String(r).toLowerCase()});return p.#o=a,p.#s=l,p}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(s.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});const i=s},693:(e,t,n)=>{"use strict";n.d(t,{Ct:()=>d,au:()=>f});var r=n(7842),s=n(9453),{toStringTag:i,iterator:o,hasInstance:a}=Symbol,c=Math.random,l="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),u=(e,t,n)=>(e+="",/^(Blob|File)$/.test(t&&t[i])?[(n=void 0!==n?n+"":"File"==t[i]?t.name:"blob",e),t.name!==n||"blob"==t[i]?new s.Z([t],n,t):t]:[e,t+""]),p=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),h=(e,t,n)=>{if(t.length<n)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${n} arguments required, but only ${t.length} present.`)};const d=class{#c=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[i](){return"FormData"}[o](){return this.entries()}static[a](e){return e&&"object"==typeof e&&"FormData"===e[i]&&!l.some((t=>"function"!=typeof e[t]))}append(...e){h("append",arguments,2),this.#c.push(u(...e))}delete(e){h("delete",arguments,1),e+="",this.#c=this.#c.filter((([t])=>t!==e))}get(e){h("get",arguments,1),e+="";for(var t=this.#c,n=t.length,r=0;r<n;r++)if(t[r][0]===e)return t[r][1];return null}getAll(e,t){return h("getAll",arguments,1),t=[],e+="",this.#c.forEach((n=>n[0]===e&&t.push(n[1]))),t}has(e){return h("has",arguments,1),e+="",this.#c.some((t=>t[0]===e))}forEach(e,t){for(var[n,r]of(h("forEach",arguments,1),this))e.call(t,r,n,this)}set(...e){h("set",arguments,2);var t=[],n=!0;e=u(...e),this.#c.forEach((r=>{r[0]===e[0]?n&&(n=!t.push(e)):t.push(r)})),n&&t.push(e),this.#c=t}*entries(){yield*this.#c}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};function f(e,t=r.Z){var n=`${c()}${c()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],i=`--${n}\r\nContent-Disposition: form-data; name="`;return e.forEach(((e,t)=>"string"==typeof e?s.push(i+p(t)+`"\r\n\r\n${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r\n`):s.push(i+p(t)+`"; filename="${p(e.name,1)}"\r\nContent-Type: ${e.type||"application/octet-stream"}\r\n\r\n`,e,"\r\n"))),s.push(`--${n}--`),new t(s,{type:"multipart/form-data; boundary="+n})}},3765:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbortError:()=>B,Blob:()=>F.t6,FetchError:()=>h,File:()=>F.$B,FormData:()=>u.Ct,Headers:()=>T,Request:()=>q,Response:()=>R,blobFrom:()=>F.xB,blobFromSync:()=>F.SX,default:()=>$,fileFrom:()=>F.e2,fileFromSync:()=>F.RA,isRedirect:()=>P});const r=require("node:http"),s=require("node:https"),i=require("node:zlib"),o=require("node:stream"),a=require("node:buffer"),c=require("node:util");var l=n(7842),u=n(693);class p extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class h extends p{constructor(e,t,n){super(e,t),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}const d=Symbol.toStringTag,f=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[d],m=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[d]),g=(0,c.promisify)(o.pipeline),v=Symbol("Body internals");class y{constructor(e,{size:t=0}={}){let n=null;null===e?e=null:f(e)?e=a.Buffer.from(e.toString()):m(e)||a.Buffer.isBuffer(e)||(c.types.isAnyArrayBuffer(e)?e=a.Buffer.from(e):ArrayBuffer.isView(e)?e=a.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof o||(e instanceof u.Ct?n=(e=(0,u.au)(e)).type.split("=")[1]:e=a.Buffer.from(String(e))));let r=e;a.Buffer.isBuffer(e)?r=o.Readable.from(e):m(e)&&(r=o.Readable.from(e.stream())),this[v]={body:e,stream:r,boundary:n,disturbed:!1,error:null},this.size=t,e instanceof o&&e.on("error",(e=>{const t=e instanceof p?e:new h(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[v].error=t}))}get body(){return this[v].stream}get bodyUsed(){return this[v].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:n}=await b(this);return e.slice(t,t+n)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const e=new u.Ct,t=new URLSearchParams(await this.text());for(const[n,r]of t)e.append(n,r);return e}const{toFormData:t}=await n.e(669).then(n.bind(n,4669));return t(this.body,e)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[v].body&&this[v].body.type||"",t=await this.arrayBuffer();return new l.Z([t],{type:e})}async json(){const e=await this.text();return JSON.parse(e)}async text(){const e=await b(this);return(new TextDecoder).decode(e)}buffer(){return b(this)}}async function b(e){if(e[v].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[v].disturbed=!0,e[v].error)throw e[v].error;const{body:t}=e;if(null===t)return a.Buffer.alloc(0);if(!(t instanceof o))return a.Buffer.alloc(0);const n=[];let r=0;try{for await(const s of t){if(e.size>0&&r+s.length>e.size){const n=new h(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(n),n}r+=s.length,n.push(s)}}catch(t){throw t instanceof p?t:new h(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t)}if(!0!==t.readableEnded&&!0!==t._readableState.ended)throw new h(`Premature close of server response while trying to fetch ${e.url}`);try{return n.every((e=>"string"==typeof e))?a.Buffer.from(n.join("")):a.Buffer.concat(n,r)}catch(t){throw new h(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}}y.prototype.buffer=(0,c.deprecate)(y.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(y.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,c.deprecate)((()=>{}),"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});const w=(e,t)=>{let n,r,{body:s}=e[v];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof o&&"function"!=typeof s.getBoundary&&(n=new o.PassThrough({highWaterMark:t}),r=new o.PassThrough({highWaterMark:t}),s.pipe(n),s.pipe(r),e[v].stream=n,s=r),s},S=(0,c.deprecate)((e=>e.getBoundary()),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),E=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":f(e)?"application/x-www-form-urlencoded;charset=UTF-8":m(e)?e.type||null:a.Buffer.isBuffer(e)||c.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof u.Ct?`multipart/form-data; boundary=${t[v].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${S(e)}`:e instanceof o?null:"text/plain;charset=UTF-8",_="function"==typeof r.validateHeaderName?r.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},x="function"==typeof r.validateHeaderValue?r.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const t=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class T extends URLSearchParams{constructor(e){let t=[];if(e instanceof T){const n=e.raw();for(const[e,r]of Object.entries(n))t.push(...r.map((t=>[e,t])))}else if(null==e);else{if("object"!=typeof e||c.types.isBoxedPrimitive(e))throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");{const n=e[Symbol.iterator];if(null==n)t.push(...Object.entries(e));else{if("function"!=typeof n)throw new TypeError("Header pairs must be iterable");t=[...e].map((e=>{if("object"!=typeof e||c.types.isBoxedPrimitive(e))throw new TypeError("Each header pair must be an iterable object");return[...e]})).map((e=>{if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");return[...e]}))}}}return t=t.length>0?t.map((([e,t])=>(_(e),x(e,String(t)),[String(e).toLowerCase(),String(t)]))):void 0,super(t),new Proxy(this,{get(e,t,n){switch(t){case"append":case"set":return(n,r)=>(_(n),x(n,String(r)),URLSearchParams.prototype[t].call(e,String(n).toLowerCase(),String(r)));case"delete":case"has":case"getAll":return n=>(_(n),URLSearchParams.prototype[t].call(e,String(n).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,t,n)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(0===t.length)return null;let n=t.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,t){for(const n of this.keys())Reflect.apply(e,t,[this.get(n),n,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce(((e,t)=>(e[t]=this.getAll(t),e)),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce(((e,t)=>{const n=this.getAll(t);return e[t]="host"===t?n[0]:n.length>1?n:n[0],e}),{})}}Object.defineProperties(T.prototype,["get","entries","forEach","values"].reduce(((e,t)=>(e[t]={enumerable:!0},e)),{}));const C=new Set([301,302,303,307,308]),P=e=>C.has(e),A=Symbol("Response internals");class R extends y{constructor(e=null,t={}){super(e,t);const n=null!=t.status?t.status:200,r=new T(t.headers);if(null!==e&&!r.has("Content-Type")){const t=E(e,this);t&&r.append("Content-Type",t)}this[A]={type:"default",url:t.url,status:n,statusText:t.statusText||"",headers:r,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[A].type}get url(){return this[A].url||""}get status(){return this[A].status}get ok(){return this[A].status>=200&&this[A].status<300}get redirected(){return this[A].counter>0}get statusText(){return this[A].statusText}get headers(){return this[A].headers}get highWaterMark(){return this[A].highWaterMark}clone(){return new R(w(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!P(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new R(null,{headers:{location:new URL(e).toString()},status:t})}static error(){const e=new R(null,{status:0,statusText:""});return e[A].type="error",e}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(R.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const I=require("node:url"),k=require("node:net");function O(e,t=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol)?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e))}const M=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function D(e){return!!/^about:(blank|srcdoc)$/.test(e)||"data:"===e.protocol||!!/^(blob|filesystem):$/.test(e.protocol)||function(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;const t=e.host.replace(/(^\[)|(]$)/g,""),n=(0,k.isIP)(t);return!(4!==n||!/^127\./.test(t))||!(6!==n||!/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||"localhost"!==e.host&&!e.host.endsWith(".localhost")&&"file:"===e.protocol}(e)}const N=Symbol("Request internals"),L=e=>"object"==typeof e&&"object"==typeof e[N],j=(0,c.deprecate)((()=>{}),".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class q extends y{constructor(e,t={}){let n;if(L(e)?n=new URL(e.url):(n=new URL(e),e={}),""!==n.username||""!==n.password)throw new TypeError(`${n} is an url with embedded credentials.`);let r=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(r)&&(r=r.toUpperCase()),!L(t)&&"data"in t&&j(),(null!=t.body||L(e)&&null!==e.body)&&("GET"===r||"HEAD"===r))throw new TypeError("Request with GET/HEAD method cannot have body");const s=t.body?t.body:L(e)&&null!==e.body?w(e):null;super(s,{size:t.size||e.size||0});const i=new T(t.headers||e.headers||{});if(null!==s&&!i.has("Content-Type")){const e=E(s,this);e&&i.set("Content-Type",e)}let o=L(e)?e.signal:null;if("signal"in t&&(o=t.signal),null!=o&&("object"!=typeof(a=o)||"AbortSignal"!==a[d]&&"EventTarget"!==a[d]))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");var a;let c=null==t.referrer?e.referrer:t.referrer;if(""===c)c="no-referrer";else if(c){const e=new URL(c);c=/^about:(\/\/)?client$/.test(e)?"client":e}else c=void 0;this[N]={method:r,redirect:t.redirect||e.redirect||"follow",headers:i,parsedURL:n,signal:o,referrer:c},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[N].method}get url(){return(0,I.format)(this[N].parsedURL)}get headers(){return this[N].headers}get redirect(){return this[N].redirect}get signal(){return this[N].signal}get referrer(){return"no-referrer"===this[N].referrer?"":"client"===this[N].referrer?"about:client":this[N].referrer?this[N].referrer.toString():void 0}get referrerPolicy(){return this[N].referrerPolicy}set referrerPolicy(e){this[N].referrerPolicy=function(e){if(!M.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new q(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(q.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});class B extends p{constructor(e,t="aborted"){super(e,t)}}var F=n(6459);const U=new Set(["data:","http:","https:"]);async function $(e,t){return new Promise(((n,c)=>{const l=new q(e,t),{parsedURL:u,options:p}=(e=>{const{parsedURL:t}=e[N],n=new T(e[N].headers);n.has("Accept")||n.set("Accept","*/*");let r=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(r="0"),null!==e.body){const t=(e=>{const{body:t}=e[v];return null===t?0:m(t)?t.size:a.Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null})(e);"number"!=typeof t||Number.isNaN(t)||(r=String(t))}r&&n.set("Content-Length",r),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[N].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:n}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;const r=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";const s=e.referrer;let i=O(s),o=O(s,!0);i.toString().length>4096&&(i=o),t&&(i=t(i)),n&&(o=n(o));const a=new URL(e.url);switch(r){case"no-referrer":return"no-referrer";case"origin":return o;case"unsafe-url":return i;case"strict-origin":return D(i)&&!D(a)?"no-referrer":o.toString();case"strict-origin-when-cross-origin":return i.origin===a.origin?i:D(i)&&!D(a)?"no-referrer":o;case"same-origin":return i.origin===a.origin?i:"no-referrer";case"origin-when-cross-origin":return i.origin===a.origin?i:o;case"no-referrer-when-downgrade":return D(i)&&!D(a)?"no-referrer":i;default:throw new TypeError(`Invalid referrerPolicy: ${r}`)}}(e):e[N].referrer="no-referrer",e[N].referrer instanceof URL&&n.set("Referer",e.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),e.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=e;"function"==typeof s&&(s=s(t)),n.has("Connection")||s||n.set("Connection","close");const i=(e=>{if(e.search)return e.search;const t=e.href.length-1,n=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-n.length]?"?":""})(t);return{parsedURL:t,options:{path:t.pathname+i,method:e.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:s}}})(l);if(!U.has(u.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===u.protocol){const e=function(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');const t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw new TypeError("malformed data: URI");const n=e.substring(5,t).split(";");let r="",s=!1;const i=n[0]||"text/plain";let o=i;for(let e=1;e<n.length;e++)"base64"===n[e]?s=!0:(o+=`;${n[e]}`,0===n[e].indexOf("charset=")&&(r=n[e].substring(8)));n[0]||r.length||(o+=";charset=US-ASCII",r="US-ASCII");const a=s?"base64":"ascii",c=unescape(e.substring(t+1)),l=Buffer.from(c,a);return l.type=i,l.typeFull=o,l.charset=r,l}(l.url),t=new R(e,{headers:{"Content-Type":e.typeFull}});return void n(t)}const d=("https:"===u.protocol?s:r).request,{signal:f}=l;let y=null;const b=()=>{const e=new B("The operation was aborted.");c(e),l.body&&l.body instanceof o.Readable&&l.body.destroy(e),y&&y.body&&y.body.emit("error",e)};if(f&&f.aborted)return void b();const S=()=>{b(),C()},E=d(u.toString(),p);f&&f.addEventListener("abort",S);const C=()=>{E.abort(),f&&f.removeEventListener("abort",S)};E.on("error",(e=>{c(new h(`request to ${l.url} failed, reason: ${e.message}`,"system",e)),C()})),function(e,t){const n=a.Buffer.from("0\r\n\r\n");let r,s=!1,i=!1;e.on("response",(e=>{const{headers:t}=e;s="chunked"===t["transfer-encoding"]&&!t["content-length"]})),e.on("socket",(t=>{const o=()=>{if(s&&!i){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",(e=>{y&&y.body&&y.body.destroy(e)})(e)}},c=e=>{i=0===a.Buffer.compare(e.slice(-5),n),!i&&r&&(i=0===a.Buffer.compare(r.slice(-3),n.slice(0,3))&&0===a.Buffer.compare(e.slice(-2),n.slice(3))),r=e};t.prependListener("close",o),t.on("data",c),e.on("close",(()=>{t.removeListener("close",o),t.removeListener("data",c)}))}))}(E),process.version<"v14"&&E.on("socket",(e=>{let t;e.prependListener("end",(()=>{t=e._eventsCount})),e.prependListener("close",(n=>{if(y&&t<e._eventsCount&&!n){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",y.body.emit("error",e)}}))})),E.on("response",(e=>{E.setTimeout(0);const r=function(e=[]){return new T(e.reduce(((e,t,n,r)=>(n%2==0&&e.push(r.slice(n,n+2)),e)),[]).filter((([e,t])=>{try{return _(e),x(e,String(t)),!0}catch{return!1}})))}(e.rawHeaders);if(P(e.statusCode)){const i=r.get("Location");let a=null;try{a=null===i?null:new URL(i,l.url)}catch{if("manual"!==l.redirect)return c(new h(`uri requested responds with an invalid redirect URL: ${i}`,"invalid-redirect")),void C()}switch(l.redirect){case"error":return c(new h(`uri requested responds with a redirect, redirect mode is set to error: ${l.url}`,"no-redirect")),void C();case"manual":break;case"follow":{if(null===a)break;if(l.counter>=l.follow)return c(new h(`maximum redirect reached at: ${l.url}`,"max-redirect")),void C();const i={headers:new T(l.headers),follow:l.follow,counter:l.counter+1,agent:l.agent,compress:l.compress,method:l.method,body:w(l),signal:l.signal,size:l.size,referrer:l.referrer,referrerPolicy:l.referrerPolicy};if(!((e,t)=>{const n=new URL(t).hostname,r=new URL(e).hostname;return n===r||n.endsWith(`.${r}`)})(l.url,a)||(s=l.url,new URL(a).protocol!==new URL(s).protocol))for(const e of["authorization","www-authenticate","cookie","cookie2"])i.headers.delete(e);if(303!==e.statusCode&&l.body&&t.body instanceof o.Readable)return c(new h("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void C();303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==l.method)||(i.method="GET",i.body=void 0,i.headers.delete("content-length"));const u=function(e){const t=(e.get("referrer-policy")||"").split(/[,\s]+/);let n="";for(const e of t)e&&M.has(e)&&(n=e);return n}(r);return u&&(i.referrerPolicy=u),n($(new q(a,i))),void C()}default:return c(new TypeError(`Redirect option '${l.redirect}' is not a valid value of RequestRedirect`))}}var s;f&&e.once("end",(()=>{f.removeEventListener("abort",S)}));let a=(0,o.pipeline)(e,new o.PassThrough,(e=>{e&&c(e)}));process.version<"v12.10"&&e.on("aborted",S);const u={url:l.url,status:e.statusCode,statusText:e.statusMessage,headers:r,size:l.size,counter:l.counter,highWaterMark:l.highWaterMark},p=r.get("Content-Encoding");if(!l.compress||"HEAD"===l.method||null===p||204===e.statusCode||304===e.statusCode)return y=new R(a,u),void n(y);const d={flush:i.Z_SYNC_FLUSH,finishFlush:i.Z_SYNC_FLUSH};if("gzip"===p||"x-gzip"===p)return a=(0,o.pipeline)(a,i.createGunzip(d),(e=>{e&&c(e)})),y=new R(a,u),void n(y);if("deflate"===p||"x-deflate"===p){const t=(0,o.pipeline)(e,new o.PassThrough,(e=>{e&&c(e)}));return t.once("data",(e=>{a=8==(15&e[0])?(0,o.pipeline)(a,i.createInflate(),(e=>{e&&c(e)})):(0,o.pipeline)(a,i.createInflateRaw(),(e=>{e&&c(e)})),y=new R(a,u),n(y)})),void t.once("end",(()=>{y||(y=new R(a,u),n(y))}))}if("br"===p)return a=(0,o.pipeline)(a,i.createBrotliDecompress(),(e=>{e&&c(e)})),y=new R(a,u),void n(y);y=new R(a,u),n(y)})),(async(e,{body:t})=>{null===t?e.end():await g(t,e)})(E,l).catch(c)}))}},8492:e=>{"use strict";e.exports=JSON.parse('{"name":"@microsoft/dev-tunnels-management","version":"1.0.7473","description":"Tunnels library for Visual Studio tools","keywords":["Tunnels"],"author":"Microsoft","license":"MIT","dependencies":{"buffer":"^5.2.1","debug":"^4.1.1","vscode-jsonrpc":"^4.0.0","@microsoft/dev-tunnels-contracts":"^1.0.0","axios":"^1.6.2"},"main":"./index.js"}')},4369:e=>{"use strict";e.exports=JSON.parse('{"name":"@microsoft/dev-tunnels-ssh","version":"3.11.35","description":"SSH library for Dev Tunnels","repository":"https://github.com/microsoft/dev-tunnels-ssh.git","keywords":["SSH"],"author":"Microsoft","license":"MIT","dependencies":{"buffer":"^5.2.1","debug":"^4.1.1","diffie-hellman":"^5.0.3","vscode-jsonrpc":"^4.0.0"},"main":"./index.js"}')},7392:e=>{"use strict";e.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/3gpphal+json":{"source":"iana","compressible":true},"application/3gpphalforms+json":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/ace+cbor":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/alto-updatestreamcontrol+json":{"source":"iana","compressible":true},"application/alto-updatestreamparams+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/at+jwt":{"source":"iana"},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true,"extensions":["atomdeleted"]},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true,"extensions":["dwd"]},"application/atsc-dynamic-event-message":{"source":"iana"},"application/atsc-held+xml":{"source":"iana","compressible":true,"extensions":["held"]},"application/atsc-rdt+json":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true,"extensions":["rsat"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true,"extensions":["xcs"]},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/captive+json":{"source":"iana","compressible":true},"application/cbor":{"source":"iana"},"application/cbor-seq":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true,"extensions":["cdfx"]},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/city+json":{"source":"iana","compressible":true},"application/clr":{"source":"iana"},"application/clue+xml":{"source":"iana","compressible":true},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true,"extensions":["cpl"]},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dash-patch+xml":{"source":"iana","compressible":true,"extensions":["mpp"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dots+cbor":{"source":"iana"},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["es","ecma"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/elm+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/elm+xml":{"source":"iana","compressible":true},"application/emergencycalldata.cap+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true,"extensions":["emotionml"]},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/express":{"source":"iana","extensions":["exp"]},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true,"extensions":["fdt"]},"application/fhir+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/fhir+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/flexfec":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true,"extensions":["its"]},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/jscalendar+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true,"extensions":["lgr"]},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lpf+zip":{"source":"iana","compressible":false},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true,"extensions":["mpf"]},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mipc":{"source":"iana"},"application/missing-blocks+cbor-seq":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true,"extensions":["maei"]},"application/mmt-usd+xml":{"source":"iana","compressible":true,"extensions":["musd"]},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true},"application/mrb-publish+xml":{"source":"iana","compressible":true},"application/msc-ivr+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msc-mixer+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/multipart-core":{"source":"iana"},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana","charset":"US-ASCII"},"application/news-groupinfo":{"source":"iana","charset":"US-ASCII"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana","extensions":["cjs"]},"application/nss":{"source":"iana"},"application/oauth-authz-req+jwt":{"source":"iana"},"application/oblivious-dns-message":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{"source":"iana","compressible":true},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p21":{"source":"iana"},"application/p21+zip":{"source":"iana","compressible":false},"application/p2p-overlay+xml":{"source":"iana","compressible":true,"extensions":["relo"]},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana","extensions":["asc"]},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pidf-diff+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true,"extensions":["provx"]},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.cyn":{"source":"iana","charset":"7-BIT"},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/pvd+json":{"source":"iana","compressible":true},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true,"extensions":["rapd"]},"application/route-s-tsid+xml":{"source":"iana","compressible":true,"extensions":["sls"]},"application/route-usd+xml":{"source":"iana","compressible":true,"extensions":["rusd"]},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sarif+json":{"source":"iana","compressible":true},"application/sarif-external-properties+json":{"source":"iana","compressible":true},"application/sbe":{"source":"iana"},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true,"extensions":["senmlx"]},"application/senml-etch+cbor":{"source":"iana"},"application/senml-etch+json":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true,"extensions":["sensmlx"]},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/sipc":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spdx+json":{"source":"iana","compressible":true},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/swid+xml":{"source":"iana","compressible":true,"extensions":["swidtag"]},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/td+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/token-introspection+jwt":{"source":"iana"},"application/toml":{"compressible":true,"extensions":["toml"]},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana","extensions":["trig"]},"application/ttml+xml":{"source":"iana","compressible":true,"extensions":["ttml"]},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ubjson":{"compressible":false,"extensions":["ubj"]},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true,"extensions":["rsheet"]},"application/urc-targetdesc+xml":{"source":"iana","compressible":true,"extensions":["td"]},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true,"extensions":["1km"]},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.5gnas":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gtpc":{"source":"iana"},"application/vnd.3gpp.interworking-data":{"source":"iana"},"application/vnd.3gpp.lpp":{"source":"iana"},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ngap":{"source":"iana"},"application/vnd.3gpp.pfcp":{"source":"iana"},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.s1ap":{"source":"iana"},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.afplinedata-pagedef":{"source":"iana"},"application/vnd.afpc.cmoca-cmresource":{"source":"iana"},"application/vnd.afpc.foca-charset":{"source":"iana"},"application/vnd.afpc.foca-codedfont":{"source":"iana"},"application/vnd.afpc.foca-codepage":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.afpc.modca-cmtable":{"source":"iana"},"application/vnd.afpc.modca-formdef":{"source":"iana"},"application/vnd.afpc.modca-mediummap":{"source":"iana"},"application/vnd.afpc.modca-objectcontainer":{"source":"iana"},"application/vnd.afpc.modca-overlay":{"source":"iana"},"application/vnd.afpc.modca-pagesegment":{"source":"iana"},"application/vnd.age":{"source":"iana","extensions":["age"]},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.ota":{"source":"iana"},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.arrow.file":{"source":"iana"},"application/vnd.apache.arrow.stream":{"source":"iana"},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.aplextor.warrp+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["key"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true,"extensions":["bmml"]},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.error":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.bpf":{"source":"iana"},"application/vnd.bpf3":{"source":"iana"},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.ciedi":{"source":"iana"},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.cryptii.pipe+json":{"source":"iana","compressible":true},"application/vnd.crypto-shade-file":{"source":"iana"},"application/vnd.cryptomator.encrypted":{"source":"iana"},"application/vnd.cryptomator.vault":{"source":"iana"},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.cyclonedx+json":{"source":"iana","compressible":true},"application/vnd.cyclonedx+xml":{"source":"iana","compressible":true},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.d3m-dataset":{"source":"iana"},"application/vnd.d3m-problem":{"source":"iana"},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.dbf":{"source":"iana","extensions":["dbf"]},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbisl+xml":{"source":"iana","compressible":true},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.eclipse.ditto+json":{"source":"iana","compressible":true},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eu.kasparian.car+json":{"source":"iana","compressible":true},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.familysearch.gedcom+zip":{"source":"iana","compressible":false},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.ficlab.flb+zip":{"source":"iana","compressible":false},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujifilm.fb.docuworks":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.container":{"source":"iana"},"application/vnd.fujifilm.fb.jfi+xml":{"source":"iana","compressible":true},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.gentics.grd+json":{"source":"iana","compressible":true},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.slides":{"source":"iana"},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hl7cda+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hl7v2+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.iso11783-10+zip":{"source":"iana","compressible":false},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las":{"source":"iana"},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.laszip":{"source":"iana"},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.logipipe.circuit+zip":{"source":"iana","compressible":false},"application/vnd.loom":{"source":"iana"},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana","extensions":["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxar.archive.3tz+zip":{"source":"iana","compressible":false},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.nacamar.ybrid+json":{"source":"iana","compressible":true},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nebumind.line":{"source":"iana"},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true,"extensions":["ac"]},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oci.image.manifest.v1+json":{"source":"iana","compressible":true},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+cbor":{"source":"iana"},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true,"extensions":["obgx"]},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true,"extensions":["osm"]},"application/vnd.opentimestamps.ots":{"source":"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana","extensions":["rar"]},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.resilient.logic":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sar":{"source":"iana"},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.seis+json":{"source":"iana","compressible":true},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shade-save-file":{"source":"iana"},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.shopkick+json":{"source":"iana","compressible":true},"application/vnd.shp":{"source":"iana"},"application/vnd.shx":{"source":"iana"},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.snesdev-page-table":{"source":"iana"},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true,"extensions":["fo"]},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.sycle+xml":{"source":"iana","compressible":true},"application/vnd.syft+json":{"source":"iana","compressible":true},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","charset":"UTF-8","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veritone.aion+json":{"source":"iana","compressible":true},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.ves.encrypted":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","charset":"UTF-8","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.dpp":{"source":"iana"},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"source":"iana","compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true,"extensions":["wif"]},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-iwork-keynote-sffkey":{"extensions":["key"]},"application/x-iwork-numbers-sffnumbers":{"extensions":["numbers"]},"application/x-iwork-pages-sffpages":{"extensions":["pages"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-keepass2":{"extensions":["kdbx"]},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-pki-message":{"source":"iana"},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"iana","extensions":["der","crt","pem"]},"application/x-x509-ca-ra-cert":{"source":"iana"},"application/x-x509-next-ca-cert":{"source":"iana"},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true,"extensions":["xav"]},"application/xcap-caps+xml":{"source":"iana","compressible":true,"extensions":["xca"]},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true,"extensions":["xel"]},"application/xcap-error+xml":{"source":"iana","compressible":true},"application/xcap-ns+xml":{"source":"iana","compressible":true,"extensions":["xns"]},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true,"extensions":["xlf"]},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xsl","xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana","extensions":["amr"]},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/flexfec":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/mhas":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana","extensions":["mxmf"]},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx","opus"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/scip":{"source":"iana"},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sofa":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tetra_acelp_bb":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/tsvcis":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","compressible":true,"extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana","extensions":["avci"]},"image/avcs":{"source":"iana","extensions":["avcs"]},"image/avif":{"source":"iana","compressible":false,"extensions":["avif"]},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/hej2k":{"source":"iana","extensions":["hej2"]},"image/hsj2":{"source":"iana","extensions":["hsj2"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jph":{"source":"iana","extensions":["jph"]},"image/jphc":{"source":"iana","extensions":["jhc"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/jxra":{"source":"iana","extensions":["jxra"]},"image/jxrs":{"source":"iana","extensions":["jxrs"]},"image/jxs":{"source":"iana","extensions":["jxs"]},"image/jxsc":{"source":"iana","extensions":["jxsc"]},"image/jxsi":{"source":"iana","extensions":["jxsi"]},"image/jxss":{"source":"iana","extensions":["jxss"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/ktx2":{"source":"iana","extensions":["ktx2"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","compressible":true,"extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-dds":{"compressible":true,"extensions":["dds"]},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.pco.b16":{"source":"iana","extensions":["b16"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/e57":{"source":"iana"},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/mtl":{"source":"iana","extensions":["mtl"]},"model/obj":{"source":"iana","extensions":["obj"]},"model/step":{"source":"iana"},"model/step+xml":{"source":"iana","compressible":true,"extensions":["stpx"]},"model/step+zip":{"source":"iana","compressible":false,"extensions":["stpz"]},"model/step-xml+zip":{"source":"iana","compressible":false,"extensions":["stpxz"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.pytha.pyox":{"source":"iana"},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.sap.vds":{"source":"iana","extensions":["vds"]},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana"},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/cql":{"source":"iana"},"text/cql-expression":{"source":"iana"},"text/cql-identifier":{"source":"iana"},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/fhirpath":{"source":"iana"},"text/flexfec":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/gff3":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana","charset":"UTF-8"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana","charset":"UTF-8"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shaclc":{"source":"iana"},"text/shex":{"source":"iana","extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/spdx":{"source":"iana","extensions":["spdx"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana","charset":"UTF-8"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana","charset":"UTF-8"},"text/vnd.familysearch.gedcom":{"source":"iana","extensions":["ged"]},"text/vnd.ficlab.flt":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hans":{"source":"iana"},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sosi":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","charset":"UTF-8","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana","charset":"UTF-8"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"compressible":true,"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/av1":{"source":"iana"},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/ffv1":{"source":"iana"},"video/flexfec":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana","extensions":["m4s"]},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/jxsv":{"source":"iana"},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/scip":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vnd.youtube.yt":{"source":"iana"},"video/vp8":{"source":"iana"},"video/vp9":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')},5232:e=>{"use strict";e.exports={version:"1.0.34"}}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,r),i.exports}r.m=t,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>e+".js",r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e={898:1},r.f.require=(t,n)=>{e[t]||(t=>{var n=t.modules,s=t.ids,i=t.runtime;for(var o in n)r.o(n,o)&&(r.m[o]=n[o]);i&&i(r);for(var a=0;a<s.length;a++)e[s[a]]=1})(require("./"+r.u(t)))};var s={};(()=>{"use strict";r.r(s),r.d(s,{activate:()=>B,deactivate:()=>F});var e=r(9496),t=r(3807),n=r(3758);const i="tunnel+";function o(e){const t=e.lastIndexOf("@");return-1===t?i+e:e.slice(0,t+1)+i+e.slice(t+1)}function a(e){if(e.startsWith(i))return e.substring(i.length)}var c=r(3399);const l="vscode.dev.remote-server",u=["github","microsoft"];class p{constructor(e,t){this.providerId=e,this.scopes=t,this.basisClient=new n.AccessTokenBasisClient(this.providerId,l,(()=>this.getAccessToken()))}static github(){return new this("github",["user:email","read:org"])}static microsoft(){return new this("microsoft",[`${c.TunnelServiceProperties.production.serviceAppId}/.default`,"openid","email"])}get lastSession(){return this._lastSession}async testSession(e){const t=await this.getSessionIfExisting();try{if(t)return await e(t)}catch{}return e(await this.forceNewSession())}async getAccessToken(){return(await this.getSession()).accessToken}async isAuthenticated(){return!!await this.getSessionIfExisting()}async getSessionIfExisting(){const t=await e.authentication.getSession(this.providerId,this.scopes);return t&&(this._lastSession=t),t}async getSession(){const t=await e.authentication.getSession(this.providerId,this.scopes,{createIfNone:!0});return this._lastSession=t,t}async forceNewSession(){const t=await e.authentication.getSession(this.providerId,this.scopes,{forceNewSession:!0});return this._lastSession=t,t}}const h=Symbol("unset");class d{constructor({context:e,scope:t,key:n,defaultValue:r}){this._value=h,this.key=n,this.defaultValue=r,this.storage=e["global"===t?"globalState":"workspaceState"]}read(){return this._value===h&&(this._value=this.storage.get(this.key,this.defaultValue)),this._value}write(e){this._value=e,this.storage.update(this.key,e)}}const f={github:"GitHub",microsoft:"Microsoft Account"};class m{constructor(e){this.apProviders={github:p.github(),microsoft:p.microsoft()},this.lastPickedProvider=new d({context:e,scope:"global",key:"lastPickedProvider",defaultValue:void 0}),this.tunnelAssociations=new d({context:e,scope:"global",key:"tunnelProviderAssociations",defaultValue:[]})}getAccessProvider(e){return this.apProviders[e]}associateTunnel(e,t,n){let r=this.tunnelAssociations.read();r=r.filter((t=>t.name!==e)),void 0!==n&&r.unshift({name:e,id:`${t.tunnelId}.${t.clusterId}`,provider:n}),this.tunnelAssociations.write(r.slice(0,50))}async getOrPickTunnelAssociation(e){return this.getTunnelAssociation(e)||await this.pickProvider()}getTunnelAssociation(e){return this.tunnelAssociations.read().find((t=>"string"==typeof e?t.name===e:t.id===`${e.tunnelId}.${e.clusterId}`))?.provider}async pickProvider(t=u){if(1===t.length)return t[0];const n=this.lastPickedProvider.read(),r=t.map((t=>({label:f[t],description:t===n?e.l10n.t("Last used"):void 0,picked:t===n,provider:t})));r.sort(((e,t)=>e.picked===t.picked?0:e.picked?-1:1));const s=await e.window.showQuickPick(r,{placeHolder:e.l10n.t("What type of account did you use to start this tunnel?"),ignoreFocusOut:!0});return s?(this.lastPickedProvider.write(s.provider),s.provider):void 0}}const g=async t=>!!await e.window.showInformationMessage(e.l10n.t("Could not find tunnel with name {0}. Please ensure that you are using the same account that you used to start the tunnel.",t),{modal:!0},e.l10n.t("Pick a different account")),v=async t=>{await e.window.showErrorMessage(e.l10n.t("Tunnel {0} not found.",t),{modal:!0},e.l10n.t("Close Connection"))&&e.commands.executeCommand("workbench.action.closeRemoteConnection")};class y{constructor(e,t,n){this.remote=e,this.folder=t,this.name=n}static fromUri(e){if("untitled"===e.scheme)return;const t=a(e.authority);return t?new y(t,e.path):void 0}static listIncludes(e,t){for(const n of e)if(n.remote===t.remote&&n.folder===t.folder)return!0;return!1}toUri(){return e.Uri.parse(`vscode-remote:/${o(this.remote)}${this.folder}`)}}class b{constructor(e){this.extensionContext=e,this.STORAGE_KEY="remote-tunnels.folder-history",this.historyData=e.globalState.get(this.STORAGE_KEY)??{}}async openFolders(e){for(const t of e)void 0===this.historyData[t.remote]?this.historyData[t.remote]=[t]:y.listIncludes(this.historyData[t.remote],t)||this.historyData[t.remote].push(t);this.extensionContext.globalState.update(this.STORAGE_KEY,this.historyData)}async removeFolder(e){void 0!==this.historyData[e.remote]&&y.listIncludes(this.historyData[e.remote],e)&&(this.historyData[e.remote]=this.historyData[e.remote].filter((t=>t.folder!==e.folder)),this.extensionContext.globalState.update(this.STORAGE_KEY,this.historyData))}getFolders(e){return this.historyData[e]??[]}}var w=r(1017);const S=JSON.parse('{"u2":"remote-server","G8":"ms-vscode","i8":"1.5.1","lE":"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255"}');async function E(e,t){let n=[],r=0;return new Promise(((s,i)=>{n.push(t.onLog((t=>{3===t.level&&e.report({message:t.line}),t.line.includes("Downloading VS Code Server")&&e.report({increment:0,total:100});const n=t.line.match(/.*server download progress.* \(((\d+?)\%)\)/);if(n){const[,t]=n,s=parseInt(t);e.report({message:"Downloading VS Code Server...",increment:s-r,total:100}),r=s}t.line.includes("Setting up server")&&e.report({message:t.line,increment:void 0,total:void 0})}))),n.push(t.onConnected((()=>{s()}))),n.push(t.onClose((()=>{s()})))})).finally((()=>{n.forEach((e=>e.dispose()))}))}function _(){return{commit:e.env.appCommit||"b3e4e68a0bc097f0ae7907b217c1119af9e03435",quality:void 0===e.env.appQuality||"stable"===e.env.appQuality?"stable":"insider"}}class x{constructor(t){this.disposables=[],this.outputChannel=e.window.createOutputChannel(t,{log:!0}),this.disposables.push(this.outputChannel)}showLog(){return this.outputChannel.show()}clear(){this.outputChannel.clear()}log(e,t,...n){if(!(e<this.outputChannel.logLevel))switch(t=t.replace(/\x1b\[\??[0-9]{0,3}(;[0-9]{1,3})?[a-zA-Z]/g,"").replace(/\u0008/g,"").replace(/\r/g,""),e){case 1:return this.outputChannel.trace(t,...n);case 2:return this.outputChannel.debug(t,...n);case 3:return this.outputChannel.info(t,...n);case 4:return this.outputChannel.warn(t,...n);case 5:return this.outputChannel.error(t,...n);default:throw new Error(`Unknown log level: ${e}`)}}dispose(){this.outputChannel.dispose()}logLevelToString(e){switch(e){case 1:return"trace";case 2:return"debug";case 3:return"info";case 4:return"warn";case 5:return"error";default:return"unknown"}}}const T="https://aka.ms/vscode-dev-tunnel-limit",C=(t,n)=>{t instanceof x&&t.clear(),t.log(3,"=".repeat(15)+" Usage limits:"+"=".repeat(15)),0===n.length&&t.log(3,e.l10n.t("No limits are currently in place"));for(const e of n){const n=Math.round(100*(e.current||0)/(e.limit||1)),r=new Date(e.resetTime?1e3*e.resetTime:Date.now()).toLocaleString();t.log(3,`${e.name}: ${e.current} / ${e.limit} (${n}%), resets at ${r}`)}t.log(3,e.l10n.t("Learn more at {0}",T)),t.showLog()},P=e.l10n.t("A limit for this tunnel has been reached."),A={BandwidthPerUser:e.l10n.t("The bandwidth limit for this user has been reached.")},R=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"});class I{constructor(e,r){this.logger=e,this.auth=r,this._rpc=new t.DeferredPromise,this.tunnelProvider=this._rpc.p.then((({rpc:e})=>new n.TunnelProvider(e))),this.connectionManagers=new Map,this.rpc=this._rpc.p,this.tunnelFactory=async(e,t)=>{const n=await this.tunnelProvider;return await n.tunnelFactory(e,t)}}async getMatchingTunnel(t){if(t.includes(".")){const r=await e.commands.executeCommand("remote-tunnels.internal.getTunnelKeyFromHash");if(r){const[e,s]=t.split("."),i=new n.AccessTokenBasisClient("tunnel","vscode.dev.remote-server",(()=>Promise.resolve(r)));try{const t=await i.getTunnel({tunnelId:e,clusterId:s});if(t)return{tunnel:t,client:i,providerType:void 0}}catch{}}}const r=new Set(u);let s=await this.auth.getOrPickTunnelAssociation(t);for(;r.size>0;){if(void 0===s)throw new e.CancellationError;r.delete(s);const n=this.auth.getAccessProvider(s).basisClient,i=await n.getTunnelForTag(t);if(i)return{client:n,tunnel:i,providerType:s};if(!r.size||!await g(t))break;s=await this.auth.pickProvider([...r])}throw await v(t),e.RemoteAuthorityResolverError.NotAvailable(e.l10n.t("Tunnel not found"))}async getConnectionDataForAuthority(r){const s=this.connectionManagers.get(r);if(s)return s;if(2!==r.split("+").length)throw Error(e.l10n.t("Cannot resolve remote machine name!"));const i=r.split("+")[1];this.logger.log(3,`Resolving ${r}...`);const{client:o,tunnel:a,providerType:c}=await this.getMatchingTunnel(i);if(!a||void 0===a.ports||0===a.ports.length)throw e.RemoteAuthorityResolverError.NotAvailable(e.l10n.t("Tunnel does not seem to be running. Cannot find port listening on remote machine"));this.logger.log(3,`Found tunnel (ID=${a.tunnelId}, Cluster=${a.clusterId})`),this.auth.associateTunnel(i,a,c);const l={manager:new t.ConnectionManager({bearer:new n.BasisConnectionBearer(o,a,31545)}),tunnel:a,tunnelName:i};return this.connectionManagers.set(r,l),l}async warnAboutUsageLimits(e){const t=this.auth.getTunnelAssociation(e);if(!t)return void console.warn("unreachable error getting usage limits, please report");const n=await this.auth.getAccessProvider(t).basisClient.getManagementClient();return this.showAnyUsageLimitWarnings(await n.listUserLimits())}async showAnyUsageLimitWarnings(t){const n=t.find((e=>void 0!==e.limit&&e.current>=e.limit));if(!n)return;const r=e.l10n.t("Show Limits"),s=e.l10n.t("Learn More"),i=await e.window.showWarningMessage((({name:t,resetTime:n})=>{let r=t&&A[t]||P;if(n){const t=n-Date.now()/1e3,s=t>86400?R.format(t/3600,"hour"):R.format(t/86400,"day");r+=" "+e.l10n.t({message:"This limit will reset {0}.",args:[s],comment:'{0} is a localized string like "in 4 hours"'})}return r})(n),{modal:!0},r,s);i===s?e.env.openExternal(e.Uri.parse(T)):i===r&&C(this.logger,t)}async getConnectionManagerForAuthority(e){const{manager:t}=await this.getConnectionDataForAuthority(e);return t}async resolveExecServer(e){const{manager:n}=await this.getConnectionDataForAuthority(e),r=await n.bearer.checkedAcquire();return new t.ExecServer(r)}async resolve(r,s){this.logger.log(3,"Resolver invoked with authority",r);const{manager:i,tunnel:o,tunnelName:a}=await this.getConnectionDataForAuthority(r);this.warnAboutUsageLimits(o);const c=await(0,n.getConnectionToken)(o);return this._rpc.complete({rpc:i,name:a,tunnel:o}),e.commands.executeCommand("remote-tunnels.isConnectedToRemote",r,o,a),new e.ManagedResolvedAuthority((async()=>{const n=await i.bearer.checkedAcquire(),r=new t.ExecServer(n);0===I.nextSocketId&&e.window.withProgress({location:e.ProgressLocation.Notification,title:`Connecting to ${a}`},(e=>E(e,i)));const s=_(),o=await r.serve({extensions:[],quality:s.quality,commit:s.commit,socketId:I.nextSocketId++,connectionToken:c,compress:!0}),l=new e.EventEmitter,u=new e.EventEmitter;return o.onEnd.then((()=>l.fire())),n.onClose((e=>u.fire(e))),{send:e=>o.write(e),end:()=>o.end(),onDidEnd:l.event,onDidClose:u.event,onDidReceiveMessage:o.onDidReceiveMessage}}),c)}}I.nextSocketId=0;class k extends I{constructor(e,t,n){super(e,n),this.disposables=[],this.rpc=this._rpc.p,this.tunnelFactory=async(e,t)=>{const n=await this.tunnelProvider;return await n.tunnelFactory(e,t)},this.disposables=t.subscriptions}async createProxyConnection(n){const r=_(),s={tunnelName:n,httpProxy:e.workspace.getConfiguration("http").get("proxy")},i=await t.ProxyConnection.create({args:s,nonce:`v${S.i8} ${n}`,logger:this.logger,productInfo:r,serverPath:w.join(__dirname,"proxyServer.js"),setup:t=>{const n=new Set(u);t.registerRequestHandler("getaccesstoken",(async({tunnelName:t})=>{const r=await this.auth.getOrPickTunnelAssociation(t);if(!r)throw new e.CancellationError;return n.delete(r),{token:await this.auth.getAccessProvider(r).getAccessToken(),provider:r}})),t.registerRequestHandler("tunnelnotfound",(async({tunnelName:e})=>{if(n.size&&await g(e)){const e=await this.auth.pickProvider([...n]);if(e)return n.delete(e),{retryWith:{token:await this.auth.getAccessProvider(e).getAccessToken(),provider:e}}}return await v(e),{}})),t.registerRequestHandler("saveauthprovider",(async({provider:e,tunnel:t,tunnelName:n})=>(this.auth.associateTunnel(n,t,e),{})))}});return i.state!==t.ProxyConnection.State.Connected&&e.window.withProgress({location:e.ProgressLocation.Notification,title:`Connecting to ${s.tunnelName}`},(e=>E(e,i))),i}async warnAboutUsageLimitsOnProxy(e){return this.showAnyUsageLimitWarnings(await e.callOnProxy("getlimits",{}))}async resolve(t){if(2!==t.split("+").length)throw Error(e.l10n.t("Cannot resolve remote machine name!"));const r=t.split("+")[1];this.logger.log(3,`Resolving ${t}...`);const s=await this.createProxyConnection(r);this.disposables.push(s),s.onClose((e=>{console.error("Tunnel connection closed",e)}));const i=await s.localPort,o=await s.callOnProxy("gettunnel",{});if(void 0===o.value.ports||0===o.value.ports.length)throw e.RemoteAuthorityResolverError.NotAvailable(e.l10n.t("Tunnel does not seem to be running. Cannot find port listening on remote machine"));return this.warnAboutUsageLimitsOnProxy(s),s.onConnected((()=>{e.commands.executeCommand("remote-tunnels.isConnectedToRemote",t,o.value,r)})),this._rpc.complete({rpc:s,name:r,tunnel:o.value}),this.logger.log(3,"Remote resolution completed"),new e.ResolvedAuthority("127.0.0.1",i,await(0,n.getConnectionToken)(o.value))}}var O=r(3795),M=r(1034),D=r.n(M);class N{constructor(e){this.reporter=function(e){const t=new(D())(`${S.G8}.${S.u2}`,S.i8,S.lE);return e.subscriptions.push(t),t}(e)}connectionRequest(e,t){this.reporter.sendTelemetryEvent("connectionRequest",{isWeb:`${t}`,method:e})}connected(e){this.reporter.sendTelemetryEvent("connected",{isWeb:`${e}`})}getTelemetryLevel(){return this.reporter.telemetryLevel}}const L="tunnel",j="path";let q;async function B(r){console.log("Initializing tunnel extension");const s=new x("Remote - Tunnels"),i=new N(r),o=new m(r);r.subscriptions.push(function(t){return e.window.registerUriHandler({async handleUri(n){try{if("/open"===n.path){const r=new URLSearchParams(n.query),s=r.get(L),i=r.get(j);if(s&&i){const t=`vscode-remote://tunnel+${s}${i}`;e.commands.executeCommand("vscode.openFolder",e.Uri.parse(t),{forceNewWindow:!0})}else t.log(5,`Problems handling URI open: missing tunnel or path: ${n.toString(!0)}}`);return}t.log(5,`Unhandled URI: ${n.toString(!0)}`)}catch(e){t.log(5,`Problems handling URI: ${n.toString(!0)}`,e)}}})}(s));const c=new b(r);!function(t){const n=e.workspace.workspaceFolders;if(n){const r=[];for(const e of n){const t=a(e.uri.authority);t&&r.push(new y(t,e.uri.path,e.name))}r.length>0&&e.commands.executeCommand("remote-internal.setActiveFolders",r),t.openFolders(r)}}(c);const l=new k(s,r,o);r.subscriptions.push(e.workspace.registerRemoteAuthorityResolver("tunnel",l));const u=l.rpc,p=new d({context:r,scope:"global",key:"tunnelHostnames",defaultValue:{}});return r.subscriptions.push(e.commands.registerCommand("remote-tunnels.isConnectedToRemote",(async(s,o,a,c)=>{c&&i.connectionRequest("embedder",!1),i.connected(!1);const l=new n.TunnelTags(o.labels);new t.RemoteVersion("",l.protocolVersion).shouldWarnOutdated()&&async function(){const t=e.l10n.t("Upgrade");await e.window.showWarningMessage(e.l10n.t("Your tunnel connection is outdated, please upgrade to the latest version to continue using tunnels."),{modal:!0},t)===t&&e.env.openExternal(e.Uri.parse("https://code.visualstudio.com/docs/remote/tunnels#_getting-started"))}(),function(t,n,s){r.subscriptions.push(e.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t,formatting:{label:"${path}",separator:s.is(2)?"\\":"/",workspaceSuffix:n,tildify:!0,normalizeDriveLetter:!0}}))}(s,a,l),o.tunnelId&&async function(e){const t=p.read();if(!t.hasOwnProperty(e)){const{rpc:n}=await u;try{const{value:r}=await n.call("gethostname",{});p.write({...t,[e]:{hostname:r}})}catch(e){console.warn("Error getting hostname",e)}}}(o.tunnelId),setTimeout((async()=>async function(t){try{const{up_to_date:e}=await t.call("update",{do_update:!1});if(e)return}catch{return}const n=async()=>{await e.window.withProgress({location:e.ProgressLocation.Notification,title:e.l10n.t("Updating the VS Code CLI"),cancellable:!1},(()=>t.call("update",{do_update:!0}))),e.window.showInformationMessage(e.l10n.t("VS Code CLI update complete."))};if(e.workspace.getConfiguration().get("remote.tunnel.alwaysUpdateCLI"))return void await n();const r=e.l10n.t("Always update"),s=e.l10n.t("Update"),i=await e.window.showInformationMessage(e.l10n.t("An update for the VS Code CLI on your remote server is available. Would you like to update now? Your current session won't be interrupted"),r,s,e.l10n.t("Not Now"));i===r&&e.workspace.getConfiguration().update("remote.tunnel.alwaysUpdateCLI",!0,e.ConfigurationTarget.Global),i!==s&&i!==r||await n()}((await u).rpc)),3e3),q=o})),e.commands.registerCommand("remote-tunnels.getStarted",(function(){e.commands.executeCommand("vscode.open","https://aka.ms/remote-tunnels-doc")})),e.commands.registerCommand("remote-tunnels.reportIssue",(()=>e.commands.executeCommand("vscode.openIssueReporter",r.extension.id))),e.commands.registerCommand("remote-tunnels.settings",(()=>e.commands.executeCommand("workbench.action.openSettings",`@ext:${r.extension.id}`))),e.commands.registerCommand("remote-tunnels.connectCurrentWindowToTunnel",(async()=>{U(o,i,p,!1)})),e.commands.registerCommand("remote-tunnels.connectNewWindowToTunnel",(async()=>{U(o,i,p,!0)})),e.commands.registerCommand("remote-tunnels.openOnDesktop",(async()=>await async function(e){}(r.extension.id))),e.commands.registerCommand("remote-tunnels.showUsageLimits",(()=>e.window.withProgress({location:e.ProgressLocation.Notification,title:e.l10n.t("Checking usage limits...")},(async()=>{const e=await o.pickProvider();if(!e)return;const t=await o.getAccessProvider(e).basisClient.getManagementClient();C(s,await t.listUserLimits())})))),e.commands.registerCommand("remote-tunnels.internal.unregisterTunnel",(async e=>{const t=await o.getOrPickTunnelAssociation(e);if(!t)return;const n=await o.getAccessProvider(t).basisClient.getManagementClient();return await n.deleteTunnel(e)})),e.commands.registerCommand("remote-tunnels.internal.getTunnelsList",(async e=>{const t="microsoft"===e?"microsoft":"github",r=await o.getAccessProvider(t).basisClient.getManagementClient(),s=await r.listTunnels(void 0,void 0,{labels:["vscode-server-launcher"],requireAllLabels:!0,includePorts:!0});for(const e of s){const r=new n.TunnelTags(e.labels).name;r&&o.associateTunnel(r,e,t)}return s.map(n.fixTunnelTags)})),e.commands.registerCommand("remote-tunnels.internal.getActiveRemote",(()=>q)),e.commands.registerCommand("remote-tunnels.internal.isAuthenticated",(e=>o.getAccessProvider("microsoft"===e?"microsoft":"github").isAuthenticated())),e.commands.registerCommand("remote-tunnels.internal.getFoldersHistory",(e=>c.getFolders(e))),e.commands.registerCommand("remote-tunnels.internal.deleteFolderFromHistory",(async e=>await c.removeFolder(e))),e.commands.registerCommand("remote-tunnels.internal.connectToRemote",(async(e,t)=>(i.connectionRequest("explorer",!1),await $(e,t)))),e.commands.registerCommand("remote-tunnels.signIntoTunnelWithDifferentAccount",(async()=>{const{tunnel:t,name:n}=await u;o.associateTunnel(n,t,void 0),e.commands.executeCommand("workbench.action.reloadWindow")}))),{getConnectionManagerForAuthority:e=>l.getConnectionManagerForAuthority(e),getExecServerForAuthority:async e=>{const n=await l.getConnectionManagerForAuthority(e),r=await n.bearer.checkedAcquire();return new t.ExecServer(r)}}}function F(){}async function U(t,r,s,i=!0){const o=await t.pickProvider();if(!o)return;const a=t.getAccessProvider(o),c=e.window.createQuickPick();let u;c.onDidAccept((async()=>{const s=c.activeItems[0];if(c.dispose(),!s)return;if(s.openHelp)return void e.commands.executeCommand("vscode.open","https://aka.ms/vscode-server-doc");const a=s.tunnel,l=new n.TunnelTags(a.labels).name??a.name??a.tunnelId;r.connectionRequest("quickPick",!1),t.associateTunnel(l,a,o),$(l,i)})),c.ignoreFocusOut=!0,c.busy=!0,c.show();try{u=await a.testSession((async t=>{const r=new n.AccessTokenBasisClient(o,l,(async()=>t.accessToken),(()=>{const t=e.workspace.getConfiguration("http").get("proxy");return t?new O.HttpsProxyAgent(t):void 0})());return(await r.getManagementClient()).listTunnels(void 0,void 0,{labels:["vscode-server-launcher"],requireAllLabels:!0,includePorts:!0})}))}catch(t){return c.dispose(),void e.window.showErrorMessage(e.l10n.t("{0}. You may need to sign out and back in.",String(t)))}const p=[],h=[],d=s.read();for(const e of u){const t=e,r=new n.TunnelTags(t.labels).name;if(void 0===r)continue;const s={tunnel:t,label:r,description:d.hasOwnProperty(t.tunnelId)?d[t.tunnelId].hostname:void 0};t.status.hostConnectionCount?p.push(s):h.push(s)}const f=[];p.length&&f.push({label:e.l10n.t("Online"),kind:e.QuickPickItemKind.Separator},...p),h.length&&f.push({label:e.l10n.t("Offline"),kind:e.QuickPickItemKind.Separator},...h),f.push({label:"",kind:e.QuickPickItemKind.Separator}),f.push({label:h.length||p.length?e.l10n.t("Learn More"):e.l10n.t("Create a Tunnel"),description:e.l10n.t("View documentation for setting up remote server"),openHelp:!0}),0===f.length&&(c.placeholder=e.l10n.t("No tunnels found")),c.items=f,c.busy=!1}async function $(t,n){await e.commands.executeCommand("vscode.newWindow",{remoteAuthority:o(t),reuseWindow:!n})}})();var i=exports;for(var o in s)i[o]=s[o];s.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();