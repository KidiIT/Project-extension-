/*! For license information please see proxyServer.js.LICENSE.txt */
(()=>{var e,t={3329:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionStatus=void 0,(n=t.ConnectionStatus||(t.ConnectionStatus={})).None="none",n.Connecting="connecting",n.RefreshingTunnelAccessToken="refreshingTunnelAccessToken",n.Connected="connected",n.Disconnected="disconnected",n.RefreshingTunnelHostPublicKey="refreshingTunnelHostPublicKey"},1480:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionStatusChangedEventArgs=void 0,t.ConnectionStatusChangedEventArgs=class{constructor(e,t,n){this.previousStatus=e,this.status=t,this.disconnectError=n}}},6589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTunnelRelayStreamFactory=void 0;const s=n(9696);t.DefaultTunnelRelayStreamFactory=class{async createRelayStream(e,t,n,i){if((0,s.isNode)()){const r=await s.SshHelpers.openConnection(e,t,Object.assign({},n&&{Authorization:`tunnel ${n}`}),i);return{stream:r,protocol:r.protocol}}{n&&(t=[...t,n]);const i=await s.SshHelpers.openConnection(e,t);return{stream:i,protocol:i.protocol}}}}},1139:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.maxReconnectDelayMs=void 0,i(n(4736),t),i(n(1194),t),i(n(9470),t),i(n(2616),t),i(n(7449),t),i(n(3226),t),i(n(9696),t),i(n(4736),t),i(n(1194),t),i(n(1306),t),i(n(6589),t),i(n(3559),t),i(n(82),t),i(n(5368),t),i(n(4513),t),i(n(3329),t),i(n(1480),t);var r=n(3831);Object.defineProperty(t,"maxReconnectDelayMs",{enumerable:!0,get:function(){return r.maxReconnectDelayMs}}),i(n(7455),t),i(n(2008),t),i(n(7511),t),i(n(5485),t),i(n(3390),t)},2040:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortRelayConnectRequestMessage=void 0;const s=n(9361);class i extends s.PortForwardChannelOpenMessage{constructor(){super(...arguments),this.isE2EEncryptionRequested=!1}onWrite(e){var t;super.onWrite(e),e.writeString(null!==(t=this.accessToken)&&void 0!==t?t:"","utf8"),e.writeBoolean(this.isE2EEncryptionRequested)}onRead(e){super.onRead(e),this.accessToken=e.readString("utf8"),this.isE2EEncryptionRequested=e.readBoolean()}}t.PortRelayConnectRequestMessage=i},7752:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortRelayConnectResponseMessage=void 0;const s=n(2727);class i extends s.ChannelOpenConfirmationMessage{constructor(){super(...arguments),this.isE2EEncryptionEnabled=!1}onWrite(e){super.onWrite(e),e.writeBoolean(this.isE2EEncryptionEnabled)}onRead(e){super.onRead(e),this.isE2EEncryptionEnabled=e.readBoolean()}}t.PortRelayConnectResponseMessage=i},7012:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortRelayRequestMessage=void 0;const s=n(9361);class i extends s.PortForwardRequestMessage{onWrite(e){if(super.onWrite(e),!this.accessToken)throw new Error("An access token is required.");e.writeString(this.accessToken,"utf8")}onRead(e){super.onRead(e),this.accessToken=e.readString("utf8")}}t.PortRelayRequestMessage=i},9470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiModeTunnelClient=void 0;const s=n(3399),i=n(4513);class r extends i.TunnelConnectionBase{constructor(){super(s.TunnelAccessScopes.Connect),this.clients=[],this.connectionModes=this.clients?[...new Set(...this.clients.map((e=>e.connectionModes)))]:[]}get acceptLocalConnectionsForForwardedPorts(){return!!this.clients.find((e=>e.acceptLocalConnectionsForForwardedPorts))}set acceptLocalConnectionsForForwardedPorts(e){this.clients.forEach((t=>t.acceptLocalConnectionsForForwardedPorts=e))}get localForwardingHostAddress(){var e;return null===(e=this.clients[0])||void 0===e?void 0:e.localForwardingHostAddress}set localForwardingHostAddress(e){this.clients.forEach((t=>t.localForwardingHostAddress=e))}connect(e,t,n){if(!e)throw new Error("Tunnel cannot be null");return new Promise((e=>{}))}get portForwarding(){throw new Error("Not supported.")}connectToForwardedPort(e,t){throw new Error("Method not implemented.")}waitForForwardedPort(e,t){throw new Error("Method not implemented.")}async refreshPorts(){throw new Error("Method not implemented.")}async dispose(){await super.dispose(),await Promise.all(this.clients.map((e=>e.dispose())))}}t.MultiModeTunnelClient=r},2616:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiModeTunnelHost=void 0;const s=n(3399),i=n(1328),r=n(4513);class o extends r.TunnelConnectionBase{constructor(){super(s.TunnelAccessScopes.Host),this.hosts=[]}async start(e){await this.connect(e)}async connect(e,t,n){const s=[];this.hosts.forEach((i=>{s.push(i.connect(e,t,n))})),await Promise.all(s)}async refreshPorts(){const e=[];this.hosts.forEach((t=>{e.push(t.refreshPorts())})),await Promise.all(e)}async dispose(){await Promise.all(this.hosts.map((e=>e.dispose()))),await super.dispose()}}t.MultiModeTunnelHost=o,o.hostId=(0,i.v4)()},5485:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortForwardingEventArgs=void 0,t.PortForwardingEventArgs=class{constructor(e){this.portNumber=e,this.cancel=!1}}},7455:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshingTunnelAccessTokenEventArgs=void 0,t.RefreshingTunnelAccessTokenEventArgs=class{constructor(e,t){this.tunnelAccessScope=e,this.cancellation=t}}},2008:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshingTunnelEventArgs=void 0,t.RefreshingTunnelEventArgs=class{constructor(e,t,n,s,i){this.tunnelAccessScope=e,this.tunnel=t,this.includePorts=n,this.managementClient=s,this.cancellation=i}}},3831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayTunnelConnector=t.maxReconnectDelayMs=void 0;const s=n(2727),i=n(4327),r=n(9696),o=n(7511);t.maxReconnectDelayMs=13e3,t.RelayTunnelConnector=class{constructor(e){this.tunnelSession=e}get trace(){return this.tunnelSession.trace}async connectSession(e,n,c){var l,u;let h,p;function d(e){if(e instanceof s.CancellationError&&(null==c?void 0:c.isCancellationRequested)||e instanceof s.ObjectDisposedError)throw p=void 0,h=s.SshDisconnectReason.byApplication,e}function f(e){throw p?p.message=e:p=new Error(e),p}let m,g=0,v=100,y=!1,b=!0;this.tunnelSession.startConnecting();try{for(let w=0;;w++){if(null==c?void 0:c.isCancellationRequested)throw new s.CancellationError;if(w>0){if(p){if(null!==(l=null==n?void 0:n.enableRetry)&&void 0!==l&&!l)throw p;const e=new o.RetryingTunnelConnectionEventArgs(p,v);if(this.tunnelSession.onRetrying(e),!e.retry)throw p;e.delayMs>=100?v=e.delayMs:b=!1}const e=b?" in "+(v<1e3?`0.${v/100}s`:v/1e3+"s"):"";if(this.trace(s.TraceLevel.Verbose,0,`Error connecting to tunnel SSH session, retrying${e}${m?`: ${m}`:""}`),b){try{await(0,i.delay)(v,c)}catch(e){throw d(e),e}v<t.maxReconnectDelayMs&&(v<<=1)}}let S;b=!0,m=void 0,h=s.SshDisconnectReason.connectionLost,p=void 0;try{const t=await this.tunnelSession.createSessionStream(n,c);return S=t.stream,await this.tunnelSession.configureSession(S,t.protocol,e,c),S=void 0,void(h=void 0)}catch(n){if(n instanceof Error||f(`Failed to connect to the tunnel service and start tunnel SSH session: ${n}`),d(n),p=n,m=p.message,n instanceof r.BrowserWebSocketRelayError){if(g++>=5)throw n;continue}if(n instanceof s.SshReconnectError){h=s.SshDisconnectReason.protocolError,b=!1,e=!1;continue}if(n instanceof s.SshConnectionError){const e=n.reason;if(e===s.SshDisconnectReason.connectionLost)continue;h=e||s.SshDisconnectReason.byApplication,f(`Failed to start tunnel SSH session: ${m}`)}if(n instanceof r.RelayConnectionError){const e=null===(u=n.errorContext)||void 0===u?void 0:u.statusCode,r=e?` (${e})`:"";switch(m){case"error.relayClientUnauthorized":{const e="Not authorized"+r;h=s.SshDisconnectReason.authCancelledByUser,y&&f(`${e}. Refreshed tunnel access token also does not work.`);try{y=await this.tunnelSession.refreshTunnelAccessToken(c)}catch(t){d(t),f(`${e}. Refreshing tunnel access token failed with error ${(0,i.getErrorMessage)(t)}`)}y||f(`${e}. Provide a fresh tunnel access token with '${this.tunnelSession.tunnelAccessScope}' scope.`),b=!1,m="The tunnel access token was no longer valid and had just been refreshed.";continue}case"error.relayClientForbidden":h=s.SshDisconnectReason.authCancelledByUser,f(`Forbidden${r}. Provide a fresh tunnel access token with '${this.tunnelSession.tunnelAccessScope}' scope.`);break;case"error.tunnelPortNotFound":f(`The tunnel or port is not found${r}`);break;case"error.badGateway":case"error.serviceUnavailable":case"error.tooManyRequests":m="error.tooManyRequests"===m?`Rate limit exceeded${r}. Too many requests in a given amount of time.`:`Service temporarily unavailable${r}`,h=s.SshDisconnectReason.serviceNotAvailable,w>3&&f(m),v<t.maxReconnectDelayMs/2&&(v=t.maxReconnectDelayMs/2);continue;default:if(null==m?void 0:m.startsWith("error.relayConnectionError ")){const e=a.find((e=>m.includes(e)));if(e){m=`Failed to connect to Relay server: ${e}`;continue}}}}throw n}finally{p&&h&&!p.reason&&(p.reason=h),h&&await this.tunnelSession.closeSession(h,p),S&&await S.close(p)}}}finally{this.tunnelSession.finishConnecting(h,p)}}};const a=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN","EBUSY"]},7449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryTcpListenerFactory=void 0;const s=n(1808);t.RetryTcpListenerFactory=class{constructor(e){this.localAddress=e}async createTcpListener(e,t,n,i){e.indexOf(":")>=0?"0.0.0.0"===this.localAddress?e="::":"127.0.0.1"===this.localAddress&&(e="::1"):e=this.localAddress;const r=s.createServer();for(let n=0;;n++){const i=10===n?0:t+n;try{return await new Promise(((t,n)=>{r.listen({host:e,port:i,ipv6Only:s.isIPv6(e)}),r.on("listening",(()=>{t(r)})),r.on("error",(e=>{n(e)}))}))}catch(e){console.log("Listening on port "+i+" failed: "+e),console.log("Incrementing port and trying again");continue}}}}},7511:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingTunnelConnectionEventArgs=void 0,t.RetryingTunnelConnectionEventArgs=class{constructor(e,t){this.error=e,this.delayMs=t,this.retry=!0}}},3226:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionPortKey=void 0,t.SessionPortKey=class{constructor(e,t){this.sessionId=null!=e?e:null,this.port=t}equals(e){return this.port===e.port&&(!this.sessionId&&!e.sessionId||this.sessionId&&e.sessionId&&this.sessionId===e.sessionId)}toString(){return this.port+(this.sessionId?"_"+this.sessionId.toString("base64"):"")}}},9696:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayConnectionError=t.RelayErrorType=t.isNode=t.SshHelpers=t.BrowserWebSocketRelayError=void 0;const s=n(2727),i=n(8766);class r extends Error{constructor(e){super(e)}}t.BrowserWebSocketRelayError=r;class o{static openConnection(e,n,s,i){return(0,t.isNode)()?o.nodeSshStreamFactory(e,n,s,i):o.webSshStreamFactory(new WebSocket(e,n))}static createSshClientSession(e){return o.createSshSession((t=>(e&&e(t),new s.SshClientSession(t))))}static createSshServerSession(e,t){return o.createSshSession((n=>(t&&t(n),new s.SshServerSession(n,e))))}static createWebSocketStreamAdapter(e){return new s.WebSocketStream(new a(e))}static webSshStreamFactory(e){return e.binaryType="arraybuffer",new Promise(((t,n)=>{e.onopen=()=>{t(new s.WebSocketStream(e))},e.onerror=e=>{n(new r("Failed to connect to relay url"))}}))}static createSshSession(e){const t=new s.SshSessionConfiguration;return t.keyExchangeAlgorithms.splice(0),t.keyExchangeAlgorithms.push(s.SshAlgorithms.keyExchange.ecdhNistp384Sha384),t.keyExchangeAlgorithms.push(s.SshAlgorithms.keyExchange.ecdhNistp256Sha256),t.keyExchangeAlgorithms.push(s.SshAlgorithms.keyExchange.dhGroup14Sha256),e(t)}static nodeSshStreamFactory(e,t,n,r){const o=new i.client(r);return new Promise(((i,r)=>{o.on("connect",(e=>{i(new s.WebSocketStream(new a(e)))})),o.on("httpResponse",(({statusCode:e,statusMessage:t})=>{var n;const s=null!==(n=u.find((t=>t.statusCode===e)))&&void 0!==n?n:{statusCode:e,errorType:c.ServerError,error:`relayConnectionError Server responded with a non-101 status: ${e} ${t}`};r(new l(`error.${s.error}`,s))})),o.on("connectFailed",(({message:e})=>{var t;e&&e.startsWith("Error: ")&&(e=e.substr(7));const n=null!==(t=u.find((t=>t.regex&&t.regex.test(e))))&&void 0!==t?t:{errorType:c.ServerError,error:`relayConnectionError ${e}`};r(new l(`error.${n.error}`,n))})),o.connect(e,t,void 0,n)}))}}t.SshHelpers=o;class a{constructor(e){this.connection=e}get protocol(){return this.connection.protocol}set onmessage(e){e&&this.connection.on("message",(t=>{e({data:t.binaryData})}))}set onclose(e){e&&this.connection.on("close",((t,n)=>{e({code:t,reason:n,wasClean:!(t||n)})}))}send(e){Buffer.isBuffer(e)?this.connection.sendBytes(e):this.connection.sendBytes(Buffer.from(e))}close(e,t){e||t?this.connection.drop(e,t):this.connection.close()}}var c;t.isNode=()=>"undefined"!=typeof process&&void 0!==process.release&&"node"===process.release.name,function(e){e[e.ConnectionError=1]="ConnectionError",e[e.Unauthorized=2]="Unauthorized",e[e.EndpointNotFound=3]="EndpointNotFound",e[e.ListenerOffline=4]="ListenerOffline",e[e.ServerError=5]="ServerError",e[e.TunnelPortNotFound=6]="TunnelPortNotFound",e[e.TooManyRequests=7]="TooManyRequests",e[e.ServiceUnavailable=8]="ServiceUnavailable",e[e.BadGateway=9]="BadGateway"}(c=t.RelayErrorType||(t.RelayErrorType={}));class l extends Error{constructor(e,t){super(e),this.errorContext=t}}t.RelayConnectionError=l;const u=[{regex:/status: 401/,statusCode:401,error:"relayClientUnauthorized",errorType:c.Unauthorized},{regex:/status: 403/,statusCode:403,error:"relayClientForbidden",errorType:c.Unauthorized},{regex:/status: 404/,statusCode:404,error:"tunnelPortNotFound",errorType:c.TunnelPortNotFound},{regex:/status: 429/,statusCode:429,error:"tooManyRequests",errorType:c.TooManyRequests},{regex:/status: 500/,statusCode:500,error:"relayServerError",errorType:c.ServerError},{regex:/status: 502/,statusCode:502,error:"badGateway",errorType:c.BadGateway},{regex:/status: 503/,statusCode:503,error:"serviceUnavailable",errorType:c.ServiceUnavailable}]},4736:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5368:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4513:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelConnectionBase=void 0;const s=n(2727),i=n(5844),r=n(3329),o=n(1480),a=n(7455),c=n(5927),l=n(4327);t.TunnelConnectionBase=class{constructor(e){this.tunnelAccessScope=e,this.disposeCts=new i.CancellationTokenSource,this.status=r.ConnectionStatus.None,this.refreshingTunnelAccessTokenEmitter=new l.TrackingEmitter,this.connectionStatusChangedEmitter=new i.Emitter,this.retryingTunnelConnectionEmitter=new i.Emitter,this.forwardedPortConnectingEmitter=new i.Emitter,this.refreshingTunnelAccessToken=this.refreshingTunnelAccessTokenEmitter.event,this.connectionStatusChanged=this.connectionStatusChangedEmitter.event,this.retryingTunnelConnection=this.retryingTunnelConnectionEmitter.event,this.forwardedPortConnecting=this.forwardedPortConnectingEmitter.event}get isDisposed(){return this.disposeCts.token.isCancellationRequested}get isRefreshingTunnelAccessTokenEventHandled(){return this.refreshingTunnelAccessTokenEmitter.isSubscribed}get disposeToken(){return this.disposeCts.token}get connectionStatus(){return this.status}set connectionStatus(e){if(this.isDisposed&&e!==r.ConnectionStatus.Disconnected&&this.throwIfDisposed(),e===r.ConnectionStatus.RefreshingTunnelAccessToken&&this.status!==r.ConnectionStatus.Connecting)throw new Error("Refreshing tunnel access token is allowed only when connecting.");if(e!==this.status){const t=this.connectionStatus;this.status=e,this.onConnectionStatusChanged(t,e)}}get disconnectError(){return this.error}set disconnectError(e){this.error=e}onForwardedPortConnecting(e){this.forwardedPortConnectingEmitter.fire(e)}dispose(){return this.disposeCts.cancel(),this.connectionStatus=r.ConnectionStatus.Disconnected,Promise.resolve()}onRetrying(e){this.retryingTunnelConnectionEmitter.fire(e)}async getFreshTunnelAccessToken(e){const t=new a.RefreshingTunnelAccessTokenEventArgs(this.tunnelAccessScope,e);this.refreshingTunnelAccessTokenEmitter.fire(t);const n=t.tunnelAccessToken?await t.tunnelAccessToken:void 0;return n&&c.TunnelAccessTokenProperties.validateTokenExpiration(n),n}onConnectionStatusChanged(e,t){const n=this.connectionStatus!==r.ConnectionStatus.Disconnected||this.isDisposed?void 0:this.disconnectError,s=new o.ConnectionStatusChangedEventArgs(e,t,n);this.connectionStatusChangedEmitter.fire(s)}throwIfDisposed(){if(this.isDisposed)throw new s.ObjectDisposedError("The tunnel connection is disposed.")}}},4966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelConnectionSession=void 0;const s=n(3399),i=n(5927),r=n(2727),o=n(5844),a=n(3329),c=n(3831),l=n(4327),u=n(4513),h=n(9361),p=n(7012),d=n(2040),f=n(2008),m=n(6589);class g extends u.TunnelConnectionBase{get connectionProtocol(){return this.connectionProtocolValue}set connectionProtocol(e){this.connectionProtocolValue=e}get isClientConnection(){return this.tunnelAccessScope===s.TunnelAccessScopes.Connect}get connectionRole(){return this.isClientConnection?"client":"host"}constructor(e,t,n,s){super(e),this.connectionProtocols=t,this.managementClient=s,this.connectedTunnel=null,this.refreshingTunnelEmitter=new l.TrackingEmitter,this.reportProgressEmitter=new o.Emitter,this.onReportProgress=this.reportProgressEmitter.event,this.streamFactory=new m.DefaultTunnelRelayStreamFactory,this.sshSessionDisposables=[],this.refreshingTunnel=this.refreshingTunnelEmitter.event,this.enableE2EEncryption=!0,this.trace=null!=n?n:()=>{},this.httpAgent=null==s?void 0:s.httpsAgent}raiseReportProgress(e,t){const n=new r.SshReportProgressEventArgs(e,t);this.reportProgressEmitter.fire(n)}get tunnel(){return this.connectedTunnel}set tunnel(e){e!==this.connectedTunnel&&(this.connectedTunnel=e,this.tunnelChanged())}tunnelChanged(){this.tunnel?this.accessToken=i.TunnelAccessTokenProperties.getTunnelAccessToken(this.tunnel,this.tunnelAccessScope):this.accessToken=void 0}get isReconnectable(){return!!this.connector}get disconnectReason(){return this.disconnectionReason}set disconnectReason(e){this.disconnectionReason=e}async createSessionStream(e,t){if(!this.relayUri)throw new Error("Cannot create tunnel session stream. Tunnel relay endpoint URI is missing");this.isClientConnection?this.raiseReportProgress(r.Progress.OpeningClientConnectionToRelay):this.raiseReportProgress(r.Progress.OpeningHostConnectionToRelay);const n=this.validateAccessToken();if(this.trace(r.TraceLevel.Info,0,`Connecting to ${this.connectionRole} tunnel relay ${this.relayUri}`),this.trace(r.TraceLevel.Verbose,0,`Sec-WebSocket-Protocol: ${this.connectionProtocols.join(", ")}`),n){const e=i.TunnelAccessTokenProperties.getTokenTrace(n);this.trace(r.TraceLevel.Verbose,0,`Authorization: tunnel <${e}>`)}const s={tlsOptions:{agent:this.httpAgent}},o=await this.streamFactory.createRelayStream(this.relayUri,this.connectionProtocols,n,s);return this.trace(r.TraceLevel.Verbose,0,`Connected with subprotocol '${o.protocol}'`),this.isClientConnection?this.raiseReportProgress(r.Progress.OpenedClientConnectionToRelay):this.raiseReportProgress(r.Progress.OpenedHostConnectionToRelay),o}configureSession(e,t,n,s){throw new Error("Not implemented")}async closeSession(e,t){this.unsubscribeSessionEvents();const n=this.sshSession;n&&(n.isClosed?this.sshSession=void 0:await n.close(e||r.SshDisconnectReason.none,void 0,t),n.dispose())}async dispose(){this.disconnectReason!==r.SshDisconnectReason.none&&void 0!==this.disconnectReason||(this.disconnectReason=r.SshDisconnectReason.byApplication),await super.dispose();try{await this.closeSession(this.disconnectReason,this.disconnectError)}catch(e){if(!(e instanceof r.ObjectDisposedError))throw e}}async refreshTunnelAccessToken(e){var t;if(this.isDisposed)return!1;if(!this.isRefreshingTunnelAccessTokenEventHandled&&!this.canRefreshTunnel)return!1;this.connectionStatus=a.ConnectionStatus.RefreshingTunnelAccessToken;try{return this.traceVerbose(`Refreshing tunnel access token. Current token: ${i.TunnelAccessTokenProperties.getTokenTrace(this.accessToken)}`),this.isRefreshingTunnelAccessTokenEventHandled?this.accessToken=null!==(t=await this.getFreshTunnelAccessToken(e))&&void 0!==t?t:void 0:await this.refreshTunnel(!1,e),this.accessToken&&i.TunnelAccessTokenProperties.validateTokenExpiration(this.accessToken),this.traceVerbose(`Refreshed tunnel access token. New token: ${i.TunnelAccessTokenProperties.getTokenTrace(this.accessToken)}`),!0}finally{this.connectionStatus=a.ConnectionStatus.Connecting}}startConnecting(){this.connectionStatus=a.ConnectionStatus.Connecting}finishConnecting(e,t){void 0===e||e===r.SshDisconnectReason.none?(this.connectionStatus===a.ConnectionStatus.Connecting&&(this.disconnectError=void 0,this.disconnectReason=void 0),this.connectionStatus=a.ConnectionStatus.Connected):this.connectionStatus!==a.ConnectionStatus.Disconnected&&(this.disconnectReason=e,t&&(this.disconnectError=t),this.connectionStatus=a.ConnectionStatus.Disconnected)}get canRefreshTunnel(){return this.tunnel&&this.managementClient||this.refreshingTunnelEmitter.isSubscribed}async refreshTunnel(e,t){this.traceInfo("Refreshing tunnel.");let n=!1;const s=new f.RefreshingTunnelEventArgs(this.tunnelAccessScope,this.tunnel,!!e,this.managementClient,t);if(this.refreshingTunnelEmitter.fire(s),s.tunnelPromise&&(this.tunnel=await s.tunnelPromise,n=!0),!n&&this.tunnel&&this.managementClient){const s={tokenScopes:[this.tunnelAccessScope],includePorts:e};this.tunnel=await(0,l.withCancellation)(this.managementClient.getTunnel(this.tunnel,s),t),n=!0}return n&&(this.tunnel?this.traceInfo("Refreshed tunnel."):this.traceInfo("Tunnel not found.")),!0}createTunnelConnector(){return new c.RelayTunnelConnector(this)}traceInfo(e){this.trace(r.TraceLevel.Info,0,e)}traceVerbose(e){this.trace(r.TraceLevel.Verbose,0,e)}traceWarning(e,t){this.trace(r.TraceLevel.Warning,0,e,t)}traceError(e,t){this.trace(r.TraceLevel.Error,0,e,t)}onSshSessionClosed(e){this.unsubscribeSessionEvents(),this.sshSession=void 0,this.maybeStartReconnecting(e.reason,e.message,e.error)}maybeStartReconnecting(e,t,n){var s,i;const o=`Connection to ${this.connectionRole} tunnel relay closed.${this.getDisconnectReason(e,t,n)}`;this.isDisposed||this.connectionStatus===a.ConnectionStatus.Disconnected?this.traceInfo(o):(n&&(this.disconnectError=n,this.disconnectReason=e),this.connectionStatus!==a.ConnectionStatus.Connected||this.reconnectPromise?this.traceInfo(o):(null===(i=null===(s=this.connectionOptions)||void 0===s?void 0:s.enableReconnect)||void 0===i||i)&&e===r.SshDisconnectReason.connectionLost&&this.connector?(this.traceInfo(`${o} Reconnecting.`),this.reconnectPromise=(async()=>{try{await this.connectTunnelSession()}catch(e){}this.reconnectPromise=void 0})()):(this.traceInfo(o),this.connectionStatus=a.ConnectionStatus.Disconnected))}getDisconnectReason(e,t,n){switch(e){case r.SshDisconnectReason.connectionLost:return` ${t||(null==n?void 0:n.message)||"Connection lost."}`;case r.SshDisconnectReason.authCancelledByUser:case r.SshDisconnectReason.noMoreAuthMethodsAvailable:case r.SshDisconnectReason.hostNotAllowedToConnect:case r.SshDisconnectReason.illegalUserName:return" Not authorized.";case r.SshDisconnectReason.serviceNotAvailable:return" Service not available.";case r.SshDisconnectReason.compressionError:case r.SshDisconnectReason.keyExchangeFailed:case r.SshDisconnectReason.macError:case r.SshDisconnectReason.protocolError:return" Protocol error.";case r.SshDisconnectReason.tooManyConnections:return this.isClientConnection?" Too many client connections.":" Another host for the tunnel has connected.";default:return""}}async connectSession(e){try{await e()}catch(e){if(!(e instanceof r.CancellationError))if(e instanceof Error)this.traceError(`Error connecting ${this.connectionRole} tunnel session: ${e.message}`,e);else{const t=`Error connecting ${this.connectionRole} tunnel session: ${e}`;this.traceError(t)}throw e}}async connectTunnelSession(e,t,n){var s;e&&(this.tunnel=e),t&&(this.connectionOptions=t,null!==(s=this.httpAgent)&&void 0!==s||(this.httpAgent=null==t?void 0:t.httpAgent)),await this.connectSession((async()=>{const s=this.isReconnectable&&!e;await this.onConnectingToTunnel(),this.connector||(this.connector=this.createTunnelConnector());const i=[];if(n){const e=new o.CancellationTokenSource;i.push(e,n.onCancellationRequested((()=>e.cancel())),this.disposeToken.onCancellationRequested((()=>e.cancel()))),n=e.token}else n=this.disposeToken;try{await this.connector.connectSession(s,t,n)}catch(e){throw e instanceof r.CancellationError&&this.throwIfDisposed(),e}finally{for(const e of i)e.dispose()}}))}onConnectingToTunnel(){return Promise.resolve()}validateAccessToken(){if(this.accessToken)return i.TunnelAccessTokenProperties.validateTokenExpiration(this.accessToken),this.accessToken}createRequestMessageAsync(e){const t=new p.PortRelayRequestMessage;return t.accessToken=this.accessToken,Promise.resolve(t)}createSuccessMessageAsync(e){const t=new h.PortForwardSuccessMessage;return Promise.resolve(t)}createChannelOpenMessageAsync(e){const t=new d.PortRelayConnectRequestMessage;return t.accessToken=this.accessToken,t.isE2EEncryptionRequested=this.enableE2EEncryption,Promise.resolve(t)}unsubscribeSessionEvents(){this.sshSessionDisposables.forEach((e=>e.dispose())),this.sshSessionDisposables=[]}}t.TunnelConnectionSession=g},3390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1306:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3559:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelRelayTunnelClient=t.webSocketSubProtocolv2=t.webSocketSubProtocol=void 0;const s=n(3399),i=n(2727),r=n(9361),o=n(7449),a=n(9696),c=n(4327),l=n(5844),u=n(7752),h=n(4966),p=n(5485);t.webSocketSubProtocol="tunnel-relay-client",t.webSocketSubProtocolv2="tunnel-relay-client-v2-dev";const d=(null===process||void 0===process?void 0:process.env)&&process.env.DEVTUNNELS_PROTOCOL_VERSION,f="1"===d?[t.webSocketSubProtocol]:"2"===d?[t.webSocketSubProtocolv2]:[t.webSocketSubProtocolv2,t.webSocketSubProtocol];class m extends h.TunnelConnectionSession{constructor(e,t){super(s.TunnelAccessScopes.Connect,f,e,t),this.portForwardingEmitter=new l.Emitter,this.sshSessionClosedEmitter=new l.Emitter,this.acceptLocalConnectionsForForwardedPortsValue=(0,a.isNode)(),this.localForwardingHostAddressValue="127.0.0.1",this.disconnectedStreams=new Map,this.connectionModes=[],this.portForwarding=this.portForwardingEmitter.event,this.sshSessionClosed=this.sshSessionClosedEmitter.event}get isSshSessionActive(){var e;return!!(null===(e=this.sshSession)||void 0===e?void 0:e.isConnected)}hasForwardedChannels(e){var t;if(!this.isSshSessionActive)return!1;const n=null===(t=this.sshSession)||void 0===t?void 0:t.activateService(r.PortForwardingService),s=null==n?void 0:n.remoteForwardedPorts,i=null==s?void 0:s.find((t=>t.remotePort===e));return!!i&&s.getChannels(i).length>0}get acceptLocalConnectionsForForwardedPorts(){return this.acceptLocalConnectionsForForwardedPortsValue}set acceptLocalConnectionsForForwardedPorts(e){if(e!==this.acceptLocalConnectionsForForwardedPortsValue){if(e&&!(0,a.isNode)())throw new Error("Cannot accept local connections for forwarded ports on this platform.");this.acceptLocalConnectionsForForwardedPortsValue=e,this.configurePortForwardingService()}}get localForwardingHostAddress(){return this.localForwardingHostAddressValue}set localForwardingHostAddress(e){e!==this.localForwardingHostAddressValue&&(this.localForwardingHostAddressValue=e,this.configurePortForwardingService())}get forwardedPorts(){var e;const t=null===(e=this.sshSession)||void 0===e?void 0:e.activateService(r.PortForwardingService);return null==t?void 0:t.remoteForwardedPorts}async connect(e,t,n){this.hostId=null==t?void 0:t.hostId,await this.connectTunnelSession(e,t,n)}tunnelChanged(){if(super.tunnelChanged(),this.endpoints=void 0,this.tunnel){if(!this.tunnel.endpoints)throw new Error("Tunnel endpoints cannot be null");if(0===this.tunnel.endpoints.length)throw new Error("No hosts are currently accepting connections for the tunnel.");const e=c.List.groupBy(this.tunnel.endpoints,(e=>e.hostId));if(this.hostId){if(this.endpoints=e.get(this.hostId),!this.endpoints)throw new Error("The specified host is not currently accepting connections to the tunnel.")}else{if(e.size>1)throw new Error("There are multiple hosts for the tunnel. Specify a host ID to connect to.");this.endpoints=e.entries().next().value[1]}const t=this.endpoints.filter((e=>e.connectionMode===s.TunnelConnectionMode.TunnelRelay));if(0===t.length)throw new Error("The host is not currently accepting Tunnel relay connections.");const n=t[0];this.hostPublicKeys=n.hostPublicKeys,this.relayUri=n.clientRelayUri}else this.relayUri=void 0}onRequest(e){if(e.request.requestType===r.PortForwardingService.portForwardRequestType){const t=e.request,n=new p.PortForwardingEventArgs(t.port);this.portForwardingEmitter.fire(n),e.isAuthorized=!n.cancel}else e.request.requestType===r.PortForwardingService.cancelPortForwardRequestType&&(e.isAuthorized=!0)}async configureSession(e,t,n,s){this.connectionProtocol=t,n&&this.sshSession&&!this.sshSession.isClosed?await this.sshSession.reconnect(e,s):await this.startSshSession(e,s)}startSshSession(e,n){return this.connectSession((async()=>{this.sshSession=a.SshHelpers.createSshClientSession((e=>{e.addService(r.PortForwardingService),this.connectionProtocol===t.webSocketSubProtocol?e.protocolExtensions.push(i.SshProtocolExtensionNames.sessionReconnect):e.keyExchangeAlgorithms.splice(0,0,i.SshAlgorithms.keyExchange.none)})),this.sshSession.trace=this.trace,this.sshSession.onReportProgress((e=>this.raiseReportProgress(e.progress,e.sessionNumber)),this,this.sshSessionDisposables),this.sshSession.onClosed(this.onSshSessionClosed,this,this.sshSessionDisposables),this.sshSession.onAuthenticating(this.onSshServerAuthenticating,this,this.sshSessionDisposables),this.sshSession.onDisconnected(this.onSshSessionDisconnected,this,this.sshSessionDisposables),this.sshSession.onRequest(this.onRequest,this,this.sshSessionDisposables);const s=this.sshSession.activateService(r.PortForwardingService);if(this.connectionProtocol===t.webSocketSubProtocolv2&&(s.messageFactory=this,s.onForwardedPortConnecting(this.onForwardedPortConnecting,this,this.sshSessionDisposables),s.remoteForwardedPorts.onPortAdded((e=>this.onForwardedPortAdded(s,e)),this,this.sshSessionDisposables),s.remoteForwardedPorts.onPortUpdated((e=>this.onForwardedPortAdded(s,e)),this,this.sshSessionDisposables)),this.configurePortForwardingService(),await this.sshSession.connect(e,n),this.sshSession.sessionId){const e=this.sshSession,t={username:"tunnel"};if(!await e.authenticate(t,n))throw new Error(e.principal?"SSH client authentication failed.":"SSH server authentication failed.")}}))}configurePortForwardingService(){const e=this.getSshSessionPfs();e&&(this.acceptLocalConnectionsForForwardedPortsValue&&(0,a.isNode)()?e.tcpListenerFactory=new o.RetryTcpListenerFactory(this.localForwardingHostAddressValue):e.acceptLocalConnectionsForForwardedPorts=!1)}onForwardedPortAdded(e,t){var n,s;const r=t.port.remotePort;if("number"!=typeof r)return;const o=null!==(s=null===(n=this.disconnectedStreams.get(r))||void 0===n?void 0:n.length)&&void 0!==s?s:0;for(let t=0;t<o;t++)e.connectToForwardedPort(r).then((()=>{this.trace(i.TraceLevel.Verbose,0,`Reconnected stream to fowarded port ${r}`)})).catch((e=>{this.trace(i.TraceLevel.Warning,0,`Failed to reconnect to forwarded port ${r}: ${e}`);const t=this.disconnectedStreams.get(r);if(t)for(;t.length>0;)t.pop().dispose()}))}onForwardedPortConnecting(e){if(e.stream.channel.openConfirmationMessage.convertTo(new u.PortRelayConnectResponseMessage).isE2EEncryptionEnabled){const t={username:"tunnel"};e.transformPromise=new Promise(((n,s)=>{var r;let o=null===(r=this.disconnectedStreams.get(e.port))||void 0===r?void 0:r.shift();o?(this.trace(i.TraceLevel.Verbose,0,`Reconnecting encrypted stream for port ${e.port}...`),o.reconnect(e.stream).then((()=>{this.trace(i.TraceLevel.Verbose,0,`Reconnecting encrypted stream for port ${e.port} succeeded.`),n(o)})).catch(s)):(o=new i.SecureStream(e.stream,t),o.trace=this.trace,o.onAuthenticating((e=>e.authenticationPromise=this.onHostAuthenticating(e).catch())),o.onDisconnected((()=>this.onSecureStreamDisconnected(e.port,o))),o.connect().then((()=>n(o))).catch(s))}))}super.onForwardedPortConnecting(e)}onSecureStreamDisconnected(e,t){this.trace(i.TraceLevel.Verbose,0,`Encrypted stream for port ${e} disconnected.`);const n=this.disconnectedStreams.get(e);n?n.push(t):this.disconnectedStreams.set(e,[t])}async onHostAuthenticating(e){var t,n;if(e.authenticationType!==i.SshAuthenticationType.serverPublicKey||!e.publicKey)return this.traceWarning("Invalid host authenticating event."),null;const s=null!==(n=null===(t=await e.publicKey.getPublicKeyBytes(e.publicKey.keyAlgorithmName))||void 0===t?void 0:t.toString("base64"))&&void 0!==n?n:"";return this.hostPublicKeys?this.hostPublicKeys.includes(s)?(this.traceVerbose(`Verified host identity with public key ${s}`),{}):!this.disposeToken.isCancellationRequested&&await this.refreshTunnel(!1,this.disposeToken)&&this.hostPublicKeys.includes(s)?(this.traceVerbose("Verified host identity with public key "+s),{}):(this.traceError("Host public key verification failed."),this.traceVerbose(`Host key: ${s}`),this.traceVerbose(`Expected key(s): ${this.hostPublicKeys.join(", ")}`),null):(this.traceWarning("Host identity could not be verified because no public keys were provided."),this.traceVerbose(`Host key: ${s}`),{})}onSshServerAuthenticating(e){this.connectionProtocol===t.webSocketSubProtocol?e.authenticationPromise=this.onHostAuthenticating(e):e.authenticationPromise=Promise.resolve({})}async connectToForwardedPort(e,t){const n=this.getSshSessionPfs();if(!n)throw new Error("Failed to connect to remote port. Ensure that the client has connected by calling connectClient.");return n.connectToForwardedPort(e,t)}async waitForForwardedPort(e,t){const n=this.getSshSessionPfs();if(!n)throw new Error("Port forwarding has not been started. Ensure that the client has connected by calling connectClient.");this.trace(i.TraceLevel.Verbose,0,"Waiting for forwarded port "+e),await n.waitForForwardedPort(e,t),this.trace(i.TraceLevel.Verbose,0,"Forwarded port "+e+" is ready.")}getSshSessionPfs(){var e,t;return null!==(t=null===(e=this.sshSession)||void 0===e?void 0:e.getService(r.PortForwardingService))&&void 0!==t?t:void 0}async refreshPorts(){if(!this.sshSession||this.sshSession.isClosed)throw new Error("Not connected.");const e=new i.SessionRequestMessage;e.requestType="RefreshPorts",e.wantReply=!0,await this.sshSession.request(e)}async closeSession(e,t){this.isSshSessionActive&&this.sshSessionClosedEmitter.fire(this),await super.closeSession(e,t)}onSshSessionClosed(e){this.sshSessionClosedEmitter.fire(this),super.onSshSessionClosed(e)}onSshSessionDisconnected(){this.sshSessionClosedEmitter.fire(this);const e=i.SshDisconnectReason.connectionLost,t=new i.SshConnectionError("Connection lost.",i.SshDisconnectReason.connectionLost);this.maybeStartReconnecting(e,void 0,t)}async connectClientToRelayServer(e,t){if(!e)throw new Error("Client relay URI must be a non-empty string");this.relayUri=e,this.accessToken=t,await this.connectTunnelSession()}}t.TunnelRelayTunnelClient=m,m.webSocketSubProtocol=t.webSocketSubProtocol,m.webSocketSubProtocolv2=t.webSocketSubProtocolv2},82:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelRelayTunnelHost=void 0;const s=n(3399),i=n(2727),r=n(9361),o=n(9696),a=n(2616),c=n(3226),l=n(2040),u=n(7752),h=n(1328),p=n(9696),d=n(4966),f="tunnel-relay-host",m="tunnel-relay-host-v2-dev",g=(null===process||void 0===process?void 0:process.env)&&process.env.DEVTUNNELS_PROTOCOL_VERSION,v="1"===g?[f]:"2"===g?[m]:[m,f];class y extends d.TunnelConnectionSession{constructor(e,t){super(s.TunnelAccessScopes.Host,v,t,e),this.clientSessionPromises=[],this.reconnectableSessions=[],this.sshSessions=[],this.remoteForwarders=new Map,this.loopbackIp="127.0.0.1",this.forwardConnectionsToLocalPortsValue=(0,p.isNode)();const n=i.SshAlgorithms.publicKey.ecdsaSha2Nistp384;n&&(this.hostPrivateKeyPromise=n.generateKeyPair()),this.hostId=a.MultiModeTunnelHost.hostId,this.id=(0,h.v4)()+"-relay"}get forwardConnectionsToLocalPorts(){return this.forwardConnectionsToLocalPortsValue}set forwardConnectionsToLocalPorts(e){if(e!==this.forwardConnectionsToLocalPortsValue){if(e&&!(0,p.isNode)())throw new Error("Cannot forward connections to local TCP sockets on this platform.");this.forwardConnectionsToLocalPortsValue=e}}async start(e){await this.connect(e)}async connect(e,t,n){await this.connectTunnelSession(e,t,n)}async connectTunnelSession(e,t,n){if(this.disconnectReason===i.SshDisconnectReason.tooManyConnections)throw new i.SshConnectionError("Cannot retry connection because another host for this tunnel has connected. Only one host connection at a time is supported.",i.SshDisconnectReason.tooManyConnections);await super.connectTunnelSession(e,t,n)}async configureSession(e,t,n,s){let a;if(this.connectionProtocol=t,this.connectionProtocol===f)a=new i.SshClientSession(new i.SshSessionConfiguration(!1));else{a=o.SshHelpers.createSshClientSession((e=>{e.keyExchangeAlgorithms.splice(0,0,i.SshAlgorithms.keyExchange.none),e.addService(r.PortForwardingService)}));const e=a.activateService(r.PortForwardingService);e.messageFactory=this,e.onForwardedPortConnecting(this.onForwardedPortConnecting,this,this.sshSessionDisposables)}a.onChannelOpening(this.hostSession_ChannelOpening,this,this.sshSessionDisposables),a.onClosed(this.onSshSessionClosed,this,this.sshSessionDisposables),a.trace=this.trace,a.onReportProgress((e=>this.raiseReportProgress(e.progress,e.sessionNumber)),this,this.sshSessionDisposables),this.sshSession=a,await a.connect(e,s),a.sessionId&&await a.authenticate({username:"tunnel"}),this.connectionProtocol===m&&await this.startForwardingExistingPorts(a)}async onConnectingToTunnel(){var e,t,n,i,r;if(!this.hostPrivateKey||!this.hostPublicKeys){if(!this.hostPrivateKeyPromise)throw new Error("Cannot create host keys");this.hostPrivateKey=await this.hostPrivateKeyPromise;const e=await this.hostPrivateKey.getPublicKeyBytes(this.hostPrivateKey.keyAlgorithmName);if(!e)throw new Error("Host private key public key bytes is not initialized");this.hostPublicKeys=[e.toString("base64")]}const o=null!=(null===(e=this.tunnel)||void 0===e?void 0:e.ports)&&this.tunnel.ports.find((e=>e.protocol===s.TunnelProtocol.Ssh)),a=`${null===(t=this.tunnel)||void 0===t?void 0:t.tunnelId}.${null===(n=this.tunnel)||void 0===n?void 0:n.clusterId}:${null===(i=this.tunnel)||void 0===i?void 0:i.name}.${null===(r=this.tunnel)||void 0===r?void 0:r.domain}:${o}:${this.hostId}:${this.hostPublicKeys}`;if(!this.relayUri||this.endpointSignature!==a){if(!this.tunnel)throw new Error("Tunnel is required");let e,t={id:this.id,hostId:this.hostId,hostPublicKeys:this.hostPublicKeys,connectionMode:s.TunnelConnectionMode.TunnelRelay};o&&(e={includeSshGatewayPublicKey:"true"}),t=await this.managementClient.updateTunnelEndpoint(this.tunnel,t,{additionalQueryParameters:e}),this.relayUri=t.hostRelayUri,this.endpointSignature=a}}async dispose(){await super.dispose();const e=Object.assign([],this.clientSessionPromises);if(this.clientSessionPromises.length=0,this.tunnel&&this.endpointSignature&&this.disconnectReason!==i.SshDisconnectReason.tooManyConnections){const t=this.managementClient.deleteTunnelEndpoints(this.tunnel,this.id);e.push(t)}for(const e of this.remoteForwarders.values())e.dispose();await Promise.all(e)}hostSession_ChannelOpening(e){if(!e.isRemoteRequest)return;if(this.connectionProtocol===m&&"forwarded-tcpip"===e.channel.channelType){const t=e.channel.openMessage.convertTo(new l.PortRelayConnectRequestMessage),n=new u.PortRelayConnectResponseMessage;return n.isE2EEncryptionEnabled=this.enableE2EEncryption&&t.isE2EEncryptionRequested,void(e.openingPromise=Promise.resolve(n))}if(e.channel.channelType!==y.clientStreamChannelType)return e.failureDescription=`Unknown channel type: ${e.channel.channelType}`,void(e.failureReason=i.SshChannelOpenFailureReason.unknownChannelType);if(e.channel.maxWindowSize=5*i.SshChannel.defaultMaxWindowSize,this.isDisposed)return e.failureDescription="The host is disconnecting.",void(e.failureReason=i.SshChannelOpenFailureReason.connectFailed);const t=this.acceptClientSession(e.channel,this.disposeToken);this.clientSessionPromises.push(t),t.then((()=>{const e=this.clientSessionPromises.indexOf(t);this.clientSessionPromises.splice(e,1)}))}onForwardedPortConnecting(e){const t=e.stream.channel,n=t.openMessage.convertTo(new l.PortRelayConnectRequestMessage);if(this.enableE2EEncryption&&n.isE2EEncryptionRequested){t.maxWindowSize=2*i.SshChannel.defaultMaxWindowSize;const n={publicKeys:[this.hostPrivateKey]},s=new i.SecureStream(e.stream,n,this.reconnectableSessions);s.trace=this.trace,s.onAuthenticating((e=>e.authenticationPromise=Promise.resolve({}))),s.connect().catch((e=>{this.trace(i.TraceLevel.Error,0,`Error connecting encrypted channel: ${e}`)})),e.transformPromise=Promise.resolve(s)}super.onForwardedPortConnecting(e)}async acceptClientSession(e,t){try{const n=new i.SshStream(e);await this.connectAndRunClientSession(n,t)}catch(e){e instanceof i.CancellationError&&t.isCancellationRequested||this.trace(i.TraceLevel.Error,0,`Error running client SSH session: ${e}`)}}async connectAndRunClientSession(e,t){if(t.isCancellationRequested)throw e.destroy(),new i.CancellationError;const n=o.SshHelpers.createSshServerSession(this.reconnectableSessions,(e=>{e.protocolExtensions.push(i.SshProtocolExtensionNames.sessionReconnect),e.addService(r.PortForwardingService)}));n.trace=this.trace,n.onReportProgress((e=>this.raiseReportProgress(e.progress,e.sessionNumber)),this,this.sshSessionDisposables),n.credentials={publicKeys:[this.hostPrivateKey]};const s=new i.PromiseCompletionSource,a=n.onAuthenticating((e=>{this.onSshClientAuthenticating(e)}));n.onClientAuthenticated((()=>{this.onSshClientAuthenticated(n)}));const c=n.onRequest((e=>{this.onSshSessionRequest(e,n)})),l=n.onChannelOpening((e=>{this.onSshChannelOpening(e,n)})),u=n.onClosed((e=>{this.session_Closed(n,e,t),s.resolve()}));try{const r=new i.NodeStream(e);await n.connect(r),this.sshSessions.push(n),t.onCancellationRequested((e=>{s.reject(new i.CancellationError)})),await s.promise}finally{a.dispose(),c.dispose(),l.dispose(),u.dispose(),await n.close(i.SshDisconnectReason.byApplication),n.dispose()}}onSshClientAuthenticating(e){e.authenticationType===i.SshAuthenticationType.clientNone&&(e.authenticationPromise=Promise.resolve({}))}async onSshClientAuthenticated(e){this.startForwardingExistingPorts(e)}async startForwardingExistingPorts(e){var t,n;const s=e.activateService(r.PortForwardingService);s.forwardConnectionsToLocalPorts=this.forwardConnectionsToLocalPorts;for(const e of null!==(n=null===(t=this.tunnel)||void 0===t?void 0:t.ports)&&void 0!==n?n:[]){this.trace(i.TraceLevel.Verbose,0,`Forwarding port ${e.portNumber}`);try{await this.forwardPort(s,e)}catch(t){this.traceError(`Error forwarding port ${e.portNumber}: ${t}`)}}}onSshSessionRequest(e,t){"RefreshPorts"===e.requestType&&(e.responsePromise=(async()=>(await this.refreshPorts(),new i.SessionRequestSuccessMessage))())}onSshChannelOpening(e,t){if(!(e.request instanceof r.PortForwardChannelOpenMessage)){if(e.request.channelType===i.SshChannel.sessionChannelType)return;return this.trace(i.TraceLevel.Warning,0,"Rejecting request to open non-portforwarding channel."),void(e.failureReason=i.SshChannelOpenFailureReason.administrativelyProhibited)}const n=e.request;if("direct-tcpip"===n.channelType)this.tunnel.ports.some((e=>e.portNumber===n.port))||(this.trace(i.TraceLevel.Warning,0,"Rejecting request to connect to non-forwarded port:"+n.port),e.failureReason=i.SshChannelOpenFailureReason.administrativelyProhibited);else if("forwarded-tcpip"===n.channelType){const t=new r.ForwardedPortConnectingEventArgs(n.port,!1,new i.SshStream(e.channel));super.onForwardedPortConnecting(t)}else this.trace(i.TraceLevel.Warning,0,"Nonrecognized channel type "+n.channelType),e.failureReason=i.SshChannelOpenFailureReason.unknownChannelType}session_Closed(e,t,n){t.reason===i.SshDisconnectReason.byApplication?this.traceInfo("Client ssh session closed."):n.isCancellationRequested?this.traceInfo("Client ssh session cancelled."):t.reason!==i.SshDisconnectReason.none&&this.traceError(`Client ssh session closed unexpectedly due to ${t.reason}, "${t.message}"\n${t.error}`);for(const[t,n]of this.remoteForwarders.entries())n.session===e&&(n.dispose(),this.remoteForwarders.delete(t));const s=this.sshSessions.indexOf(e);s>=0&&this.sshSessions.splice(s,1)}async refreshPorts(e){var t,n;if(!await this.refreshTunnel(!0,e))return;const s=null!==(n=null===(t=this.tunnel)||void 0===t?void 0:t.ports)&&void 0!==n?n:[];let i=this.sshSessions;this.connectionProtocol===m&&this.sshSession&&(i=[...i,this.sshSession]);const o=[];for(const e of s)for(const t of i.filter((e=>e.isConnected&&(!e.sessionId||e.principal)))){const n=new c.SessionPortKey(t.sessionId,Number(e.portNumber));if(!this.remoteForwarders.get(n.toString())){const n=t.getService(r.PortForwardingService);o.push(this.forwardPort(n,e))}}for(const[e,t]of Object.entries(this.remoteForwarders))s.some((e=>e.portNumber===t.localPort))||(this.remoteForwarders.delete(e),t.dispose());await Promise.all(o)}async forwardPort(e,t){const n=Number(t.portNumber);if(e.localForwardedPorts.find((e=>e.localPort===n)))return;const s=await e.forwardFromRemotePort(this.loopbackIp,n,"localhost",n);if(!s)return;const i=new c.SessionPortKey(e.session.sessionId,Number(s.localPort));this.remoteForwarders.set(i.toString(),s)}}t.TunnelRelayTunnelHost=y,y.webSocketSubProtocol=f,y.webSocketSubProtocolv2=m,y.clientStreamChannelType="client-ssh-session-stream"},4327:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingEmitter=t.withCancellation=t.getError=t.getErrorMessage=t.delay=t.List=void 0;const s=n(2727),i=n(5844);t.List=class{static groupBy(e,t){const n=new Map;return e.forEach((e=>{const s=t(e),i=n.get(s);i?i.push(e):n.set(s,[e])})),n}},t.delay=function(e,t){return new Promise(((n,i)=>{let r,o;if(t){if(t.isCancellationRequested)return void i(new s.CancellationError);r=t.onCancellationRequested((()=>{o&&clearTimeout(o),null==r||r.dispose(),i(new s.CancellationError)}))}o=setTimeout((()=>{null==r||r.dispose(),n()}),e)}))},t.getErrorMessage=function(e){var t;return String(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:e)},t.getError=function(e,t){return e instanceof Error?e:new Error(`${null!=t?t:""}${e}`)},t.withCancellation=function(e,t){return t?Promise.race([e,new Promise(((e,n)=>{t.isCancellationRequested?n(new s.CancellationError):t.onCancellationRequested((()=>{n(new s.CancellationError)}))}))]):e};class r extends i.Emitter{constructor(){super({onFirstListenerAdd:()=>this.subscribed=!0,onLastListenerRemove:()=>this.subscribed=!1}),this.subscribed=!1}get isSubscribed(){return this.subscribed}}t.TrackingEmitter=r},3399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelConstraints=t.TunnelServiceProperties=t.TunnelProtocol=t.TunnelHeaderNames=t.TunnelEndpoint=t.TunnelConnectionMode=t.TunnelAccessScopes=t.TunnelAccessControlEntryType=t.TunnelAccessControlEntry=t.TunnelAccessControl=void 0;var s=n(6056);Object.defineProperty(t,"TunnelAccessControl",{enumerable:!0,get:function(){return s.TunnelAccessControl}});var i=n(5339);Object.defineProperty(t,"TunnelAccessControlEntry",{enumerable:!0,get:function(){return i.TunnelAccessControlEntry}});var r=n(4318);Object.defineProperty(t,"TunnelAccessControlEntryType",{enumerable:!0,get:function(){return r.TunnelAccessControlEntryType}});var o=n(8401);Object.defineProperty(t,"TunnelAccessScopes",{enumerable:!0,get:function(){return o.TunnelAccessScopes}});var a=n(2491);Object.defineProperty(t,"TunnelConnectionMode",{enumerable:!0,get:function(){return a.TunnelConnectionMode}});var c=n(5301);Object.defineProperty(t,"TunnelEndpoint",{enumerable:!0,get:function(){return c.TunnelEndpoint}});var l=n(113);Object.defineProperty(t,"TunnelHeaderNames",{enumerable:!0,get:function(){return l.TunnelHeaderNames}});var u=n(4856);Object.defineProperty(t,"TunnelProtocol",{enumerable:!0,get:function(){return u.TunnelProtocol}});var h=n(736);Object.defineProperty(t,"TunnelServiceProperties",{enumerable:!0,get:function(){return h.TunnelServiceProperties}});var p=n(9722);Object.defineProperty(t,"TunnelConstraints",{enumerable:!0,get:function(){return p.TunnelConstraints}})},6056:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAccessControl=void 0;const s=n(6538);t.TunnelAccessControl={validateScopes:s.validateScopes}},5339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAccessControlEntry=void 0,function(e){let t;!function(e){e.Microsoft="microsoft",e.GitHub="github",e.Ssh="ssh",e.IPv4="ipv4",e.IPv6="ipv6",e.ServiceTag="service-tag"}(t=e.Providers||(e.Providers={}))}(t.TunnelAccessControlEntry||(t.TunnelAccessControlEntry={}))},4318:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAccessControlEntryType=void 0,(n=t.TunnelAccessControlEntryType||(t.TunnelAccessControlEntryType={})).None="None",n.Anonymous="Anonymous",n.Users="Users",n.Groups="Groups",n.Organizations="Organizations",n.Repositories="Repositories",n.PublicKeys="PublicKeys",n.IPAddressRanges="IPAddressRanges"},6538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateScopes=void 0;const s=n(8401),i=[s.TunnelAccessScopes.Manage,s.TunnelAccessScopes.ManagePorts,s.TunnelAccessScopes.Host,s.TunnelAccessScopes.Inspect,s.TunnelAccessScopes.Connect];t.validateScopes=function(e,t,n){if(!Array.isArray(e))throw new TypeError("A scopes array was expected.");n&&(e=e.map((e=>e.split(" "))).reduce(((e,t)=>e.concat(t)),[])),e.forEach((e=>{if(!e)throw new Error("Tunnel access scopes include a null/empty item.");if(!i.includes(e))throw new Error("Invalid tunnel access scope: "+e)})),Array.isArray(t)&&e.forEach((e=>{if(!t.includes(e))throw new Error("Tunnel access scope is invalid for current request: scope")}))}},8401:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAccessScopes=void 0,(n=t.TunnelAccessScopes||(t.TunnelAccessScopes={})).Create="create",n.Manage="manage",n.ManagePorts="manage:ports",n.Host="host",n.Inspect="inspect",n.Connect="connect"},2491:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelConnectionMode=void 0,(n=t.TunnelConnectionMode||(t.TunnelConnectionMode={})).LocalNetwork="LocalNetwork",n.TunnelRelay="TunnelRelay"},9722:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelConstraints=void 0,(n=t.TunnelConstraints||(t.TunnelConstraints={})).clusterIdMinLength=3,n.clusterIdMaxLength=12,n.oldTunnelIdLength=8,n.newTunnelIdMinLength=3,n.newTunnelIdMaxLength=60,n.tunnelAliasLength=8,n.tunnelNameMinLength=3,n.tunnelNameMaxLength=60,n.descriptionMaxLength=400,n.labelMinLength=1,n.labelMaxLength=50,n.maxLabels=100,n.tunnelDomainMinLength=4,n.tunnelDomainMaxLength=180,n.tunnelMaxPorts=1e3,n.accessControlMaxEntries=40,n.accessControlMaxSubjects=100,n.accessControlSubjectMaxLength=200,n.accessControlSubjectNameMaxLength=200,n.accessControlMaxScopes=10,n.clusterIdPattern="^(([a-z]{3,4}[0-9]{1,3})|asse|aue|brs|euw|use)$",n.clusterIdRegex=new RegExp(n.clusterIdPattern),n.oldTunnelIdChars="0123456789bcdfghjklmnpqrstvwxz",n.oldTunnelIdPattern="["+n.oldTunnelIdChars+"]{8}",n.oldTunnelIdRegex=new RegExp(n.oldTunnelIdPattern),n.newTunnelIdChars="0123456789abcdefghijklmnopqrstuvwxyz-",n.newTunnelIdPattern="[a-z0-9][a-z0-9-]{1,58}[a-z0-9]",n.newTunnelIdRegex=new RegExp(n.newTunnelIdPattern),n.tunnelAliasChars="0123456789bcdfghjklmnpqrstvwxz",n.tunnelAliasPattern="["+n.tunnelAliasChars+"]{3,60}",n.tunnelAliasRegex=new RegExp(n.tunnelAliasPattern),n.tunnelNamePattern="([a-z0-9][a-z0-9-]{1,58}[a-z0-9])|(^$)",n.tunnelNameRegex=new RegExp(n.tunnelNamePattern),n.labelPattern="[\\w-=]{1,50}",n.labelRegex=new RegExp(n.labelPattern),n.tunnelDomainPattern="[0-9a-z][0-9a-z-.]{1,158}[0-9a-z]|(^$)",n.tunnelDomainRegex=new RegExp(n.tunnelDomainPattern),n.accessControlSubjectPattern="[0-9a-zA-Z-._:/@]{0,200}",n.accessControlSubjectRegex=new RegExp(n.accessControlSubjectPattern),n.accessControlSubjectNamePattern="[ \\w\\d-.,/'\"_@()<>]{0,200}",n.accessControlSubjectNameRegex=new RegExp(n.accessControlSubjectNamePattern)},5301:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelEndpoint=t.portToken=void 0,t.portToken="{port}";const s=n(6729);t.TunnelEndpoint={portToken:t.portToken,getPortUri:s.getPortUri,getPortSshCommand:s.getPortSshCommand}},6729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPortSshCommand=t.getPortUri=void 0;const s=n(5301);t.getPortUri=function(e,t){if(!e)throw new TypeError("A tunnel endpoint is required.");return"number"==typeof t||e.tunnelUri?"number"==typeof t&&e.portUriFormat?e.portUriFormat.replace(s.portToken,t.toString()):void 0:e.tunnelUri},t.getPortSshCommand=function(e,t){if(!e)throw new TypeError("A tunnel endpoint is required.");return"number"==typeof t||e.tunnelSshCommand?"number"==typeof t&&e.portSshCommandFormat?e.portSshCommandFormat.replace(s.portToken,t.toString()):void 0:e.tunnelSshCommand}},113:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelHeaderNames=void 0,(n=t.TunnelHeaderNames||(t.TunnelHeaderNames={})).XTunnelAuthorization="X-Tunnel-Authorization",n.XRequestID="X-Request-ID",n.XGithubSshKey="X-Github-Ssh-Key",n.XTunnelSkipAntiPhishingPage="X-Tunnel-Skip-AntiPhishing-Page"},4856:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelProtocol=void 0,(n=t.TunnelProtocol||(t.TunnelProtocol={})).Auto="auto",n.Tcp="tcp",n.Udp="udp",n.Ssh="ssh",n.Rdp="rdp",n.Http="http",n.Https="https"},736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelServiceProperties=t.nonProdGitHubAppClientId=t.prodGitHubAppClientId=t.devThirdPartyAppId=t.ppeThirdPartyAppId=t.prodThirdPartyAppId=t.nonProdFirstPartyAppId=t.prodFirstPartyAppId=t.devDnsName=t.ppeDnsName=t.prodDnsName=void 0,t.prodDnsName="global.rel.tunnels.api.visualstudio.com",t.ppeDnsName="global.rel.tunnels.ppe.api.visualstudio.com",t.devDnsName="global.ci.tunnels.dev.api.visualstudio.com",t.prodFirstPartyAppId="46da2f7e-b5ef-422a-88d4-2a7f9de6a0b2",t.nonProdFirstPartyAppId="54c45752-bacd-424a-b928-652f3eca2b18",t.prodThirdPartyAppId="ce65d243-a913-4cae-a7dd-cb52e9f77647",t.ppeThirdPartyAppId="544167a6-f431-4518-aac6-2fd50071928e",t.devThirdPartyAppId="a118c979-0249-44bb-8f95-eb0457127aeb",t.prodGitHubAppClientId="Iv1.e7b89e013f801f03",t.nonProdGitHubAppClientId="Iv1.b231c327f1eaa229";const s=n(7193);t.TunnelServiceProperties={production:s.production,staging:s.staging,development:s.development,environment:s.environment}},7193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment=t.development=t.staging=t.production=void 0;const s=n(736);t.production={serviceUri:`https://${s.prodDnsName}/`,serviceAppId:s.prodFirstPartyAppId,serviceInternalAppId:s.prodThirdPartyAppId,gitHubAppClientId:s.prodGitHubAppClientId},t.staging={serviceUri:`https://${s.ppeDnsName}/`,serviceAppId:s.nonProdFirstPartyAppId,serviceInternalAppId:s.ppeThirdPartyAppId,gitHubAppClientId:s.nonProdGitHubAppClientId},t.development={serviceUri:`https://${s.devDnsName}/`,serviceAppId:s.nonProdFirstPartyAppId,serviceInternalAppId:s.devThirdPartyAppId,gitHubAppClientId:s.nonProdGitHubAppClientId},t.environment=function(e){if(!e)throw new Error(`Invalid argument: ${e}`);switch(e.toLowerCase()){case"prod":case"production":return t.production;case"ppe":case"preprod":return t.staging;case"dev":case"development":return t.development;default:throw new Error(`Invalid service environment: ${e}`)}}},6950:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdGeneration=void 0;const s=n(3399);class i{static generateTunnelId(){let e="";e+=this.adjectives[Math.floor(Math.random()*this.adjectives.length)]+"-",e+=this.nouns[Math.floor(Math.random()*this.nouns.length)]+"-";for(let t=0;t<7;t++)e+=s.TunnelConstraints.oldTunnelIdChars[Math.floor(Math.random()*s.TunnelConstraints.oldTunnelIdChars.length)];return e}}t.IdGeneration=i,i.nouns=["pond","hill","mountain","field","fog","ant","dog","cat","shoe","plane","chair","book","ocean","lake","river","horse"],i.adjectives=["fun","happy","interesting","neat","peaceful","puzzled","kind","joyful","new","giant","sneaky","quick","majestic","jolly","fancy","tidy","swift","silent","amusing","spiffy"]},5927:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(153),t),i(n(1005),t),i(n(9146),t),i(n(7021),t)},7021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAccessTokenProperties=void 0;class n{constructor(e,t,n,s,i,r){this.clusterId=e,this.tunnelId=t,this.tunnelPorts=n,this.scopes=s,this.issuer=i,this.expiration=r}toString(){let e="";return this.tunnelId&&(e+="tunnel=",e+=this.tunnelId,this.clusterId&&(e+=".",e+=this.clusterId)),this.tunnelPorts&&this.tunnelPorts.length>0&&(e.length>0&&(e+=", "),1===this.tunnelPorts.length?e+=`port=${this.tunnelPorts[0]}`:e+=`ports=[${this.tunnelPorts.join(", ")}]`),this.scopes&&(e.length>0&&(e+=", "),e+=`scopes=[${this.scopes.join(", ")}]`),this.issuer&&(e.length>0&&(e+=", "),e+="issuer=",e+=this.issuer),this.expiration&&(e.length>0&&(e+=", "),e+=`expiration=${this.expiration.toString().replace(".000Z","Z")}`),e}static validateTokenExpiration(e){const t=n.tryParse(e);if((null==t?void 0:t.expiration)&&t.expiration<new Date)throw new Error("The access token is expired: "+t)}static tryParse(e){if("string"!=typeof e)throw new TypeError("Token string expected.");const t=e.split(".");if(3!==t.length)return null;const s=n.base64UrlDecode(t[1]);if(!s)return null;try{const e=JSON.parse(s),t=e.clusterId,i=e.tunnelId,r=e.tunnelPorts,o=e.scp,a=e.iss,c=e.exp;return new n(t,i,"number"==typeof r?[r]:r,null==o?void 0:o.split(" "),a,"number"==typeof c?new Date(1e3*c):void 0)}catch(e){return null}}static getTokenTrace(e){var t,s;return e?null!==(s=null===(t=n.tryParse(e))||void 0===t?void 0:t.toString())&&void 0!==s?s:"token":"none"}static getTunnelAccessToken(e,t){if((null==e?void 0:e.accessTokens)&&t){Array.isArray(t)||(t=[t]);for(const s of t)for(const[t,i]of Object.entries(e.accessTokens))if(i&&t.split(" ").includes(s))return n.validateTokenExpiration(i),i}}static base64UrlDecode(e){for(e=e.replace("-","+");e.length%4!=0;)e+="=";try{return atob(e)}catch(e){return null}}}t.TunnelAccessTokenProperties=n},1005:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelAuthenticationSchemes=void 0;class n{}t.TunnelAuthenticationSchemes=n,n.aad="aad",n.github="github",n.tunnel="tunnel"},153:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelManagementHttpClient=void 0;const s=n(3399),i=n(1005),r=n(7021),o=n(8534),a=n(3315),c=n(5566),l=n(6950),u="Authorization";function h(e,t){var n,s;return(null!==(n=e.portNumber)&&void 0!==n?n:Number.MAX_SAFE_INTEGER)-(null!==(s=t.portNumber)&&void 0!==s?s:Number.MAX_SAFE_INTEGER)}function p(e){return"string"==typeof e?new Date(Date.parse(e)):e}function d(e){e&&(e.created=p(e.created),e.status&&(e.status.lastHostConnectionTime=p(e.status.lastHostConnectionTime),e.status.lastClientConnectionTime=p(e.status.lastClientConnectionTime)))}function f(e){e&&e.status&&(e.status.lastClientConnectionTime=p(e.status.lastClientConnectionTime))}function m(e,t){var n;if(e.accessTokens&&t){null!==(n=t.accessTokens)&&void 0!==n||(t.accessTokens={});for(const n of Object.entries(e.accessTokens))t.accessTokens[n[0]]||(t.accessTokens[n[0]]=n[1])}}const g=[s.TunnelAccessScopes.Manage],v=[s.TunnelAccessScopes.Host],y=[s.TunnelAccessScopes.Manage,s.TunnelAccessScopes.ManagePorts,s.TunnelAccessScopes.Host],b=[s.TunnelAccessScopes.Manage,s.TunnelAccessScopes.ManagePorts,s.TunnelAccessScopes.Host,s.TunnelAccessScopes.Connect],w=["2023-09-27-preview"];class S{constructor(e,t,n,i,r,o){var a;if(this.httpsAgent=r,this.adapter=o,this.trace=e=>{},-1===w.indexOf(t))throw new TypeError(`Invalid API version: ${t}, must be one of ${w}`);if(this.apiVersion=t,!e)throw new TypeError("User agent must be provided.");if(Array.isArray(e)){if(0===e.length)throw new TypeError("User agents cannot be empty.");let t="";e.forEach((e=>{var n;if("string"!=typeof e){if(!e.name)throw new TypeError("Invalid user agent. The name must be provided.");if("string"!=typeof e.name)throw new TypeError("Invalid user agent. The name must be a string.");if(e.version&&"string"!=typeof e.version)throw new TypeError("Invalid user agent. The version must be a string.");t=`${t}${e.name}/${null!==(n=e.version)&&void 0!==n?n:"unknown"} `}else t=`${t}${e} `})),this.userAgents=t.trim()}else if("string"!=typeof e){if(!e.name)throw new TypeError("Invalid user agent. The name must be provided.");if("string"!=typeof e.name)throw new TypeError("Invalid user agent. The name must be a string.");if(e.version&&"string"!=typeof e.version)throw new TypeError("Invalid user agent. The version must be a string.");this.userAgents=`${e.name}/${null!==(a=e.version)&&void 0!==a?a:"unknown"}`}else this.userAgents=e;this.userTokenCallback=null!=n?n:()=>Promise.resolve(null),i||(i=s.TunnelServiceProperties.production.serviceUri);const c=new URL(i);if(!c||"/"!==c.pathname)throw new TypeError(`Invalid tunnel service URI: ${i}`);this.baseAddress=i}async listTunnels(e,t,n){const s=[e?null:"global=true",t?`domain=${t}`:null].filter((e=>!!e)).join("&"),i=await this.sendRequest("GET",e,"/tunnels",s,n);let r=new Array;if(i.value)for(const e of i.value)e.value&&(r=r.concat(e.value));return r.forEach(d),r}async getTunnel(e,t){const n=await this.sendTunnelRequest("GET",e,b,void 0,void 0,t);return m(e,n),d(n),n}async createTunnel(e,t){const n=e.tunnelId,s=null==n||""===n;(t=t||{}).additionalHeaders=t.additionalHeaders||{},t.additionalHeaders["If-Not-Match"]="*",s&&(e.tunnelId=l.IdGeneration.generateTunnelId());for(let n=0;n<=3;n++)try{const n=await this.sendTunnelRequest("PUT",e,g,void 0,void 0,t,this.convertTunnelForRequest(e),void 0,!0);return m(e,n),d(n),n}catch(t){if(!s)throw t;e.tunnelId=l.IdGeneration.generateTunnelId()}const i=await this.sendTunnelRequest("PUT",e,g,void 0,void 0,t,this.convertTunnelForRequest(e),void 0,!0);return m(e,i),d(i),i}async createOrUpdateTunnel(e,t){const n=e.tunnelId,s=null==n||""===n;s&&(e.tunnelId=l.IdGeneration.generateTunnelId());for(let n=0;n<=3;n++)try{const n=await this.sendTunnelRequest("PUT",e,g,void 0,void 0,t,this.convertTunnelForRequest(e),void 0,!0);return m(e,n),d(n),n}catch(t){if(!s)throw t;e.tunnelId=l.IdGeneration.generateTunnelId()}const i=await this.sendTunnelRequest("PUT",e,g,void 0,"forceCreate=true",t,this.convertTunnelForRequest(e),void 0,!0);return m(e,i),d(i),i}async updateTunnel(e,t){(t=t||{}).additionalHeaders=t.additionalHeaders||{},t.additionalHeaders["If-Match"]="*";const n=await this.sendTunnelRequest("PUT",e,g,void 0,void 0,t,this.convertTunnelForRequest(e));return m(e,n),d(n),n}async deleteTunnel(e,t){return await this.sendTunnelRequest("DELETE",e,g,void 0,void 0,t,void 0,!0)}async updateTunnelEndpoint(e,t,n){if(null==t.id)throw new Error("Endpoint ID must be specified when updating an endpoint.");const s=`/endpoints/${t.id}`,i=await this.sendTunnelRequest("PUT",e,v,s,"connectionMode="+t.connectionMode,n,t);return e.endpoints&&(e.endpoints=e.endpoints.filter((e=>e.hostId!==t.hostId||e.connectionMode!==t.connectionMode)).concat(i)),i}async deleteTunnelEndpoints(e,t,n){const s=`/endpoints/${t}`,i=await this.sendTunnelRequest("DELETE",e,v,s,void 0,n,void 0,!0);return i&&e.endpoints&&(e.endpoints=e.endpoints.filter((e=>e.id!==t))),i}async listUserLimits(){return await this.sendRequest("GET",void 0,"/userlimits",void 0,void 0)||[]}async listTunnelPorts(e,t){const n=await this.sendTunnelRequest("GET",e,b,"/ports",void 0,t);return n.value&&n.value.forEach(f),n.value}async getTunnelPort(e,t,n){const s=`/ports/${t}`,i=await this.sendTunnelRequest("GET",e,b,s,void 0,n);return f(i),i}async createTunnelPort(e,t,n){const s=`/ports/${(t=this.convertTunnelPortForRequest(e,t)).portNumber}`;(n=n||{}).additionalHeaders=n.additionalHeaders||{},n.additionalHeaders["If-Not-Match"]="*";const i=await this.sendTunnelRequest("PUT",e,y,s,void 0,n,t);return e.ports=e.ports||[],e.ports=e.ports.filter((e=>e.portNumber!==t.portNumber)).concat(i).sort(h),f(i),i}async updateTunnelPort(e,t,n){if(t.clusterId&&e.clusterId&&t.clusterId!==e.clusterId)throw new Error("Tunnel port cluster ID is not consistent.");(n=n||{}).additionalHeaders=n.additionalHeaders||{},n.additionalHeaders["If-Match"]="*";const s=`/ports/${t.portNumber}`;t=this.convertTunnelPortForRequest(e,t);const i=await this.sendTunnelRequest("PUT",e,y,s,void 0,n,t);return m(t,i),f(i),e.ports=e.ports||[],e.ports=e.ports.filter((e=>e.portNumber!==t.portNumber)).concat(i).sort(h),i}async createOrUpdateTunnelPort(e,t,n){const s=`/ports/${(t=this.convertTunnelPortForRequest(e,t)).portNumber}`,i=await this.sendTunnelRequest("PUT",e,y,s,void 0,n,t);return e.ports=e.ports||[],e.ports=e.ports.filter((e=>e.portNumber!==t.portNumber)).concat(i).sort(h),f(i),i}async deleteTunnelPort(e,t,n){const s=`/ports/${t}`,i=await this.sendTunnelRequest("DELETE",e,y,s,void 0,n,void 0,!0);return i&&e.ports&&(e.ports=e.ports.filter((e=>e.portNumber!==t)).sort(h)),i}async listClusters(){return await this.sendRequest("GET",void 0,"/clusters",void 0,void 0,void 0,!1)}async sendTunnelRequest(e,t,n,s,i,r,o,a,c=!1){const l=await this.buildUriForTunnel(t,s,i,r,c),u=await this.getAxiosRequestConfig(t,r,n);return await this.request(e,l,o,u,a)}async sendRequest(e,t,n,s,i,r,o){const a=await this.buildUri(t,n,s,i),c=await this.getAxiosRequestConfig(void 0,i);return await this.request(e,a,r,c,o)}async checkNameAvailablility(e){e=encodeURI(e);const t=await this.buildUri(void 0,`/tunnels/${e}:checkNameAvailability`),n={httpsAgent:this.httpsAgent,adapter:this.adapter};return await this.request("GET",t,void 0,n)}getResponseErrorMessage(e){var t,n,s,i;let r="";if(null===(t=e.response)||void 0===t?void 0:t.data){const t=e.response.data;(t.title||t.detail)&&(r=`Tunnel service error: ${t.title}`,t.detail&&(r+=" "+t.detail),t.errors&&(r+=JSON.stringify(t.errors)))}r||(r=(null==e?void 0:e.response)?`Tunnel service returned status code: ${e.response.status} ${e.response.statusText}`:null!==(s=null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e)&&void 0!==s?s:"Unknown tunnel service request error.");const o="VsSaaS-Request-Id";return(null===(i=e.response)||void 0===i?void 0:i.headers)&&e.response.headers[o]&&(r+=`\nRequest ID: ${e.response.headers[o]}`),r}async buildUri(e,t,n,s){if(void 0===e&&this.userTokenCallback){let t=await this.userTokenCallback();if(t&&t.startsWith("tunnelplan")){t=t.replace("tunnelplan ","");const n=c.TunnelPlanTokenProperties.tryParse(t);null!==n&&n.clusterId&&(e=n.clusterId)}}let i=this.baseAddress;if(e){const t=new URL(i),n=parseInt(t.port,10);if("localhost"===t.hostname||t.hostname.startsWith(`${e}.`)){if("https:"===t.protocol&&e.startsWith("localhost")&&n%10>0){const s=parseInt(e.substring("localhost".length),10);s>0&&s<10&&(t.port=(n-n%10+s).toString(),i=t.toString())}}else t.hostname=`${e}.${t.hostname}`.replace("global.",""),i=t.toString()}i=`${i.replace(/\/$/,"")}${t}`;const r=this.tunnelRequestOptionsToQueryString(s,n);return r&&(i+=`?${r}`),i}buildUriForTunnel(e,t,n,s,i=!1){let r="";if(!e.clusterId&&!i||!e.tunnelId)throw new Error("Tunnel object must include a tunnel ID always and cluster ID for non creates.");if(r=`/tunnels/${e.tunnelId}`,null==s?void 0:s.additionalQueryParameters)for(const[e,t]of Object.entries(s.additionalQueryParameters))n?n+=`&${e}=${t}`:n=`${e}=${t}`;return this.buildUri(e.clusterId,r+(t||""),n,s)}async getAxiosRequestConfig(e,t,n){const s={};if(t&&t.accessToken&&(r.TunnelAccessTokenProperties.validateTokenExpiration(t.accessToken),s.Authorization=`${i.TunnelAuthenticationSchemes.tunnel} ${t.accessToken}`),!(u in s)&&this.userTokenCallback){const e=await this.userTokenCallback();e&&(s.Authorization=e)}if(!(u in s)){const t=r.TunnelAccessTokenProperties.getTunnelAccessToken(e,n);t&&(s.Authorization=`${i.TunnelAuthenticationSchemes.tunnel} ${t}`)}const a=e=>{if(e)for(const[t,n]of Object.entries(e))s[t]=n};a(this.additionalRequestHeaders),a(null==t?void 0:t.additionalHeaders);const c=s["User-Agent"]?s["User-Agent"]+" ":"";s["User-Agent"]=`${c}${this.userAgents} ${o.tunnelSdkUserAgent}`;const l=Object.assign(Object.assign({headers:s},this.httpsAgent&&{httpsAgent:this.httpsAgent}),this.adapter&&{adapter:this.adapter});return!1===(null==t?void 0:t.followRedirects)&&(l.maxRedirects=0),l}convertTunnelForRequest(e){var t;return{tunnelId:e.tunnelId,name:e.name,domain:e.domain,description:e.description,labels:e.labels,options:e.options,customExpiration:e.customExpiration,accessControl:e.accessControl?{entries:e.accessControl.entries.filter((e=>!e.isInherited))}:void 0,endpoints:e.endpoints,ports:null===(t=e.ports)||void 0===t?void 0:t.map((t=>this.convertTunnelPortForRequest(e,t)))}}convertTunnelPortForRequest(e,t){if(t.clusterId&&e.clusterId&&t.clusterId!==e.clusterId)throw new Error("Tunnel port cluster ID does not match tunnel.");if(t.tunnelId&&e.tunnelId&&t.tunnelId!==e.tunnelId)throw new Error("Tunnel port tunnel ID does not match tunnel.");return{portNumber:t.portNumber,protocol:t.protocol,isDefault:t.isDefault,description:t.description,labels:t.labels,sshUser:t.sshUser,options:t.options,accessControl:t.accessControl?{entries:t.accessControl.entries.filter((e=>!e.isInherited))}:void 0}}tunnelRequestOptionsToQueryString(e,t){const n={},i=[];return e&&(e.includePorts&&(n.includePorts=["true"]),e.includeAccessControl&&(n.includeAccessControl=["true"]),e.tokenScopes&&(s.TunnelAccessControl.validateScopes(e.tokenScopes,void 0,!0),n.tokenScopes=e.tokenScopes),e.forceRename&&(n.forceRename=["true"]),e.labels&&(n.labels=e.labels,e.requireAllLabels&&(n.allLabels=["true"])),e.limit&&(n.limit=[e.limit.toString()]),i.push(...Object.keys(n).map((e=>`${e}=${n[e].map(encodeURIComponent).join(",")}`)))),t&&i.push(t),i.push(`api-version=${this.apiVersion}`),i.join("&")}async request(e,t,n,s,i){var r,o;this.trace(`${e} ${t}`),s.headers&&this.traceHeaders(s.headers),this.traceContent(n);const c=e=>{this.trace(`${e.status} ${e.statusText}`),this.traceHeaders(e.headers),this.traceContent(e.data)};try{s.url=t,s.method=e,s.data=n;const i=await a.default.request(s);return c(i),"DELETE"===e||i.data}catch(t){if(!(t instanceof Error&&t.isAxiosError))throw t;const n=t;if(n.response&&(c(n.response),i&&404===n.response.status))return"DELETE"!==e&&null;throw n.message=this.getResponseErrorMessage(n),delete n.request,n.response&&(null===(r=n.config)||void 0===r||delete r.httpAgent,null===(o=n.config)||void 0===o||delete o.httpsAgent,delete n.response.request),n}}traceHeaders(e){for(const[t,n]of Object.entries(e)){if("Authorization"===t)return void this.traceAuthorizationHeader(t,n);this.trace(`${t}: ${null!=n?n:""}`)}}traceAuthorizationHeader(e,t){if("string"!=typeof t)return;const n=t.indexOf(" ");if(n<0)return void this.trace(`${e}: [${t.length}]`);const s=t.substring(0,n),o=t.substring(n+1);if(s.toLowerCase()===i.TunnelAuthenticationSchemes.tunnel.toLowerCase()){const t=r.TunnelAccessTokenProperties.tryParse(o);if(t)return void this.trace(`${e}: ${s} <${t}>`)}this.trace(`${e}: ${s} <token>`)}traceContent(e){"object"==typeof e&&(e=JSON.stringify(e,void 0,"  ")),"string"==typeof e&&this.trace(S.replaceTokensInContent(e))}static replaceTokensInContent(e){var t;const n=/"(eyJ[a-zA-z0-9\-_]+\.[a-zA-z0-9\-_]+\.[a-zA-z0-9\-_]+)"/;let s=n.exec(e);for(;s;){let i=s[1];const o=r.TunnelAccessTokenProperties.tryParse(i);i=null!==(t=null==o?void 0:o.toString())&&void 0!==t?t:"token",e=e.substring(0,s.index+1)+"<"+i+">"+e.substring(s.index+s[0].length-1),s=n.exec(e)}return e}}t.TunnelManagementHttpClient=S},5566:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TunnelPlanTokenProperties=void 0;class n{constructor(e,t,n,s,i,r,o){this.clusterId=e,this.issuer=t,this.expiration=n,this.userEmail=s,this.tunnelPlanId=i,this.subscriptionId=r,this.scopes=o}static validateTokenExpiration(e){const t=n.tryParse(e);if((null==t?void 0:t.expiration)&&t.expiration<new Date)throw new Error("The access token is expired: "+t)}static tryParse(e){if("string"!=typeof e)throw new TypeError("Token string expected.");const t=e.split(".");if(3!==t.length)return null;const s=n.base64UrlDecode(t[1]);if(!s)return null;try{const e=JSON.parse(s),t=e.clusterId,i=e.subscriptionId,r=e.tunnelPlanId,o=e.userEmail,a=e.scp,c=e.iss,l=e.exp;return new n(t,c,"number"==typeof l?new Date(1e3*l):void 0,o,r,i,null==a?void 0:a.split(" "))}catch(e){return null}}static getTokenTrace(e){var t,s;return e?null!==(s=null===(t=n.tryParse(e))||void 0===t?void 0:t.toString())&&void 0!==s?s:"token":"none"}static base64UrlDecode(e){for(e=e.replace("-","+");e.length%4!=0;)e+="=";try{return atob(e)}catch(e){return null}}}t.TunnelPlanTokenProperties=n},9146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8534:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tunnelSdkUserAgent=void 0;const s=n(8492).version;t.tunnelSdkUserAgent=`Dev-Tunnels-Service-TypeScript-SDK/${s}`},3817:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedPort=void 0,t.ForwardedPort=class{constructor(e,t,n){if(null===e&&null===t)throw new TypeError("Local and remote ports cannot both be null.");if(!n&&null===t)throw new TypeError("The report port number must not be null for locally forwarded ports.");if(null!==e&&("number"!=typeof e||e<=0))throw new TypeError("Local port must be a positive integer.");if(null!==t&&("number"!=typeof t||t<=0))throw new TypeError("Remote port must be a positive integer: "+t);this.localPort=e,this.remotePort=t;const s=n?"->":"<-";null===this.localPort?this.str=`${s}${this.remotePort}`:null==this.remotePort?this.str=`${this.localPort}${s}`:this.str=`${this.localPort}${s}${this.remotePort}`}toString(){return this.str}}},1074:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedPortConnectingEventArgs=t.ForwardedPortChannelEventArgs=t.ForwardedPortEventArgs=void 0;class n{constructor(e){this.port=e}toString(){return this.port.toString()}}t.ForwardedPortEventArgs=n,t.ForwardedPortChannelEventArgs=class extends n{constructor(e,t){super(e),this.port=e,this.channel=t}toString(){return`${this.port} ${this.channel}`}},t.ForwardedPortConnectingEventArgs=class{constructor(e,t,n,s){this.port=e,this.isIncoming=t,this.stream=n,this.cancellation=s}toString(){return`${this.port} isIncoming=${this.isIncoming}`}}},1678:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedPortsCollection=void 0;const s=n(5844),i=n(1074);class r{constructor(){this.portChannelMap=new Map,this.portAddedEmitter=new s.Emitter,this.onPortAdded=this.portAddedEmitter.event,this.portUpdatedEmitter=new s.Emitter,this.onPortUpdated=this.portUpdatedEmitter.event,this.portRemovedEmitter=new s.Emitter,this.onPortRemoved=this.portRemovedEmitter.event,this.portChannelAddedEmitter=new s.Emitter,this.onPortChannelAdded=this.portChannelAddedEmitter.event,this.portChannelRemovedEmitter=new s.Emitter,this.onPortChannelRemoved=this.portChannelRemovedEmitter.event}get size(){return this.portChannelMap.size}has(e){return this.portChannelMap.has(e.toString())}*values(){for(const[e,t]of this.portChannelMap.values())yield e}[Symbol.iterator](){return this.values()}*entries(){for(const[e,t]of this.portChannelMap.values())yield[e,e]}keys(){return this.values()}forEach(e,t){for(const[n,s]of this.portChannelMap.values())e.apply(t,[n,n,this])}getChannels(e){const t=this.portChannelMap.get(e.toString());if(!t)throw new Error(`Port ${e} is not in the collection.`);return t[1]}find(e){for(const t of this.values())if(e(t))return t}addOrUpdatePort(e){this.has(e)&&this.portUpdatedEmitter.fire(new i.ForwardedPortEventArgs(e)),this.portChannelMap.set(e.toString(),[e,[]]),this.portAddedEmitter.fire(new i.ForwardedPortEventArgs(e))}removePort(e){return!!this.has(e)&&(this.portChannelMap.delete(e.toString()),this.portRemovedEmitter.fire(new i.ForwardedPortEventArgs(e)),!0)}addChannel(e,t){const n=this.portChannelMap.get(e.toString());if(!n)throw new Error(`Port ${e} is not in the collection.`);const s=n[1];if(s.find((e=>e.channelId===t.channelId)))throw new Error(`Channel ${t.channelId} is already in the collection for port ${e}`);s.push(t),t.onClosed((()=>this.tryRemoveChannel(e,t))),this.portChannelAddedEmitter.fire(new i.ForwardedPortChannelEventArgs(e,t))}tryRemoveChannel(e,t){const n=this.portChannelMap.get(e.toString());if(n){const s=n[1],r=s.findIndex((e=>e.channelId===t.channelId));r>=0&&(s.splice(r,1),this.portChannelRemovedEmitter.fire(new i.ForwardedPortChannelEventArgs(e,t)))}}toString(){return[...this].join(", ")}}t.ForwardedPortsCollection=r},9361:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedPortConnectingEventArgs=t.ForwardedPortChannelEventArgs=t.ForwardedPortEventArgs=t.ForwardedPortsCollection=t.ForwardedPort=t.PortForwardChannelOpenMessage=t.PortForwardSuccessMessage=t.PortForwardRequestMessage=t.RemotePortStreamer=t.RemotePortForwarder=t.LocalPortForwarder=t.PortForwardingService=t.SshServer=t.SshClient=void 0;var s=n(7178);Object.defineProperty(t,"SshClient",{enumerable:!0,get:function(){return s.SshClient}});var i=n(9340);Object.defineProperty(t,"SshServer",{enumerable:!0,get:function(){return i.SshServer}});var r=n(3738);Object.defineProperty(t,"PortForwardingService",{enumerable:!0,get:function(){return r.PortForwardingService}});var o=n(8258);Object.defineProperty(t,"LocalPortForwarder",{enumerable:!0,get:function(){return o.LocalPortForwarder}});var a=n(3427);Object.defineProperty(t,"RemotePortForwarder",{enumerable:!0,get:function(){return a.RemotePortForwarder}});var c=n(8338);Object.defineProperty(t,"RemotePortStreamer",{enumerable:!0,get:function(){return c.RemotePortStreamer}});var l=n(9566);Object.defineProperty(t,"PortForwardRequestMessage",{enumerable:!0,get:function(){return l.PortForwardRequestMessage}});var u=n(8842);Object.defineProperty(t,"PortForwardSuccessMessage",{enumerable:!0,get:function(){return u.PortForwardSuccessMessage}});var h=n(2516);Object.defineProperty(t,"PortForwardChannelOpenMessage",{enumerable:!0,get:function(){return h.PortForwardChannelOpenMessage}});var p=n(3817);Object.defineProperty(t,"ForwardedPort",{enumerable:!0,get:function(){return p.ForwardedPort}});var d=n(1678);Object.defineProperty(t,"ForwardedPortsCollection",{enumerable:!0,get:function(){return d.ForwardedPortsCollection}});var f=n(1074);Object.defineProperty(t,"ForwardedPortEventArgs",{enumerable:!0,get:function(){return f.ForwardedPortEventArgs}}),Object.defineProperty(t,"ForwardedPortChannelEventArgs",{enumerable:!0,get:function(){return f.ForwardedPortChannelEventArgs}}),Object.defineProperty(t,"ForwardedPortConnectingEventArgs",{enumerable:!0,get:function(){return f.ForwardedPortConnectingEventArgs}})},5021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPAddressConversions=void 0,t.IPAddressConversions=class{static fromSshAddress(e){return e?"localhost"===e?"127.0.0.1":e:"0.0.0.0"}static toSshAddress(e){return e?"0.0.0.0"===e?"":"127.0.0.1"===e?"localhost":e:null}}},2516:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortForwardChannelOpenMessage=void 0;const s=n(2727);class i extends s.ChannelOpenMessage{constructor(){super(...arguments),this.host="",this.port=0,this.originatorIPAddress="",this.originatorPort=0}onRead(e){super.onRead(e),this.host=e.readString("ascii"),this.port=e.readUInt32(),this.originatorIPAddress=e.readString("ascii"),this.originatorPort=e.readUInt32()}onWrite(e){super.onWrite(e),e.writeString(this.validateField(this.host,"host"),"ascii"),e.writeUInt32(this.validateField(this.port,"port")),e.writeString(this.originatorIPAddress||"","ascii"),e.writeUInt32(this.originatorPort||0)}toString(){return`${super.toString()} (host=${this.host} port=${this.port})`}}t.PortForwardChannelOpenMessage=i},9566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortForwardRequestMessage=void 0;const s=n(2727),i=n(3738);class r extends s.SessionRequestMessage{constructor(){super(),this.addressToBind="",this.port=0,this.requestType=i.PortForwardingService.portForwardRequestType,this.wantReply=!0}onRead(e){super.onRead(e),this.addressToBind=e.readString("ascii"),this.port=e.readUInt32()}onWrite(e){super.onWrite(e),e.writeString(this.validateField(this.addressToBind,"address"),"ascii"),e.writeUInt32(this.validateField(this.port,"port"))}toString(){return`${super.toString()} (addressToBind=${this.addressToBind} port=${this.port})`}}t.PortForwardRequestMessage=r},8842:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortForwardSuccessMessage=void 0;const s=n(2727);class i extends s.SessionRequestSuccessMessage{constructor(){super(...arguments),this.port=0}onRead(e){super.onRead(e),e.available>=4&&(this.port=e.readUInt32())}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.port,"port"))}toString(){return`${super.toString()} (port=${this.port})`}}t.PortForwardSuccessMessage=i},5270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultPortForwardMessageFactory=void 0;const s=n(2516),i=n(9566),r=n(8842);t.DefaultPortForwardMessageFactory=class{createRequestMessageAsync(e){return Promise.resolve(new i.PortForwardRequestMessage)}createSuccessMessageAsync(e){return Promise.resolve(new r.PortForwardSuccessMessage)}createChannelOpenMessageAsync(e){return Promise.resolve(new s.PortForwardChannelOpenMessage)}}},8258:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalPortForwarder=void 0;const s=n(2727),i=n(9998);class r extends s.SshService{constructor(e,t,n,s,i,r,o){super(t),this.pfs=e,this.channelType=n,this.localIPAddress=s,this.port=i,this.remoteHost=r,this.remotePort=null!=o?o:0!==i?i:void 0}get localPort(){return this.port}async startForwarding(e){var t;let n=this.localIPAddress;try{this.tcpListener=await this.pfs.tcpListenerFactory.createTcpListener(n,this.port,!0);const e=this.tcpListener.address();if(!(e.port>0))throw this.tcpListener.close(),new Error("Could not get server port.");if(this.port=e.port,"127.0.0.1"===this.localIPAddress||"0.0.0.0"===this.localIPAddress){n="0.0.0.0"===this.localIPAddress?"::":"::1";try{this.tcpListener2=await this.pfs.tcpListenerFactory.createTcpListener(n,this.port,!1)}catch(e){if(!(e instanceof Error)||"EADDRNOTAVAIL"!==e.code)throw e;this.trace(s.TraceLevel.Warning,s.SshTraceEventIds.portForwardServerListenFailed,`PortForwardingService failed to listen on ${n}:{this.port}: ${e.message}`,e)}}}catch(e){if(!(e instanceof Error))throw e;throw this.trace(s.TraceLevel.Error,s.SshTraceEventIds.portForwardServerListenFailed,`PortForwardingService failed to listen on ${n}:${this.port}: ${e.message}`,e),e}this.tcpListener.on("connection",this.acceptConnection.bind(this)),null===(t=this.tcpListener2)||void 0===t||t.on("connection",this.acceptConnection.bind(this)),this.trace(s.TraceLevel.Info,s.SshTraceEventIds.portForwardServerListening,`PortForwardingService listening on ${this.localIPAddress}:${this.port}.`),this.tcpListener2&&this.trace(s.TraceLevel.Info,s.SshTraceEventIds.portForwardServerListening,`PortForwardingService also listening on ${n}:${this.port}.`)}async acceptConnection(e){var t,n,r,o,a;let c;this.trace(s.TraceLevel.Info,s.SshTraceEventIds.portForwardConnectionAccepted,`PortForwardingService accepted connection from: ${e.remoteAddress} on port ${this.port}`);try{c=await this.pfs.openChannel(this.session,this.channelType,null!==(t=e.remoteAddress)&&void 0!==t?t:null,null!==(n=e.remotePort)&&void 0!==n?n:null,null!==(r=this.remoteHost)&&void 0!==r?r:this.localIPAddress,null!==(o=this.remotePort)&&void 0!==o?o:this.localPort)}catch(t){if(!(t instanceof Error))throw t;return void e.destroy()}const l=await this.pfs.forwardedPortConnecting(null!==(a=this.remotePort)&&void 0!==a?a:this.localPort,!1,new s.SshStream(c));if(!l)return;const u=new i.StreamForwarder(e,l,c.session.trace);this.pfs.streamForwarders.push(u)}dispose(){var e,t;null===(e=this.tcpListener)||void 0===e||e.close(),null===(t=this.tcpListener2)||void 0===t||t.close(),this.trace(s.TraceLevel.Info,s.SshTraceEventIds.portForwardServerListening,`PortForwardingService stopped listening on ${this.localIPAddress}:${this.port}.`),super.dispose()}}t.LocalPortForwarder=r},3738:function(e,t,n){"use strict";var s,i=this&&this.__decorate||function(e,t,n,s){var i,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.PortForwardingService=void 0;const r=n(2727),o=n(5844),a=n(3817),c=n(1678),l=n(5021),u=n(2516),h=n(9566),p=n(8842),d=n(7285),f=n(5270),m=n(8258),g=n(3427),v=n(8338),y=n(1074);let b=s=class extends r.SshService{constructor(e){super(e),this.localForwarders=new Map,this.remoteConnectors=new Map,this.streamForwarders=[],this.acceptLocalConnectionsForForwardedPorts=!0,this.forwardConnectionsToLocalPorts=!0,this.acceptRemoteConnectionsForNonForwardedPorts=!0,this.localForwardedPorts=new c.ForwardedPortsCollection,this.remoteForwardedPorts=new c.ForwardedPortsCollection,this.tcpListenerFactory=new d.DefaultTcpListenerFactory,this.messageFactory=new f.DefaultPortForwardMessageFactory,this.forwardedPortConnectingEmitter=new o.Emitter,this.onForwardedPortConnecting=this.forwardedPortConnectingEmitter.event}async forwardedPortConnecting(e,t,n,s){try{const i=new y.ForwardedPortConnectingEventArgs(e,t,n,s);if(this.forwardedPortConnectingEmitter.fire(i),i.transformPromise)return await i.transformPromise}catch(e){if(!(e instanceof Error))throw e;return this.trace(r.TraceLevel.Warning,r.SshTraceEventIds.portForwardConnectionFailed,`Forwarded port connecting event-handler failed: ${e.message}`),null}return n}async forwardFromRemotePort(e,t,n,s,i){const r="string"==typeof n?n:"127.0.0.1";if(void 0===s&&(s=t),!e)throw new TypeError("Remote IP address is required.");if(!Number.isInteger(t)||t<0)throw new TypeError("Remote port must be a non-negative integer.");if(!r)throw new TypeError("Local host is required.");if(!Number.isInteger(s)||s<=0)throw new TypeError("Local port must be a positive integer.");if(this.localForwardedPorts.find((e=>e.localPort===s)))throw new Error(`Local port ${s} is already forwarded.`);if(t>0&&this.localForwardedPorts.find((e=>e.remotePort===t)))throw new Error(`Remote port ${t} is already forwarded.`);const o=new g.RemotePortForwarder(this,this.session,e,t,r,s),c=await this.messageFactory.createRequestMessageAsync(t);if(!await o.request(c,i))return null;if(t=o.remotePort,this.remoteConnectors.has(t))return null;this.remoteConnectors.set(t,o);const l=new a.ForwardedPort(s,t,!1);return this.localForwardedPorts.addOrUpdatePort(l),o.onDisposed((()=>{this.localForwardedPorts.removePort(l),this.remoteConnectors.delete(t)})),o}async forwardToRemotePort(e,t,n,i,r){const o="string"==typeof n?n:"127.0.0.1";if(void 0===i&&(i=t),!e)throw new TypeError("Local IP address is required.");if(!Number.isInteger(t)||t<0)throw new TypeError("Local port must be a non-negative integer.");if(!o)throw new TypeError("Remote host is required.");if(!Number.isInteger(i)||i<=0)throw new TypeError("Remote port must be a positive integer.");if(this.localForwarders.has(i))throw new Error(`Port ${i} is already forwarded.`);const a=new m.LocalPortForwarder(this,this.session,s.reversePortForwardChannelType,e,t,o,i);return await a.startForwarding(r),this.localForwarders.set(i,a),a.onDisposed((()=>{this.localForwarders.delete(i)})),a}async streamFromRemotePort(e,t,n){if(!e)throw new TypeError("Remote IP address is required.");if(!Number.isInteger(t)||t<0)throw new TypeError("Remote port must be a non-negative integer.");const s=new v.RemotePortStreamer(this.session,e,t),i=await this.messageFactory.createRequestMessageAsync(t);if(!await s.request(i,n))return s.dispose(),null;t=s.remotePort,this.remoteConnectors.set(t,s);const r=new a.ForwardedPort(null,t,!1);return this.localForwardedPorts.addOrUpdatePort(r),s.onDisposed((()=>{this.localForwardedPorts.removePort(r),this.remoteConnectors.delete(t)})),s}async streamToRemotePort(e,t,n){if(!e)throw new TypeError("Remote host is required.");if(!Number.isInteger(t)||t<=0)throw new TypeError("Remote port must be a positive integer.");const i=await this.openChannel(this.session,s.reversePortForwardChannelType,null,null,e,t,n);return new r.SshStream(i)}async connectToForwardedPort(e,t){if(!Number.isInteger(e)||e<=0)throw new TypeError("Forwarded port must be a positive integer.");const n=await this.openChannel(this.session,s.portForwardChannelType,null,null,"127.0.0.1",e,t),i=await this.forwardedPortConnecting(e,!1,new r.SshStream(n),t);if(!i)throw n.close().catch((e=>{})),new r.SshChannelError("The connection to the forwarded port was rejected by the connecting event-handler.");return i}async waitForForwardedPort(e,t){if(this.remoteForwardedPorts.find((t=>t.remotePort===e)))return;const n=new r.PromiseCompletionSource;let s,i,o;t&&(s=t.onCancellationRequested((()=>n.reject(new r.CancellationError))));try{i=this.remoteForwardedPorts.onPortAdded((t=>{t.port.remotePort===e&&n.resolve()})),o=this.session.onClosed((()=>{n.reject(new r.ObjectDisposedError("The session was closed."))})),await n.promise}finally{null==i||i.dispose(),null==o||o.dispose(),null==s||s.dispose()}}async onSessionRequest(e,t){if(!e)throw new TypeError("Request is required.");if(e.requestType!==s.portForwardRequestType&&e.requestType!==s.cancelPortForwardRequestType)throw new Error(`Unexpected request type: ${e.requestType}`);const n=e.request.convertTo(new h.PortForwardRequestMessage),i=l.IPAddressConversions.fromSshAddress(n.addressToBind);if(e.requestType===s.portForwardRequestType&&0!==n.port&&this.localForwarders.has(n.port)){const t=`PortForwardingService port ${n.port} is already forwarded.`;return this.session.trace(r.TraceLevel.Verbose,r.SshTraceEventIds.portForwardRequestInvalid,t),void(e.isAuthorized=!1)}const o=new r.SshRequestEventArgs(e.requestType,n,this.session.principal);let c;await super.onSessionRequest(o,t);let u=null;if(o.isAuthorized)if(e.requestType===s.portForwardRequestType){try{u=await this.startForwarding(i,n.port,t)}catch(e){}if(null!==u){const e=0===n.port?u:n.port,t=await this.messageFactory.createSuccessMessageAsync(e);t.port=e,c=t}}else e.requestType===s.cancelPortForwardRequestType&&await this.cancelForwarding(n.port,t)&&(c=new r.SessionRequestSuccessMessage);if(e.responsePromise=Promise.resolve(null!=c?c:new r.SessionRequestFailureMessage),c instanceof p.PortForwardSuccessMessage){const e=new a.ForwardedPort(null!=u?u:c.port,c.port,!0);this.remoteForwardedPorts.addOrUpdatePort(e)}}async startForwarding(e,t,n){if("number"!=typeof t)throw new TypeError("Remote port must be an integer.");if(this.acceptLocalConnectionsForForwardedPorts){let i=t;const r=new m.LocalPortForwarder(this,this.session,s.portForwardChannelType,e,i,void 0,0===t?void 0:t);return await r.startForwarding(n),i=r.localPort,0===t&&(t=i),this.localForwarders.has(t)?(r.dispose(),null):(this.localForwarders.set(t,r),i=r.localPort,r.onDisposed((()=>{const e=new a.ForwardedPort(i,t,!0);this.remoteForwardedPorts.removePort(e),this.localForwarders.delete(t)})),i)}return 0!==t?t:null}async cancelForwarding(e,t){const n=this.localForwarders.get(e);if(n)return this.localForwarders.delete(e),n.dispose(),!0;const s=new a.ForwardedPort(e,e,!0);return!!this.remoteForwardedPorts.removePort(s)}async onChannelOpening(e,t){var n;if(!e)throw new TypeError("Request is required.");const i=e.request.channelType;if(i!==s.portForwardChannelType&&i!==s.reversePortForwardChannelType)return void(e.failureReason=r.SshChannelOpenFailureReason.unknownChannelType);let o=null;const c=e.request instanceof u.PortForwardChannelOpenMessage?e.request:e.request.convertTo(new u.PortForwardChannelOpenMessage);if(e.isRemoteRequest)if(i===s.portForwardChannelType){const t=`${l.IPAddressConversions.fromSshAddress(c.host)}:${c.port}`;if(o=null!==(n=this.remoteConnectors.get(c.port))&&void 0!==n?n:null,!o)return this.trace(r.TraceLevel.Error,r.SshTraceEventIds.portForwardRequestInvalid,`PortForwardingService received forwarding channel for ${t} that was not requested.`),e.failureReason=r.SshChannelOpenFailureReason.connectFailed,void(e.failureDescription="Forwarding channel was not requested.")}else if(!this.acceptRemoteConnectionsForNonForwardedPorts){const t="The session has disabled connections to non-forwarded ports.";return this.session.trace(r.TraceLevel.Warning,r.SshTraceEventIds.portForwardChannelOpenFailed,t),e.failureReason=r.SshChannelOpenFailureReason.administrativelyProhibited,void(e.failureDescription=t)}const h=new r.SshChannelOpeningEventArgs(c,e.channel,e.isRemoteRequest);if(await super.onChannelOpening(h,t),e.failureReason=h.failureReason,e.failureDescription=h.failureDescription,e.openingPromise=h.openingPromise,e.failureReason===r.SshChannelOpenFailureReason.none&&e.isRemoteRequest&&this.forwardConnectionsToLocalPorts)if(o){await o.onPortChannelOpening(e,t);const n=o instanceof g.RemotePortForwarder?o.localPort:null,s=o instanceof g.RemotePortForwarder?o.remotePort:c.port,i=new a.ForwardedPort(n,s,!1);this.localForwardedPorts.addChannel(i,e.channel)}else await g.RemotePortForwarder.forwardChannel(this,e,c.host,c.port,c.port,this.trace,t),e.failureReason!==r.SshChannelOpenFailureReason.none&&await e.channel.close(t)}async openChannel(e,t,n,i,o,a,c){let l;if(t===s.portForwardChannelType&&(l=this.remoteForwardedPorts.find((e=>e.remotePort===a||null===e.remotePort&&e.localPort===a)),!l))throw new Error(`Port ${a} is not being forwarded.`);const u=await this.messageFactory.createChannelOpenMessageAsync(a);u.channelType=t,u.originatorIPAddress=null!=n?n:"",u.originatorPort=null!=i?i:0,u.host=o,u.port=a;const h=this.session.trace;let p;try{p=await e.openChannel(u,null,c),h(r.TraceLevel.Info,r.SshTraceEventIds.portForwardChannelOpened,`PortForwardingService opened ${t} channel #${p.channelId} for ${o}:${a}.`)}catch(e){if(!(e instanceof Error))throw e;throw h(r.TraceLevel.Error,r.SshTraceEventIds.portForwardChannelOpenFailed,`PortForwardingService failed to open ${t} channel for ${o}:${a}: ${e.message}`,e),e}return t===s.portForwardChannelType&&this.remoteForwardedPorts.addChannel(l,p),p}dispose(){const e=[...this.localForwarders.values(),...this.remoteConnectors.values()];this.streamForwarders.splice(0,this.streamForwarders.length),this.localForwarders.clear(),this.remoteConnectors.clear();for(const t of e)t.dispose();super.dispose()}};b.portForwardRequestType="tcpip-forward",b.cancelPortForwardRequestType="cancel-tcpip-forward",b.portForwardChannelType="forwarded-tcpip",b.reversePortForwardChannelType="direct-tcpip",b=s=i([(0,r.serviceActivation)({sessionRequest:s.portForwardRequestType}),(0,r.serviceActivation)({sessionRequest:s.cancelPortForwardRequestType}),(0,r.serviceActivation)({channelType:s.portForwardChannelType}),(0,r.serviceActivation)({channelType:s.reversePortForwardChannelType})],b),t.PortForwardingService=b},1852:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemotePortConnector=void 0;const s=n(2727),i=n(9566),r=n(8842),o=n(3738);class a extends s.SshService{constructor(e,t,n){super(e),this.forwarding=!1,this.remoteIPAddress=t,this.port=n}get remotePort(){return this.port}async request(e,t){if(this.forwarding)throw new Error("Already forwarding.");e.addressToBind=this.remoteIPAddress,e.port=this.remotePort,e.wantReply=!0;const n=await this.session.requestResponse(e,r.PortForwardSuccessMessage,s.SessionRequestFailureMessage,t);let i=!1;return n instanceof r.PortForwardSuccessMessage&&(0!==n.port&&(this.port=n.port),i=!0),this.forwarding=i,i}dispose(){if(this.forwarding){this.forwarding=!1;const e=new i.PortForwardRequestMessage;e.requestType=o.PortForwardingService.cancelPortForwardRequestType,e.addressToBind=this.remoteIPAddress,e.port=this.remotePort,e.wantReply=!1;try{this.session.request(e).catch((e=>{}))}catch(e){}}super.dispose()}}t.RemotePortConnector=a},3427:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemotePortForwarder=void 0;const s=n(1808),i=n(2727),r=n(9998),o=n(1852);class a extends o.RemotePortConnector{constructor(e,t,n,s,i,r){super(t,n,s),this.pfs=e,this.localHost=i,this.localPort=r}async onPortChannelOpening(e,t){await a.forwardChannel(this.pfs,e,this.localHost,this.localPort,this.remotePort,this.trace,t)}static async forwardChannel(e,t,n,o,a,c,l){const u=t.channel,h=await e.forwardedPortConnecting(null!=a?a:o,!0,new i.SshStream(u),l);if(!h)return void(t.failureReason=i.SshChannelOpenFailureReason.connectFailed);const p=s.createConnection({host:n,port:o,autoSelectFamily:!0,autoSelectFamilyAttemptTimeout:"localhost"===n?10:250}),d=new i.PromiseCompletionSource,f=l?l.onCancellationRequested((()=>p.destroy(new Error("Cancelled.")))):null;try{p.once("connect",(()=>{d.resolve()})),p.once("error",(e=>{d.reject(e)})),await d.promise}catch(e){if(!(e instanceof Error)||(null==l?void 0:l.isCancellationRequested))throw e;c(i.TraceLevel.Warning,i.SshTraceEventIds.portForwardConnectionFailed,`PortForwardingService connection to ${n}:${o} failed: ${e.message}`,e),t.failureReason=i.SshChannelOpenFailureReason.connectFailed,t.failureDescription=e.message}finally{null==f||f.dispose()}const m=new r.StreamForwarder(p,h,u.session.trace);c(i.TraceLevel.Info,i.SshTraceEventIds.portForwardConnectionOpened,`${u.session} PortForwardingService forwarded channel #${u.channelId} connection to ${n}:${o}.`),e.streamForwarders.push(m)}}t.RemotePortForwarder=a},8338:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemotePortStreamer=void 0;const s=n(5844),i=n(2727),r=n(1852);class o extends r.RemotePortConnector{constructor(e,t,n){super(e,t,n),this.streamOpenedEmitter=new s.Emitter,this.onStreamOpened=this.streamOpenedEmitter.event}async onPortChannelOpening(e,t){const n=new i.SshStream(e.channel);this.streamOpenedEmitter.fire(n)}}t.RemotePortStreamer=o},9998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamForwarder=void 0;const s=n(2727),i=n(1808);t.StreamForwarder=class{constructor(e,t,n){if(this.localStream=e,this.remoteStream=t,this.trace=n,this.disposed=!1,!e)throw new TypeError("Local stream is required.");if(!t)throw new TypeError("Remote stream is required.");e.pipe(t),t.pipe(e)}close(e,t){try{e&&this.localStream instanceof i.Socket?this.localStream.destroy():this.localStream.end(),this.remoteStream instanceof s.SshStream?this.remoteStream.channel.close("SIGABRT",t).catch((e=>{})):this.remoteStream.end(),this.trace(s.TraceLevel.Verbose,s.SshTraceEventIds.portForwardChannelClosed,`Stream forwarder ${e?"aborted":"closed"} connection.`)}catch(e){if(!(e instanceof Error))throw e;this.trace(s.TraceLevel.Warning,s.SshTraceEventIds.unknownError,`Stream forwarder unexpected error closing connection:  ${e.message}`)}}dispose(){this.disposed||(this.disposed=!0,this.close(!0))}}},7178:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshClient=void 0;const s=n(1808),i=n(2727);class r{constructor(e){if(this.config=e,this.sessions=[],this.trace=(e,t,n,s)=>{},!e)throw new TypeError("SshSessionConfiguration is required.")}async openSession(e,t,n){if(!e)throw new TypeError("Server host is reqiured.");const s=await this.openConnection(e,t,n),r=new i.SshClientSession(this.config);return r.trace=this.trace,await r.connect(s,n),this.sessions.push(r),r}async openConnection(e,t,n){const o=new s.Socket;return await new Promise(((s,a)=>{if(o.on("connect",s),o.on("error",a),n){if(n.isCancellationRequested)return void a(new i.CancellationError);n.onCancellationRequested(a)}o.connect(t||r.defaultServerPort,e)})),new i.NodeStream(o)}async reconnectSession(e,t,n,s){const i=await this.openConnection(t,n,s);await e.reconnect(i,s)}dispose(){for(;this.sessions.length>0;)this.sessions.shift().dispose()}}t.SshClient=r,r.defaultServerPort=22},9340:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshServer=void 0;const s=n(5844),i=n(2727),r=n(7285);t.SshServer=class{constructor(e){if(this.config=e,this.sessions=[],this.trace=(e,t,n,s)=>{},this.errorEmitter=new s.Emitter,this.onError=this.errorEmitter.event,this.sessionOpenedEmitter=new s.Emitter,this.onSessionOpened=this.sessionOpenedEmitter.event,this.credentials={publicKeys:[]},this.tcpListenerFactory=new r.DefaultTcpListenerFactory,!e)throw new TypeError("SshSessionConfiguration is required.");e.protocolExtensions.includes(i.SshProtocolExtensionNames.sessionReconnect)&&(this.reconnectableSessions=[])}async acceptSessions(e,t){t||(t="0.0.0.0");const n="0.0.0.0"===t?"port ":t+":";try{this.tcpListener=await this.tcpListenerFactory.createTcpListener(t,e,!1)}catch(t){if(!(t instanceof Error))throw t;throw this.trace(i.TraceLevel.Error,i.SshTraceEventIds.serverListenFailed,`SshServer failed to listen on ${n}${e}: ${t.message}`,t),t}this.tcpListener.addListener("connection",this.acceptSession.bind(this)),this.trace(i.TraceLevel.Info,i.SshTraceEventIds.serverListening,`SshServer listening on ${n}${e}.`)}async acceptConnection(e){return e.setNoDelay(!0),new i.NodeStream(e)}async acceptSession(e){this.trace(i.TraceLevel.Info,i.SshTraceEventIds.serverClientConnected,"SshServer client connected.");const t=await this.acceptConnection(e),n=new i.SshServerSession(this.config,this.reconnectableSessions);n.trace=this.trace,n.credentials=this.credentials,this.sessions.push(n),n.onClosed((e=>{const t=this.sessions.indexOf(n);t>=0&&this.sessions.splice(t,1)})),this.sessionOpenedEmitter.fire(n);try{await n.connect(t)}catch(e){if(!(e instanceof Error))throw e;e instanceof i.SshConnectionError?await n.close(e.reason||i.SshDisconnectReason.connectionLost,e.message,e):await n.close(i.SshDisconnectReason.protocolError,e.message,e),this.errorEmitter.fire(e)}}dispose(){var e;null===(e=this.tcpListener)||void 0===e||e.close()}}},7285:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTcpListenerFactory=void 0;const s=n(1808);t.DefaultTcpListenerFactory=class{async createTcpListener(e,t,n,i){if(!e)throw new TypeError("Local IP address is required.");if(!Number.isInteger(t)||t<0)throw new TypeError("Local port must be a non-negative integer.");const r=s.createServer();return await new Promise(((n,i)=>{r.listen({host:e,port:t,ipv6Only:s.isIPv6(e),exclusive:!1}),r.on("listening",n),r.on("error",i)})),r}}},3926:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.curves=void 0,t.curves=[{shortName:"P-256",name:"nistp256",oid:"1.2.840.10045.3.1.7",keySize:256},{shortName:"P-384",name:"nistp384",oid:"1.3.132.0.34",keySize:384},{shortName:"P-521",name:"nistp521",oid:"1.3.132.0.35",keySize:521}]},3687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionAlgorithm=void 0,t.EncryptionAlgorithm=class{constructor(e){this.name=e}}},4953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HmacAlgorithm=void 0,t.HmacAlgorithm=class{constructor(e,t,n,s){this.name=e,this.algorithmName=t,this.keyLength=n,this.digestLength=s}}},1263:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyExchangeAlgorithm=void 0,t.KeyExchangeAlgorithm=class{constructor(e,t,n,s){this.name=e,this.keySizeInBits=t,this.hashAlgorithmName=n,this.hashDigestLength=s}}},2185:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sec1KeyFormatter=t.Pkcs1KeyFormatter=t.parsePem=t.formatPem=void 0;const s=n(3380),i=n(4918),r=n(3926);t.formatPem=function(e,t){return`-----BEGIN ${t}-----\n`+e.toString("base64").match(/.{1,64}/g).join("\n")+"\n"+`-----END ${t}-----\n`},t.parsePem=function(e){const t=e.replace(/-+[^-\n]+KEY-+/g,"").replace(/\s/g,"");return Buffer.from(t,"base64")},t.Pkcs1KeyFormatter=class{static formatRsaPublic(e){const t=new i.DerWriter(Buffer.alloc(1024));return t.writeInteger(e.modulus),t.writeInteger(e.exponent),t.toBuffer()}static formatRsaPrivate(e){if(!(e.d&&e.p&&e.q&&e.dp&&e.dq&&e.qi))throw new Error("Missing private key parameters.");const t=new i.DerWriter(Buffer.alloc(2048));return t.writeInteger(s.BigInt.fromInt32(0)),t.writeInteger(e.modulus),t.writeInteger(e.exponent),t.writeInteger(e.d),t.writeInteger(e.p),t.writeInteger(e.q),t.writeInteger(e.dp),t.writeInteger(e.dq),t.writeInteger(e.qi),t.toBuffer()}static parseRsaPublic(e){const t=new i.DerReader(e);return{modulus:t.readInteger(),exponent:t.readInteger()}}static parseRsaPrivate(e){const t=new i.DerReader(e);return t.readInteger(),{modulus:t.readInteger(),exponent:t.readInteger(),d:t.readInteger(),p:t.readInteger(),q:t.readInteger(),dp:t.readInteger(),dq:t.readInteger(),qi:t.readInteger()}}};class o{static formatECPublic(e){const t=r.curves.find((t=>t.oid===e.curve.oid)),n=Math.ceil(t.keySize/8),s=new i.DerWriter(Buffer.alloc(512)),a=new i.DerWriter(Buffer.alloc(100));a.writeObjectIdentifier(o.ecPublicKeyOid),a.writeObjectIdentifier(e.curve.oid),s.writeSequence(a);const c=e.x.toBytes({unsigned:!0,length:n}),l=e.y.toBytes({unsigned:!0,length:n}),u=Buffer.alloc(1+c.length+l.length);return u[0]=4,c.copy(u,1),l.copy(u,1+c.length),s.writeBitString(u),s.toBuffer()}static formatECPrivate(e){const t=r.curves.find((t=>t.oid===e.curve.oid)),n=Math.ceil(t.keySize/8),o=new i.DerWriter(Buffer.alloc(512));o.writeInteger(s.BigInt.fromInt32(1)),o.writeOctetString(e.d.toBytes({unsigned:!0,length:n}));const a=new i.DerWriter(Buffer.alloc(100));a.writeObjectIdentifier(e.curve.oid),o.writeTagged(0,a);const c=e.x.toBytes({unsigned:!0,length:n}),l=e.y.toBytes({unsigned:!0,length:n}),u=Buffer.alloc(1+c.length+l.length);u[0]=4,c.copy(u,1),l.copy(u,1+c.length);const h=new i.DerWriter(Buffer.alloc(512));return h.writeBitString(u),o.writeTagged(1,h),o.toBuffer()}static parseECPublic(e){var t;const n=new i.DerReader(e),a=n.readSequence(),c=a.readObjectIdentifier();if(c!==o.ecPublicKeyOid)throw new Error(`Unexpected key type OID: ${c}`);const l=a.readObjectIdentifier(),u=null===(t=r.curves.find((e=>e.oid===l)))||void 0===t?void 0:t.name,h=n.readBitString();if(h.length%2!=1)throw new Error(`Unexpected key data length: ${h.length}`);const p=s.BigInt.fromBytes(h.slice(1,1+(h.length-1)/2),{unsigned:!0}),d=s.BigInt.fromBytes(h.slice(1+(h.length-1)/2),{unsigned:!0});return{curve:{name:u,oid:l},x:p,y:d}}static parseECPrivate(e){var t;const n=new i.DerReader(e),o=n.readInteger().toInt32();if(1!==o)throw new Error(`Unsupported SEC1 format version: ${o}`);const a=s.BigInt.fromBytes(n.readOctetString(),{unsigned:!0}),c=n.tryReadTagged(0);if(!c)throw new Error("SEC1 curve info not found.");const l=c.readObjectIdentifier(),u=null===(t=r.curves.find((e=>e.oid===l)))||void 0===t?void 0:t.name,h=n.tryReadTagged(1);if(!h)throw new Error("SEC1 public key data not found.");const p=h.readBitString();if(p.length%2!=1)throw new Error(`Unexpected key data length: ${p.length}`);const d=s.BigInt.fromBytes(p.slice(1,1+(p.length-1)/2),{unsigned:!0}),f=s.BigInt.fromBytes(p.slice(1+(p.length-1)/2),{unsigned:!0});return{curve:{name:u,oid:l},x:d,y:f,d:a}}}t.Sec1KeyFormatter=o,o.ecPublicKeyOid="1.2.840.10045.2.1"},1579:(e,t,n)=>{"use strict";t.b=void 0;const s=n(6113),i=n(4300),r=n(7103),o=n(3926),a=n(3380),c=n(4918),l=n(7309),u=n(2185),h=process.versions.node.split(".").map((e=>parseInt(e,10))),p=h[0]>10||10===h[0]&&h[1]>=12,d=h[0]>11||11===h[0]&&h[1]>=6;class f{constructor(e){this.comment=null,e&&(this.algorithmName=e)}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return this.algorithmName}get algorithmName(){return this.algorithm}set algorithmName(e){const t=e.split("-")[2];if(this.curve=o.curves.find((e=>e.name===t)),!this.curve)throw new Error("Invalid or unsupported ECDSA algorithm: "+e);this.algorithm=e}generate(){return p&&d?this.generateNodeKeyPairObjects():p?this.generateNodeKeyPairBuffers():this.generateExternalKeyPair()}async generateNodeKeyPairObjects(){[this.publicKey,this.privateKey]=await new Promise(((e,t)=>{const n={namedCurve:this.curve.shortName};try{s.generateKeyPair("ec",n,((n,s,i)=>{n?t(n):e([s,i])}))}catch(e){t(e)}}))}async generateNodeKeyPairBuffers(){[this.publicKey,this.privateKey]=await new Promise(((e,t)=>{const n={namedCurve:this.curve.shortName,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"sec1",format:"pem",cipher:void 0,passphrase:void 0}};try{s.generateKeyPair("ec",n,((n,s,i)=>{n?t(n):e([s,i])}))}catch(e){t(e)}}))}async generateExternalKeyPair(){throw new Error("This version of node does not support generating key pairs. Use node >= 10.12.")}async setPublicKeyBytes(e,t){if(!e)throw new TypeError("Buffer is required.");const n=new l.SshDataReader(e),i=n.readString("ascii");this.algorithmName=t||i;const r=n.readString("ascii");this.algorithmName=`ecdsa-sha2-${r}`;const o=n.readBinary(),c=a.BigInt.fromBytes(o.slice(1,1+(o.length-1)/2),{unsigned:!0}),h=a.BigInt.fromBytes(o.slice(1+(o.length-1)/2),{unsigned:!0}),p=u.Sec1KeyFormatter.formatECPublic({curve:{name:this.curve.name,oid:this.curve.oid},x:c,y:h});this.publicKey=d?s.createPublicKey({key:p,type:"spki",format:"der"}):(0,u.formatPem)(p,"PUBLIC KEY")}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;t="string"==typeof this.publicKey?(0,u.parsePem)(this.publicKey):this.publicKey.export({type:"spki",format:"der"});const n=u.Sec1KeyFormatter.parseECPublic(t);e=e||this.algorithmName||this.keyAlgorithmName;const s=new l.SshDataWriter(i.Buffer.alloc(512));s.writeString(e,"ascii"),s.writeString(this.curve.name,"ascii");const r=Math.ceil(this.curve.keySize/8),o=n.x.toBytes({unsigned:!0,length:r}),a=n.y.toBytes({unsigned:!0,length:r});return s.writeUInt32(1+o.length+a.length),s.writeByte(4),s.write(o),s.write(a),s.toBuffer()}async importParameters(e){if(!e.curve)throw new TypeError("A curve is required.");let t;if(e.curve.oid){if(t=o.curves.find((t=>t.oid===e.curve.oid)),!t)throw new Error(`Unsupported curve OID: ${e.curve.oid}`)}else{if(!e.curve.name)throw new TypeError("A curve OID or name is required.");if(t=o.curves.find((t=>t.name===e.curve.name)),!t)throw new Error(`Unsupported curve: ${e.curve.name}`)}this.algorithmName="ecdsa-sha2-"+t.name;const n=u.Sec1KeyFormatter.formatECPublic(e);if(this.publicKey=d?s.createPublicKey({key:n,type:"spki",format:"der"}):(0,u.formatPem)(n,"EC PUBLIC KEY"),e.d){const t=u.Sec1KeyFormatter.formatECPrivate(e);this.privateKey=d?s.createPrivateKey({key:t,type:"sec1",format:"der"}):(0,u.formatPem)(t,"EC PRIVATE KEY")}else this.privateKey=void 0}async exportParameters(){var e,t;if(!this.publicKey)throw new Error("Key is not present.");let n;return n="string"==typeof this.publicKey?(0,u.parsePem)(null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey):(null!==(t=this.privateKey)&&void 0!==t?t:this.publicKey).export({type:this.privateKey?"sec1":"spki",format:"der"}),this.privateKey?u.Sec1KeyFormatter.parseECPrivate(n):u.Sec1KeyFormatter.parseECPublic(n)}dispose(){}}class m extends r.PublicKeyAlgorithm{constructor(e,t){super(e,e,t)}createKeyPair(){return new f(this.name)}async generateKeyPair(){const e=new f(this.name);return await e.generate(),e}createSigner(e){if(!(e instanceof f))throw new TypeError("ECDSA key pair object expected.");return new g(e,m.convertHashAlgorithmName(this.hashAlgorithmName))}createVerifier(e){if(!(e instanceof f))throw new TypeError("ECDSA key pair object expected.");return new g(e,m.convertHashAlgorithmName(this.hashAlgorithmName))}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA")}static getSignatureLength(e){return 2*(5+Math.ceil(e/8))}}t.b=m,m.ecdsaSha2Nistp256="ecdsa-sha2-nistp256",m.ecdsaSha2Nistp384="ecdsa-sha2-nistp384",m.ecdsaSha2Nistp521="ecdsa-sha2-nistp521",m.curves=o.curves,m.KeyPair=f;class g{constructor(e,t){this.keyPair=e,this.hashAlgorithmName=t}get digestLength(){const e=this.keyPair.curve;return e?m.getSignatureLength(e.keySize):0}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");const t=s.createSign(this.hashAlgorithmName);t.update(e);let n=t.sign(this.keyPair.privateKey);const r=new c.DerReader(n),o=r.readInteger(),a=r.readInteger(),u=Math.ceil(this.keyPair.curve.keySize/8),h=new l.SshDataWriter(i.Buffer.alloc(this.digestLength));return h.writeBinary(o.toBytes({unsigned:!0,length:u+1})),h.writeBinary(a.toBytes({unsigned:!0,length:u+1})),n=h.toBuffer(),n}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");const n=new l.SshDataReader(t),r=n.readBigInt(),o=n.readBigInt(),a=new c.DerWriter(i.Buffer.alloc(t.length));a.writeInteger(r),a.writeInteger(o),t=a.toBuffer();const u=s.createVerify(this.hashAlgorithmName);return u.update(e),u.verify(this.keyPair.publicKey,t)}dispose(){}}},5361:(e,t,n)=>{"use strict";t.r=void 0;const s=n(6113),i=n(4300),r=n(3687);class o extends r.EncryptionAlgorithm{constructor(e,t,n,s){if(super(e),this.algorithmName=t,this.cipherMode=n,this.keySizeInBits=s,"AES"!==t)throw new Error(`Unsupported encryption algorithm: ${t}`);this.blockSizeInBits=o.getBlockSize(t)}get keyLength(){return this.keySizeInBits/8}get blockLength(){return this.blockSizeInBits/8}async createCipher(e,t,n){let s;if("CTR"===this.cipherMode||"CBC"===this.cipherMode)s=new a(e,this.keySizeInBits,this.blockSizeInBits,t,n,this.cipherMode);else{if("GCM"!==this.cipherMode)throw new Error(`Unsupported cipher mode: ${this.cipherMode}`);s=new c(e,this.keySizeInBits,this.blockSizeInBits,t,n)}return s}static getBlockSize(e){if("AES"===e)return 128;throw new Error(`Unsupported encryption algorithm: ${e}`)}}t.r=o;class a{constructor(e,t,n,i,r,o){this.isEncryption=e,this.keySizeInBits=t,this.blockSizeInBits=n;const a=`AES-${this.keySizeInBits}-${o}`;this.cipher=this.isEncryption?s.createCipheriv(a,i,r):s.createDecipheriv(a,i,r),this.cipher.setAutoPadding(!1)}get blockLength(){return this.blockSizeInBits/8}transform(e){const t=this.cipher.update(e);if(t.length!==e.length){const n=`Result from encrypt/decrypt has invalid length ${t.length}, expected ${e.length}.`;throw new Error(n)}return Promise.resolve(t)}dispose(){}}class c{constructor(e,t,n,s,r){this.isEncryption=e,this.keySizeInBits=t,this.blockSizeInBits=n,this.tag=null,this.algorithmName=`aes-${this.keySizeInBits}-gcm`,this.key=i.Buffer.alloc(s.length),s.copy(this.key),this.nonce=i.Buffer.alloc(12),r.copy(this.nonce,0,0,12),this.associatedData=i.Buffer.alloc(4)}get blockLength(){return this.blockSizeInBits/8}get digestLength(){return 16}get authenticatedEncryption(){return!0}transform(e){if(e.length%this.blockLength!=0){const t=`Encrypt/decrypt input has invalid length ${e.length}, not a multiple of block size ${this.blockLength}.`;throw new Error(t)}const t=this.isEncryption?s.createCipheriv(this.algorithmName,this.key,this.nonce):s.createDecipheriv(this.algorithmName,this.key,this.nonce),n=e.length;if(this.associatedData[0]=n>>>24,this.associatedData[1]=n>>>16,this.associatedData[2]=n>>>8,this.associatedData[3]=n,t.setAAD(this.associatedData),!this.isEncryption){if(!this.tag)throw new Error("AES-GCM tag was not set before decrypting.");t.setAuthTag(this.tag)}const i=t.update(e);if(i.length!==e.length){const t=`Result from encrypt/decrypt has invalid length ${i.length}, expected ${e.length}.`;throw new Error(t)}t.final(),this.isEncryption?this.tag=t.getAuthTag():this.tag=null;let r=12;for(;--r>=4&&(this.nonce[r]++,0===this.nonce[r]););return Promise.resolve(i)}async sign(e){if(!this.tag)throw new Error("AES-GCM tag was not obtained by encrypting.");return this.tag}async verify(e,t){if(t.length!==this.digestLength)throw new Error("Incorrect AES-GCM tag length.");return this.tag=t,!0}dispose(){}}},9582:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHmac=void 0;const s=n(6113),i=n(4300),r=n(4953);class o extends r.HmacAlgorithm{constructor(e,t,n=!1){super(e,t,o.getHashKeyLength(t),o.getHashDigestLength(t)),this.encryptThenMac=n}async createSigner(e){return new a(o.getNodeHashAlgorithmName(this.algorithmName),this.digestLength,this.encryptThenMac,e)}async createVerifier(e){return new a(o.getNodeHashAlgorithmName(this.algorithmName),this.digestLength,this.encryptThenMac,e)}static getHashKeyLength(e){if("SHA2-512"===e)return 64;if("SHA2-384"===e)return 48;if("SHA2-256"===e)return 32;throw new Error(`Unsupported hash algorithm: ${e}`)}static getHashDigestLength(e){return this.getHashKeyLength(e)}static getNodeHashAlgorithmName(e){if("SHA2-512"===e)return"sha512";if("SHA2-384"===e)return"sha384";if("SHA2-256"===e)return"sha256";throw new Error(`Unsupported hash algorithm: ${e}`)}}t.NodeHmac=o;class a{constructor(e,t,n,r){this.algorithmName=e,this.digestLength=t,this.encryptThenMac=n,this.key=s.createSecretKey?s.createSecretKey(r):i.Buffer.from(r)}async sign(e){const t=s.createHmac(this.algorithmName,this.key);return t.update(e),t.digest()}async verify(e,t){const n=s.createHmac(this.algorithmName,this.key);return n.update(e),n.digest().equals(t)}dispose(){}}},1820:(e,t,n)=>{"use strict";t.th=t.yk=void 0;const s=n(6113),i=n(4300),r=n(1263),o=n(9582),a=n(3380);class c extends r.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.NodeHmac.getHashDigestLength(n))}createKeyExchange(){return new l(this.keySizeInBits,o.NodeHmac.getNodeHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.yk=c;class l{constructor(e,t,n){switch(this.hashAlgorithmName=t,this.digestLength=n,e){case 1024:this.dh=s.getDiffieHellman("modp2");break;case 2048:this.dh=s.getDiffieHellman("modp14");break;case 4096:this.dh=s.getDiffieHellman("modp16");break;default:throw new Error("Invalid DH bit length.")}}startKeyExchange(){const e=this.dh.generateKeys(),t=a.BigInt.fromBytes(e,{unsigned:!0}).toBytes();return Promise.resolve(t)}decryptKeyExchange(e){const t=this.dh.computeSecret(e),n=a.BigInt.fromBytes(t,{unsigned:!0}).toBytes();return Promise.resolve(n)}async sign(e){const t=s.createHash(this.hashAlgorithmName);return t.update(e),i.Buffer.from(t.digest())}dispose(){}}class u extends r.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.NodeHmac.getHashDigestLength(n))}createKeyExchange(){return new h(this.keySizeInBits,o.NodeHmac.getNodeHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.th=u;class h{constructor(e,t,n){switch(this.hashAlgorithmName=t,this.digestLength=n,e){case 256:this.ecdh=s.createECDH("prime256v1");break;case 384:this.ecdh=s.createECDH("secp384r1");break;case 521:this.ecdh=s.createECDH("secp521r1");break;default:throw new Error("Invalid ECDH bit length.")}}startKeyExchange(){const e=this.ecdh.generateKeys();return Promise.resolve(e)}decryptKeyExchange(e){const t=this.ecdh.computeSecret(e),n=a.BigInt.fromBytes(t,{unsigned:!0}).toBytes();return Promise.resolve(n)}async sign(e){const t=s.createHash(this.hashAlgorithmName);return t.update(e),i.Buffer.from(t.digest())}dispose(){}}},5670:(e,t,n)=>{"use strict";t.e=void 0;const s=n(6113);t.e=class{getBytes(e){s.randomBytes(e.length).copy(e)}}},4245:(e,t,n)=>{"use strict";t.G=void 0;const s=n(6113),i=n(4300),r=n(7103),o=n(7309),a=n(9582),c=n(2185),l=process.versions.node.split(".").map((e=>parseInt(e,10))),u=l[0]>10||10===l[0]&&l[1]>=12,h=l[0]>11||11===l[0]&&l[1]>=6;class p{constructor(){this.comment=null}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return d.keyAlgorithmName}generate(e){return e=null!=e?e:p.defaultKeySize,u&&h?this.generateNodeKeyPairObjects(e):u?this.generateNodeKeyPairBuffers(e):this.generateExternalKeyPair(e)}async generateNodeKeyPairObjects(e){[this.publicKey,this.privateKey]=await new Promise(((t,n)=>{const i={modulusLength:e};try{s.generateKeyPair("rsa",i,((e,s,i)=>{e?n(e):t([s,i])}))}catch(e){n(e)}}))}async generateNodeKeyPairBuffers(e){[this.publicKey,this.privateKey]=await new Promise(((t,n)=>{const i={modulusLength:e,publicKeyEncoding:{type:"pkcs1",format:"pem"},privateKeyEncoding:{type:"pkcs1",format:"pem",cipher:void 0,passphrase:void 0}};try{s.generateKeyPair("rsa",i,((e,s,i)=>{e?n(e):t([s,i])}))}catch(e){n(e)}}))}async generateExternalKeyPair(e){const t=new(await Promise.resolve().then((()=>n(4024))))({b:e});this.publicKey=t.exportKey("pkcs1-public-pem"),this.privateKey=t.exportKey("pkcs1-private-pem"),this.publicKey.endsWith("\n")||(this.publicKey+="\n"),this.privateKey.endsWith("\n")||(this.privateKey+="\n")}async setPublicKeyBytes(e){if(!e)throw new TypeError("Buffer is required.");const t=new o.SshDataReader(e),n=t.readString("ascii");if(n!==this.keyAlgorithmName&&n!==d.rsaWithSha256&&n!==d.rsaWithSha512)throw new Error(`Invalid RSA key algorithm: ${n}`);const i=t.readBigInt(),r=t.readBigInt();e=c.Pkcs1KeyFormatter.formatRsaPublic({modulus:r,exponent:i}),this.publicKey=h?s.createPublicKey({key:e,type:"pkcs1",format:"der"}):(0,c.formatPem)(e,"RSA PUBLIC KEY")}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;e||(e=this.keyAlgorithmName),t="string"==typeof this.publicKey?(0,c.parsePem)(this.publicKey):this.publicKey.export({type:"pkcs1",format:"der"});const n=c.Pkcs1KeyFormatter.parseRsaPublic(t),s=i.Buffer.alloc(512),r=new o.SshDataWriter(s);return r.writeString(e,"ascii"),r.writeBigInt(n.exponent),r.writeBigInt(n.modulus),t=r.toBuffer(),t}async importParameters(e){if(h)this.publicKey=s.createPublicKey({key:c.Pkcs1KeyFormatter.formatRsaPublic(e),format:"der",type:"pkcs1"}),e.d?this.privateKey=s.createPrivateKey({key:c.Pkcs1KeyFormatter.formatRsaPrivate(e),format:"der",type:"pkcs1"}):this.privateKey=void 0;else{const t=c.Pkcs1KeyFormatter.formatRsaPublic(e);if(this.publicKey=(0,c.formatPem)(t,"RSA PUBLIC KEY"),e.d){const t=c.Pkcs1KeyFormatter.formatRsaPrivate(e);this.privateKey=(0,c.formatPem)(t,"RSA PRIVATE KEY")}}}async exportParameters(){var e,t;if(!this.publicKey)throw new Error("Public key not set.");let n;return n=h?(null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey).export({format:"der",type:"pkcs1"}):(0,c.parsePem)(null!==(t=this.privateKey)&&void 0!==t?t:this.publicKey),this.privateKey?c.Pkcs1KeyFormatter.parseRsaPrivate(n):c.Pkcs1KeyFormatter.parseRsaPublic(n)}dispose(){this.publicKey=void 0,this.privateKey=void 0}}p.defaultKeySize=2048;class d extends r.PublicKeyAlgorithm{constructor(e,t){super(e,d.keyAlgorithmName,t)}createKeyPair(){return new p}async generateKeyPair(e){const t=new p;return await t.generate(e),t}createSigner(e){if(!(e instanceof p))throw new TypeError("RSA key pair object expected.");return new f(e,d.convertHashAlgorithmName(this.hashAlgorithmName),a.NodeHmac.getHashDigestLength(this.hashAlgorithmName))}createVerifier(e){if(!(e instanceof p))throw new TypeError("RSA key pair object expected.");return new f(e,d.convertHashAlgorithmName(this.hashAlgorithmName),a.NodeHmac.getHashDigestLength(this.hashAlgorithmName))}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA")}}t.G=d,d.keyAlgorithmName="ssh-rsa",d.rsaWithSha256="rsa-sha2-256",d.rsaWithSha512="rsa-sha2-512",d.KeyPair=p;class f{constructor(e,t,n){this.keyPair=e,this.hashAlgorithmName=t,this.digestLength=n}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");const t=s.createSign(this.hashAlgorithmName);return t.update(e),t.sign(this.keyPair.privateKey)}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");const n=s.createVerify(this.hashAlgorithmName);return n.update(e),n.verify(this.keyPair.publicKey,t)}dispose(){}}},7103:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKeyAlgorithm=void 0;const s=n(4300),i=n(7309);t.PublicKeyAlgorithm=class{constructor(e,t,n){this.name=e,this.keyAlgorithmName=t,this.hashAlgorithmName=n}readSignatureData(e){const t=new i.SshDataReader(e),n=t.readString("ascii");if(n!==this.name)throw new Error(`Mismatched public key algorithm: got '${n}', expected '${this.name}'.`);return t.readBinary()}createSignatureData(e){const t=new i.SshDataWriter(s.Buffer.alloc(this.name.length+e.length+20));return t.writeString(this.name,"ascii"),t.writeBinary(e),t.toBuffer()}}},7521:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.algorithmNames=t.SshAlgorithms=t.Encryption=t.ECDsa=t.Rsa=t.HmacAlgorithm=t.EncryptionAlgorithm=t.PublicKeyAlgorithm=t.KeyExchangeAlgorithm=void 0;const s=n(1263);Object.defineProperty(t,"KeyExchangeAlgorithm",{enumerable:!0,get:function(){return s.KeyExchangeAlgorithm}});const i=n(7103);Object.defineProperty(t,"PublicKeyAlgorithm",{enumerable:!0,get:function(){return i.PublicKeyAlgorithm}});const r=n(3687);Object.defineProperty(t,"EncryptionAlgorithm",{enumerable:!0,get:function(){return r.EncryptionAlgorithm}});const o=n(4953);Object.defineProperty(t,"HmacAlgorithm",{enumerable:!0,get:function(){return o.HmacAlgorithm}});const a="object"==typeof self&&!("object"!=typeof crypto||!crypto.subtle),c=n(9297),l=n(787),u=n(6205),h=n(8159),p=n(3175),d=n(8682),f=a?c.WebDiffieHellman:n(1820).yk,m=a?c.WebECDiffieHellman:n(1820).th,g=a?l.WebRsa:n(4245).G;t.Rsa=g;const v=a?u.WebECDsa:n(1579).b;t.ECDsa=v;const y=a?h.WebEncryption:n(5361).r;t.Encryption=y;const b=a?p.WebHmac:n(9582).NodeHmac,w=a?d.WebRandom:n(5670).e;class S{}t.SshAlgorithms=S,S.keyExchange={none:null,dhGroup14Sha256:new f("diffie-hellman-group14-sha256",2048,"SHA2-256"),dhGroup16Sha512:new f("diffie-hellman-group16-sha512",4096,"SHA2-512"),ecdhNistp256Sha256:new m("ecdh-sha2-nistp256",256,"SHA2-256"),ecdhNistp384Sha384:new m("ecdh-sha2-nistp384",384,"SHA2-384"),ecdhNistp521Sha512:new m("ecdh-sha2-nistp521",521,"SHA2-512")},S.publicKey={none:null,rsaWithSha256:new g("rsa-sha2-256","SHA2-256"),rsaWithSha512:new g("rsa-sha2-512","SHA2-512"),ecdsaSha2Nistp256:new v("ecdsa-sha2-nistp256","SHA2-256"),ecdsaSha2Nistp384:new v("ecdsa-sha2-nistp384","SHA2-384"),ecdsaSha2Nistp521:new v("ecdsa-sha2-nistp521","SHA2-512")},S.encryption={none:null,aes256Ctr:new y("aes256-ctr","AES","CTR",256),aes256Gcm:new y("aes256-gcm@openssh.com","AES","GCM",256)},S.hmac={none:null,hmacSha256:new b("hmac-sha2-256","SHA2-256"),hmacSha512:new b("hmac-sha2-512","SHA2-512"),hmacSha256Etm:new b("hmac-sha2-256-etm@openssh.com","SHA2-256",!0),hmacSha512Etm:new b("hmac-sha2-512-etm@openssh.com","SHA2-512",!0)},S.compression={none:null},S.random=new w,t.algorithmNames=function(e){return e.map((e=>e?e.name:"none"))}},5440:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonWebKeyFormatter=void 0;const s=n(3380),i=n(3926);class r{static formatRsa(e,t){const n=r.formatBigInt;let s;if(!1!==t&&e.d&&e.p&&e.q&&e.dp&&e.dq&&e.qi)s={kty:"RSA",n:n(e.modulus),e:n(e.exponent),d:n(e.d),p:n(e.p),q:n(e.q),dp:n(e.dp),dq:n(e.dq),qi:n(e.qi)};else{if(t)throw new Error("Missing private key parameters.");s={kty:"RSA",n:n(e.modulus),e:n(e.exponent)}}return s}static parseRsa(e,t){if("RSA"!==(null==e?void 0:e.kty)||!e.n||!e.e)throw new Error("Invalid RSA JWK.");const n=r.parseBigInt;let s;return s=!1!==t&&e.d&&e.p&&e.q&&e.dp&&e.dq&&e.qi?{modulus:n(e.n),exponent:n(e.e),d:n(e.d),p:n(e.p),q:n(e.q),dp:n(e.dp),dq:n(e.dq),qi:n(e.qi)}:{modulus:n(e.n),exponent:n(e.e)},s}static formatEC(e,t){const n=r.formatBigInt,s=i.curves.find((t=>t.oid===e.curve.oid||t.name===e.curve.name||t.shortName===e.curve.name)),o=Math.ceil(s.keySize/8),a={kty:"EC",crv:e.curve.name,x:n(e.x,o),y:n(e.y,o)};if(!1!==t&&e.d)a.d=n(e.d,o);else if(t)throw new Error("Missing private key parameters.");return a}static parseEC(e,t){if("EC"!==(null==e?void 0:e.kty)||!(e.crv&&e.x&&e.y))throw new Error("Invalid EC JWK.");const n=r.parseBigInt,s={curve:{name:e.crv},x:n(e.x),y:n(e.y)};return!1!==t&&e.d&&(s.d=n(e.d)),s}static formatBigInt(e,t){return r.base64UrlEncode(e.toBytes({unsigned:!0,length:t}))}static parseBigInt(e){return s.BigInt.fromBytes(Buffer.from(e,"base64"),{unsigned:!0})}static base64UrlEncode(e){return e.toString("base64").replace(/=+$/g,"").replace(/\+/g,"-").replace(/\//g,"_")}}t.JsonWebKeyFormatter=r},6205:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebECDsa=void 0;const s=n(4300),i=n(7103),r=n(7309),o=n(3926),a=n(3380),c=n(5440);class l{constructor(e){this.comment=null,e&&(this.algorithmName=e)}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return this.algorithmName}get algorithmName(){return this.algorithm}set algorithmName(e){const t=e.split("-")[2];if(this.curve=o.curves.find((e=>e.name===t)),!this.curve)throw new Error("Invalid or unsupported ECDSA algorithm: "+e);this.algorithm=e}async generate(){try{const e={name:"ECDSA",namedCurve:this.curve.shortName},t=await crypto.subtle.generateKey(e,!0,["sign","verify"]);this.publicKey=t.publicKey,this.privateKey=t.privateKey}catch(e){throw new Error("Failed to generate RSA key pair: "+e)}}async setPublicKeyBytes(e,t){if(!e)throw new TypeError("Buffer is required.");const n=new r.SshDataReader(e),s=n.readString("ascii");if(this.algorithmName=t||s,n.readString("ascii")!==this.curve.name)throw new Error("EC curve name does not match.");const i=n.readBinary(),o=Math.ceil(this.curve.keySize/8),l=a.BigInt.fromBytes(i.slice(1,1+o),{unsigned:!0}),u=a.BigInt.fromBytes(i.slice(1+o,i.length),{unsigned:!0}),h=c.JsonWebKeyFormatter.formatEC({curve:{name:this.curve.shortName,oid:this.curve.oid},x:l,y:u});try{const e={name:"ECDSA",namedCurve:this.curve.shortName};this.publicKey=await crypto.subtle.importKey("jwk",h,e,!0,["verify"])}catch(e){throw new Error("Failed to import EC public key: "+e)}}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;try{t=await crypto.subtle.exportKey("jwk",this.publicKey)}catch(e){throw new Error("Failed to export ECDSA public key: "+e)}const n=s.Buffer.from(t.x,"base64"),i=s.Buffer.from(t.y,"base64"),o=Math.ceil(this.curve.keySize/8);if(n.length!==o||i.length!==o)throw new Error("Unexpected key length.");e=e||this.algorithmName||this.keyAlgorithmName;const a=s.Buffer.alloc(e.length+n.length+i.length+10),c=new r.SshDataWriter(a);return c.writeString(e,"ascii"),c.writeString(this.curve.name,"ascii"),c.writeUInt32(1+n.length+i.length),c.writeByte(4),c.write(n),c.write(i),c.toBuffer()}async importParameters(e){if(!e.curve)throw new TypeError("A curve is required.");let t;if(e.curve.oid){if(t=o.curves.find((t=>t.oid===e.curve.oid)),!t)throw new Error(`Unsupported curve OID: ${e.curve.oid}`)}else{if(!e.curve.name)throw new TypeError("A curve OID or name is required.");if(t=o.curves.find((t=>t.name===e.curve.name)),!t)throw new Error(`Unsupported curve: ${e.curve.name}`)}this.algorithmName="ecdsa-sha2-"+t.name;const n={name:"ECDSA",namedCurve:this.curve.shortName},s=c.JsonWebKeyFormatter.formatEC(e);s.crv=this.curve.shortName;try{s.d?(this.privateKey=await crypto.subtle.importKey("jwk",s,n,!0,["sign"]),s.d=void 0):this.privateKey=void 0,this.publicKey=await crypto.subtle.importKey("jwk",s,n,!0,["verify"])}catch(e){throw new Error("Failed to import ECDSA key pair: "+e)}}async exportParameters(){var e;const t=null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey;if(!t)throw new Error("Key not present.");let n;try{n=await crypto.subtle.exportKey("jwk",t)}catch(e){throw new Error("Failed to export ECDSA key pair: "+e)}const s=c.JsonWebKeyFormatter.parseEC(n);return s.curve={name:this.curve.name,oid:this.curve.oid},s}dispose(){}}class u extends i.PublicKeyAlgorithm{constructor(e,t){super(e,e,t)}createKeyPair(){return new l(this.name)}async generateKeyPair(){const e=new l(this.name);return await e.generate(),e}createSigner(e){if(!(e instanceof l))throw new TypeError("ECDSA key pair object expected.");const t=u.convertHashAlgorithmName(this.hashAlgorithmName);return new h(e,t)}createVerifier(e){if(!(e instanceof l))throw new TypeError("ECDSA key pair object expected.");const t=u.convertHashAlgorithmName(this.hashAlgorithmName);return new h(e,t)}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA-")}static getSignatureLength(e){return 2*(5+Math.ceil(e/8))}}t.WebECDsa=u,u.ecdsaSha2Nistp256="ecdsa-sha2-nistp256",u.ecdsaSha2Nistp384="ecdsa-sha2-nistp384",u.ecdsaSha2Nistp521="ecdsa-sha2-nistp521",u.curves=o.curves,u.KeyPair=l;class h{constructor(e,t){this.keyPair=e,this.hashAlgorithm=t}get digestLength(){const e=this.keyPair.curve;return e?u.getSignatureLength(e.keySize):0}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");let t=s.Buffer.from(await crypto.subtle.sign({name:"ECDSA",hash:{name:this.hashAlgorithm}},this.keyPair.privateKey,e));const n=Math.ceil(this.keyPair.curve.keySize/8);if(t.length!==2*n)throw new Error(`Unexpected signature length: ${t.length}`);const i=a.BigInt.fromBytes(t.slice(0,n),{unsigned:!0}),o=a.BigInt.fromBytes(t.slice(n,t.length),{unsigned:!0}),c=new r.SshDataWriter(s.Buffer.alloc(this.digestLength));return c.writeBinary(i.toBytes({unsigned:!0,length:n+1})),c.writeBinary(o.toBytes({unsigned:!0,length:n+1})),t=c.toBuffer(),t}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");const n=new r.SshDataReader(t),i=n.readBigInt(),o=n.readBigInt(),a=Math.ceil(this.keyPair.curve.keySize/8);return t=s.Buffer.alloc(2*a),i.toBytes({unsigned:!0,length:a}).copy(t,0),o.toBytes({unsigned:!0,length:a}).copy(t,a),await crypto.subtle.verify({name:"ECDSA",hash:{name:this.hashAlgorithm}},this.keyPair.publicKey,t,e)}dispose(){}}},8159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebEncryption=void 0;const s=n(4300),i=n(3687);class r extends i.EncryptionAlgorithm{constructor(e,t,n,s){super(e),this.algorithmName=t,this.cipherMode=n,this.keySizeInBits=s,this.blockSizeInBits=r.getBlockSize(t)}get keyLength(){return this.keySizeInBits/8}get blockLength(){return this.blockSizeInBits/8}async createCipher(e,t,n){const s=new o(e,this.algorithmName,this.cipherMode,this.keySizeInBits,this.blockSizeInBits);return await s.init(t,n),s}static getBlockSize(e){if("AES"===e)return 128;throw new Error(`Unsupported encryption algorithm: ${e}`)}}t.WebEncryption=r;class o{get blockLength(){return this.blockSizeInBits/8}constructor(e,t,n,i,r){if(this.isEncryption=e,this.algorithmName=t,this.cipherMode=n,this.keySizeInBits=i,this.blockSizeInBits=r,this.tag=null,"AES"===this.algorithmName&&"CTR"===this.cipherMode)this.transform=this.aesCtr.bind(this,e);else if("AES"===this.algorithmName&&"CBC"===this.cipherMode)this.transform=this.aesCbc.bind(this,e);else{if("AES"!==this.algorithmName||"GCM"!==this.cipherMode)throw new Error(`Unsupported encryption algorithm: ${this.algorithmName}-${this.cipherMode}`);this.transform=this.aesGcm.bind(this,e),this.associatedData=s.Buffer.alloc(4),this.decryptBuffer=s.Buffer.alloc(4*this.blockLength)}}async init(e,t){try{const t=`${this.algorithmName}-${this.cipherMode}`;this.key=await crypto.subtle.importKey("raw",e,{name:t,length:this.keySizeInBits},!1,this.isEncryption?["encrypt"]:["decrypt"])}catch(e){throw new Error("Failed to initialize AES: "+e)}"GCM"===this.cipherMode?this.iv=s.Buffer.from(t.slice(0,12)):this.iv=s.Buffer.from(t)}async aesCtr(e,t){if(t.length%this.blockLength!=0){const e=`Encrypt/decrypt input has invalid length ${t.length}, not a multiple of block size ${this.blockLength}.`;throw new Error(e)}let n;if(n=e?s.Buffer.from(await crypto.subtle.encrypt({name:"AES-CTR",counter:this.iv,length:this.blockSizeInBits},this.key,t)):s.Buffer.from(await crypto.subtle.decrypt({name:"AES-CTR",counter:this.iv,length:this.blockSizeInBits},this.key,t)),n.length!==t.length){const e=`Result from encrypt/decrypt has invalid length ${n.length}, expected ${t.length}.`;throw new Error(e)}const i=t.length/this.blockLength;for(let e=0;e<i;e++)for(let e=this.iv.length-1;e>=0&&(this.iv[e]=this.iv[e]+1,!this.iv[e]);e--);return n}async aesCbc(e,t){if(e){let e=s.Buffer.from(await crypto.subtle.encrypt({name:"AES-CBC",iv:this.iv},this.key,t));return e=e.slice(0,t.length),e}return s.Buffer.from(await crypto.subtle.decrypt({name:"AES-CBC",iv:this.iv},this.key,t))}async aesGcm(e,t){if(t.length%this.blockLength!=0){const e=`Encrypt/decrypt input has invalid length ${t.length}, not a multiple of block size ${this.blockLength}.`;throw new Error(e)}const n=t.length;let i;if(this.associatedData[0]=n>>>24,this.associatedData[1]=n>>>16,this.associatedData[2]=n>>>8,this.associatedData[3]=n,e)i=s.Buffer.from(await crypto.subtle.encrypt({name:"AES-GCM",iv:this.iv,additionalData:this.associatedData,tagLength:8*this.digestLength},this.key,t)),this.tag=i.slice(i.length-this.digestLength),i=i.slice(0,i.length-this.digestLength);else{if(!this.tag)throw new Error("AES-GCM tag was not set before decrypting.");const e=t.length+this.digestLength;if(this.decryptBuffer.length<e){let t=2*this.decryptBuffer.length;for(;t<e;)t*=2;this.decryptBuffer=s.Buffer.alloc(t)}const n=this.decryptBuffer.slice(0,e);t.copy(n,0),this.tag.copy(n,t.length),i=s.Buffer.from(await crypto.subtle.decrypt({name:"AES-GCM",iv:this.iv,additionalData:this.associatedData,tagLength:8*this.digestLength},this.key,n))}if(i.length!==t.length){const e=`Result from encrypt/decrypt has invalid length ${i.length}, expected ${t.length}.`;throw new Error(e)}let r=12;for(;--r>=4&&(this.iv[r]++,0===this.iv[r]););return i}get digestLength(){return 16}get authenticatedEncryption(){return"GCM"===this.cipherMode}async sign(e){if(!this.tag)throw new Error("AES-GCM tag was not obtained by encrypting.");return this.tag}async verify(e,t){if(t.length!==this.digestLength)throw new Error("Incorrect AES-GCM tag length.");return this.tag=t,!0}dispose(){}}},3175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebHmac=void 0;const s=n(4300),i=n(4953);class r extends i.HmacAlgorithm{constructor(e,t,n=!1){super(e,t,r.getHashKeyLength(t),r.getHashDigestLength(t)),this.encryptThenMac=n}async createSigner(e){const t=new o(this.algorithmName,!0,this.digestLength,this.encryptThenMac);return await t.init(e),t}async createVerifier(e){const t=new o(this.algorithmName,!1,this.digestLength,this.encryptThenMac);return await t.init(e),t}static getHashKeyLength(e){if("SHA2-512"===e)return 64;if("SHA2-384"===e)return 48;if("SHA2-256"===e)return 32;throw new Error(`Unsupported hash algorithm: ${e}`)}static getHashDigestLength(e){return this.getHashKeyLength(e)}static getWebHashAlgorithmName(e){if("SHA2-512"===e)return"SHA-512";if("SHA2-384"===e)return"SHA-384";if("SHA2-256"===e)return"SHA-256";throw new Error(`Unsupported hash algorithm: ${e}`)}}t.WebHmac=r;class o{constructor(e,t,n,s){this.algorithmName=e,this.isSigning=t,this.digestLength=n,this.encryptThenMac=s}async init(e){try{const t=this.algorithmName.replace("SHA2-","SHA-");this.key=await crypto.subtle.importKey("raw",e,{name:"HMAC",hash:{name:t}},!1,this.isSigning?["sign"]:["verify"])}catch(e){throw new Error("Failed to initialize HMAC: "+e)}}async sign(e){return s.Buffer.from(await crypto.subtle.sign({name:"HMAC",hash:{name:this.algorithmName}},this.key,e))}async verify(e,t){return await crypto.subtle.verify({name:"HMAC",hash:{name:this.algorithmName}},this.key,t,e)}dispose(){}}},9297:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebECDiffieHellman=t.WebDiffieHellman=void 0;const s=n(4300),i=n(2257),r=n(1263),o=n(3175),a=n(3380),c=n(5440);class l extends r.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.WebHmac.getHashDigestLength(n))}createKeyExchange(){return new u(this.keySizeInBits,o.WebHmac.getWebHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.WebDiffieHellman=l;class u{constructor(e,t,n){switch(this.hashAlgorithmName=t,this.digestLength=n,e){case 1024:this.dh=(0,i.getDiffieHellman)("modp2");break;case 2048:this.dh=(0,i.getDiffieHellman)("modp14");break;case 4096:this.dh=(0,i.getDiffieHellman)("modp16");break;default:throw new Error("Invalid DH bit length.")}}startKeyExchange(){const e=this.dh.generateKeys(),t=a.BigInt.fromBytes(e,{unsigned:!0}).toBytes();return Promise.resolve(t)}decryptKeyExchange(e){const t=this.dh.computeSecret(e),n=a.BigInt.fromBytes(t,{unsigned:!0}).toBytes();return Promise.resolve(n)}async sign(e){const t=await crypto.subtle.digest(this.hashAlgorithmName,e);return s.Buffer.from(t)}dispose(){}}class h extends r.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.WebHmac.getHashDigestLength(n))}createKeyExchange(){return new p(this.keySizeInBits,o.WebHmac.getWebHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.WebECDiffieHellman=h;class p{constructor(e,t,n){this.bitLength=e,this.hashAlgorithmName=t,this.digestLength=n,this.algorithm={name:"ECDH",namedCurve:"P-"+e}}async startKeyExchange(){this.keyPair||(this.keyPair=await crypto.subtle.generateKey(this.algorithm,!0,["deriveBits"]));const e=await crypto.subtle.exportKey("jwk",this.keyPair.publicKey),t=c.JsonWebKeyFormatter.parseEC(e),n=Math.ceil(this.bitLength/8),i=s.Buffer.alloc(1+2*n);return i[0]=4,t.x.toBytes({unsigned:!0,length:n}).copy(i,1),t.y.toBytes({unsigned:!0,length:n}).copy(i,1+n),s.Buffer.from(i)}async decryptKeyExchange(e){if(!this.keyPair)throw new Error("Key exchange not started.");const t=e,n=c.JsonWebKeyFormatter.formatEC({curve:{name:this.algorithm.namedCurve},x:a.BigInt.fromBytes(t.slice(1,1+(t.length-1)/2),{unsigned:!0}),y:a.BigInt.fromBytes(t.slice(1+(t.length-1)/2),{unsigned:!0})}),i=await crypto.subtle.importKey("jwk",n,this.algorithm,!1,[]),r=s.Buffer.from(await crypto.subtle.deriveBits(Object.assign(Object.assign({},this.algorithm),{public:i}),this.keyPair.privateKey,8*Math.ceil(this.bitLength/8)));return a.BigInt.fromBytes(r,{unsigned:!0}).toBytes()}async sign(e){const t=await crypto.subtle.digest(this.hashAlgorithmName,e);return s.Buffer.from(t)}dispose(){}}},8682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebRandom=void 0,t.WebRandom=class{getBytes(e){crypto.getRandomValues(e)}}},787:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebRsa=void 0;const s=n(4300),i=n(7103),r=n(3175),o=n(7309),a=n(5440);class c{constructor(e){this.hashAlgorithm=e,this.comment=null}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return l.keyAlgorithmName}async generate(e){e=null!=e?e:c.defaultKeySize;try{const t={name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:this.hashAlgorithm}},n=await crypto.subtle.generateKey(t,!0,["sign","verify"]);this.publicKey=n.publicKey,this.privateKey=n.privateKey}catch(e){throw new Error("Failed to generate RSA key pair: "+e)}}async setPublicKeyBytes(e){if(!e)throw new TypeError("Buffer is required.");const t=new o.SshDataReader(e),n=t.readString("ascii");if(n!==this.keyAlgorithmName&&n!==l.rsaWithSha256&&n!==l.rsaWithSha512)throw new Error(`Invalid RSA key algorithm: ${n}`);const s=t.readBigInt(),i=t.readBigInt(),r=a.JsonWebKeyFormatter.formatRsa({modulus:i,exponent:s},!1);r.alg="RS"+this.hashAlgorithm.replace("SHA-",""),r.key_ops=["verify"];try{const e={name:"RSASSA-PKCS1-v1_5",hash:{name:this.hashAlgorithm}};this.publicKey=await crypto.subtle.importKey("jwk",r,e,!0,["verify"])}catch(e){throw new Error("Failed to import RSA public key: "+e)}}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;e||(e=this.keyAlgorithmName);try{t=await crypto.subtle.exportKey("jwk",this.publicKey)}catch(e){throw new Error("Failed to export RSA public key: "+e)}const{modulus:n,exponent:i}=a.JsonWebKeyFormatter.parseRsa(t,!1),r=s.Buffer.alloc(512),c=new o.SshDataWriter(r);return c.writeString(e,"ascii"),c.writeBigInt(i),c.writeBigInt(n),c.toBuffer()}async importParameters(e){const t=e.d?a.JsonWebKeyFormatter.formatRsa(e,!0):null,n=a.JsonWebKeyFormatter.formatRsa(e,!1),s={name:"RSASSA-PKCS1-v1_5",hash:{name:this.hashAlgorithm}};try{this.publicKey=await crypto.subtle.importKey("jwk",n,s,!0,["verify"]),this.privateKey=t?await crypto.subtle.importKey("jwk",t,s,!0,["sign"]):void 0}catch(e){if(!(e instanceof Error))throw e;throw new Error("Failed to import RSA key pair: "+e.message)}}async exportParameters(){var e;if(!this.publicKey)throw new Error("Public key not set.");let t;try{t=await crypto.subtle.exportKey("jwk",null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey)}catch(e){if(!(e instanceof Error))throw e;throw new Error("Failed to export RSA public key: "+e.message)}return a.JsonWebKeyFormatter.parseRsa(t,!!this.privateKey)}dispose(){}}c.defaultKeySize=2048;class l extends i.PublicKeyAlgorithm{constructor(e,t){super(e,l.keyAlgorithmName,t)}createKeyPair(){const e=l.convertHashAlgorithmName(this.hashAlgorithmName);return new c(e)}async generateKeyPair(e){const t=l.convertHashAlgorithmName(this.hashAlgorithmName),n=new c(t);return await n.generate(e),n}createSigner(e){if(!(e instanceof c))throw new TypeError("RSA key pair object expected.");const t=l.convertHashAlgorithmName(this.hashAlgorithmName);return new u(e,t,r.WebHmac.getHashDigestLength(this.hashAlgorithmName))}createVerifier(e){if(!(e instanceof c))throw new TypeError("RSA key pair object expected.");const t=l.convertHashAlgorithmName(this.hashAlgorithmName);return new u(e,t,r.WebHmac.getHashDigestLength(this.hashAlgorithmName))}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA-")}}t.WebRsa=l,l.keyAlgorithmName="ssh-rsa",l.rsaWithSha256="rsa-sha2-256",l.rsaWithSha512="rsa-sha2-512",l.KeyPair=c;class u{constructor(e,t,n){this.keyPair=e,this.hashAlgorithm=t,this.digestLength=n}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");return await this.convertKeyHashAlgorithm(),s.Buffer.from(await crypto.subtle.sign("RSASSA-PKCS1-v1_5",this.keyPair.privateKey,e))}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");return await this.convertKeyHashAlgorithm(),await crypto.subtle.verify("RSASSA-PKCS1-v1_5",this.keyPair.publicKey,t,e)}async convertKeyHashAlgorithm(){if(this.keyPair.hashAlgorithm!==this.hashAlgorithm){const e=await this.keyPair.exportParameters();this.keyPair=new c(this.hashAlgorithm),await this.keyPair.importParameters(e)}}dispose(){}}},4608:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDisposedError=t.SshChannelError=t.SshReconnectError=t.SshConnectionError=void 0;class n extends Error{constructor(e,t){super(e),this.reason=t}}t.SshConnectionError=n;class s extends Error{constructor(e,t){super(e),this.reason=t}}t.SshReconnectError=s;class i extends Error{constructor(e,t){super(e),this.reason=t}}t.SshChannelError=i;class r extends Error{constructor(e){var t,n;let s;s="string"==typeof e?e:"function"==typeof e?e.name+" disposed.":(null!==(n=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)&&void 0!==n?n:"Object ")+" disposed.",super(s)}}t.ObjectDisposedError=r},3314:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshAuthenticatingEventArgs=t.SshAuthenticationType=void 0;const s=n(5844);var i;!function(e){e[e.clientNone=0]="clientNone",e[e.clientHostBased=1]="clientHostBased",e[e.clientPassword=2]="clientPassword",e[e.clientPublicKeyQuery=3]="clientPublicKeyQuery",e[e.clientPublicKey=4]="clientPublicKey",e[e.clientInteractive=5]="clientInteractive",e[e.serverPublicKey=10]="serverPublicKey"}(i=t.SshAuthenticationType||(t.SshAuthenticationType={})),t.SshAuthenticatingEventArgs=class{constructor(e,{username:t,password:n,publicKey:r,clientHostname:o,clientUsername:a,infoRequest:c,infoResponse:l},u){this.authenticationType=e,this.infoRequest=null,this.infoResponse=null;const h=({usernameRequired:e,passwordRequired:s,publicKeyRequired:i,clientHostnameRequired:c,clientUsernameRequired:l})=>"string"==typeof t==!!e&&"string"==typeof n==!!s&&!!r==!!i&&"string"==typeof o==!!c&&"string"==typeof a==!!l;let p;switch(e){case i.clientNone:p=h({usernameRequired:!0});break;case i.clientHostBased:p=h({usernameRequired:!0,publicKeyRequired:!0,clientHostnameRequired:!0,clientUsernameRequired:!0});break;case i.clientPassword:p=h({usernameRequired:!0,passwordRequired:!0});break;case i.clientPublicKeyQuery:case i.clientPublicKey:p=h({usernameRequired:!0,publicKeyRequired:!0});break;case i.serverPublicKey:p=h({publicKeyRequired:!0});break;case i.clientInteractive:p=!0;break;default:throw new Error(`Invalid authentication type: ${e}`)}if(!p)throw new Error(`Invalid arguments for authentication type: ${e}`);this.username=null!=t?t:null,this.password=null!=n?n:null,this.publicKey=null!=r?r:null,this.clientHostname=null!=o?o:null,this.clientUsername=null!=a?a:null,this.infoRequest=null!=c?c:null,this.infoResponse=null!=l?l:null,this.cancellationValue=null!=u?u:s.CancellationToken.None}get cancellation(){return this.cancellationValue}set cancellation(e){this.cancellationValue=e}toString(){return this.infoRequest?`Info request: ${this.infoRequest.name}`:this.infoResponse?`"${this.username}" info response`:this.password?(this.username?'"'+this.username+'" ':"")+"[password]":this.publicKey?`${this.username?'"'+this.username+'" ':""}[${this.publicKey.keyAlgorithmName}]`:`"${this.username}"`}}},8512:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshChannelClosedEventArgs=void 0,t.SshChannelClosedEventArgs=class{constructor(e,t){"number"==typeof e?this.exitStatus=e:"string"==typeof e?(this.exitSignal=e,this.errorMessage=t):e instanceof Error&&(this.error=e)}}},7776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshChannelOpeningEventArgs=void 0;const s=n(3379),i=n(5844);t.SshChannelOpeningEventArgs=class{constructor(e,t,n,r){if(this.request=e,this.channel=t,this.isRemoteRequest=n,this.failureReason=s.SshChannelOpenFailureReason.none,this.failureDescription=null,!e)throw new TypeError("A channel open message is required.");if(!t)throw new TypeError("A channel is required.");this.cancellationValue=null!=r?r:i.CancellationToken.None}get cancellation(){return this.cancellationValue}set cancellation(e){this.cancellationValue=e}toString(){return`${this.channel.toString()}${this.failureReason?" "+s.SshChannelOpenFailureReason[this.failureReason]:""}`}}},6076:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SshExtendedDataEventArgs=t.SshExtendedDataType=void 0,function(e){e[e.STDERR=1]="STDERR"}(n=t.SshExtendedDataType||(t.SshExtendedDataType={})),t.SshExtendedDataEventArgs=class{constructor(e,t){this.dataTypeCode=e,this.data=t}toString(){return`${n[this.dataTypeCode]}: ${this.data.toString()}`}}},1039:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshReportProgressEventArgs=void 0,t.SshReportProgressEventArgs=class{constructor(e,t){this.progress=e,this.sessionNumber=t}toString(){return`Progress: ${this.progress}`+this.sessionNumber?` Session number: ${this.sessionNumber}`:""}}},1656:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshRequestEventArgs=void 0;const s=n(5844);t.SshRequestEventArgs=class{constructor(e,t,n,i){this.requestType=e,this.request=t,this.principal=n,this.cancellationValue=null!=i?i:s.CancellationToken.None}get cancellation(){return this.cancellationValue}set cancellation(e){this.cancellationValue=e}toString(){return`RequestType: ${this.requestType}`+this.request?` Request: ${this.request}`:""}}},8764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSessionClosedEventArgs=void 0;const s=n(6306);t.SshSessionClosedEventArgs=class{constructor(e,t,n){if(this.reason=e,this.message=t,this.error=n,!t)throw new TypeError("A disconnect message is required.")}toString(){return`${s.SshDisconnectReason[this.reason]}: ${this.message}`}}},2727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandRequestMessage=t.ChannelRequestType=t.ChannelRequestMessage=t.ChannelOpenConfirmationMessage=t.ChannelOpenMessage=t.ChannelOpenFailureMessage=t.ChannelMessage=t.SshChannelOpenFailureReason=t.SessionChannelRequestMessage=t.ServiceAcceptMessage=t.ServiceRequestMessage=t.SshReconnectFailureReason=t.SshDisconnectReason=t.SessionRequestFailureMessage=t.SessionRequestSuccessMessage=t.DebugMessage=t.SessionRequestMessage=t.PasswordRequestMessage=t.PublicKeyOKMessage=t.PublicKeyRequestMessage=t.AuthenticationInfoResponseMessage=t.AuthenticationInfoRequestMessage=t.AuthenticationFailureMessage=t.AuthenticationSuccessMessage=t.AuthenticationRequestMessage=t.AuthenticationMessage=t.SshMessage=t.SshExtendedDataEventArgs=t.SshExtendedDataType=t.SshChannelClosedEventArgs=t.SshSessionClosedEventArgs=t.SshChannelOpeningEventArgs=t.SshReportProgressEventArgs=t.SshRequestEventArgs=t.SshAuthenticatingEventArgs=t.SshAuthenticationType=t.serviceActivation=t.SshService=t.SshRpcMessageStream=t.WebSocketStream=t.NodeStream=t.BaseStream=t.SshStream=t.SshChannel=t.SshServerSession=t.SshClientSession=t.SshSession=t.SshVersionInfo=t.SshProtocolExtensionNames=t.SshSessionConfiguration=void 0,t.Progress=t.SshTraceEventIds=t.TraceLevel=t.SecureStream=t.MultiChannelStream=t.SessionContour=t.ChannelMetrics=t.SessionMetrics=t.Queue=t.Semaphore=t.PromiseCompletionSource=t.CancellationError=t.CancellationTokenSource=t.CancellationToken=t.ObjectDisposedError=t.SshReconnectError=t.SshConnectionError=t.SshChannelError=t.BigInt=t.DerWriter=t.DerReader=t.formatBuffer=t.SshDataWriter=t.SshDataReader=t.ECDsa=t.Rsa=t.Encryption=t.HmacAlgorithm=t.EncryptionAlgorithm=t.PublicKeyAlgorithm=t.KeyExchangeAlgorithm=t.SshAlgorithms=void 0;var s=n(9872);Object.defineProperty(t,"SshSessionConfiguration",{enumerable:!0,get:function(){return s.SshSessionConfiguration}}),Object.defineProperty(t,"SshProtocolExtensionNames",{enumerable:!0,get:function(){return s.SshProtocolExtensionNames}});var i=n(1163);Object.defineProperty(t,"SshVersionInfo",{enumerable:!0,get:function(){return i.SshVersionInfo}});var r=n(7492);Object.defineProperty(t,"SshSession",{enumerable:!0,get:function(){return r.SshSession}});var o=n(5706);Object.defineProperty(t,"SshClientSession",{enumerable:!0,get:function(){return o.SshClientSession}});var a=n(7331);Object.defineProperty(t,"SshServerSession",{enumerable:!0,get:function(){return a.SshServerSession}});var c=n(9273);Object.defineProperty(t,"SshChannel",{enumerable:!0,get:function(){return c.SshChannel}});var l=n(6373);Object.defineProperty(t,"SshStream",{enumerable:!0,get:function(){return l.SshStream}});var u=n(3538);Object.defineProperty(t,"BaseStream",{enumerable:!0,get:function(){return u.BaseStream}}),Object.defineProperty(t,"NodeStream",{enumerable:!0,get:function(){return u.NodeStream}}),Object.defineProperty(t,"WebSocketStream",{enumerable:!0,get:function(){return u.WebSocketStream}});var h=n(5523);Object.defineProperty(t,"SshRpcMessageStream",{enumerable:!0,get:function(){return h.SshRpcMessageStream}});var p=n(1838);Object.defineProperty(t,"SshService",{enumerable:!0,get:function(){return p.SshService}});var d=n(4865);Object.defineProperty(t,"serviceActivation",{enumerable:!0,get:function(){return d.serviceActivation}});var f=n(3314);Object.defineProperty(t,"SshAuthenticationType",{enumerable:!0,get:function(){return f.SshAuthenticationType}}),Object.defineProperty(t,"SshAuthenticatingEventArgs",{enumerable:!0,get:function(){return f.SshAuthenticatingEventArgs}});var m=n(1656);Object.defineProperty(t,"SshRequestEventArgs",{enumerable:!0,get:function(){return m.SshRequestEventArgs}});var g=n(1039);Object.defineProperty(t,"SshReportProgressEventArgs",{enumerable:!0,get:function(){return g.SshReportProgressEventArgs}});var v=n(7776);Object.defineProperty(t,"SshChannelOpeningEventArgs",{enumerable:!0,get:function(){return v.SshChannelOpeningEventArgs}});var y=n(8764);Object.defineProperty(t,"SshSessionClosedEventArgs",{enumerable:!0,get:function(){return y.SshSessionClosedEventArgs}});var b=n(8512);Object.defineProperty(t,"SshChannelClosedEventArgs",{enumerable:!0,get:function(){return b.SshChannelClosedEventArgs}});var w=n(6076);Object.defineProperty(t,"SshExtendedDataType",{enumerable:!0,get:function(){return w.SshExtendedDataType}}),Object.defineProperty(t,"SshExtendedDataEventArgs",{enumerable:!0,get:function(){return w.SshExtendedDataEventArgs}});var S=n(6744);Object.defineProperty(t,"SshMessage",{enumerable:!0,get:function(){return S.SshMessage}});var x=n(6892);Object.defineProperty(t,"AuthenticationMessage",{enumerable:!0,get:function(){return x.AuthenticationMessage}}),Object.defineProperty(t,"AuthenticationRequestMessage",{enumerable:!0,get:function(){return x.AuthenticationRequestMessage}}),Object.defineProperty(t,"AuthenticationSuccessMessage",{enumerable:!0,get:function(){return x.AuthenticationSuccessMessage}}),Object.defineProperty(t,"AuthenticationFailureMessage",{enumerable:!0,get:function(){return x.AuthenticationFailureMessage}}),Object.defineProperty(t,"AuthenticationInfoRequestMessage",{enumerable:!0,get:function(){return x.AuthenticationInfoRequestMessage}}),Object.defineProperty(t,"AuthenticationInfoResponseMessage",{enumerable:!0,get:function(){return x.AuthenticationInfoResponseMessage}}),Object.defineProperty(t,"PublicKeyRequestMessage",{enumerable:!0,get:function(){return x.PublicKeyRequestMessage}}),Object.defineProperty(t,"PublicKeyOKMessage",{enumerable:!0,get:function(){return x.PublicKeyOKMessage}}),Object.defineProperty(t,"PasswordRequestMessage",{enumerable:!0,get:function(){return x.PasswordRequestMessage}});var E=n(6306);Object.defineProperty(t,"SessionRequestMessage",{enumerable:!0,get:function(){return E.SessionRequestMessage}}),Object.defineProperty(t,"DebugMessage",{enumerable:!0,get:function(){return E.DebugMessage}}),Object.defineProperty(t,"SessionRequestSuccessMessage",{enumerable:!0,get:function(){return E.SessionRequestSuccessMessage}}),Object.defineProperty(t,"SessionRequestFailureMessage",{enumerable:!0,get:function(){return E.SessionRequestFailureMessage}}),Object.defineProperty(t,"SshDisconnectReason",{enumerable:!0,get:function(){return E.SshDisconnectReason}}),Object.defineProperty(t,"SshReconnectFailureReason",{enumerable:!0,get:function(){return E.SshReconnectFailureReason}}),Object.defineProperty(t,"ServiceRequestMessage",{enumerable:!0,get:function(){return E.ServiceRequestMessage}}),Object.defineProperty(t,"ServiceAcceptMessage",{enumerable:!0,get:function(){return E.ServiceAcceptMessage}}),Object.defineProperty(t,"SessionChannelRequestMessage",{enumerable:!0,get:function(){return E.SessionChannelRequestMessage}});var C=n(3379);Object.defineProperty(t,"SshChannelOpenFailureReason",{enumerable:!0,get:function(){return C.SshChannelOpenFailureReason}}),Object.defineProperty(t,"ChannelMessage",{enumerable:!0,get:function(){return C.ChannelMessage}}),Object.defineProperty(t,"ChannelOpenFailureMessage",{enumerable:!0,get:function(){return C.ChannelOpenFailureMessage}}),Object.defineProperty(t,"ChannelOpenMessage",{enumerable:!0,get:function(){return C.ChannelOpenMessage}}),Object.defineProperty(t,"ChannelOpenConfirmationMessage",{enumerable:!0,get:function(){return C.ChannelOpenConfirmationMessage}}),Object.defineProperty(t,"ChannelRequestMessage",{enumerable:!0,get:function(){return C.ChannelRequestMessage}}),Object.defineProperty(t,"ChannelRequestType",{enumerable:!0,get:function(){return C.ChannelRequestType}}),Object.defineProperty(t,"CommandRequestMessage",{enumerable:!0,get:function(){return C.CommandRequestMessage}});var T=n(7521);Object.defineProperty(t,"SshAlgorithms",{enumerable:!0,get:function(){return T.SshAlgorithms}}),Object.defineProperty(t,"KeyExchangeAlgorithm",{enumerable:!0,get:function(){return T.KeyExchangeAlgorithm}}),Object.defineProperty(t,"PublicKeyAlgorithm",{enumerable:!0,get:function(){return T.PublicKeyAlgorithm}}),Object.defineProperty(t,"EncryptionAlgorithm",{enumerable:!0,get:function(){return T.EncryptionAlgorithm}}),Object.defineProperty(t,"HmacAlgorithm",{enumerable:!0,get:function(){return T.HmacAlgorithm}}),Object.defineProperty(t,"Encryption",{enumerable:!0,get:function(){return T.Encryption}}),Object.defineProperty(t,"Rsa",{enumerable:!0,get:function(){return T.Rsa}}),Object.defineProperty(t,"ECDsa",{enumerable:!0,get:function(){return T.ECDsa}});var R=n(7309);Object.defineProperty(t,"SshDataReader",{enumerable:!0,get:function(){return R.SshDataReader}}),Object.defineProperty(t,"SshDataWriter",{enumerable:!0,get:function(){return R.SshDataWriter}}),Object.defineProperty(t,"formatBuffer",{enumerable:!0,get:function(){return R.formatBuffer}});var _=n(4918);Object.defineProperty(t,"DerReader",{enumerable:!0,get:function(){return _.DerReader}}),Object.defineProperty(t,"DerWriter",{enumerable:!0,get:function(){return _.DerWriter}});var P=n(3380);Object.defineProperty(t,"BigInt",{enumerable:!0,get:function(){return P.BigInt}});var k=n(4608);Object.defineProperty(t,"SshChannelError",{enumerable:!0,get:function(){return k.SshChannelError}}),Object.defineProperty(t,"SshConnectionError",{enumerable:!0,get:function(){return k.SshConnectionError}}),Object.defineProperty(t,"SshReconnectError",{enumerable:!0,get:function(){return k.SshReconnectError}}),Object.defineProperty(t,"ObjectDisposedError",{enumerable:!0,get:function(){return k.ObjectDisposedError}});var A=n(9638);Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return A.CancellationToken}}),Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return A.CancellationTokenSource}}),Object.defineProperty(t,"CancellationError",{enumerable:!0,get:function(){return A.CancellationError}});var M=n(3305);Object.defineProperty(t,"PromiseCompletionSource",{enumerable:!0,get:function(){return M.PromiseCompletionSource}});var O=n(7399);Object.defineProperty(t,"Semaphore",{enumerable:!0,get:function(){return O.Semaphore}});var I=n(6655);Object.defineProperty(t,"Queue",{enumerable:!0,get:function(){return I.Queue}});var B=n(4340);Object.defineProperty(t,"SessionMetrics",{enumerable:!0,get:function(){return B.SessionMetrics}});var q=n(8614);Object.defineProperty(t,"ChannelMetrics",{enumerable:!0,get:function(){return q.ChannelMetrics}});var L=n(2750);Object.defineProperty(t,"SessionContour",{enumerable:!0,get:function(){return L.SessionContour}});var F=n(9141);Object.defineProperty(t,"MultiChannelStream",{enumerable:!0,get:function(){return F.MultiChannelStream}});var j=n(3868);Object.defineProperty(t,"SecureStream",{enumerable:!0,get:function(){return j.SecureStream}});var D=n(6197);Object.defineProperty(t,"TraceLevel",{enumerable:!0,get:function(){return D.TraceLevel}}),Object.defineProperty(t,"SshTraceEventIds",{enumerable:!0,get:function(){return D.SshTraceEventIds}});var N=n(3689);Object.defineProperty(t,"Progress",{enumerable:!0,get:function(){return N.Progress}})},3380:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BigInt=void 0;const s=n(4300),i=n(7309);class r{constructor(e){if(this.buffer=e,0===e.length)throw new Error("BigInt buffer length must be greater than zero.")}get sign(){const e=this.buffer[0];return 0===e?this.buffer.length>1?1:0:0==(128&e)?1:-1}static fromInt32(e){if(0===e)return r.zero;let t=!1;e<0&&(t=!0,e=-e);const n=[];for(let t=24;t>=0;t-=8)(e>=1<<t||n.length>0)&&(n.push(e>>t),e&=~((1<<t)-1));return t&&(0==(128&n[0])?n[0]|=128:n.splice(0,0,128)),new r(s.Buffer.from(new Uint8Array(n)))}toInt32(){if(this.buffer.length>4)throw new TypeError("BigInt value cannot be converted to a 32-bit signed integer.");let e=this.buffer[0];this.sign<0&&(e&=127);for(let t=1;t<this.buffer.length;t++)e=(e<<8)+this.buffer[t];return this.sign<0&&(e=-e),e}static fromBytes(e,t){if(!s.Buffer.isBuffer(e))throw new TypeError("Buffer expected.");if(0===e.length)throw new Error("BigInt buffer length must be greater than zero.");t=null!=t?t:{};const n=0!=(128&e[0]),i=t.unsigned&&n?1:0;let o=0;for(let t=0;t<e.length-1&&0===e[t];t++)0==(128&e[t+1])&&o++;const a=s.Buffer.alloc(e.length+i-o);return e.copy(a,i,o,e.length),new r(a)}toBytes(e){e=null!=e?e:{};let t=this.buffer;if(e.unsigned){if(this.sign<0)throw new TypeError("Cannot format a negative BigInt as unsigned.");if(0===t[0]&&t.length>1&&(t=t.slice(1,t.length)),void 0!==e.length){if(t.length>e.length)throw new Error(`BigInt (${t.length} bytes) is too large for length ${e.length}.`);if(t.length<e.length){const n=s.Buffer.alloc(e.length);return t.copy(n,e.length-t.length),n}}}const n=s.Buffer.alloc(t.length);return t.copy(n,0,0,t.length),n}copyTo(e,t=0){this.buffer.copy(e,t,0,this.buffer.length)}equals(e){return e instanceof r&&this.buffer.equals(e.buffer)}toString(e){return(0,i.formatBuffer)(this.buffer,null!=e?e:"BigInt")}}t.BigInt=r,r.zero=new r(s.Buffer.alloc(1))},4918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DerWriter=t.DerReader=void 0;const s=n(4300),i=n(3380);class r{constructor(e,t=48){this.buffer=e,this.position=0,this.readType(t);const n=this.readLength();if(n>this.buffer.length-this.position)throw new Error("Read out of bounds.");this.buffer=this.buffer.slice(0,this.position+n)}get available(){return this.buffer.length-this.position}readNull(){if(this.readType(5),0!==this.readByte())throw new Error("Expected a 0 after Null type.")}readInteger(){this.readType(2);const e=this.readLength(),t=this.readBytes(e);return new i.BigInt(t)}readOctetString(){this.readType(4);const e=this.readLength();return this.readBytes(e)}readBitString(){this.readType(3);const e=this.readLength();if(0!==this.readByte())throw new Error("Padded bit strings are not supported.");return this.readBytes(e-1)}readObjectIdentifier(e){this.readType(6);const t=this.readLength(),n=this.position+t,s=[],i=this.readByte();s.push(Math.trunc(i/40)),s.push(i%40);let r=0;for(;this.position<n;){const e=this.readByte();0!=(128&e)?r=128*r+(127&e):(r=128*r+e,s.push(r),r=0)}if(0!==r)throw new Error("Invalid OID format.");const o=s.join(".");if(e&&o!==e)throw new Error(`Expected OID ${e}, found: ${o}`);return o}readSequence(){const e=this.position;this.readType(48);const t=this.readLength();return this.position+=t,new r(this.buffer.slice(e,this.position))}tryReadTagged(e){if(this.position>=this.buffer.length)return null;const t=this.buffer[this.position];if(0==(160&t)||(-161&t)!==e)return null;const n=this.position;this.position++;const s=this.readLength();return this.position+=s,new r(this.buffer.slice(n,this.position),t)}peek(){if(this.position>=this.buffer.length)throw new Error("Read out of bounds.");return this.buffer[this.position]}readLength(){let e=this.readByte();if(128===e)throw new Error("Indefinite-length encoding is not supported.");if(e>127){const t=127&e;if(t>4)throw new Error(`DER length size is ${t} and cannot be more than 4 bytes.`);e=0;for(let n=0;n<t;n++)e=(e<<8)+this.readByte();if(e<0)throw new Error("Corrupted data - negative length found")}return e}readByte(){if(this.position>=this.buffer.length)throw new Error("Read out of bounds.");return this.buffer[this.position++]}readBytes(e){if(this.position+e>this.buffer.length)throw new Error("Read out of bounds.");const t=this.buffer.slice(this.position,this.position+e);return this.position+=e,t}readType(e){const t=this.readByte();if(t!==e)throw new Error(`Expected ${e} data type, found : ${t}`)}}t.DerReader=r;class o{constructor(e,t=48){this.buffer=e,this.dataType=t,this.position=0,this.buffer=e}toBuffer(){const e=this.position,t=o.getLength(e);this.ensureCapacity(1+t.length+e);const n=this.buffer.slice(0,1+t.length+e);return this.buffer.copy(n,1+t.length),n[0]=this.dataType,t.copy(n,1,0),this.buffer=this.buffer.slice(1+t.length,n.length),this.position=e,n}writeSequence(e){this.writeBytes(e.toBuffer())}writeTagged(e,t){if(e>15)throw new Error("Invalid DER tag.");this.writeByte(160|e);const n=o.getLength(t.position);this.writeBytes(n),this.writeBytes(t.buffer.slice(0,t.position))}writeNull(){this.writeByte(5),this.writeByte(0)}writeInteger(e){this.writeByte(2);const t=e.toBytes(),n=o.getLength(t.length);this.writeBytes(n),this.writeBytes(t)}writeOctetString(e){this.writeByte(4);const t=o.getLength(e.length);this.writeBytes(t),this.writeBytes(e)}writeBitString(e){this.writeByte(3);const t=o.getLength(1+e.length);this.writeBytes(t),this.writeByte(0),this.writeBytes(e)}writeObjectIdentifier(e){if(!e)throw new TypeError("OID value is null or empty.");const t=e.split(".").map(Number);if(t.length<2||t[0]>3||t[1]>=40)throw new Error(`Invalid OID: ${e}`);this.writeByte(6);let n=t.length-1;for(let e=2;e<t.length;e++){let s=t[e];for(;s>128;)n++,s/=128}const s=o.getLength(n);this.writeBytes(s),this.writeByte(40*t[0]+t[1]);for(let e=2;e<t.length;e++){let n=t[e];if(n>=128){const e=[];for(e.push(127&n);n>=128;)n/=128,e.push(128|127&n);for(;e.length>0;)this.writeByte(e.pop())}else this.writeByte(n)}}static getLength(e){if(e>127){let t=1;for(let n=e>>8;0!==n;n>>=8)t++;const n=o.lengthBuffer.slice(0,t+1);n[0]=128|t;for(let s=8*(t-1),i=1;s>=0;s-=8,i++)n[i]=e>>s;return n}{const t=o.lengthBuffer.slice(0,1);return t[0]=e,t}}writeByte(e){this.ensureCapacity(this.position+1),this.buffer[this.position++]=e}writeBytes(e){this.ensureCapacity(this.position+e.length),e.copy(this.buffer,this.position),this.position+=e.length}ensureCapacity(e){if(this.buffer.length<e){let t=Math.max(512,2*this.buffer.length);for(;t<e;)t*=2;const n=s.Buffer.alloc(t);this.buffer.copy(n,0,0,this.position),this.buffer=n}}}t.DerWriter=o,o.lengthBuffer=s.Buffer.alloc(10)},7309:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatBuffer=t.SshDataWriter=t.SshDataReader=void 0;const s=n(4300),i=n(7521),r=n(3380);class o{constructor(e){this.buffer=e,this.position=0}get available(){return this.buffer.length-this.position}read(e){if(this.available<e)throw new Error("Attempted to read past end of buffer.");const t=this.buffer.slice(this.position,this.position+e);return this.position+=e,t}readByte(){if(0===this.available)throw new Error("Attempted to read past end of buffer.");const e=this.buffer[this.position];return this.position++,e}readBinary(){const e=this.readUInt32();if(this.available<e)throw new Error("Attempted to read past end of buffer.");const t=this.buffer.slice(this.position,this.position+e);return this.position+=e,t}readString(e){return this.readBinary().toString()}readList(e){const t=this.readString(e);return 0===t.length?[]:t.split(",")}readBoolean(){return 0!==this.readByte()}readUInt32(){if(this.available<4)throw new Error("Attempted to read past end of buffer.");const e=this.buffer[this.position+0],t=this.buffer[this.position+1],n=this.buffer[this.position+2],s=this.buffer[this.position+3];return this.position+=4,(e<<24|t<<16|n<<8|s)>>>0}readUInt64(){if(this.available<8)throw new Error("Attempted to read past end of buffer.");const e=this.buffer[this.position+0],t=this.buffer[this.position+1],n=this.buffer[this.position+2],s=this.buffer[this.position+3],i=this.buffer[this.position+4],r=this.buffer[this.position+5],o=this.buffer[this.position+6],a=this.buffer[this.position+7];return this.position+=8,4294967296*((e<<24|t<<16|n<<8|s)>>>0)+((i<<24|r<<16|o<<8|a)>>>0)}readBigInt(){const e=this.readBinary();return 0===e.length?r.BigInt.zero:r.BigInt.fromBytes(e)}}let a;t.SshDataReader=o,o.mpintZero=s.Buffer.alloc(1),t.SshDataWriter=class{constructor(e){this.buffer=e,this.position=0}write(e){this.ensureCapacity(this.position+e.length),e.copy(this.buffer,this.position),this.position+=e.length}writeByte(e){this.ensureCapacity(this.position+1),this.buffer[this.position]=e,this.position++}writeBinary(e){this.ensureCapacity(this.position+4+e.length),this.writeUInt32(e.length),e.copy(this.buffer,this.position),this.position+=e.length}writeString(e,t){this.writeBinary(s.Buffer.from(e))}writeList(e,t){this.writeString(e?e.join(","):"",t)}writeBoolean(e){this.writeByte(e?1:0)}writeUInt32(e){this.ensureCapacity(this.position+4),this.buffer[this.position+0]=e>>>24,this.buffer[this.position+1]=e>>>16,this.buffer[this.position+2]=e>>>8,this.buffer[this.position+3]=e>>>0,this.position+=4}static writeUInt32(e,t,n){e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n>>>0}writeUInt64(e){this.ensureCapacity(this.position+8);const t=4294967295&e,n=(e-t)/4294967296;this.buffer[this.position+0]=n>>>24,this.buffer[this.position+1]=n>>>16,this.buffer[this.position+2]=n>>>8,this.buffer[this.position+3]=n>>>0,this.buffer[this.position+4]=t>>>24,this.buffer[this.position+5]=t>>>16,this.buffer[this.position+6]=t>>>8,this.buffer[this.position+7]=t>>>0,this.position+=8}writeBigInt(e){const t=e.toBytes();1===t.length&&0===t[0]?this.writeUInt32(0):this.writeBinary(t)}writeRandom(e){this.ensureCapacity(this.position+e);const t=this.buffer.slice(this.position,this.position+e);i.SshAlgorithms.random.getBytes(t),this.position+=e}skip(e){this.ensureCapacity(this.position+e),this.position+=e}ensureCapacity(e){if(this.buffer.length<e){let t=Math.max(512,2*this.buffer.length);for(;t<e;)t*=2;const n=s.Buffer.alloc(t);this.buffer.copy(n,0,0,this.position),this.buffer=n}}toBuffer(){return this.buffer.slice(0,this.position)}},t.formatBuffer=function(e,t,n){let s=`${void 0===t?"Buffer":t}[${e.length}] (${function(e){a||(a=function(){let e;const t=[];for(let n=0;n<256;n++){e=n;for(let t=0;t<8;t++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}());let t=-1;for(let n=0;n<e.length;n++)t=t>>>8^a[255&(t^e[n])];return(4294967296+((-1^t)>>>0)).toString(16).substr(-8).toUpperCase()}(e)})\n`;if(!1===n)return s;const i=Math.min(2048,e.length);for(let t=0;t<i;t+=16){t<1e3&&(s+="0"),t<100&&(s+="0"),t<10&&(s+="0"),s+=t+":";for(let n=t;n<t+16;n++)s+=n<i?" "+e.slice(n,n+1).toString("hex"):"   ";s+="  ";for(let n=t;n<t+16;n++)if(n<i){const t=e[n];s+=t>32&&t<=127?e.slice(n,n+1).toString():"."}else s+=" ";s+="\n"}return i<e.length&&(s+="...\n"),s}},1915:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshProtocol=void 0;const s=n(4300),i=n(6655),r=n(7399),o=n(6744),a=n(7309),c=n(6306),l=n(5255),u=n(3379),h=n(4608),p=n(6197);class d{constructor(e,t){this.sequence=e,this.message=t}}class f{constructor(e,t,n,o){this.config=t,this.metrics=n,this.trace=o,this.sessionSemaphore=new r.Semaphore(1),this.inboundPacketSequence=0,this.outboundPacketSequence=0,this.inboundFlow=0,this.outboundFlow=0,this.recentSentMessages=new i.Queue,this.sendWriter=new a.SshDataWriter(s.Buffer.alloc(1024)),this.receiveWriter=new a.SshDataWriter(s.Buffer.alloc(1024)),this.traceChannelData=!1,this.extensions=null,this.kexService=null,this.algorithms=null,this.messageContext=null,this.outgoingMessagesHaveLatencyInfo=!1,this.incomingMessagesHaveLatencyInfo=!1,this.outgoingMessagesHaveReconnectInfo=!1,this.incomingMessagesHaveReconnectInfo=!1,this.stream=e,this.traceChannelData=t.traceChannelData}get lastIncomingSequence(){return this.inboundPacketSequence-1}getSentMessages(e){if(e===this.outboundPacketSequence+1)return[];if(this.recentSentMessages.size>0&&e<this.recentSentMessages.peek().sequence)return null;const t=new Array;for(const n of this.recentSentMessages)if(n.sequence>=e){const e=n.message;e instanceof l.KeyExchangeMessage||e instanceof c.DisconnectMessage||t.push(e)}return t}async writeProtocolVersion(e,t){const n=this.stream;if(!n)throw new Error("SSH session disconnected.");const i=s.Buffer.from(e+"\r\n");return await n.write(i,t),this.metrics.addMessageSent(i.length),Promise.resolve()}async readProtocolVersion(e){const t=this.stream;if(!t)throw new Error("SSH session disconnected.");const n=s.Buffer.alloc(255);let i=0;for(let s=0;s<n.length;s++){const r=await t.read(1,e);if(!r)break;n[s]=r[0];const o=13,a=10;if(s>0&&n[s-1]===o&&n[s]===a){const e=n.toString("utf8",0,s-1);if(e.startsWith("SSH-"))return this.metrics.addMessageReceived(s+1),e;if(i>20)break;i++,s=-1}}throw new h.SshConnectionError("Failed to read the protocol version",c.SshDisconnectReason.protocolError)}async handleNewKeys(e){try{await this.sessionSemaphore.wait(e),this.inboundFlow=0,this.outboundFlow=0,this.algorithms=this.kexService.finishKeyExchange()}finally{this.sessionSemaphore.release()}}async read(e,t){const n=this.stream;if(!n)return!1;let s=0;do{let i;try{i=await n.read(e.length-s,t)}catch(e){if(!(e instanceof Error))throw e;if(n.isDisposed)return!1;throw n.dispose(),this.stream=null,this.trace(p.TraceLevel.Error,p.SshTraceEventIds.streamReadError,`Error reading from stream: ${e.message}`,e),new h.SshConnectionError("Error reading from stream: "+e.message,c.SshDisconnectReason.connectionLost)}if(!i)return!1;i.copy(e,s),s+=i.length}while(s<e.length);return!0}async write(e,t){const n=this.stream;if(!n)return!1;try{await n.write(e,t)}catch(e){if(!(e instanceof Error))throw e;if(n.isDisposed)return!1;throw n.dispose(),this.stream=null,this.trace(p.TraceLevel.Error,p.SshTraceEventIds.streamWriteError,`Error writing to stream: ${e.message}`,e),new h.SshConnectionError("Error writing to stream: "+e.message,c.SshDisconnectReason.connectionLost)}return!0}async considerReExchange(e,t){const n=this.kexService;if(!n)return;let s=null,i=null;!n.exchanging&&(e||this.inboundFlow+this.outboundFlow>this.config.keyRotationThreshold)&&([s,i]=await n.startKeyExchange(e)),s&&(await this.sendMessage(s,t),i&&await this.sendMessage(i,t))}async computeHmac(e,t,n){const i=new a.SshDataWriter(s.Buffer.alloc(4+t.length));return i.writeUInt32(n),i.write(t),await e.sign(i.toBuffer())}async verifyHmac(e,t,n,i){const r=new a.SshDataWriter(s.Buffer.alloc(4+t.length));return r.writeUInt32(n),r.write(t),await e.verify(r.toBuffer(),i)}async readAndVerifyHmac(e,t,n,s){if(!await this.read(n,s))return!1;if(!await this.verifyHmac(e,t,this.inboundPacketSequence,n))throw new h.SshConnectionError("Invalid MAC",c.SshDisconnectReason.macError);return!0}async sendMessage(e,t){var n;const i=this.algorithms,r=null==i?void 0:i.compressor,o=null==i?void 0:i.cipher,a=null==i?void 0:i.messageSigner;let c;await this.sessionSemaphore.wait(t);try{const i=o?Math.max(8,o.blockLength):8,l=f.packetLengthSize+f.paddingLengthSize;if(this.sendWriter.position=l,e.write(this.sendWriter),this.outgoingMessagesHaveReconnectInfo&&(this.sendWriter.writeUInt64(this.lastIncomingSequence),this.outgoingMessagesHaveLatencyInfo)){const e=Math.min(4294967295,Math.round(1e3*(this.metrics.time-this.lastIncomingTimestamp)));this.sendWriter.writeUInt32(e)}let h=this.sendWriter.toBuffer().slice(l);null!=r&&(h=r.compress(h));let m=i-(((null==a?void 0:a.encryptThenMac)||(null==a?void 0:a.authenticatedEncryption)?0:f.packetLengthSize)+f.paddingLengthSize+h.length)%i;m<4&&(m+=i);const g=f.paddingLengthSize+h.length+m;this.sendWriter.position=0,this.sendWriter.writeUInt32(g),this.sendWriter.writeByte(m),null!=r?this.sendWriter.write(h):this.sendWriter.position+=h.length,this.sendWriter.writeRandom(m),h=this.sendWriter.toBuffer();let v=null;if((null==a?void 0:a.encryptThenMac)&&o){const e=h.slice(f.packetLengthSize,h.length);(await o.transform(e)).copy(e),v=await this.computeHmac(a,h,this.outboundPacketSequence)}else if(null==a?void 0:a.authenticatedEncryption){const e=h.slice(f.packetLengthSize,h.length);(await o.transform(e)).copy(e),v=await a.sign(e)}else a&&(v=await this.computeHmac(a,h,this.outboundPacketSequence)),o&&(h=await o.transform(h));if(e instanceof u.ChannelDataMessage?this.traceChannelData&&this.trace(p.TraceLevel.Verbose,p.SshTraceEventIds.sendingChannelData,`Sending #${this.outboundPacketSequence} ${e}`):this.trace(p.TraceLevel.Verbose,p.SshTraceEventIds.sendingMessage,`Sending #${this.outboundPacketSequence} ${e}`),this.incomingMessagesHaveReconnectInfo){const t=new d(this.outboundPacketSequence,e);t.sentTime=this.metrics.time,this.recentSentMessages.enqueue(t)}if(this.outboundPacketSequence++,this.outboundFlow+=g,v){const e=s.Buffer.concat([h,v],h.length+v.length);c=await this.write(e,t)}else c=await this.write(h,t);this.metrics.addMessageSent(f.packetLengthSize+g+(null!==(n=null==a?void 0:a.digestLength)&&void 0!==n?n:0))}finally{this.sessionSemaphore.release()}return await this.considerReExchange(!1,t),c}async receiveMessage(e){var t;const n=this.algorithms,s=null==n?void 0:n.decipher,i=null==n?void 0:n.messageVerifier,r=null==n?void 0:n.decompressor,l=!((null==i?void 0:i.encryptThenMac)||(null==i?void 0:i.authenticatedEncryption)),d=l?s?Math.max(8,s.blockLength):8:f.packetLengthSize;this.receiveWriter.position=d;let m=this.receiveWriter.toBuffer();if(!await this.read(m,e))return null;this.lastIncomingTimestamp=this.metrics.time,s&&l&&(m=await s.transform(m),this.receiveWriter.position=0,this.receiveWriter.write(m));const g=new a.SshDataReader(m).readUInt32();if(g>f.maxPacketLength)throw new h.SshConnectionError("Invalid packet length.",c.SshDisconnectReason.protocolError);const v=f.packetLengthSize+g;v>d&&this.receiveWriter.skip(v-d),i&&this.receiveWriter.skip(i.digestLength);const y=this.receiveWriter.toBuffer(),b=y.slice(0,v),w=y.slice(v);let S=b.slice(d,v);if(S.length>0){if(!await this.read(S,e))return null;if((null==i?void 0:i.encryptThenMac)&&!await this.readAndVerifyHmac(i,b,w,e))return null;if(s){if(null==i?void 0:i.authenticatedEncryption){if(!await this.read(w,e))return null;await i.verify(S,w)}try{S=await s.transform(S)}catch(e){throw(null==i?void 0:i.authenticatedEncryption)?new h.SshConnectionError("Invalid MAC",c.SshDisconnectReason.macError):e}this.receiveWriter.position=d,this.receiveWriter.write(S)}}if(i&&!i.encryptThenMac&&!i.authenticatedEncryption&&!await this.readAndVerifyHmac(i,b,w,e))return null;const x=b[f.packetLengthSize];let E=b.slice(f.packetLengthSize+f.paddingLengthSize,f.packetLengthSize+(g-x));if(r&&(E=r.decompress(E)),this.incomingMessagesHaveReconnectInfo){let e,t;if(this.incomingMessagesHaveLatencyInfo){const n=new a.SshDataReader(E.slice(E.length-12,E.length));e=n.readUInt64(),t=n.readUInt32()/1e3,E=E.slice(0,E.length-12)}else e=new a.SshDataReader(E.slice(E.length-8,E.length)).readUInt64(),t=0,E=E.slice(0,E.length-8);for(;this.recentSentMessages.size>0;){const n=this.recentSentMessages.peek();if(n.sequence>e)break;if(this.stream&&this.incomingMessagesHaveLatencyInfo&&n.sequence===e){const e=this.lastIncomingTimestamp-n.sentTime-t;this.metrics.updateLatency(e,this.trace)}this.recentSentMessages.dequeue()}}const C=E[0];let T=o.SshMessage.create(this.config,C,this.messageContext,E);if(!T){const e=new c.UnimplementedMessage;e.sequenceNumber=this.inboundPacketSequence,e.unimplementedMessageType=C,T=e}return T instanceof u.ChannelDataMessage?this.traceChannelData&&this.trace(p.TraceLevel.Verbose,p.SshTraceEventIds.receivingChannelData,`Receiving #${this.inboundPacketSequence} ${T}`):this.trace(p.TraceLevel.Verbose,p.SshTraceEventIds.receivingMessage,`Receiving #${this.inboundPacketSequence} ${T}`),await this.sessionSemaphore.wait(e),this.inboundPacketSequence++,this.inboundFlow+=g,this.sessionSemaphore.release(),this.metrics.addMessageReceived(f.packetLengthSize+g+(null!==(t=null==i?void 0:i.digestLength)&&void 0!==t?t:0)),await this.considerReExchange(!1,e),T}dispose(){try{this.stream&&this.stream.close().catch((e=>{this.trace(p.TraceLevel.Error,p.SshTraceEventIds.streamCloseError,`Error closing stream: ${e.message}`,e)}))}catch(e){if(!(e instanceof Error))throw e;this.trace(p.TraceLevel.Error,p.SshTraceEventIds.streamCloseError,`Error closing stream: ${e.message}`,e)}this.stream=null,this.metrics.updateLatency(0),this.algorithms&&this.algorithms.dispose()}}t.SshProtocol=f,f.maxPacketLength=1048576,f.packetLengthSize=4,f.paddingLengthSize=1},6892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationSuccessMessage=t.AuthenticationFailureMessage=t.PasswordRequestMessage=t.PublicKeyOKMessage=t.AuthenticationInfoResponseMessage=t.AuthenticationInfoRequestMessage=t.PublicKeyRequestMessage=t.AuthenticationRequestMessage=t.AuthenticationMessage=void 0;const s=n(6744);class i extends s.SshMessage{}t.AuthenticationMessage=i;class r extends i{get messageType(){return 50}onRead(e){this.username=e.readString("utf8"),this.serviceName=e.readString("ascii"),this.methodName=e.readString("ascii")}onWrite(e){e.writeString(this.username||"","utf8"),e.writeString(this.serviceName||"","ascii"),e.writeString(this.validateField(this.methodName,"method name"),"ascii")}toString(){return super.toString()+` (Method: ${this.methodName}, Username: ${this.username})`}}t.AuthenticationRequestMessage=r;class o extends r{constructor(){super(),this.methodName="publickey"}get hasSignature(){return!!(this.signature&&this.signature.length>0)}onRead(e){super.onRead(e);const t=e.readBoolean();this.keyAlgorithmName=e.readString("ascii"),this.publicKey=e.readBinary(),t?(this.signature=e.readBinary(),this.payloadWithoutSignature=this.rawBytes.slice(0,this.rawBytes.length-this.signature.length-4)):this.signature=void 0}onWrite(e){var t,n;if(super.onWrite(e),!this.keyAlgorithmName)throw new Error("Key algorithm name not set.");if("hostbased"===this.methodName){if(e.writeString(this.keyAlgorithmName,"ascii"),e.writeBinary(this.publicKey||Buffer.alloc(0)),e.writeString(null!==(t=this.clientHostname)&&void 0!==t?t:"","ascii"),e.writeString(null!==(n=this.clientUsername)&&void 0!==n?n:"","ascii"),!this.hasSignature)throw new Error("A signature is required for a host-based authentcation request.");e.writeBinary(this.signature)}else e.writeBoolean(this.hasSignature),e.writeString(this.keyAlgorithmName,"ascii"),e.writeBinary(this.publicKey||Buffer.alloc(0)),this.hasSignature&&e.writeBinary(this.signature)}}t.PublicKeyRequestMessage=o;class a extends i{get messageType(){return 60}onRead(e){this.name=e.readString("utf8"),this.instruction=e.readString("utf8"),this.language=e.readString("ascii"),this.prompts=[];const t=e.readUInt32(),n=[];for(let s=0;s<t;s++)n.push(e.readString("utf8"));for(let s=0;s<t;s++)this.prompts.push({prompt:n[s],echo:e.readBoolean()})}onWrite(e){var t,n;e.writeString(this.name||"","utf8"),e.writeString(this.instruction||"","utf8"),e.writeString(this.language||"","ascii");const s=null!==(n=null===(t=this.prompts)||void 0===t?void 0:t.length)&&void 0!==n?n:0;e.writeUInt32(s);for(let t=0;t<s;t++)e.writeString(this.prompts[t].prompt||"","utf8");for(let t=0;t<s;t++)e.writeBoolean(this.prompts[t].echo)}}t.AuthenticationInfoRequestMessage=a;class c extends i{get messageType(){return 61}onRead(e){this.responses=[];const t=e.readUInt32();for(let n=0;n<t;n++)this.responses.push(e.readString("utf8"))}onWrite(e){var t,n;const s=null!==(n=null===(t=this.responses)||void 0===t?void 0:t.length)&&void 0!==n?n:0;e.writeUInt32(s);for(let t=0;t<s;t++)e.writeString(this.responses[t]||"","utf8")}}t.AuthenticationInfoResponseMessage=c,t.PublicKeyOKMessage=class extends i{get messageType(){return 60}onRead(e){this.keyAlgorithmName=e.readString("ascii"),this.publicKey=e.readBinary()}onWrite(e){if(!this.keyAlgorithmName)throw new Error("Key algorithm name not set.");if(!this.publicKey)throw new Error("Public key not set.");e.writeString(this.keyAlgorithmName,"ascii"),e.writeBinary(this.publicKey)}},t.PasswordRequestMessage=class extends r{constructor(){super(),this.methodName="password"}onRead(e){super.onRead(e),e.readBoolean(),this.password=e.readString("utf8")}onWrite(e){super.onWrite(e),e.writeBoolean(!1),e.writeString(this.password||"","utf8")}};class l extends i{constructor(){super(...arguments),this.partialSuccess=!1}get messageType(){return 51}onRead(e){this.methodNames=e.readList("ascii"),this.partialSuccess=e.readBoolean()}onWrite(e){e.writeList(this.methodNames||[],"ascii"),e.writeBoolean(this.partialSuccess)}}t.AuthenticationFailureMessage=l;class u extends i{get messageType(){return 52}onRead(e){}onWrite(e){}}t.AuthenticationSuccessMessage=u,s.SshMessage.index.set(50,r),s.SshMessage.index.set(51,l),s.SshMessage.index.set(52,u),s.SshMessage.index.set([60,"publickey"],o),s.SshMessage.index.set([60,"keyboard-interactive"],a),s.SshMessage.index.set([61,"keyboard-interactive"],c)},3379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelFailureMessage=t.ChannelSuccessMessage=t.ChannelSignalMessage=t.CommandRequestMessage=t.ChannelRequestMessage=t.ChannelRequestType=t.ChannelCloseMessage=t.ChannelEofMessage=t.ChannelExtendedDataMessage=t.ChannelDataMessage=t.ChannelWindowAdjustMessage=t.ChannelOpenFailureMessage=t.SshChannelOpenFailureReason=t.ChannelOpenConfirmationMessage=t.ChannelOpenMessage=t.ChannelMessage=t.ConnectionMessage=void 0;const s=n(6744),i=n(7309);class r extends s.SshMessage{}t.ConnectionMessage=r;class o extends r{get recipientChannel(){return this.recipientChannelValue}set recipientChannel(e){e!==this.recipientChannelValue&&(this.recipientChannelValue=e,this.rawBytes&&i.SshDataWriter.writeUInt32(this.rawBytes,1,null!=e?e:0))}onRead(e){this.recipientChannel=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.recipientChannel,"recipient channel"))}toString(){return`${super.toString()} (recipientChannel=${this.recipientChannel})`}}t.ChannelMessage=o;class a extends r{get messageType(){return 90}get senderChannel(){return this.senderChannelValue}set senderChannel(e){e!==this.senderChannelValue&&(this.senderChannelValue=e,this.rawBytes&&this.channelType&&i.SshDataWriter.writeUInt32(this.rawBytes,5+this.channelType.length,null!=e?e:0))}onRead(e){this.channelType=e.readString("ascii"),this.senderChannel=e.readUInt32(),this.maxWindowSize=e.readUInt32(),this.maxPacketSize=e.readUInt32()}onWrite(e){e.writeString(this.validateField(this.channelType,"channel type"),"ascii"),e.writeUInt32(this.validateField(this.senderChannel,"sender channel")),e.writeUInt32(this.maxWindowSize||a.defaultMaxWindowSize),e.writeUInt32(this.maxPacketSize||a.defaultMaxPacketSize)}toString(){return`${super.toString()}(channelType=${this.channelType}, senderChannel=${this.senderChannel})`}}t.ChannelOpenMessage=a,a.defaultMaxPacketSize=32768,a.defaultMaxWindowSize=1048576;class c extends o{get messageType(){return 91}onRead(e){super.onRead(e),this.senderChannel=e.readUInt32(),this.maxWindowSize=e.readUInt32(),this.maxPacketSize=e.readUInt32()}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.senderChannel,"sender channel")),e.writeUInt32(this.validateField(this.maxWindowSize,"max window size")),e.writeUInt32(this.validateField(this.maxPacketSize,"max packet size"))}toString(){return`${super.toString()}(senderChannel=${this.senderChannel})`}}var l,u;t.ChannelOpenConfirmationMessage=c,function(e){e[e.none=0]="none",e[e.administrativelyProhibited=1]="administrativelyProhibited",e[e.connectFailed=2]="connectFailed",e[e.unknownChannelType=3]="unknownChannelType",e[e.resourceShortage=4]="resourceShortage"}(l=t.SshChannelOpenFailureReason||(t.SshChannelOpenFailureReason={}));class h extends o{get messageType(){return 92}onRead(e){super.onRead(e),this.reasonCode=e.readUInt32(),this.description=e.readString("utf8"),this.language=e.readString("ascii")}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.reasonCode,"reason code")),e.writeString(this.description||"","utf8"),e.writeString(this.language||"en","ascii")}toString(){return`${super.toString()} (${l[this.reasonCode||0]}: ${this.description})`}}t.ChannelOpenFailureMessage=h;class p extends o{get messageType(){return 93}onRead(e){super.onRead(e),this.bytesToAdd=e.readUInt32()}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.bytesToAdd,"bytes to add"))}toString(){return`${super.toString()} (bytesToAdd=${this.bytesToAdd})`}}t.ChannelWindowAdjustMessage=p;class d extends o{get messageType(){return 94}onRead(e){super.onRead(e),this.data=e.readBinary()}onWrite(e){super.onWrite(e),e.writeBinary(this.validateField(this.data,"data"))}toString(){return this.data?(0,i.formatBuffer)(this.data,""):"[0]"}}t.ChannelDataMessage=d;class f extends o{get messageType(){return 95}onRead(e){super.onRead(e),this.dataTypeCode=e.readUInt32(),this.data=e.readBinary()}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.dataTypeCode,"data type code")),e.writeBinary(this.validateField(this.data,"data"))}toString(){return`${super.toString()} (dataTypeCode=${this.dataTypeCode}, data=${this.data?(0,i.formatBuffer)(this.data,""):"[0]"})`}}t.ChannelExtendedDataMessage=f;class m extends o{get messageType(){return 96}}t.ChannelEofMessage=m;class g extends o{get messageType(){return 97}}t.ChannelCloseMessage=g,function(e){e.command="exec",e.shell="shell",e.terminal="pty-req",e.signal="signal",e.exitSignal="exit-signal",e.exitStatus="exit-status"}(u=t.ChannelRequestType||(t.ChannelRequestType={}));class v extends o{constructor(e,t){super(),this.requestType=e,this.wantReply=null!=t&&t}get messageType(){return 98}onRead(e){super.onRead(e),this.requestType=e.readString("ascii"),this.wantReply=e.readBoolean()}onWrite(e){void 0===this.recipientChannel&&(this.recipientChannel=0),super.onWrite(e),e.writeString(this.validateField(this.requestType,"request type"),"ascii"),e.writeBoolean(this.wantReply)}}t.ChannelRequestMessage=v,t.CommandRequestMessage=class extends v{constructor(){super(),this.requestType=u.command}onRead(e){super.onRead(e),this.command=e.readString("utf8")}onWrite(e){super.onWrite(e),e.writeString(this.validateField(this.command,"command"),"utf8")}toString(){return`${super.toString()} (requestType=${this.requestType})`}},t.ChannelSignalMessage=class extends v{constructor(){super()}get signal(){return this.signalValue}set signal(e){this.requestType=u.signal,this.signalValue=e}get exitSignal(){return this.signalValue}set exitSignal(e){this.requestType=u.exitSignal,this.signalValue=e}get errorMessage(){return this.errorMessageValue}set errorMessage(e){if(this.requestType!==u.exitSignal)throw new Error(`Error message property is only valid for ${u.exitSignal} messages.`);this.errorMessageValue=e}get exitStatus(){return this.statusValue}set exitStatus(e){this.requestType=u.exitStatus,this.statusValue=e}onRead(e){switch(super.onRead(e),this.requestType){case u.exitStatus:this.exitStatus=e.readUInt32();break;case u.signal:this.signal=e.readString("ascii");break;case u.exitSignal:this.exitSignal=e.readString("ascii"),e.readBoolean(),this.errorMessage=e.readString("utf8"),e.readString("ascii")}}onWrite(e){if(!this.requestType)throw new Error("Signal message request type not set.");switch(this.wantReply=!1,super.onWrite(e),this.requestType){case u.exitStatus:e.writeUInt32(this.validateField(this.exitStatus,"exit status"));break;case u.signal:e.writeString(this.validateField(this.signal,"signal"),"ascii");break;case u.exitSignal:e.writeString(this.validateField(this.exitSignal,"exit signal"),"ascii"),e.writeBoolean(!1),e.writeString(this.errorMessage||"","utf8"),e.writeString("","ascii");break;default:throw new Error(`Unknown signal message request type: ${this.requestType}`)}}};class y extends o{get messageType(){return 99}}t.ChannelSuccessMessage=y;class b extends o{get messageType(){return 100}}t.ChannelFailureMessage=b,s.SshMessage.index.set(90,a),s.SshMessage.index.set(91,c),s.SshMessage.index.set(92,h),s.SshMessage.index.set(93,p),s.SshMessage.index.set(94,d),s.SshMessage.index.set(95,f),s.SshMessage.index.set(96,m),s.SshMessage.index.set(97,g),s.SshMessage.index.set(98,v),s.SshMessage.index.set(99,y),s.SshMessage.index.set(100,b)},5255:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewKeysMessage=t.KeyExchangeDhReplyMessage=t.KeyExchangeDhInitMessage=t.KeyExchangeInitMessage=t.KeyExchangeMessage=void 0;const s=n(4300),i=n(6744),r=n(7521);class o extends i.SshMessage{}t.KeyExchangeMessage=o;class a extends o{get messageType(){return 20}onRead(e){this.cookie=e.read(16),this.keyExchangeAlgorithms=e.readList("ascii"),this.serverHostKeyAlgorithms=e.readList("ascii"),this.encryptionAlgorithmsClientToServer=e.readList("ascii"),this.encryptionAlgorithmsServerToClient=e.readList("ascii"),this.macAlgorithmsClientToServer=e.readList("ascii"),this.macAlgorithmsServerToClient=e.readList("ascii"),this.compressionAlgorithmsClientToServer=e.readList("ascii"),this.compressionAlgorithmsServerToClient=e.readList("ascii"),this.languagesClientToServer=e.readList("ascii"),this.languagesServerToClient=e.readList("ascii"),this.firstKexPacketFollows=e.readBoolean(),this.reserved=e.readUInt32()}onWrite(e){var t;this.cookie||(this.cookie=s.Buffer.alloc(16),r.SshAlgorithms.random.getBytes(this.cookie)),e.write(this.cookie),e.writeList(this.keyExchangeAlgorithms||[],"ascii"),e.writeList(this.serverHostKeyAlgorithms||[],"ascii"),e.writeList(this.encryptionAlgorithmsClientToServer||[],"ascii"),e.writeList(this.encryptionAlgorithmsServerToClient||[],"ascii"),e.writeList(this.macAlgorithmsClientToServer||[],"ascii"),e.writeList(this.macAlgorithmsServerToClient||[],"ascii"),e.writeList(this.compressionAlgorithmsClientToServer||[],"ascii"),e.writeList(this.compressionAlgorithmsServerToClient||[],"ascii"),e.writeList(this.languagesClientToServer||[],"ascii"),e.writeList(this.languagesServerToClient||[],"ascii"),e.writeBoolean(null!==(t=this.firstKexPacketFollows)&&void 0!==t&&t),e.writeUInt32(this.reserved||0)}static CreateNone(){const e=["none"],t=[""],n=new a;return n.cookie=s.Buffer.alloc(16),n.keyExchangeAlgorithms=e,n.serverHostKeyAlgorithms=e,n.encryptionAlgorithmsClientToServer=e,n.encryptionAlgorithmsServerToClient=e,n.macAlgorithmsClientToServer=e,n.macAlgorithmsServerToClient=e,n.compressionAlgorithmsClientToServer=e,n.compressionAlgorithmsServerToClient=e,n.languagesClientToServer=t,n.languagesServerToClient=t,n.rawBytes=n.toBuffer(),n}get allowsNone(){const e=e=>!0===(null==e?void 0:e.includes("none"));return e(this.keyExchangeAlgorithms)&&e(this.serverHostKeyAlgorithms)&&e(this.encryptionAlgorithmsClientToServer)&&e(this.encryptionAlgorithmsServerToClient)&&e(this.macAlgorithmsClientToServer)&&e(this.macAlgorithmsServerToClient)&&e(this.compressionAlgorithmsClientToServer)&&e(this.compressionAlgorithmsServerToClient)&&!0!==this.firstKexPacketFollows}}t.KeyExchangeInitMessage=a,a.none=a.CreateNone();class c extends o{get messageType(){return 30}onRead(e){this.e=e.readBinary()}onWrite(e){e.writeBinary(this.validateField(this.e,"E"))}}t.KeyExchangeDhInitMessage=c;class l extends o{get messageType(){return 31}onRead(e){this.hostKey=e.readBinary(),this.f=e.readBinary(),this.signature=e.readBinary()}onWrite(e){e.writeBinary(this.validateField(this.hostKey,"host key")),e.writeBinary(this.validateField(this.f,"F")),e.writeBinary(this.validateField(this.signature,"signature"))}}t.KeyExchangeDhReplyMessage=l;class u extends o{get messageType(){return 21}onRead(e){}onWrite(e){}}t.NewKeysMessage=u,i.SshMessage.index.set(20,a),i.SshMessage.index.set(30,c),i.SshMessage.index.set(31,l),i.SshMessage.index.set(21,u)},6744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshMessage=void 0;const s=n(4300),i=n(7309);class r{get messageType(){return 0}toBuffer(){const e=new i.SshDataWriter(s.Buffer.alloc(16));return this.write(e),e.toBuffer()}read(e){this.rawBytes=e.buffer;const t=e.readByte();if(t!==this.messageType)throw new Error(`Message type ${t} is not valid.`);this.onRead(e)}write(e){this.rawBytes?e.write(this.rawBytes):(e.writeByte(this.messageType),this.onWrite(e))}rewrite(){if(this.rawBytes){const e=new i.SshDataWriter(s.Buffer.alloc(16));e.writeByte(this.messageType),this.onWrite(e),this.rawBytes=e.toBuffer()}}onRead(e){throw new Error("Not supported.")}onWrite(e){throw new Error("Not supported.")}validateField(e,t){if(void 0===e)throw new Error(`${this.constructor.name} ${t} is required.`);return e}toString(){return this.constructor.name}static create(e,t,n,s){let r=e.messages.get(t);if(!r&&n){const s=e.contextualMessages.get(n);s&&(r=s.get(t))}if(r){const e=new r;return e.read(new i.SshDataReader(s)),e}return null}convertTo(e,t=!1){const n=new i.SshDataReader(t?s.Buffer.from(this.rawBytes):this.rawBytes);return e.read(n),e}}t.SshMessage=r,r.index=new Map},6306:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionReconnectFailureMessage=t.SshReconnectFailureReason=t.SessionReconnectResponseMessage=t.SessionReconnectRequestMessage=t.SessionChannelRequestMessage=t.ExtensionInfoMessage=t.SessionRequestFailureMessage=t.SessionRequestSuccessMessage=t.SessionRequestMessage=t.ServiceAcceptMessage=t.ServiceRequestMessage=t.DebugMessage=t.UnimplementedMessage=t.IgnoreMessage=t.DisconnectMessage=t.SshDisconnectReason=void 0;const s=n(6744),i=n(3379);var r,o;!function(e){e[e.none=0]="none",e[e.hostNotAllowedToConnect=1]="hostNotAllowedToConnect",e[e.protocolError=2]="protocolError",e[e.keyExchangeFailed=3]="keyExchangeFailed",e[e.reserved=4]="reserved",e[e.macError=5]="macError",e[e.compressionError=6]="compressionError",e[e.serviceNotAvailable=7]="serviceNotAvailable",e[e.protocolVersionNotSupported=8]="protocolVersionNotSupported",e[e.hostKeyNotVerifiable=9]="hostKeyNotVerifiable",e[e.connectionLost=10]="connectionLost",e[e.byApplication=11]="byApplication",e[e.tooManyConnections=12]="tooManyConnections",e[e.authCancelledByUser=13]="authCancelledByUser",e[e.noMoreAuthMethodsAvailable=14]="noMoreAuthMethodsAvailable",e[e.illegalUserName=15]="illegalUserName"}(r=t.SshDisconnectReason||(t.SshDisconnectReason={}));class a extends s.SshMessage{get messageType(){return 1}onRead(e){this.reasonCode=e.readUInt32(),this.description=e.readString("utf8"),e.available>=4?this.language=e.readString("ascii"):this.language=null}onWrite(e){e.writeUInt32(this.validateField(this.reasonCode,"reason code")),e.writeString(this.description||"","utf8"),this.language&&e.writeString(this.language,"ascii")}toString(){return`${super.toString()} (${r[this.reasonCode||0]}: ${this.description})`}}t.DisconnectMessage=a;class c extends s.SshMessage{get messageType(){return 2}onRead(e){}onWrite(e){}}t.IgnoreMessage=c;class l extends s.SshMessage{get messageType(){return 3}onRead(e){this.sequenceNumber=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.sequenceNumber,"sequence number"))}toString(){return this.unimplementedMessageType?`${super.toString()} (messageType=${this.unimplementedMessageType})`:`${super.toString()} (sequenceNumber=${this.sequenceNumber})`}}t.UnimplementedMessage=l;class u extends s.SshMessage{constructor(e){super(),this.alwaysDisplay=!1,this.message=e}get messageType(){return 4}onRead(e){this.alwaysDisplay=e.readBoolean(),this.message=e.readString("utf8"),this.language=e.readString("ascii")}onWrite(e){var t,n;e.writeBoolean(this.alwaysDisplay),e.writeString(null!==(t=this.message)&&void 0!==t?t:"","utf8"),e.writeString(null!==(n=this.language)&&void 0!==n?n:"","ascii")}toString(){return`${super.toString()}: ${this.message}`}}t.DebugMessage=u;class h extends s.SshMessage{get messageType(){return 5}onRead(e){this.serviceName=e.readString("ascii")}onWrite(e){e.writeString(this.validateField(this.serviceName,"service name"),"ascii")}}t.ServiceRequestMessage=h;class p extends s.SshMessage{get messageType(){return 6}onRead(e){this.serviceName=e.readString("ascii")}onWrite(e){e.writeString(this.validateField(this.serviceName,"service name"),"ascii")}}t.ServiceAcceptMessage=p;class d extends s.SshMessage{constructor(e,t){super(),this.requestType=e,this.wantReply=null!=t&&t}get messageType(){return 80}onRead(e){this.requestType=e.readString("ascii"),this.wantReply=e.readBoolean()}onWrite(e){e.writeString(this.validateField(this.requestType,"request type"),"ascii"),e.writeBoolean(this.wantReply)}toString(){return`${super.toString()} (requestType=${this.requestType})`}}t.SessionRequestMessage=d;class f extends s.SshMessage{get messageType(){return 81}onRead(e){}onWrite(e){}}t.SessionRequestSuccessMessage=f;class m extends s.SshMessage{get messageType(){return 82}onRead(e){}onWrite(e){}}t.SessionRequestFailureMessage=m;class g extends s.SshMessage{constructor(){super(...arguments),this.extensionInfo={}}get messageType(){return 7}onRead(e){const t=e.readUInt32();this.extensionInfo={};for(let n=0;n<t;n++){const t=e.readString("ascii"),n=e.readString("utf8");this.extensionInfo[t]=n}}onWrite(e){const t=Object.keys(this.extensionInfo);e.writeUInt32(t.length);for(const n of t)e.writeString(n,"ascii"),e.writeString(this.extensionInfo[n]||"","utf8")}toString(){let e="";for(const[t,n]of Object.entries(this.extensionInfo))e&&(e+="; "),e+=t,n&&(e+="="+n);return`${super.toString()} (${e})`}}t.ExtensionInfoMessage=g,g.serverIndicator="ext-info-c",g.clientIndicator="ext-info-c",t.SessionChannelRequestMessage=class extends d{onRead(e){super.onRead(e),this.senderChannel=e.readUInt32();const t=new i.ChannelRequestMessage;t.read(e),this.request=t}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.senderChannel,"sender channel")),this.validateField(this.request,"request message").write(e)}},t.SessionReconnectRequestMessage=class extends d{onRead(e){super.onRead(e),this.clientReconnectToken=e.readBinary(),this.lastReceivedSequenceNumber=e.readUInt64()}onWrite(e){super.onWrite(e),e.writeBinary(this.validateField(this.clientReconnectToken,"clientReconnectToken")),e.writeUInt64(this.validateField(this.lastReceivedSequenceNumber,"lastReceivedSequenceNumber"))}},t.SessionReconnectResponseMessage=class extends f{onRead(e){super.onRead(e),this.serverReconnectToken=e.readBinary(),this.lastReceivedSequenceNumber=e.readUInt64()}onWrite(e){super.onWrite(e),e.writeBinary(this.validateField(this.serverReconnectToken,"serverReconnectToken")),e.writeUInt64(this.validateField(this.lastReceivedSequenceNumber,"lastReceivedSequenceNumber"))}},function(e){e[e.none=0]="none",e[e.unknownServerFailure=1]="unknownServerFailure",e[e.sessionNotFound=2]="sessionNotFound",e[e.invalidClientReconnectToken=3]="invalidClientReconnectToken",e[e.serverDroppedMessages=4]="serverDroppedMessages",e[e.unknownClientFailure=101]="unknownClientFailure",e[e.differentServerHostKey=102]="differentServerHostKey",e[e.invalidServerReconnectToken=103]="invalidServerReconnectToken",e[e.clientDroppedMessages=104]="clientDroppedMessages"}(o=t.SshReconnectFailureReason||(t.SshReconnectFailureReason={})),t.SessionReconnectFailureMessage=class extends m{onRead(e){e.available>0&&(this.reasonCode=e.readUInt32(),this.description=e.readString("utf8"),this.language=e.readString("ascii"))}onWrite(e){e.writeUInt32(this.validateField(this.reasonCode,"reason code")),e.writeString(this.description||"","utf8"),e.writeString(this.language||"en","ascii")}toString(){return`${super.toString()} (${o[this.reasonCode||0]}: ${this.description})`}},s.SshMessage.index.set(1,a),s.SshMessage.index.set(2,c),s.SshMessage.index.set(3,l),s.SshMessage.index.set(5,h),s.SshMessage.index.set(6,p),s.SshMessage.index.set(7,g),s.SshMessage.index.set(80,d),s.SshMessage.index.set(81,f),s.SshMessage.index.set(82,m)},8614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelMetrics=void 0,t.ChannelMetrics=class{constructor(){this.bytesSentSum=0,this.bytesReceivedSum=0}get bytesSent(){return this.bytesSentSum}get bytesReceived(){return this.bytesReceivedSum}addBytesSent(e){this.bytesSentSum+=e}addBytesReceived(e){this.bytesReceivedSum+=e}toString(){return`Bytes S/R: ${this.bytesSent} / ${this.bytesReceived}; `}}},2750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionContour=void 0;const s=n(4608),i=n(6655),r=n(7399);class o{constructor(e=256){if(this.intervalMs=o.initialInterval,this.count=0,this.updateQueue=new i.Queue,this.updateSemaphore=new r.Semaphore(0),this.disposed=!1,e<2||0!=(e&e-1))throw new Error("Contour intervals must be a power of two.");this.maxIntervals=e,this.intervalBytesSent=new Array(e),this.intervalBytesReceived=new Array(e),this.intervalLatencyMin=new Array(e),this.intervalLatencyMax=new Array(e),this.intervalLatencySum=new Array(e),this.intervalLatencyCount=new Array(e),this.intervalLatencyAvg=new Array(e),this.intervalBytesSent.fill(0),this.intervalBytesReceived.fill(0),this.intervalLatencyMin.fill(0),this.intervalLatencyMax.fill(0),this.intervalLatencySum.fill(0),this.intervalLatencyCount.fill(0),this.intervalLatencyAvg.fill(0)}get intervalCount(){return this.count}get interval(){return this.intervalMs}get bytesSent(){return this.intervalBytesSent.slice(0,this.count)}get bytesReceived(){return this.intervalBytesReceived.slice(0,this.count)}get latencyMinMs(){return this.intervalLatencyMin.slice(0,this.count)}get latencyMaxMs(){return this.intervalLatencyMax.slice(0,this.count)}get latencyAverageMs(){return this.intervalLatencyAvg.slice(0,this.count)}onMessageSent(e){this.updateQueue.enqueue({time:e.time,bytesSent:e.size}),this.updateSemaphore.tryRelease()}onMessageReceived(e){this.updateQueue.enqueue({time:e.time,bytesReceived:e.size}),this.updateSemaphore.tryRelease()}onLatencyUpdated(e){this.updateQueue.enqueue(e),this.updateSemaphore.tryRelease()}onSessionClosed(){this.updateSemaphore.tryRelease()}async collectMetrics(e,t){if(!e)throw new TypeError("A session metrics object is required.");if(this.disposed)throw new s.ObjectDisposedError(this);const n=[];n.push(e.onMessageSent(this.onMessageSent.bind(this))),n.push(e.onMessageReceived(this.onMessageReceived.bind(this))),n.push(e.onLatencyUpdated(this.onLatencyUpdated.bind(this))),n.push(e.onSessionClosed(this.onSessionClosed.bind(this)));try{for(;!(null==t?void 0:t.isCancellationRequested);){try{await this.updateSemaphore.wait(t)}catch(e){break}const e=this.updateQueue.dequeue();if(!e)break;const n=this.updateInterval(e.time);e.bytesSent&&(this.intervalBytesSent[n]+=e.bytesSent),e.bytesReceived&&(this.intervalBytesReceived[n]+=e.bytesReceived);const s=e.latency;s&&((!this.intervalLatencyMin[n]||s<this.intervalLatencyMin[n])&&(this.intervalLatencyMin[n]=s),(!this.intervalLatencyMax[n]||s>this.intervalLatencyMax[n])&&(this.intervalLatencyMax[n]=s),this.intervalLatencySum[n]+=s,this.intervalLatencyCount[n]++,this.intervalLatencyAvg[n]=this.intervalLatencySum[n]/this.intervalLatencyCount[n])}this.disposed&&this.updateSemaphore.dispose()}finally{for(const e of n)e.dispose()}}updateInterval(e){let t=Math.floor(e/this.intervalMs);if(t>=this.intervalCount){for(;t>=this.maxIntervals;)this.expandIntervals(),t=Math.floor(e/this.intervalMs);this.count=t+1}return t}expandIntervals(){const e=(e,t,n)=>0===e?t:0===t?e:n(e,t),t=this.maxIntervals/2;for(let n=0;n<t;n++){const t=2*n,s=2*n+1;this.intervalBytesSent[n]=this.intervalBytesSent[t]+this.intervalBytesSent[s],this.intervalBytesReceived[n]=this.intervalBytesReceived[t]+this.intervalBytesReceived[s],this.intervalLatencyMin[n]=e(this.intervalLatencyMin[t],this.intervalLatencyMin[s],Math.min),this.intervalLatencyMax[n]=e(this.intervalLatencyMax[t],this.intervalLatencyMax[s],Math.max),this.intervalLatencySum[n]=this.intervalLatencySum[t]+this.intervalLatencySum[s];const i=this.intervalLatencyCount[t]+this.intervalLatencyCount[s];this.intervalLatencyCount[n]=i,this.intervalLatencyAvg[n]=0===i?0:this.intervalLatencySum[n]/this.intervalLatencyCount[n]}this.intervalBytesSent.fill(0,t,this.maxIntervals),this.intervalBytesReceived.fill(0,t,this.maxIntervals),this.intervalLatencyMin.fill(0,t,this.maxIntervals),this.intervalLatencyMax.fill(0,t,this.maxIntervals),this.intervalLatencySum.fill(0,t,this.maxIntervals),this.intervalLatencyCount.fill(0,t,this.maxIntervals),this.intervalLatencyAvg.fill(0,t,this.maxIntervals),this.intervalMs*=2}dispose(){this.disposed=!0,this.updateSemaphore.tryRelease()}export(){const e=e=>Math.max(0,Math.ceil(Math.log2(Math.max(...e)/255))),t=(e,t)=>Math.round(e/Math.pow(2,t)),n=Buffer.alloc(3+5*(2+this.intervalCount)),s=Math.log2(this.interval/o.initialInterval);n[0]=1,n[1]=5,n[2]=s,n[3]=e(this.latencyMinMs),n[4]=e(this.latencyMaxMs),n[5]=e(this.latencyAverageMs),n[6]=e(this.bytesSent),n[7]=e(this.bytesReceived),n[8]=a.latencyMin,n[9]=a.latencyMax,n[10]=a.latencyAverage,n[11]=a.bytesSent,n[12]=a.bytesReceived;for(let e=0;e<this.intervalCount;e++){const s=13+5*e;n[s+0]=t(this.intervalLatencyMin[e],n[3]),n[s+1]=t(this.intervalLatencyMax[e],n[4]),n[s+2]=t(this.intervalLatencyAvg[e],n[5]),n[s+3]=t(this.intervalBytesSent[e],n[6]),n[s+4]=t(this.intervalBytesReceived[e],n[7])}return n.toString("base64")}static import(e){const t=Buffer.from(e,"base64");if(t.length<3)throw new Error("Invalid session contour string.");const n=t[0],s=t[1],i=t[2];if(1!==n)throw new Error(`Unsupported session contour version: ${n}`);const r=(t.length-3)/s-2;if(r<1||t.length!==3+s*(r+2))throw new Error("Incomplete session contour string.");const c=Math.pow(2,Math.ceil(Math.log2(r))),l=new o(c);l.intervalMs=Math.pow(2,i)*o.initialInterval,l.count=r;const u=new Array(s);for(let e=0;e<s;e++)u[e]=Math.pow(2,t[3+e]);const h=new Array(s);for(let e=0;e<s;e++)h[e]=t[3+s+e];for(let e=0;e<r;e++){const n=3+(2+e)*s;for(let i=0;i<s;i++)switch(h[i]){case a.latencyMin:l.intervalLatencyMin[e]=t[n+i]*u[i];break;case a.latencyMax:l.intervalLatencyMax[e]=t[n+i]*u[i];break;case a.latencyAverage:l.intervalLatencyAvg[e]=l.intervalLatencySum[e]=t[n+i]*u[i],l.intervalLatencyCount[e]=0===t[n+i]?0:1;break;case a.bytesSent:l.intervalBytesSent[e]=t[n+i]*u[i];break;case a.bytesReceived:l.intervalBytesReceived[e]=t[n+i]*u[i]}}return l}}var a;t.SessionContour=o,o.initialInterval=1e3,function(e){e[e.none=0]="none",e[e.latencyMin=1]="latencyMin",e[e.latencyMax=2]="latencyMax",e[e.latencyAverage=3]="latencyAverage",e[e.bytesSent=11]="bytesSent",e[e.bytesReceived=12]="bytesReceived"}(a||(a={}))},4340:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionMetrics=void 0;const s=n(5844),i=n(6197);t.SessionMetrics=class{constructor(){this.startTime=0,this.messagesSentCount=0,this.messagesReceivedCount=0,this.bytesSentSum=0,this.bytesReceivedSum=0,this.reconnectionsCount=0,this.currentLatency=0,this.minLatency=0,this.maxLatency=0,this.latencySum=0,this.latencyCount=0,this.messageSentEmitter=new s.Emitter,this.onMessageSent=this.messageSentEmitter.event,this.messageReceivedEmitter=new s.Emitter,this.onMessageReceived=this.messageReceivedEmitter.event,this.latencyUpdatedEmitter=new s.Emitter,this.onLatencyUpdated=this.latencyUpdatedEmitter.event,this.sessionClosedEmitter=new s.Emitter,this.onSessionClosed=this.sessionClosedEmitter.event,"object"==typeof performance&&"function"==typeof performance.now?Object.defineProperty(this,"time",{get:this.browserTime}):"object"==typeof process&&"function"==typeof process.hrtime&&Object.defineProperty(this,"time",{get:this.nodejsTime}),this.startTime=this.time}get time(){return Date.now()-this.startTime}browserTime(){return performance.now()-this.startTime}nodejsTime(){const[e,t]=process.hrtime();return 1e3*e+t/1e6-this.startTime}get messagesSent(){return this.messagesSentCount}get messagesReceived(){return this.messagesReceivedCount}get bytesSent(){return this.bytesSentSum}get bytesReceived(){return this.bytesReceivedSum}get reconnections(){return this.reconnectionsCount}get latencyAverageMs(){return 0===this.latencyCount?0:this.latencySum/this.latencyCount}get latencyMinMs(){return this.minLatency}get latencyMaxMs(){return this.maxLatency}get latencyCurrentMs(){return this.currentLatency}addMessageSent(e){this.messagesSentCount++,this.bytesSentSum+=e,this.messageSentEmitter.fire({time:this.time,size:e})}addMessageReceived(e){this.messagesReceivedCount++,this.bytesReceivedSum+=e,this.messageReceivedEmitter.fire({time:this.time,size:e})}addReconnection(){this.reconnectionsCount++}updateLatency(e,t){e<0?t&&t(i.TraceLevel.Warning,i.SshTraceEventIds.metricsError,`Measured latency was negative: ${e} us`):(this.currentLatency=e,0!==e&&((0===this.minLatency||e<this.minLatency)&&(this.minLatency=e),(0===this.maxLatency||e>this.maxLatency)&&(this.maxLatency=e),this.latencySum+=e,this.latencyCount++,this.latencyUpdatedEmitter.fire({time:this.time,latency:e})))}close(){this.currentLatency=0,this.sessionClosedEmitter.fire()}toString(){let e=`Messages S/R: ${this.messagesSent} / ${this.messagesReceived}; Bytes S/R: ${this.bytesSent} / ${this.bytesReceived}; Reconnections: ${this.reconnections}; `;const t=this.minLatency>=10?1:this.minLatency>=1?10:100;return this.maxLatency>0&&(e+=`Latency Min-Avg-Max: ${Math.round(this.minLatency*t)/t} - ${Math.round(this.latencySum/this.latencyCount*t)/t} - ${Math.round(this.maxLatency*t)/t} ms; `),this.currentLatency>0&&(e+=`Current Latency: ${Math.round(this.currentLatency*t)/t} ms; `),e}}},9141:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiChannelStream=void 0;const s=n(5844),i=n(9273),r=n(6373),o=n(7492),a=n(9872),c=n(6306),l=n(6197),u=n(3379),h=n(1039);t.MultiChannelStream=class{constructor(e){if(this.transportStream=e,this.disposed=!1,this.disposables=[],this.reportProgressEmitter=new s.Emitter,this.onReportProgress=this.reportProgressEmitter.event,this.channelMaxWindowSize=i.SshChannel.defaultMaxWindowSize,this.closedEmitter=new s.Emitter,this.onClosed=this.closedEmitter.event,this.channelOpeningEmitter=new s.Emitter,this.onChannelOpening=this.channelOpeningEmitter.event,!e)throw new TypeError("transportStream is required.");const t=new a.SshSessionConfiguration(!1);this.session=new o.SshSession(t),this.session.onReportProgress((e=>this.raiseReportProgress(e.progress,e.sessionNumber)),this,this.disposables),this.session.onClosed(this.onSessionClosed,this,this.disposables),this.session.onChannelOpening(this.onSessionChannelOpening,this,this.disposables)}get trace(){return this.session.trace}set trace(e){this.session.trace=e}raiseReportProgress(e,t){const n=new h.SshReportProgressEventArgs(e,t);this.reportProgressEmitter.fire(n)}get isClosed(){return this.disposed||this.session.isClosed}async connect(e){await this.session.connect(this.transportStream,e)}async acceptChannel(e,t){return await this.session.connect(this.transportStream,t),await this.session.acceptChannel(e,t)}async acceptStream(e,t){return this.createStream(await this.acceptChannel(e,t))}async openChannel(e,t){await this.session.connect(this.transportStream,t);const n=new u.ChannelOpenMessage;return n.channelType=null!=e?e:i.SshChannel.sessionChannelType,n.maxWindowSize=this.channelMaxWindowSize,await this.session.openChannel(n,null,t)}async openStream(e,t){return this.createStream(await this.openChannel(e,t))}createStream(e){return new r.SshStream(e)}async connectAndRunUntilClosed(e){const t=[],n=new Promise(((n,s)=>{null==e||e.onCancellationRequested(s,null,t),this.session.onClosed(n,null,t)}));try{await this.connect(e),await n}finally{t.forEach((e=>e.dispose())),await this.close()}}dispose(){if(!this.disposed){this.disposed=!0,this.session.dispose(),this.unsubscribe();try{this.transportStream&&this.transportStream.close().catch((e=>{this.trace(l.TraceLevel.Error,l.SshTraceEventIds.streamCloseError,`Error closing transport stream: ${e.message}`,e)}))}catch(e){if(!(e instanceof Error))throw e;this.trace(l.TraceLevel.Error,l.SshTraceEventIds.streamCloseError,`Error closing transport stream: ${e.message}`,e)}}}async close(){this.disposed||(this.disposed=!0,await this.session.close(c.SshDisconnectReason.none,"SshSession disposed"),this.session.dispose(),this.unsubscribe(),await this.transportStream.close())}onSessionClosed(e){this.unsubscribe(),this.closedEmitter.fire(e)}onSessionChannelOpening(e){e.isRemoteRequest&&(e.channel.maxWindowSize=this.channelMaxWindowSize),this.channelOpeningEmitter.fire(e)}unsubscribe(){this.disposables.forEach((e=>e.dispose())),this.disposables=[]}}},3661:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PipeExtensions=void 0;const s=n(4300),i=n(5844),r=n(6306),o=n(3379),a=n(3305),c=n(4608),l=n(6197);class u{static async pipeSession(e,t){if(!e)throw new TypeError("Session is required.");if(!t)throw new TypeError("Target session is required");const n=new a.PromiseCompletionSource;e.onRequest((e=>{e.responsePromise=u.forwardSessionRequest(e,t,e.cancellation)})),t.onRequest((t=>{t.responsePromise=u.forwardSessionRequest(t,e,t.cancellation)})),e.onChannelOpening((e=>{e.isRemoteRequest&&(e.openingPromise=u.forwardChannel(e,t,e.cancellation))})),t.onChannelOpening((t=>{t.isRemoteRequest&&(t.openingPromise=u.forwardChannel(t,e,t.cancellation))})),e.onClosed((e=>{n.resolve(u.forwardSessionClose(t,e))})),t.onClosed((t=>{n.resolve(u.forwardSessionClose(e,t))}));const s=await n.promise;await s}static async pipeChannel(e,t){if(!e)throw new TypeError("Channel is required.");if(!t)throw new TypeError("Target channel is required");const n=new a.PromiseCompletionSource;let i=!1;e.onRequest((e=>{e.responsePromise=u.forwardChannelRequest(e,t,e.cancellation)})),t.onRequest((t=>{t.responsePromise=u.forwardChannelRequest(t,e,t.cancellation)})),e.onDataReceived((n=>{u.forwardData(e,t,n).catch()})),t.onDataReceived((n=>{u.forwardData(t,e,n).catch()})),e.onEof((()=>{u.forwardData(e,t,s.Buffer.alloc(0)).catch()})),t.onEof((()=>{u.forwardData(t,e,s.Buffer.alloc(0)).catch()})),e.onExtendedDataReceived((n=>{u.forwardExtendedData(e,t,n.dataTypeCode,n.data).catch()})),t.onExtendedDataReceived((n=>{u.forwardExtendedData(t,e,n.dataTypeCode,n.data).catch()})),e.onClosed((s=>{i||(i=!0,n.resolve(u.forwardChannelClose(e,t,s)))})),t.onClosed((s=>{i||(i=!0,n.resolve(u.forwardChannelClose(t,e,s)))}));const r=await n.promise;await r}static async forwardSessionRequest(e,t,n){return e.request.wantReply?t.requestResponse(e.request,r.SessionRequestSuccessMessage,r.SessionRequestFailureMessage,n):t.request(e.request,n).then((()=>new r.SessionRequestSuccessMessage))}static async forwardChannel(e,t,n){var s;try{const s=await t.openChannel(e.request,null,n);return u.pipeChannel(e.channel,s).catch(),new o.ChannelOpenConfirmationMessage}catch(e){if(!(e instanceof Error))throw e;const t=new o.ChannelOpenFailureMessage;return e instanceof c.SshChannelError?t.reasonCode=null!==(s=e.reason)&&void 0!==s?s:o.SshChannelOpenFailureReason.connectFailed:t.reasonCode=o.SshChannelOpenFailureReason.connectFailed,t.description=e.message,t}}static async forwardChannelRequest(e,t,n){return e.request.recipientChannel=t.remoteChannelId,await t.request(e.request,n)?new o.ChannelSuccessMessage:new o.ChannelFailureMessage}static async forwardSessionClose(e,t){var n;return e.close(t.reason,t.message,null!==(n=t.error)&&void 0!==n?n:void 0)}static async forwardData(e,t,n){const r=s.Buffer.alloc(n.length);n.copy(r);const o=t.send(r,i.CancellationToken.None);return e.adjustWindow(r.length),o}static async forwardExtendedData(e,t,n,r){const o=s.Buffer.alloc(r.length);r.copy(o);const a=t.sendExtendedData(n,o,i.CancellationToken.None);return e.adjustWindow(o.length),a}static async forwardChannelClose(e,t,n){const s=`Piping channel closure.\nSource: ${e.session} ${e}\nDestination: ${t.session} ${t}\n`;return t.session.trace(l.TraceLevel.Verbose,l.SshTraceEventIds.channelClosed,s),n.error?(t.close(n.error),Promise.resolve()):n.exitSignal?t.close(n.exitSignal,n.errorMessage):"number"==typeof n.exitStatus?t.close(n.exitStatus):t.close()}}t.PipeExtensions=u},3689:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Progress=void 0,(n=t.Progress||(t.Progress={})).OpeningClientConnectionToRelay="OpeningClientConnectionToRelay",n.OpenedClientConnectionToRelay="OpenedClientConnectionToRelay",n.OpeningHostConnectionToRelay="OpeningHostConnectionToRelay",n.OpenedHostConnectionToRelay="OpenedHostConnectionToRelay",n.OpeningSshSessionConnection="OpeningSshSessionConnection",n.OpenedSshSessionConnection="OpenedSshSessionConnection",n.StartingProtocolVersionExchange="StartingProtocolVersionExchange",n.CompletedProtocolVersionExchange="CompletedProtocolVersionExchange",n.StartingKeyExchange="StartingKeyExchange",n.CompletedKeyExchange="CompletedKeyExchange",n.StartingSessionAuthentication="StartingSessionAuthentication",n.CompletedSessionAuthentication="CompletedSessionAuthentication"},3868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecureStream=void 0;const s=n(5844),i=n(3538),r=n(6373),o=n(9872),a=n(6306),c=n(6197),l=n(5706),u=n(7331),h=n(4608),p=n(2781),d=n(3305);class f extends p.Duplex{constructor(e,t,n){if(super({write(e,t,n){this.connectCompletion.promise.then((s=>{s?s._write(e,t,n):n(new h.ObjectDisposedError("SecureStream"))}),n)},writev(e,t){this.connectCompletion.promise.then((n=>{n?n._writev(e,t):t(new h.ObjectDisposedError("SecureStream"))}),t)},final(e){this.connectCompletion.promise.then((t=>{t?t._final(e):e(new h.ObjectDisposedError("SecureStream"))}),e)},read(e){this.connectCompletion.promise.then((t=>{t?t._read(e):this.push(null)}),(e=>{}))}}),this.transportStream=e,this.clientCredentials=null,this.serverCredentials=null,this.connectCompletion=new d.PromiseCompletionSource,this.disposed=!1,this.disposables=[],this.disconnectedEmitter=new s.Emitter,this.onDisconnected=this.disconnectedEmitter.event,this.closedEmitter=new s.Emitter,this.onClosed=this.closedEmitter.event,!e)throw new TypeError("A transport stream is required.");if(!t)throw new TypeError("Client or server credentials are required.");const i=new o.SshSessionConfiguration(!0);if(n&&i.protocolExtensions.push(o.SshProtocolExtensionNames.sessionReconnect),"username"in t){if(void 0!==n&&"boolean"!=typeof n)throw new TypeError("SecureStream client reconnectable sessions must be a boolean.");this.clientCredentials=t,this.session=new l.SshClientSession(i)}else{if(!t.publicKeys)throw new TypeError("Client or server credentials are required.");if(void 0!==n&&!Array.isArray(n))throw new TypeError("SecureStream server reconnectable sessions must be an array.");this.serverCredentials=t,this.session=new u.SshServerSession(i,n)}this.session.onDisconnected(this.onSessionDisconnected,this,this.disposables),this.session.onClosed(this.onSessionClosed,this,this.disposables)}get trace(){return this.session.trace}set trace(e){this.session.trace=e}get isClosed(){return this.disposed||this.session.isClosed}onAuthenticating(e,t,n){return this.session.onAuthenticating(e,t,n)}async connect(e){let t=!1;try{this.serverCredentials&&(this.session.credentials=this.serverCredentials);let n=this.transportStream;n instanceof p.Duplex&&(n=new i.NodeStream(n)),await this.session.connect(n,e),t=!0;let s=null;if(this.clientCredentials){const t=this.session;if(!await t.authenticateServer(e))throw new h.SshConnectionError("Server authentication failed.",a.SshDisconnectReason.hostKeyNotVerifiable);if(!await t.authenticateClient(this.clientCredentials,e))throw new h.SshConnectionError("Client authentication failed.",a.SshDisconnectReason.noMoreAuthMethodsAvailable);s=await this.session.openChannel(e)}else s=await this.session.acceptChannel(e);this.stream=this.createStream(s),this.stream.on("data",(e=>this.emit("data",e))),this.stream.on("end",(()=>this.emit("end"))),this.stream.on("close",(()=>this.emit("close"))),this.stream.on("error",(()=>this.emit("error"))),s.onClosed((()=>this.dispose())),this.connectCompletion.resolve(this.stream)}catch(e){if(!(e instanceof Error))throw e;if(!(e instanceof h.ObjectDisposedError&&this.session.isClosed)){let t=e instanceof h.SshConnectionError?e.reason:void 0;throw null!=t||(t=a.SshDisconnectReason.protocolError),await this.session.close(t,e.message,e),this.connectCompletion.reject(e),e}this.connectCompletion.resolve(null)}}async reconnect(e,t){if(!(this.session instanceof l.SshClientSession))throw new Error("Cannot reconnect SecureStream server.");if(!e)throw new TypeError("A transport stream is required.");this.transportStream=e;let n=this.transportStream;n instanceof p.Duplex&&(n=new i.NodeStream(n)),await this.session.reconnect(n,t)}createStream(e){return new r.SshStream(e)}dispose(){if(!this.disposed){const e=this.session.isConnected||this.session.isClosed;this.disposed=!0,this.session.dispose(),this.unsubscribe();try{!e&&this.transportStream&&(this.transportStream instanceof p.Duplex?(this.transportStream.end(),this.transportStream.destroy()):this.transportStream.close().catch((e=>{this.trace(c.TraceLevel.Error,c.SshTraceEventIds.streamCloseError,`Error closing transport stream: ${e.message}`,e)})))}catch(e){if(!(e instanceof Error))throw e;this.trace(c.TraceLevel.Error,c.SshTraceEventIds.streamCloseError,`Error closing transport stream: ${e.message}`,e)}}}async close(){this.disposed||(this.disposed=!0,await this.session.close(a.SshDisconnectReason.none,this.session.constructor.name+" disposed."),this.session.dispose(),this.unsubscribe(),this.transportStream instanceof p.Duplex?await new Promise((e=>{this.transportStream.end(e)})):await this.transportStream.close())}onSessionDisconnected(){this.disconnectedEmitter.fire()}onSessionClosed(e){this.unsubscribe(),this.closedEmitter.fire(e)}unsubscribe(){this.disposables.forEach((e=>e.dispose())),this.disposables=[]}}t.SecureStream=f},5263:function(e,t,n){"use strict";var s,i=this&&this.__decorate||function(e,t,n,s){var i,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationService=void 0;const r=n(1838),o=n(6892),a=n(5844),c=n(7309),l=n(6306),u=n(3314),h=n(3193),p=n(4865),d=n(6655),f=n(6197),m=n(4608);let g=s=class extends r.SshService{constructor(e){var t;super(e),this.currentRequestMessage=null,this.authenticationFailureCount=0,this.disposeCancellationSource=new a.CancellationTokenSource;const n=null===(t=e.algorithms)||void 0===t?void 0:t.publicKeyAlgorithmName;if(!n)throw new Error("Algorithms not initialized.");this.publicKeyAlgorithmName=n}handleMessage(e,t){return e instanceof o.AuthenticationSuccessMessage?this.handleSuccessMessage(e):e instanceof o.AuthenticationFailureMessage?this.handleFailureMessage(e):e instanceof o.AuthenticationRequestMessage?this.handleAuthenticationRequestMessage(e,t):e instanceof o.AuthenticationInfoRequestMessage?this.handleInfoRequestMessage(e,t):e instanceof o.AuthenticationInfoResponseMessage?this.handleInfoResponseMessage(e,t):void o.PublicKeyOKMessage}async handleAuthenticationRequestMessage(e,t){this.trace(f.TraceLevel.Info,f.SshTraceEventIds.sessionAuthenticating,`Authentication request: ${e.methodName}`);let n=e.methodName;if(this.session.config.authenticationMethods.includes(n)||(n=null),"publickey"===n||"hostbased"===n){const n=e.convertTo(new o.PublicKeyRequestMessage);return this.setCurrentRequest(n),this.handlePublicKeyRequestMessage(n,t)}if("password"===n){const n=e.convertTo(new o.PasswordRequestMessage);return this.setCurrentRequest(n),this.handlePasswordRequestMessage(n,t)}if("keyboard-interactive"===n)return this.setCurrentRequest(e),this.beginInteractiveAuthentication(e,t);if("none"===n)return this.setCurrentRequest(e),this.handleAuthenticating(new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientNone,{username:e.username}),t);{this.setCurrentRequest(null);const e=new o.AuthenticationFailureMessage;e.methodNames=["publickey","password","hostbased"],await this.session.sendMessage(e,t)}}setCurrentRequest(e){var t;this.currentRequestMessage=e;const n=this.session.protocol;n&&(n.messageContext=null!==(t=null==e?void 0:e.methodName)&&void 0!==t?t:null)}async handlePublicKeyRequestMessage(e,t){var n,s,i;const r=this.session.config.getPublicKeyAlgorithm(e.keyAlgorithmName);if(!r){const e=new o.AuthenticationFailureMessage;return e.methodNames=["publickey","password"],void await this.session.sendMessage(e,t)}const a=r.createKeyPair();let l;if(await a.setPublicKeyBytes(e.publicKey),"hostbased"===e.methodName)l=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientHostBased,{username:null!==(n=e.username)&&void 0!==n?n:"",publicKey:a,clientHostname:e.clientHostname,clientUsername:e.clientUsername});else if(e.hasSignature){const n=r.readSignatureData(e.signature),s=this.session.sessionId;if(null==s)throw new Error("Session ID not initialized.");const o=new c.SshDataWriter(Buffer.alloc(s.length+e.payloadWithoutSignature.length+20));o.writeBinary(s),o.write(e.payloadWithoutSignature);const h=o.toBuffer(),p=r.createVerifier(a);await p.verify(h,n)||await this.handleAuthenticationFailure("Public key authentication failed: invalid signature.",t),l=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientPublicKey,{username:null!==(i=e.username)&&void 0!==i?i:"",publicKey:a})}else l=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientPublicKeyQuery,{username:null!==(s=e.username)&&void 0!==s?s:"",publicKey:a});await this.handleAuthenticating(l,t)}async handlePasswordRequestMessage(e,t){var n,s;const i=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientPassword,{username:null!==(n=e.username)&&void 0!==n?n:"",password:null!==(s=e.password)&&void 0!==s?s:""});await this.handleAuthenticating(i,t)}async beginInteractiveAuthentication(e,t){const n=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientInteractive,{username:e.username});await this.handleAuthenticating(n,t)}async handleInfoRequestMessage(e,t){const n=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientInteractive,{infoRequest:e});await this.handleAuthenticating(n,t)}async handleInfoResponseMessage(e,t){var n;const s=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientInteractive,{username:null===(n=this.currentRequestMessage)||void 0===n?void 0:n.username,infoResponse:e});await this.handleAuthenticating(s,t)}async handleAuthenticating(e,t){var n;if(!this.currentRequestMessage)throw new m.SshConnectionError("No current authentication request.",l.SshDisconnectReason.protocolError);e.cancellation=this.disposeCancellationSource.token;let s=null;try{s=await this.session.raiseAuthenticatingEvent(e)}catch(e){if(!(e instanceof Error))throw e;this.trace(f.TraceLevel.Error,f.SshTraceEventIds.authenticationError,`Error while authenticating client: ${e.message}`,e),s=null}if(s)if(e.authenticationType===u.SshAuthenticationType.clientPublicKeyQuery){const e=this.currentRequestMessage,n=new o.PublicKeyOKMessage;n.keyAlgorithmName=e.keyAlgorithmName,n.publicKey=e.publicKey,this.setCurrentRequest(null),await this.session.sendMessage(n,t)}else{this.session.principal=s;const i=this.currentRequestMessage.serviceName;i&&this.session.activateService(i),this.trace(f.TraceLevel.Info,f.SshTraceEventIds.sessionAuthenticated,`${u.SshAuthenticationType[e.authenticationType]} authentication succeeded.`),this.setCurrentRequest(null),await this.session.sendMessage(new o.AuthenticationSuccessMessage,t),null===(n=this.session)||void 0===n||n.handleClientAuthenticated()}else e.authenticationType===u.SshAuthenticationType.clientInteractive&&!this.session.isClientSession&&e.infoRequest?await this.sendMessage(e.infoRequest,t):e.authenticationType===u.SshAuthenticationType.clientInteractive&&this.session.isClientSession&&e.infoResponse?await this.sendMessage(e.infoResponse,t):(this.setCurrentRequest(null),await this.handleAuthenticationFailure(`${u.SshAuthenticationType[e.authenticationType]} authentication failed.`))}async handleAuthenticationFailure(e,t){this.authenticationFailureCount++,this.trace(f.TraceLevel.Warning,f.SshTraceEventIds.clientAuthenticationFailed,e);const n=new o.AuthenticationFailureMessage;n.methodNames=this.session.config.authenticationMethods,await this.session.sendMessage(n,t),this.authenticationFailureCount>=this.session.config.maxClientAuthenticationAttempts&&await this.session.close(l.SshDisconnectReason.noMoreAuthMethodsAvailable,"Authentication failed.")}async authenticateClient(e,t){var n,s,i,r;this.clientAuthenticationMethods=new d.Queue;const o=this.session.config.authenticationMethods;if(o.includes("publickey"))for(const t of null!==(n=e.publicKeys)&&void 0!==n?n:[]){if(!t)continue;const n=null!==(s=e.username)&&void 0!==s?s:"";let i=t;const r=e.privateKeyProvider;this.clientAuthenticationMethods.enqueue({method:"publickey",handler:async e=>{if(!i.hasPrivateKey){if(null==r)throw new Error("A private key provider is required.");i=await r(t,null!=e?e:a.CancellationToken.None)}i?await this.requestPublicKeyAuthentication(n,i,e):await this.session.close(l.SshDisconnectReason.authCancelledByUser)}})}if(o.includes("password")){const t=e.passwordProvider;if(t)this.clientAuthenticationMethods.enqueue({method:"password",handler:async e=>{var n;const s=t(null!=e?e:a.CancellationToken.None),i=s?await s:null;i?await this.requestPasswordAuthentication(null!==(n=i[0])&&void 0!==n?n:"",i[1],e):await this.session.close(l.SshDisconnectReason.authCancelledByUser)}});else if(e.password){const t=null!==(i=e.username)&&void 0!==i?i:"",n=e.password;this.clientAuthenticationMethods.enqueue({method:"password",handler:async e=>{await this.requestPasswordAuthentication(t,n,e)}})}}if(0===this.clientAuthenticationMethods.size){const t=null!==(r=e.username)&&void 0!==r?r:"";if(o.includes("none")&&this.clientAuthenticationMethods.enqueue({method:"none",handler:async e=>{await this.requestUsernameAuthentication(t,e)}}),o.includes("keyboard-interactive")&&this.clientAuthenticationMethods.enqueue({method:"keyboard-interactive",handler:async e=>{await this.requestInteractiveAuthentication(t,e)}}),0===this.clientAuthenticationMethods.size)throw new Error("Could not prepare request for authentication method(s): "+o.join(", ")+". Supply client credentials or enable none or interactive authentication methods.")}this.session.activateService(h.ConnectionService);const c=this.clientAuthenticationMethods.dequeue();await c.handler(t)}async requestUsernameAuthentication(e,t){const n=new o.AuthenticationRequestMessage;n.serviceName=h.ConnectionService.serviceName,n.methodName="none",n.username=e,this.setCurrentRequest(n),await this.session.sendMessage(n,t)}async requestPublicKeyAuthentication(e,t,n){const s=this.session.config.publicKeyAlgorithms.find((e=>(null==e?void 0:e.keyAlgorithmName)===t.keyAlgorithmName));if(!s)throw new Error(`Public key algorithm '${t.keyAlgorithmName}' is not in session config.`);const i=new o.PublicKeyRequestMessage;i.serviceName=h.ConnectionService.serviceName,i.username=e,i.keyAlgorithmName=s.name,i.publicKey=await t.getPublicKeyBytes(s.name),i.signature=await this.createAuthenticationSignature(i,s,t),this.setCurrentRequest(i),await this.session.sendMessage(i,n)}async requestPasswordAuthentication(e,t,n){const s=new o.PasswordRequestMessage;s.serviceName=h.ConnectionService.serviceName,s.username=e,s.password=t,this.setCurrentRequest(s),await this.session.sendMessage(s,n)}async requestInteractiveAuthentication(e,t){const n=new o.AuthenticationRequestMessage;n.serviceName=h.ConnectionService.serviceName,n.methodName="keyboard-interactive",n.username=e,this.setCurrentRequest(n),await this.session.sendMessage(n,t)}async handleFailureMessage(e){var t,n;for(this.setCurrentRequest(null);null===(t=this.clientAuthenticationMethods)||void 0===t?void 0:t.size;){const t=this.clientAuthenticationMethods.dequeue();if(null===(n=e.methodNames)||void 0===n?void 0:n.includes(t.method))return void await t.handler(this.disposeCancellationSource.token)}this.session.onAuthenticationComplete(!1)}handleSuccessMessage(e){this.setCurrentRequest(null),this.session.onAuthenticationComplete(!0)}async createAuthenticationSignature(e,t,n){const s=this.session.sessionId;if(null==s)throw new Error("Session ID not initialized.");const i=new c.SshDataWriter(Buffer.alloc(e.publicKey.length+(e.username||"").length+400));i.writeBinary(s),i.writeByte(e.messageType),i.writeString(e.username||"","utf8"),i.writeString(e.serviceName||"","ascii"),i.writeString("publickey","ascii"),i.writeBoolean(!0),i.writeString(e.keyAlgorithmName,"ascii"),i.writeBinary(e.publicKey);const r=t.createSigner(n),o=await r.sign(i.toBuffer());return t.createSignatureData(o)}dispose(){try{this.disposeCancellationSource.cancel(),this.disposeCancellationSource.dispose()}catch(e){}super.dispose()}};g.serviceName="ssh-userauth",g=s=i([(0,p.serviceActivation)({serviceRequest:s.serviceName})],g),t.AuthenticationService=g},3193:function(e,t,n){"use strict";var s,i=this&&this.__decorate||function(e,t,n,s){var i,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionService=void 0;const r=n(1838),o=n(3379),a=n(3305),c=n(9273),l=n(9638),u=n(4608),h=n(7776),p=n(4865),d=n(6197),f=n(6076);let m=s=class extends r.SshService{constructor(e){super(e),this.channelCounter=0,this.channelMap=new Map,this.nonAcceptedChannels=new Map,this.pendingChannels=new Map,this.pendingAcceptChannels=new Map}get channels(){return Array.from(this.channelMap.values())}close(e){let t=[...this.pendingChannels.values()].map((e=>e.completionSource));this.pendingAcceptChannels.size>0&&(t=t.concat([...this.pendingAcceptChannels.values()].reduce(((e,t)=>e.concat(t)))));for(const t of this.channelMap.values())t.close(e);for(const n of t)n.reject(e)}dispose(){const e=[...this.channelMap.values()];let t=[...this.pendingChannels.values()].map((e=>e.completionSource));this.pendingAcceptChannels.size>0&&(t=t.concat([...this.pendingAcceptChannels.values()].reduce(((e,t)=>e.concat(t)))));for(const t of e)t.dispose();for(const e of t)e.reject(new u.ObjectDisposedError("Session closed."));super.dispose()}async acceptChannel(e,t){const n=new a.PromiseCompletionSource;let s;if(t){if(t.isCancellationRequested)throw new l.CancellationError;s=t.onCancellationRequested((()=>{const t=this.pendingAcceptChannels.get(e);if(t){const e=t.findIndex((e=>Object.is(e,n)));e>=0&&t.splice(e,1)}n.reject(new l.CancellationError)}))}let i=null;if(i=Array.from(this.nonAcceptedChannels.values()).find((t=>t.channelType===e))||null,i)this.nonAcceptedChannels.delete(i.channelId);else{let t=this.pendingAcceptChannels.get(e);t||(t=[],this.pendingAcceptChannels.set(e,t)),t.push(n)}try{return i||await n.promise}finally{s&&s.dispose()}}async openChannel(e,t,n){const s=++this.channelCounter;e.senderChannel=s;let i=null;if(n){if(n.isCancellationRequested)throw new l.CancellationError;i=n.onCancellationRequested((()=>{this.pendingChannels.delete(s)&&t.reject(new l.CancellationError)}))}return this.pendingChannels.set(s,{openMessage:e,completionSource:t,cancellationRegistration:i}),await this.session.sendMessage(e),s}handleMessage(e,t){if(e instanceof o.ChannelDataMessage)return this.handleDataMessage(e);if(e instanceof o.ChannelExtendedDataMessage)return this.handleExtendedDataMessage(e);if(e instanceof o.ChannelWindowAdjustMessage)return this.handleAdjustWindowMessage(e);if(e instanceof o.ChannelEofMessage)return this.handleEofMessage(e);if(e instanceof o.ChannelOpenMessage)return this.handleOpenMessage(e,t);if(e instanceof o.ChannelCloseMessage)return this.handleCloseMessage(e);if(e instanceof o.ChannelOpenConfirmationMessage)return this.handleOpenConfirmationMessage(e,t);if(e instanceof o.ChannelOpenFailureMessage)return this.handleOpenFailureMessage(e);if(e instanceof o.ChannelRequestMessage)return this.handleRequestMessage(e,t);if(e instanceof o.ChannelSuccessMessage)return this.handleSuccessMessage(e);if(e instanceof o.ChannelFailureMessage)return this.handleFailureMessage(e);throw new Error(`Message not implemented: ${e}`)}async handleOpenMessage(e,t){var n;const s=e.senderChannel;if(!this.session.canAcceptRequests){this.trace(d.TraceLevel.Warning,d.SshTraceEventIds.channelOpenFailed,"Channel open request blocked because the session is not yet authenticated.");const e=new o.ChannelOpenFailureMessage;return e.recipientChannel=s,e.reasonCode=o.SshChannelOpenFailureReason.administrativelyProhibited,e.description="Authenticate before opening channels.",void await this.session.sendMessage(e,t)}if(!e.channelType){const e=new o.ChannelOpenFailureMessage;return e.recipientChannel=s,e.reasonCode=o.SshChannelOpenFailureReason.unknownChannelType,e.description="Channel type not specified.",void await this.session.sendMessage(e,t)}e=e.convertTo(new o.ChannelOpenMessage,!0);let i=new o.ChannelOpenConfirmationMessage;const r=++this.channelCounter,a=new c.SshChannel(this,e.channelType,r,s,e.maxWindowSize,e.maxPacketSize,e,i);let l;const u=new h.SshChannelOpeningEventArgs(e,a,!0);try{if(await this.session.handleChannelOpening(u,t),u.openingPromise)l=await u.openingPromise;else if(u.failureReason!==o.SshChannelOpenFailureReason.none){const e=new o.ChannelOpenFailureMessage;e.reasonCode=u.failureReason,e.description=null!==(n=u.failureDescription)&&void 0!==n?n:void 0,l=e}else l=i}catch(e){throw a.dispose(),e}if(l instanceof o.ChannelOpenFailureMessage){l.recipientChannel=s;try{await this.session.sendMessage(l,t)}finally{a.dispose()}return}if(this.session.isClosed)return void a.dispose();a.isMaxWindowSizeLocked=!0,this.channelMap.set(a.channelId,a),i=l,i.recipientChannel=a.remoteChannelId,i.senderChannel=a.channelId,i.maxWindowSize=a.maxWindowSize,i.maxPacketSize=a.maxPacketSize,i.rewrite(),a.openConfirmationMessage=i,await this.session.sendMessage(i,t);let p=!1;const f=this.pendingAcceptChannels.get(a.channelType);for(;f&&f.length>0;){f.shift().resolve(a),p=!0;break}p||this.nonAcceptedChannels.set(a.channelId,a),this.onChannelOpenCompleted(a.channelId,a),a.enableSending()}handleCloseMessage(e){const t=this.findChannelById(e.recipientChannel);t&&t.handleClose()}async handleOpenConfirmationMessage(e,t){var n;let s,i=null;const r=this.pendingChannels.get(e.recipientChannel);if(!r)throw this.channelMap.has(e.recipientChannel)?new Error("Duplicate channel ID."):new Error("Channel confirmation was not requested.");s=r.openMessage,i=r.completionSource,r.cancellationRegistration&&r.cancellationRegistration.dispose(),this.pendingChannels.delete(e.recipientChannel),e=e.convertTo(new o.ChannelOpenConfirmationMessage,!0);const a=new c.SshChannel(this,s.channelType||c.SshChannel.sessionChannelType,e.recipientChannel,e.senderChannel,e.maxWindowSize,e.maxPacketSize,s,e);"number"==typeof s.maxWindowSize&&(a.maxWindowSize=s.maxWindowSize),a.isMaxWindowSizeLocked=!0,this.channelMap.set(a.channelId,a);const l=new h.SshChannelOpeningEventArgs(s,a,!1);if(await this.session.handleChannelOpening(l,t),i){if(l.failureReason!==o.SshChannelOpenFailureReason.none)return void i.reject(new u.SshChannelError(null!==(n=l.failureDescription)&&void 0!==n?n:"Channel open failure.",l.failureReason));i.resolve(a)}else this.onChannelOpenCompleted(a.channelId,a);a.enableSending()}handleOpenFailureMessage(e){let t=null;const n=this.pendingChannels.get(e.recipientChannel);n&&(t=n.completionSource,n.cancellationRegistration&&n.cancellationRegistration.dispose(),this.pendingChannels.delete(e.recipientChannel)),null!=t?t.reject(new u.SshChannelError(e.description||"Channel open rejected.",e.reasonCode)):this.onChannelOpenCompleted(e.recipientChannel,null)}async handleRequestMessage(e,t){const n=this.tryGetChannelForMessage(e);n&&await n.handleRequest(e,t)}handleSuccessMessage(e){const t=this.tryGetChannelForMessage(e);null==t||t.handleResponse(!0)}handleFailureMessage(e){const t=this.tryGetChannelForMessage(e);null==t||t.handleResponse(!1)}handleDataMessage(e){const t=this.tryGetChannelForMessage(e);null==t||t.handleDataReceived(e.data)}handleExtendedDataMessage(e){const t=this.tryGetChannelForMessage(e);null==t||t.handleExtendedDataReceived(new f.SshExtendedDataEventArgs(e.dataTypeCode,e.data))}handleAdjustWindowMessage(e){const t=this.tryGetChannelForMessage(e);null==t||t.adjustRemoteWindow(e.bytesToAdd)}handleEofMessage(e){const t=this.findChannelById(e.recipientChannel);null==t||t.handleEof()}onChannelOpenCompleted(e,t){t?this.trace(d.TraceLevel.Info,d.SshTraceEventIds.channelOpened,`${this.session} ChannelOpenCompleted(${t})`):this.trace(d.TraceLevel.Warning,d.SshTraceEventIds.channelOpenFailed,`${this.session} ChannelOpenCompleted(${e} failed)`)}tryGetChannelForMessage(e){const t=this.findChannelById(e.recipientChannel);if(!t){const t=e instanceof o.ChannelDataMessage?"channel data message":e.toString();this.trace(d.TraceLevel.Warning,d.SshTraceEventIds.channelRequestFailed,`Invalid channel ID ${e.recipientChannel} in ${t}.`)}return t}findChannelById(e){var t;return null!==(t=this.channelMap.get(e))&&void 0!==t?t:null}removeChannel(e){this.channelMap.delete(e.channelId),this.pendingChannels.delete(e.channelId)}};m.serviceName="ssh-connection",m=s=i([(0,p.serviceActivation)({serviceRequest:s.serviceName})],m),t.ConnectionService=m},4237:function(e,t,n){"use strict";var s,i=this&&this.__decorate||function(e,t,n,s){var i,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyExchangeService=void 0;const r=n(4300),o=n(7492),a=n(1838),c=n(3380),l=n(5255),u=n(7521),h=n(7309),p=n(4608),d=n(6306),f=n(890),m=n(5844),g=n(3193),v=n(4865),y=n(6197);class b{}const w="ext-info-s",S="ext-info-c";let x=s=class extends a.SshService{constructor(e){super(e),this.isInitialExchange=!1,this.exchangeContext=null}get exchanging(){return!!this.exchangeContext}async startKeyExchange(e){this.isInitialExchange=e,this.exchangeContext=new b;const t=this.createKeyExchangeInitMessage();let n=null;return this.session.isClientSession?(e&&this.session.config.enableKeyExchangeGuess&&(n=await this.createKeyExchangeGuessMessage(),t.firstKexPacketFollows=!!n),this.exchangeContext.clientKexInitPayload=t.toBuffer()):this.exchangeContext.serverKexInitPayload=t.toBuffer(),[t,n]}finishKeyExchange(){var e;if(!this.exchangeContext)throw new p.SshConnectionError("Key exchange not started.",d.SshDisconnectReason.protocolError);const t=this.exchangeContext.newAlgorithms;if(!t)throw new p.SshConnectionError("Key exchange not completed.",d.SshDisconnectReason.protocolError);return t.isExtensionInfoRequested=null===(e=this.exchangeContext)||void 0===e?void 0:e.isExtensionInfoRequested,this.exchangeContext=null,t}abortKeyExchange(){this.exchangeContext=null}createKeyExchangeInitMessage(){const e=this.session.isClientSession?S:w,t=this.session.config,n=new l.KeyExchangeInitMessage;return n.keyExchangeAlgorithms=(0,u.algorithmNames)(t.keyExchangeAlgorithms).concat(e),n.serverHostKeyAlgorithms=this.getPublicKeyAlgorithms(),n.encryptionAlgorithmsClientToServer=n.encryptionAlgorithmsServerToClient=(0,u.algorithmNames)(t.encryptionAlgorithms),n.macAlgorithmsClientToServer=n.macAlgorithmsServerToClient=(0,u.algorithmNames)(t.hmacAlgorithms),n.compressionAlgorithmsClientToServer=n.compressionAlgorithmsServerToClient=(0,u.algorithmNames)(t.compressionAlgorithms),n.languagesClientToServer=[""],n.languagesServerToClient=[""],n.firstKexPacketFollows=!1,n.reserved=0,n}getPublicKeyAlgorithms(){var e,t;let n=[...this.session.config.publicKeyAlgorithms];if(n.length>1&&!this.session.isClientSession){const s=null===(t=null===(e=this.session.credentials)||void 0===e?void 0:e.publicKeys)||void 0===t?void 0:t.map((e=>e.keyAlgorithmName));s&&(n=n.filter((e=>e&&s.includes(e.keyAlgorithmName))))}return(0,u.algorithmNames)(n)}async createKeyExchangeGuessMessage(){if(!this.exchangeContext)throw new Error("Key exchange was not started.");const e=this.session.config.keyExchangeAlgorithms[0];if(!e)return null;this.exchangeContext.keyExchange=e.name,this.exchangeContext.exchange=e.createKeyExchange(),this.exchangeContext.exchangeValue=await this.exchangeContext.exchange.startKeyExchange();const t=new l.KeyExchangeDhInitMessage;return t.e=this.exchangeContext.exchangeValue,t}handleMessage(e,t){if(e instanceof l.KeyExchangeInitMessage)return this.handleInitMessage(e,t);if(e instanceof l.KeyExchangeDhInitMessage)return this.handleDhInitMessage(e,t);if(e instanceof l.KeyExchangeDhReplyMessage)return this.handleDhReplyMessage(e,t);throw new Error(`Message not implemented: ${e}`)}async handleInitMessage(e,t){var n,s,i,r;if(!this.exchangeContext)throw new Error("Key exchange was not started.");const o=this.session.config;if(this.exchangeContext.keyExchange=this.chooseAlgorithm("KeyExchange",(0,u.algorithmNames)(o.keyExchangeAlgorithms),e.keyExchangeAlgorithms),"none"===this.exchangeContext.keyExchange)return this.trace(y.TraceLevel.Info,y.SshTraceEventIds.algorithmNegotiation,"Client and server negotiated no security. Cancelling key-exchange."),this.session.activateService(g.ConnectionService),this.exchangeContext.newAlgorithms=new f.SshSessionAlgorithms,void await this.session.handleNewKeysMessage(new l.NewKeysMessage,t);if(this.exchangeContext.publicKey=this.chooseAlgorithm("PublicKey",this.getPublicKeyAlgorithms(),e.serverHostKeyAlgorithms),this.exchangeContext.clientEncryption=this.chooseAlgorithm("ClientEncryption",(0,u.algorithmNames)(o.encryptionAlgorithms),e.encryptionAlgorithmsClientToServer),this.exchangeContext.serverEncryption=this.chooseAlgorithm("ServerEncryption",(0,u.algorithmNames)(o.encryptionAlgorithms),e.encryptionAlgorithmsServerToClient),this.exchangeContext.clientHmac=this.chooseAlgorithm("ClientHmac",(0,u.algorithmNames)(o.hmacAlgorithms),e.macAlgorithmsClientToServer),this.exchangeContext.serverHmac=this.chooseAlgorithm("ServerHmac",(0,u.algorithmNames)(o.hmacAlgorithms),e.macAlgorithmsServerToClient),this.exchangeContext.clientCompression=this.chooseAlgorithm("ClientCompression",(0,u.algorithmNames)(o.compressionAlgorithms),e.compressionAlgorithmsClientToServer),this.exchangeContext.serverCompression=this.chooseAlgorithm("ServerCompression",(0,u.algorithmNames)(o.compressionAlgorithms),e.compressionAlgorithmsServerToClient),this.session.isClientSession){this.exchangeContext.serverKexInitPayload=e.toBuffer();const i=!!this.exchangeContext.exchangeValue,r=this.exchangeContext.keyExchange===(null===(n=o.keyExchangeAlgorithms[0])||void 0===n?void 0:n.name);if(i&&r)this.trace(y.TraceLevel.Verbose,y.SshTraceEventIds.algorithmNegotiation,"Already sent correct guess for key-exchange init.");else{const e=o.getKeyExchangeAlgorithm(this.exchangeContext.keyExchange);this.exchangeContext.exchange=e.createKeyExchange(),this.exchangeContext.exchangeValue=await this.exchangeContext.exchange.startKeyExchange();const n=new l.KeyExchangeDhInitMessage;n.e=this.exchangeContext.exchangeValue,await this.session.sendMessage(n,t)}this.exchangeContext.isExtensionInfoRequested=this.isInitialExchange&&(null===(s=e.keyExchangeAlgorithms)||void 0===s?void 0:s.includes(w))}else{if(e.firstKexPacketFollows){const t=this.exchangeContext.keyExchange===(null===(i=e.keyExchangeAlgorithms)||void 0===i?void 0:i[0]),n=t?"correct":"incorrect";this.trace(y.TraceLevel.Verbose,y.SshTraceEventIds.algorithmNegotiation,`Client's KeyExchange guess was ${n}.`),this.exchangeContext.discardGuessedInit=!t}this.exchangeContext.clientKexInitPayload=e.toBuffer(),this.exchangeContext.isExtensionInfoRequested=this.isInitialExchange&&(null===(r=e.keyExchangeAlgorithms)||void 0===r?void 0:r.includes(S))}}async handleDhInitMessage(e,t){var n,s,i,o,a;if(this.session.isClientSession)return;const c=this.session;if(!this.exchangeContext||!this.exchangeContext.keyExchange||!this.exchangeContext.publicKey)throw new p.SshConnectionError("Key exchange not started.",d.SshDisconnectReason.protocolError);if(this.exchangeContext.discardGuessedInit)return void(this.exchangeContext.discardGuessedInit=!1);const u=this.session.config.getKeyExchangeAlgorithm(this.exchangeContext.keyExchange);if(!u)throw new p.SshConnectionError("Key exchange not supported for algorithm: "+this.exchangeContext.keyExchange,d.SshDisconnectReason.keyExchangeFailed);const h=this.session.config.getPublicKeyAlgorithm(this.exchangeContext.publicKey);if(!h)throw new p.SshConnectionError("Public key algorithm not supported: "+this.exchangeContext.publicKey,d.SshDisconnectReason.keyExchangeFailed);let g=null;if(null===(n=c.credentials)||void 0===n?void 0:n.publicKeys){const e=c.credentials.publicKeys.find((e=>e.keyAlgorithmName===h.keyAlgorithmName));if(g=null!=e?e:null,!1===(null==g?void 0:g.hasPrivateKey)){if(!c.credentials.privateKeyProvider)throw new Error("A private key provider is required.");g=await c.credentials.privateKeyProvider(e,null!=t?t:m.CancellationToken.None)}}if(null==g)throw new p.SshConnectionError("Private key not found for algorithm: "+this.exchangeContext.publicKey,d.SshDisconnectReason.keyExchangeFailed);const v=this.session.config.getEncryptionAlgorithm(this.exchangeContext.clientEncryption),y=this.session.config.getEncryptionAlgorithm(this.exchangeContext.serverEncryption),b=this.session.config.getHmacAlgorithm(this.exchangeContext.serverHmac),w=this.session.config.getHmacAlgorithm(this.exchangeContext.clientHmac),S=u.createKeyExchange(),x=e.e||r.Buffer.alloc(0),E=await S.startKeyExchange(),C=await S.decryptKeyExchange(x),T=await g.getPublicKeyBytes(h.name);if(!T)throw new p.SshConnectionError("Public key not set.",d.SshDisconnectReason.keyExchangeFailed);const R=await this.computeExchangeHash(S,T,x,E,C);this.session.sessionId||(this.session.sessionId=R);const[_,P,k,A,M,O]=await this.computeKeys(S,C,R,v,y,w,b),I=null!==(s=await(null==y?void 0:y.createCipher(!0,A,P)))&&void 0!==s?s:null,B=null!==(i=await(null==v?void 0:v.createCipher(!1,k,_)))&&void 0!==i?i:null,q=null!==(o=await(null==b?void 0:b.createSigner(O)))&&void 0!==o?o:null,L=null!==(a=await(null==w?void 0:w.createVerifier(M)))&&void 0!==a?a:null,F=new f.SshSessionAlgorithms;F.publicKeyAlgorithmName=this.exchangeContext.publicKey,F.cipher=I,F.decipher=B,F.signer=q,F.verifier=L,F.messageSigner=(null==I?void 0:I.authenticatedEncryption)?I:q,F.messageVerifier=(null==B?void 0:B.authenticatedEncryption)?B:L,F.compressor=this.session.config.getCompressionAlgorithm(this.exchangeContext.serverCompression),F.decompressor=this.session.config.getCompressionAlgorithm(this.exchangeContext.clientCompression),this.exchangeContext.newAlgorithms=F,_&&_.fill(0),k&&k.fill(0),M&&M.fill(0),P&&P.fill(0),A&&A.fill(0),O&&O.fill(0);const j=h.createSigner(g);let D=await j.sign(R);D=h.createSignatureData(D);const N=new l.KeyExchangeDhReplyMessage;N.hostKey=T,N.f=E,N.signature=D,await this.session.sendMessage(N,t),await this.session.sendMessage(new l.NewKeysMessage,t)}async handleDhReplyMessage(e,t){var n,s,i,r;if(!this.session.isClientSession)return;if(!this.exchangeContext)throw new p.SshConnectionError("Key exchange was not started.",d.SshDisconnectReason.protocolError);const o=this.session.config,a=this.exchangeContext.exchange,c=this.exchangeContext.publicKey,u=o.getPublicKeyAlgorithm(c),h=o.getEncryptionAlgorithm(this.exchangeContext.clientEncryption),m=o.getEncryptionAlgorithm(this.exchangeContext.serverEncryption),g=o.getHmacAlgorithm(this.exchangeContext.serverHmac),v=o.getHmacAlgorithm(this.exchangeContext.clientHmac),b=this.exchangeContext.exchangeValue,w=e.f;if(!a||!b)throw new p.SshConnectionError("Failed to initialize crypto after key exchange.",d.SshDisconnectReason.keyExchangeFailed);this.hostKey=u.createKeyPair(),await this.hostKey.setPublicKeyBytes(e.hostKey);const S=await a.decryptKeyExchange(w),x=e.hostKey,E=await this.computeExchangeHash(a,x,b,w,S),C=u.readSignatureData(e.signature),T=u.createVerifier(this.hostKey);let R;try{R=await T.verify(E,C)}catch(e){if(!(e instanceof Error))throw e;throw this.trace(y.TraceLevel.Error,y.SshTraceEventIds.serverAuthenticationFailed,`Server public key verification error: ${e.message}`,e),new p.SshConnectionError(`Server public key verification failed: ${e.message}`,d.SshDisconnectReason.hostKeyNotVerifiable)}if(!R)throw this.trace(y.TraceLevel.Warning,y.SshTraceEventIds.serverAuthenticationFailed,"Server public key verification failed."),new p.SshConnectionError("Server public key verification failed.",d.SshDisconnectReason.hostKeyNotVerifiable);this.trace(y.TraceLevel.Verbose,y.SshTraceEventIds.sessionAuthenticated,"Server public key verification succeeded."),null==this.session.sessionId&&(this.session.sessionId=E);const[_,P,k,A,M,O]=await this.computeKeys(a,S,E,h,m,v,g),I=null!==(n=await(null==h?void 0:h.createCipher(!0,k,_)))&&void 0!==n?n:null,B=null!==(s=await(null==m?void 0:m.createCipher(!1,A,P)))&&void 0!==s?s:null,q=null!==(i=await(null==v?void 0:v.createSigner(M)))&&void 0!==i?i:null,L=null!==(r=await(null==g?void 0:g.createVerifier(O)))&&void 0!==r?r:null,F=new f.SshSessionAlgorithms;F.publicKeyAlgorithmName=c,F.cipher=I,F.decipher=B,F.signer=q,F.verifier=L,F.messageSigner=(null==I?void 0:I.authenticatedEncryption)?I:q,F.messageVerifier=(null==B?void 0:B.authenticatedEncryption)?B:L,F.compressor=o.getCompressionAlgorithm(this.exchangeContext.clientCompression),F.decompressor=o.getCompressionAlgorithm(this.exchangeContext.serverCompression),this.exchangeContext.newAlgorithms=F,_&&_.fill(0),k&&k.fill(0),M&&M.fill(0),P&&P.fill(0),A&&A.fill(0),O&&O.fill(0),await this.session.sendMessage(new l.NewKeysMessage,t)}chooseAlgorithm(e,t,n){let s,i;this.session.isClientSession?(s=n||[],i=t):(s=t,i=n||[]);const r=`${e} negotiation: Server (${s.join(", ")}) Client (${i.join(", ")})`;for(const e of i)for(const t of s)if(t===e){const e=t;return this.trace(y.TraceLevel.Info,y.SshTraceEventIds.algorithmNegotiation,`${r} => ${e}`),e}throw new Error(`Failed ${r}`)}async computeExchangeHash(e,t,n,s,i){if(!this.session.remoteVersion)throw new Error("Key exchange not completed.");const a=new h.SshDataWriter(r.Buffer.alloc(2048));return this.session.isClientSession?(a.writeString(o.SshSession.localVersion.toString(),"ascii"),a.writeString(this.session.remoteVersion.toString(),"ascii")):(a.writeString(this.session.remoteVersion.toString(),"ascii"),a.writeString(o.SshSession.localVersion.toString(),"ascii")),a.writeBinary(this.exchangeContext.clientKexInitPayload),a.writeBinary(this.exchangeContext.serverKexInitPayload),a.writeBinary(t),a.writeBigInt(c.BigInt.fromBytes(n,{unsigned:!0})),a.writeBigInt(c.BigInt.fromBytes(s,{unsigned:!0})),a.writeBigInt(c.BigInt.fromBytes(i,{unsigned:!0})),await e.sign(a.toBuffer())}async computeKeys(e,t,n,s,i,o,a){var c,l;const u=new h.SshDataWriter(r.Buffer.alloc(4+t.length+n.length+Math.max(1+(null!==(l=null===(c=this.session.sessionId)||void 0===c?void 0:c.length)&&void 0!==l?l:0),e.digestLength)));u.writeBinary(t),u.write(n);const p=u.position;return[s&&await this.computeKey(e,u,p,s.blockLength,"A"),i&&await this.computeKey(e,u,p,i.blockLength,"B"),s&&await this.computeKey(e,u,p,s.keyLength,"C"),i&&await this.computeKey(e,u,p,i.keyLength,"D"),o&&await this.computeKey(e,u,p,o.keyLength,"E"),a&&await this.computeKey(e,u,p,a.keyLength,"F")]}async computeKey(e,t,n,s,i){const o=r.Buffer.alloc(s);let a=0,c=0,l=null;if(!this.session.sessionId)throw new Error("Session ID not set.");for(;a<s;)t.position=n,l?t.write(l):(t.writeByte(i.charCodeAt(0)),t.write(this.session.sessionId)),l=await e.sign(t.toBuffer()),c=Math.min(l.length,s-a),l.copy(o,a),a+=c;return l&&l.fill(0),o}};x.serviceName="ssh-keyexchange",x=s=i([(0,v.serviceActivation)({serviceRequest:s.serviceName})],x),t.KeyExchangeService=x},4865:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findService=t.serviceActivation=void 0,t.serviceActivation=function(e){return t=>{t.activations||(t.activations=[]),t.activations.push(e)}},t.findService=function(e,t){for(const n of e.keys()){const e=n.activations;let s=!1;for(const i of e)if(s=!0,t(i))return n;if(!s)throw new Error(`SSH service type '${n.name}' must have one or more 'serviceActivation' decorators.`)}return null}},1838:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshService=void 0;const s=n(5844),i=n(7492);t.SshService=class{constructor(e){if(this.session=e,this.disposed=!1,this.disposedEmitter=new s.Emitter,this.onDisposed=this.disposedEmitter.event,!(e instanceof i.SshSession))throw new TypeError("Session is not an instance of SshSession. (This may be due to a version mismatch between SSH packages.)")}get trace(){return this.session.trace}raiseReportProgress(e){this.session.raiseReportProgress(e)}dispose(){this.disposed||(this.disposed=!0,this.disposedEmitter.fire())}async onSessionRequest(e,t){this.session.raiseSessionRequest(e)}async onChannelOpening(e,t){if(!e)throw new TypeError("Request is required.");return this.session.handleChannelOpening(e,t,!1)}async onChannelRequest(e,t,n){}async sendMessage(e,t){await this.session.sendMessage(e,t)}}},9273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshChannel=void 0;const s=n(5844),i=n(4865),r=n(3379),o=n(6306),a=n(8614),c=n(3305),l=n(4608),u=n(1656),h=n(8512),p=n(9638),d=n(7399),f=n(6197),m=n(3661),g=n(6655);class v{constructor(e,t,n,i,r,o,c,l){this.connectionService=e,this.channelType=t,this.channelId=n,this.remoteChannelId=i,this.openMessage=c,this.openConfirmationMessage=l,this.remoteClosed=!1,this.localClosed=!1,this.sentEof=!1,this.disposed=!1,this.openSendingWindowCompletionSource=null,this.requestCompletionSources=new g.Queue,this.sendSemaphore=new d.Semaphore(0),this.metrics=new a.ChannelMetrics,this.dataReceivedEmitter=new s.Emitter,this.extendedDataReceivedEmitter=new s.Emitter,this.onDataReceived=this.dataReceivedEmitter.event,this.onExtendedDataReceived=this.extendedDataReceivedEmitter.event,this.eofEmitter=new s.Emitter,this.onEof=this.eofEmitter.event,this.closedEmitter=new s.Emitter,this.onClosed=this.closedEmitter.event,this.requestEmitter=new s.Emitter,this.onRequest=this.requestEmitter.event,this.isMaxWindowSizeLocked=!1,this.remoteWindowSize=r,this.maxWindowSizeValue=v.defaultMaxWindowSize,this.windowSize=this.maxWindowSizeValue,this.maxPacketSize=Math.min(o,v.defaultMaxPacketSize)}get session(){return this.connectionService.session}get isClosed(){return this.localClosed||this.remoteClosed}get maxWindowSize(){return this.maxWindowSizeValue}set maxWindowSize(e){if(this.isMaxWindowSizeLocked)throw new Error("Cannot change the max window size after opening the channel.");if(e<this.maxPacketSize)throw new Error("Maximum window size cannot be less than maximum packet size.");this.maxWindowSizeValue=e}async request(e,t){if(!e)throw new TypeError("Request is required.");if(this.disposed)throw new l.ObjectDisposedError(this);if(e.recipientChannel=this.remoteChannelId,!e.wantReply)return await this.session.sendMessage(e,t),!0;const n=new c.PromiseCompletionSource;if(t){if(t.isCancellationRequested)throw new p.CancellationError;t.onCancellationRequested((()=>{n.reject(new p.CancellationError)}))}return this.requestCompletionSources.enqueue(n),await this.session.sendMessage(e,t),await n.promise}async send(e,t){return this.sendCommon(e,void 0,t)}async sendExtendedData(e,t,n){return this.sendCommon(t,e,n)}async sendCommon(e,t,n){if(this.disposed)throw new l.ObjectDisposedError(this);if(0!==e.length){if(this.sentEof)throw new Error("Cannot send more data after EOF.");await this.sendSemaphore.wait(n);try{let s=0,i=e.length;for(;i>0;){let o,a=Math.min(Math.min(this.remoteWindowSize,this.maxPacketSize),i);for(;0===a;)this.openSendingWindowCompletionSource||(this.openSendingWindowCompletionSource=new c.PromiseCompletionSource),this.session.trace(f.TraceLevel.Warning,f.SshTraceEventIds.channelWaitForWindowAdjust,`${this} send window is full. Waiting for window adjustment before sending.`),await(0,p.withCancellation)(this.openSendingWindowCompletionSource.promise,n),this.openSendingWindowCompletionSource=null,a=Math.min(Math.min(this.remoteWindowSize,this.maxPacketSize),i);void 0!==t?(o=new r.ChannelExtendedDataMessage,o.dataTypeCode=t):o=new r.ChannelDataMessage,o.recipientChannel=this.remoteChannelId,o.data=Buffer.from(e.slice(s,s+a)),await this.session.sendMessage(o,n),this.remoteWindowSize-=a,i-=a,s+=a,this.metrics.addBytesSent(a)}}finally{this.sendSemaphore.tryRelease()}}else await this.sendEof()}enableSending(){this.sendSemaphore.tryRelease()}async sendEof(e){if(!this.sentEof){await this.sendSemaphore.wait(e);try{this.sentEof=!0;const t=new r.ChannelEofMessage;t.recipientChannel=this.remoteChannelId,await this.session.sendMessage(t,e)}finally{this.sendSemaphore.tryRelease()}}}async handleRequest(e,t){if(!e.requestType)throw new l.SshConnectionError("Channel request type not specified.",o.SshDisconnectReason.protocolError);if(e.requestType===r.ChannelRequestType.exitStatus){const t=new r.ChannelSignalMessage;return e.convertTo(t),this.exitStatus=t.exitStatus,!0}if(e.requestType===r.ChannelRequestType.exitSignal){const t=new r.ChannelSignalMessage;return e.convertTo(t),this.exitSignal=t.exitSignal,this.exitErrorMessage=t.errorMessage,!0}if(e.requestType===r.ChannelRequestType.signal){const t=new r.ChannelSignalMessage;e.convertTo(t)}const n=new u.SshRequestEventArgs(e.requestType,e,this.session.principal,t),s=(0,i.findService)(this.session.config.services,(t=>(!t.channelType||t.channelType===this.channelType)&&t.channelRequest===e.requestType));await this.sendSemaphore.wait(t);try{let i=null;if(s){const e=this.session.activateService(s);await e.onChannelRequest(this,n,t)}else this.requestEmitter.fire(n);n.responsePromise&&(i=await n.responsePromise,n.isAuthorized=i instanceof r.ChannelSuccessMessage),e.wantReply&&(n.isAuthorized?(i=null!=i?i:new r.ChannelSuccessMessage,i.recipientChannel=this.remoteChannelId):(i=null!=i?i:new r.ChannelFailureMessage,i.recipientChannel=this.remoteChannelId),await this.session.sendMessage(i,t))}finally{this.sendSemaphore.tryRelease()}return n.isAuthorized||!1}handleResponse(e){const t=this.requestCompletionSources.dequeue();t&&t.resolve(e)}handleDataReceived(e){this.metrics.addBytesReceived(e.length),this.dataReceivedEmitter.fire(e)}handleExtendedDataReceived(e){this.metrics.addBytesReceived(e.data.length),this.extendedDataReceivedEmitter.fire(e)}adjustWindow(e){if(!this.disposed&&(this.windowSize-=e,this.windowSize<=this.maxWindowSizeValue/2)){const e=new r.ChannelWindowAdjustMessage;e.recipientChannel=this.remoteChannelId,e.bytesToAdd=this.maxWindowSizeValue-this.windowSize,this.windowSize=this.maxWindowSizeValue,this.session.sendMessage(e).catch((e=>{this.session.trace(f.TraceLevel.Error,f.SshTraceEventIds.channelWindowAdjustFailed,`Error sending window adjust message: ${e.message}`,e)}))}}adjustRemoteWindow(e){this.remoteWindowSize+=e,this.openSendingWindowCompletionSource&&this.openSendingWindowCompletionSource.resolve(void 0)}handleEof(){this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelEofReceived,`${this} EOF received.`),this.eofEmitter.fire()}close(e,t,n){if(e instanceof Error){const t=e;return this.localClosed||(this.localClosed=!0,this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelClosed,`${this} Closed: ${t.message}`),this.closedEmitter.fire(new h.SshChannelClosedEventArgs(t))),void this.disposeInternal()}return"number"==typeof e?this.closeWithStatus(e,t):"string"==typeof e?this.closeWithSignal(e,t,n):this.closeDefault(e)}async closeDefault(e){if(!this.remoteClosed&&!this.localClosed){this.remoteClosed=!0,await this.sendSemaphore.wait(e);try{const e=new r.ChannelCloseMessage;e.recipientChannel=this.remoteChannelId,await this.session.sendMessage(e)}catch(e){}finally{this.sendSemaphore.tryRelease()}}this.localClosed||(this.localClosed=!0,this.raiseClosedEvent()),this.disposeInternal()}async closeWithStatus(e,t){if(!this.remoteClosed&&!this.localClosed){this.exitStatus=e;const t=new r.ChannelSignalMessage;t.recipientChannel=this.remoteChannelId,t.exitStatus=e,await this.session.sendMessage(t)}await this.closeDefault(t)}async closeWithSignal(e,t,n){if(!this.remoteClosed&&!this.localClosed){this.exitSignal=e,this.exitErrorMessage=t;const n=new r.ChannelSignalMessage;n.recipientChannel=this.remoteChannelId,n.exitSignal=e,n.errorMessage=t,await this.session.sendMessage(n)}await this.closeDefault(n)}handleClose(){this.localClosed||(this.localClosed=!0,this.raiseClosedEvent(!0)),this.disposeInternal()}raiseClosedEvent(e=!1){const t=` (S: ${this.metrics.bytesSent}, R: ${this.metrics.bytesReceived})`,n=e?"remotely":"locally";let s,i;return void 0!==this.exitStatus?(i=new h.SshChannelClosedEventArgs(this.exitStatus),s=`${this} closed ${n}: status=${this.exitStatus}`):void 0!==this.exitSignal?(i=new h.SshChannelClosedEventArgs(this.exitSignal,this.exitErrorMessage),s=`${this} closed ${n}: signal=${this.exitSignal} ${this.exitErrorMessage}`):(i=new h.SshChannelClosedEventArgs,s=`${this} closed ${n}.`),this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelClosed,s+t),this.closedEmitter.fire(i),s}dispose(){if(!this.disposed&&!this.localClosed){if(!this.remoteClosed){this.remoteClosed=!0;const e=new r.ChannelCloseMessage;e.recipientChannel=this.remoteChannelId,this.session.sendMessage(e).catch((e=>{}))}const e=this.session.isClosed?`${this.session} closed.`:`${this} disposed.`;this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelClosed,e);const t=new h.SshChannelClosedEventArgs("SIGABRT",e);this.localClosed=!0,this.closedEmitter.fire(t)}this.disposeInternal()}disposeInternal(){this.disposed||(this.disposed=!0,this.cancelPendingRequests(),this.connectionService.removeChannel(this),this.sendSemaphore.dispose())}pipe(e){return m.PipeExtensions.pipeChannel(this,e)}cancelPendingRequests(){for(const e of this.requestCompletionSources)e.resolve(!1)}toString(){return`SshChannel(Type: ${this.channelType}, Id: ${this.channelId}, RemoteId: ${this.remoteChannelId})`}}t.SshChannel=v,v.sessionChannelType="session",v.defaultMaxPacketSize=r.ChannelOpenMessage.defaultMaxPacketSize,v.defaultMaxWindowSize=r.ChannelOpenMessage.defaultMaxWindowSize},5706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshClientSession=void 0;const s=n(7492),i=n(6306),r=n(3314),o=n(3305),a=n(9638),c=n(9872),l=n(5263),u=n(3193),h=n(4608),p=n(6197);class d extends s.SshSession{constructor(e){super(e,!0),this.serviceRequests=new Map,this.clientAuthCompletion=null}async authenticate(e,t){return!!await this.authenticateServer(t)&&!!await this.authenticateClient(e,t)}async authenticateServer(e){if(!this.kexService||!this.kexService.hostKey)throw new Error("Encrypt the session before authenticating.");try{this.principal=await this.raiseAuthenticatingEvent(new r.SshAuthenticatingEventArgs(r.SshAuthenticationType.serverPublicKey,{publicKey:this.kexService.hostKey},e))}catch(e){if(!(e instanceof Error))throw e;throw this.trace(p.TraceLevel.Error,p.SshTraceEventIds.authenticationError,`Error while authenticating server: ${e.message}`,e),e}return this.principal?(this.trace(p.TraceLevel.Info,p.SshTraceEventIds.sessionAuthenticated,`${this} server authenticated.`),!0):(await this.close(i.SshDisconnectReason.hostKeyNotVerifiable,"Server authentication failed."),this.trace(p.TraceLevel.Warning,p.SshTraceEventIds.serverAuthenticationFailed,`${this} server authentication failed.`),!1)}authenticateClient(e,t,n){if(!e)throw new TypeError("A credentials object is required.");return"function"==typeof t?this.authenticateClientWithCompletion(e,t,n):new Promise(((n,s)=>this.authenticateClientWithCompletion(e,((e,t)=>{e?s(e):n(t)}),t)))}async authenticateClientWithCompletion(e,t,n){if(this.clientAuthCompletion=new o.PromiseCompletionSource,this.clientAuthCompletion.promise.then((e=>t(void 0,e)),(e=>t(e))),n){if(n.isCancellationRequested)throw new a.CancellationError;n.onCancellationRequested((e=>{this.clientAuthCompletion&&this.clientAuthCompletion.reject(new a.CancellationError)}))}let s=this.getService(l.AuthenticationService);if(!s){const e=new i.ServiceRequestMessage;e.serviceName=l.AuthenticationService.serviceName,await this.sendMessage(e,n),s=this.activateService(l.AuthenticationService)}await s.authenticateClient(e,n)}onAuthenticationComplete(e){e?this.trace(p.TraceLevel.Info,p.SshTraceEventIds.sessionAuthenticated,`${this} client authenticated.`):this.trace(p.TraceLevel.Warning,p.SshTraceEventIds.clientAuthenticationFailed,`${this} client authentication failed.`),this.clientAuthCompletion&&(this.clientAuthCompletion.resolve(e),this.clientAuthCompletion=null)}async requestService(e,t){let n=!1,s=this.serviceRequests.get(e);if(s||(s=new o.PromiseCompletionSource,this.serviceRequests.set(e,s),n=!0),n){const n=new i.ServiceRequestMessage;n.serviceName=e,await this.sendMessage(n,t)}await s.promise}async handleServiceAcceptMessage(e,t){const n=this.serviceRequests.get(e.serviceName);null==n||n.resolve(!0)}async openChannel(e,t,n){if(!this.connectionService){const e=new i.ServiceRequestMessage;e.serviceName=u.ConnectionService.serviceName,await this.sendMessage(e,n)}return await super.openChannel(e,t,n)}handleDisconnected(){return this.reconnecting?(this.reconnecting=!1,!1):super.handleDisconnected()}async reconnect(e,t){if(this.trace(p.TraceLevel.Verbose,p.SshTraceEventIds.clientSessionReconnecting,"Attempting to reconnect..."),this.isClosed)throw new h.ObjectDisposedError(this);if(this.isConnected)throw new Error("Already connected.");if(!this.protocol)throw new Error("The session was never previously connected.");if(this.reconnecting)throw new Error("Already reconnecting.");this.reconnecting=!0;try{await this.reconnectInternal(e,t)}finally{this.reconnecting=!1}}async reconnectInternal(e,t){var n,s,r,o,a,l;const u=this.sessionId,d=this.protocol,f=null===(n=this.kexService)||void 0===n?void 0:n.hostKey;if(!(u&&d&&this.kexService&&f&&(null===(s=d.extensions)||void 0===s?void 0:s.has(c.SshProtocolExtensionNames.sessionReconnect))))throw new Error("Reconnect was not enabled for this session.");let m;try{if(this.sessionId=null,await this.connect(e,t),!this.sessionId||!this.algorithms||!this.algorithms.signer)throw new Error("Session is not encrypted.");const n=this.kexService.hostKey,s=n?await n.getPublicKeyBytes():null,r=await f.getPublicKeyBytes();if(!s||!r||!s.equals(r)){const e="The server host key is different.";throw this.trace(p.TraceLevel.Error,p.SshTraceEventIds.clientSessionReconnectFailed,`Reconnection failed: ${e}`),new h.SshReconnectError(e,i.SshReconnectFailureReason.differentServerHostKey)}m=this.sessionId}catch(e){throw this.protocol=d,super.handleDisconnected(),e}finally{this.sessionId=u,this.kexService.hostKey=f}const g=await this.createReconnectToken(u,m),v=new i.SessionReconnectRequestMessage;v.requestType="session-reconnect@microsoft.com",v.clientReconnectToken=g,v.lastReceivedSequenceNumber=d.lastIncomingSequence,v.wantReply=!0;const y=await this.requestResponse(v,i.SessionReconnectResponseMessage,i.SessionReconnectFailureMessage,t);if(y instanceof i.SessionReconnectFailureMessage){const e=null!==(r=y.reasonCode)&&void 0!==r?r:i.SshReconnectFailureReason.unknownServerFailure,t=null!==(o=y.description)&&void 0!==o?o:"The server rejected the reconnect request.";throw this.trace(p.TraceLevel.Error,p.SshTraceEventIds.clientSessionReconnectFailed,`Reconnection failed: ${t}`),this.protocol=d,new h.SshReconnectError(t,e)}if(!this.verifyReconnectToken(u,m,null!==(a=y.serverReconnectToken)&&void 0!==a?a:Buffer.alloc(0))){const e="The reconnect token provided by the server was invalid.";throw this.trace(p.TraceLevel.Error,p.SshTraceEventIds.clientSessionReconnectFailed,`Reconnection failed: ${e}`),new h.SshReconnectError(e,i.SshReconnectFailureReason.invalidServerReconnectToken)}this.trace(p.TraceLevel.Info,p.SshTraceEventIds.clientSessionReconnecting,"Reconnect request was accepted by the server.");const b=d.getSentMessages((null!==(l=y.lastReceivedSequenceNumber)&&void 0!==l?l:0)+1);if(!b){const e="Client is unable to re-send messages requested by the server.";throw this.trace(p.TraceLevel.Error,p.SshTraceEventIds.clientSessionReconnectFailed,`Reconnection failed: ${e}`),new h.SshReconnectError(e,i.SshReconnectFailureReason.clientDroppedMessages)}let w=0;for(const e of b)await this.sendMessage(e,t),w++;d.dispose(),this.metrics.addReconnection(),this.trace(p.TraceLevel.Info,p.SshTraceEventIds.clientSessionReconnecting,`${this} reconnected. Re-sent ${w} dropped messages.`)}dispose(){this.clientAuthCompletion&&this.clientAuthCompletion.reject(new h.ObjectDisposedError(this)),super.dispose()}}t.SshClientSession=d},5523:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshRpcMessageStream=void 0;const s=n(5844),i=n(4300),r=n(7309),o="Content-Length: ",a="\r\n\r\n";class c{constructor(e){this.channel=e,this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter,this.partialMessageEmitter=new s.Emitter,this.callback=null,this.messageBuffer=new r.SshDataWriter(i.Buffer.alloc(1024)),this.headersLength=null,this.messageLength=null,this.onError=this.errorEmitter.event,this.onClose=this.closeEmitter.event,this.onPartialMessage=this.partialMessageEmitter.event,this.eventRegistration=this.channel.onDataReceived(this.onDataReceived.bind(this)),this.channel.onClosed((e=>{e.error&&this.errorEmitter.fire(e.error),this.closeEmitter.fire()}))}listen(e){return this.callback=e,s.Disposable.create((()=>{this.callback=null}))}dispose(){this.eventRegistration&&this.eventRegistration.dispose()}onDataReceived(e){if(this.messageBuffer.write(e),this.channel.adjustWindow(e.length),e=this.messageBuffer.toBuffer(),null===this.messageLength){const t=e.indexOf(a);if(t<0)return;const n=e.slice(0,t).toString();if(!n.startsWith(o))throw new Error(`Message does not start with JSON-RPC headers.\n${n}`);this.headersLength=t+a.length,this.messageLength=parseInt(n.substr(o.length,t-o.length),10)}const t=this.messageBuffer.position,n=this.headersLength+this.messageLength;if(t>=n){if(this.callback){const t=e.slice(this.headersLength,n).toString();let s;try{s=JSON.parse(t)}catch(e){if(!(e instanceof Error))throw e;throw new Error(`Failed to parse JSON-RPC message: ${e.message}\n${t}`)}this.callback(s)}this.messageLength=null,this.messageBuffer.position=0,t>n&&this.onDataReceived(e.slice(n))}}}class l{constructor(e){this.channel=e,this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter,this.onError=this.errorEmitter.event,this.onClose=this.closeEmitter.event,this.channel.onClosed((e=>{e.error&&this.errorEmitter.fire([e.error,e.errorMessage&&{jsonrpc:e.errorMessage}||void 0,e.exitStatus]),this.closeEmitter.fire()}))}write(e){const t=JSON.stringify(e),n=i.Buffer.from(t),s=i.Buffer.from(o+n.length+a),r=i.Buffer.alloc(s.length+n.length);return s.copy(r,0),n.copy(r,s.length),this.channel.send(r).catch((e=>{this.errorEmitter.fire([e,void 0,void 0])}))}end(){}dispose(){}}t.SshRpcMessageStream=class{constructor(e){this.reader=new c(e),this.writer=new l(e)}}},7331:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshServerSession=void 0;const s=n(7492),i=n(5844),r=n(6306),o=n(4608),a=n(9872),c=n(6197);class l extends s.SshSession{constructor(e,t){super(e,!1),this.clientAuthenticatedEmitter=new i.Emitter,this.onClientAuthenticated=this.clientAuthenticatedEmitter.event,this.reconnectedEmitter=new i.Emitter,this.onReconnected=this.reconnectedEmitter.event,this.credentials={publicKeys:[]};const n=e.protocolExtensions.includes(a.SshProtocolExtensionNames.sessionReconnect);if(n&&!t)throw new Error("When reconnect is enabled, server sessions require a reference to a shared collection to track reconnectable sessions.");if(!n&&t)throw new Error("When reconnect is not enabled, the reconnectable sessions collection is not applicable.");this.reconnectableSessions=t}async handleServiceRequestMessage(e,t){if(!this.activateService(e.serviceName))throw new o.SshConnectionError(`Service "${e.serviceName}" not available.`,r.SshDisconnectReason.serviceNotAvailable);{const n=new r.ServiceAcceptMessage;n.serviceName=e.serviceName,await this.sendMessage(n,t)}}async handleRequestMessage(e,t){var n;if("session-reconnect@microsoft.com"===e.requestType&&(null===(n=this.config.protocolExtensions)||void 0===n?void 0:n.includes(a.SshProtocolExtensionNames.sessionReconnect))){const n=e.convertTo(new r.SessionReconnectRequestMessage);await this.reconnect(n,t)}else await super.handleRequestMessage(e,t)}handleClientAuthenticated(){this.clientAuthenticatedEmitter.fire()}async enableReconnect(e){await super.enableReconnect(e),this.reconnectableSessions.includes(this)||this.reconnectableSessions.push(this)}handleDisconnected(){return!!this.reconnecting||super.handleDisconnected()}async reconnect(e,t){var n,s,i;if(!this.reconnectableSessions)throw new Error("Disconnected sessions collection should have been initialized when reconnect is enabled.");let a;for(const t of this.reconnectableSessions)if(t!==this&&await this.verifyReconnectToken(t.sessionId,this.sessionId,null!==(n=e.clientReconnectToken)&&void 0!==n?n:Buffer.alloc(0))){a=t,this.reconnectableSessions.splice(this.reconnectableSessions.indexOf(a),1);break}if(!a||a.isClosed){const e="Requested reconnect session was not found or the reconnect token provided by the client was invalid.";this.trace(c.TraceLevel.Error,c.SshTraceEventIds.serverSessionReconnectFailed,`Reconnect failed: ${e}`);const n=new r.SessionReconnectFailureMessage;return n.reasonCode=r.SshReconnectFailureReason.sessionNotFound,n.description=e,void await this.sendMessage(n,t)}const l=a.protocol.getSentMessages((null!==(s=e.lastReceivedSequenceNumber)&&void 0!==s?s:0)+1);if(!l){this.reconnectableSessions.push(a);const e="Server is unable to re-send messages requested by the client.";this.trace(c.TraceLevel.Error,c.SshTraceEventIds.serverSessionReconnectFailed,`Reconnect failed: ${e}`);const n=new r.SessionReconnectFailureMessage;return n.reasonCode=r.SshReconnectFailureReason.serverDroppedMessages,n.description=e,void await this.sendMessage(n,t)}const u=new r.SessionReconnectResponseMessage;u.serverReconnectToken=await this.createReconnectToken(a.sessionId,this.sessionId),u.lastReceivedSequenceNumber=a.protocol.lastIncomingSequence,await this.sendMessage(u,t);try{for(a.reconnecting=!0,null===(i=a.protocol)||void 0===i||i.dispose();a.isConnected;)await new Promise((e=>setTimeout((()=>e()),5)));a.protocol=this.protocol,a.protocol.kexService=a.kexService,this.protocol=void 0;for(const e of l)await a.sendMessage(e,t);this.dispose(new o.SshConnectionError("Reconnected.",r.SshDisconnectReason.none))}finally{a.reconnecting=!1}this.reconnectableSessions.push(a),a.metrics.addReconnection(),a.processMessages().catch((e=>{this.trace(c.TraceLevel.Error,c.SshTraceEventIds.unknownError,`Unhandled error processing messages: ${e.message}`,e)})),this.trace(c.TraceLevel.Info,c.SshTraceEventIds.serverSessionReconnecting,`${a} reconnected. Re-sent ${l.length} dropped messages.`),a.reconnectedEmitter.fire()}dispose(e){if(this.reconnectableSessions){const e=this.reconnectableSessions.indexOf(this);e>=0&&this.reconnectableSessions.splice(e,1)}super.dispose(e)}}t.SshServerSession=l},7492:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSession=void 0;const s=n(6197),i=n(4300),r=n(5844),o=n(9872),a=n(9273),c=n(1163),l=n(1915),u=n(4237),h=n(4865),p=n(3193),d=n(5263),f=n(6744),m=n(5255),g=n(3379),v=n(6892),y=n(6306),b=n(4340),w=n(3305),S=n(8764),x=n(1656),E=n(7521),C=n(9638),T=n(4608),R=n(7399),_=n(3661),P=n(6655),k=n(3689),A=n(1039);let M=0;class O{get algorithms(){return this.protocol?this.protocol.algorithms:null}get principal(){return this.principalValue}set principal(e){this.principalValue=e}constructor(e,t){if(this.config=e,this.remoteVersion=null,this.activatedServices=new Map,this.connectionService=null,this.requestHandlers=new P.Queue,this.blockedMessages=[],this.blockedMessagesSemaphore=new R.Semaphore(1),this.connected=!1,this.disposed=!1,this.metrics=new b.SessionMetrics,this.reconnecting=!1,this.sessionId=null,this.principalValue=null,this.authenticatingEmitter=new r.Emitter,this.onAuthenticating=this.authenticatingEmitter.event,this.closedEmitter=new r.Emitter,this.onClosed=this.closedEmitter.event,this.disconnectedEmitter=new r.Emitter,this.onDisconnected=this.disconnectedEmitter.event,this.serviceActivatedEmitter=new r.Emitter,this.onServiceActivated=this.serviceActivatedEmitter.event,this.channelOpeningEmitter=new r.Emitter,this.onChannelOpening=this.channelOpeningEmitter.event,this.requestEmitter=new r.Emitter,this.onRequest=this.requestEmitter.event,this.reportProgressEmitter=new r.Emitter,this.onReportProgress=this.reportProgressEmitter.event,this.trace=(e,t,n,s)=>{},this.isClientSession=t,this.sessionNumber=++M,!e)throw new TypeError("Session configuration is required.");if(e.keyExchangeAlgorithms.find((e=>!!e)))this.kexService=new u.KeyExchangeService(this);else{if(e.encryptionAlgorithms.length>0&&e.encryptionAlgorithms.indexOf(null)<0)throw new Error("Encryption requires a key-exchange algorithm to be configured.");if(e.hmacAlgorithms.length>0&&e.hmacAlgorithms.indexOf(null)<0)throw new Error("HMAC requires a key-exchange algorithm to be configured.");if(e.publicKeyAlgorithms.length>0&&e.publicKeyAlgorithms.indexOf(null)<0)throw new Error("Host authentication requires a key-exchange algorithm to be configured.");this.kexService=null,this.activateService(p.ConnectionService)}e.onConfigurationChanged((()=>{const t=this.protocol;t&&(t.traceChannelData=e.traceChannelData)}))}get isConnected(){return this.connected}get isClosed(){return this.disposed}get services(){return[...this.activatedServices.values()]}get channels(){var e,t;return null!==(t=null===(e=this.connectionService)||void 0===e?void 0:e.channels)&&void 0!==t?t:[]}get protocolExtensions(){var e;return(null===(e=this.protocol)||void 0===e?void 0:e.extensions)||null}getService(e){return this.activatedServices.get(e)||null}activateService(e){let t;if("function"==typeof e)t=e;else{const n=e;if(t=(0,h.findService)(this.config.services,(e=>e.serviceRequest===n)),!t)return null}let n=this.activatedServices.get(t);if(!n){if(!this.config.services.has(t))throw new Error(`Service type not configured: ${t.name}`);n=new t(this,this.config.services.get(t)),t===p.ConnectionService&&(this.connectionService=n),this.activatedServices.set(t,n),this.serviceActivatedEmitter.fire(n)}return n}async connect(e,t){if(!e)throw new TypeError("A session stream is required.");if(this.disposed)throw new T.ObjectDisposedError(this);this.connectPromise||(this.connectPromise=this.doConnect(e,t)),await this.connectPromise}async doConnect(e,t){this.trace(s.TraceLevel.Info,s.SshTraceEventIds.sessionConnecting,`${this} ${this.reconnecting?"re":""}connecting...`),this.raiseReportProgress(k.Progress.OpeningSshSessionConnection),this.protocol=new l.SshProtocol(e,this.config,this.metrics,this.trace),this.protocol.kexService=this.kexService,this.raiseReportProgress(k.Progress.StartingProtocolVersionExchange),await this.exchangeVersions(t),this.kexService?await this.encrypt(t):(await this.sendMessage(m.KeyExchangeInitMessage.none,t),await(0,C.withCancellation)(this.versionExchangePromise,t),this.raiseReportProgress(k.Progress.CompletedProtocolVersionExchange),this.connected=!0),this.processMessages().catch((e=>{this.trace(s.TraceLevel.Error,s.SshTraceEventIds.unknownError,`Unhandled error processing messages: ${e.message}`,e)})),this.raiseReportProgress(k.Progress.OpenedSshSessionConnection)}async exchangeVersions(e){const t=this.protocol.writeProtocolVersion(O.localVersion.toString(),e),n=this.protocol.readProtocolVersion(e);this.versionExchangePromise=n.then((async e=>{let t;this.trace(s.TraceLevel.Info,s.SshTraceEventIds.protocolVersion,`Local version: ${O.localVersion}, remote version: ${e}`);const n=c.SshVersionInfo.tryParse(e);if(n){if(this.remoteVersion=n,"2.0"===n.protocolVersion)return;t=`Remote SSH version ${this.remoteVersion} is not supported. This library only supports SSH v2.0.`}else t=`Could not parse remote SSH version ${e}`;await this.close(y.SshDisconnectReason.protocolVersionNotSupported,t,new Error(t))})),await t}async encrypt(e){var t,n;const i=this.protocol;if(!i)throw new T.ObjectDisposedError(this);await i.considerReExchange(!0,e),await(0,C.withCancellation)(this.versionExchangePromise,e),this.raiseReportProgress(k.Progress.CompletedProtocolVersionExchange),this.connected=!0,this.raiseReportProgress(k.Progress.StartingKeyExchange);let r=null;for(;!(this.isClosed||(null===(t=this.protocol)||void 0===t?void 0:t.algorithms)||r instanceof y.DisconnectMessage)&&(r=await i.receiveMessage(e),r);)await this.handleMessage(r,e);if(this.raiseReportProgress(k.Progress.CompletedKeyExchange),!(null===(n=this.protocol)||void 0===n?void 0:n.algorithms))throw new T.SshConnectionError("Session closed while encrypting.",y.SshDisconnectReason.connectionLost);this.protocol.algorithms.cipher&&this.trace(s.TraceLevel.Info,s.SshTraceEventIds.sessionEncrypted,`${this} encrypted.`)}async processMessages(){var e;for(this.connected=!0;!this.disposed;){const t=this.protocol;if(!t)break;let n=null;try{n=await t.receiveMessage()}catch(t){if(!(t instanceof Error))throw t;let n=y.SshDisconnectReason.protocolError;t instanceof T.SshConnectionError?n=null!==(e=t.reason)&&void 0!==e?e:n:this.trace(s.TraceLevel.Error,s.SshTraceEventIds.receiveMessageFailed,`Error receiving message: ${t.message}`,t),await this.close(n,t.message,t)}if(!n){await this.close(y.SshDisconnectReason.connectionLost,"Connection lost.");break}try{await this.handleMessage(n)}catch(e){if(!(e instanceof Error))throw e;this.trace(s.TraceLevel.Error,s.SshTraceEventIds.handleMessageFailed,`Error handling ${n}: ${e.message}`,e),await this.close(y.SshDisconnectReason.protocolError,e.message,e)}}this.connected=!1}get canAcceptRequests(){var e;return!(this.kexService&&(!(null===(e=this.protocol)||void 0===e?void 0:e.algorithms)||this.protocol.algorithms.cipher&&!this.principal))}async sendMessage(e,t){var n,i;if(!e)throw new TypeError("Message expected.");if(t&&t.isCancellationRequested)throw new C.CancellationError;const r=this.protocol;if(!r||this.disposed)throw new T.ObjectDisposedError(this);if(this.kexService&&this.kexService.exchanging&&e.messageType>4&&(e.messageType<20||e.messageType>49))return void this.blockedMessages.push(e);let a;await this.blockedMessagesSemaphore.wait(t);try{a=await r.sendMessage(e,t),this.blockedMessagesSemaphore.release()}catch(t){if(this.blockedMessagesSemaphore.release(),t instanceof T.SshConnectionError&&t.reason===y.SshDisconnectReason.connectionLost&&(null===(n=this.protocolExtensions)||void 0===n?void 0:n.has(o.SshProtocolExtensionNames.sessionReconnect)))return;if(!(t instanceof Error))throw t;throw this.trace(s.TraceLevel.Error,s.SshTraceEventIds.sendMessageFailed,`Error sending ${e}: ${t.message}`,t),t}if(!a&&!(null===(i=this.protocolExtensions)||void 0===i?void 0:i.has(o.SshProtocolExtensionNames.sessionReconnect)))throw new T.SshConnectionError("Session disconnected.",y.SshDisconnectReason.connectionLost)}handleMessage(e,t){var n;if(e instanceof g.ConnectionMessage&&this.connectionService)return this.connectionService.handleMessage(e,t);if(e instanceof m.NewKeysMessage)return this.handleNewKeysMessage(e,t);if(e instanceof m.KeyExchangeMessage)return this.handleKeyExchangeMessage(e,t);if(e instanceof v.AuthenticationMessage)return null===(n=this.getService(d.AuthenticationService))||void 0===n?void 0:n.handleMessage(e,t);if(e instanceof y.ServiceRequestMessage)return this.handleServiceRequestMessage(e,t);if(e instanceof y.ServiceAcceptMessage)return this.handleServiceAcceptMessage(e,t);if(e instanceof y.SessionRequestMessage)return this.handleRequestMessage(e,t);if(e instanceof y.SessionRequestSuccessMessage)return this.handleRequestSuccessMessage(e);if(e instanceof y.SessionRequestFailureMessage)return this.handleRequestFailureMessage(e);if(e instanceof y.ExtensionInfoMessage)return this.handleExtensionInfoMessage(e,t);if(e instanceof y.DisconnectMessage)return this.handleDisconnectMessage(e);if(e instanceof y.UnimplementedMessage)return this.handleUnimplementedMessage(e,t);if(e instanceof y.DebugMessage)return this.handleDebugMessage(e);if(!(e instanceof y.IgnoreMessage))throw e instanceof f.SshMessage?new Error(`Unhandled message type: ${e.constructor.name}`):new TypeError("Message argument was "+(e?"invalid type.":"null."))}async handleRequestMessage(e,t){var n;let i=!1,r=null;if("initial-channel-request@microsoft.com"===e.requestType&&this.config.protocolExtensions.includes(o.SshProtocolExtensionNames.openChannelRequest)){const n=e.convertTo(new y.SessionChannelRequestMessage),s=n.senderChannel,r=this.channels.find((e=>e.remoteChannelId===s));r&&n.request&&(n.request.wantReply=!1,i=await r.handleRequest(n.request,t))}else if("enable-session-reconnect@microsoft.com"===e.requestType&&(null===(n=this.config.protocolExtensions)||void 0===n?void 0:n.includes(o.SshProtocolExtensionNames.sessionReconnect)))this.protocol.incomingMessagesHaveReconnectInfo||(this.protocol.incomingMessagesHaveReconnectInfo=!0,this.protocol.incomingMessagesHaveLatencyInfo=this.protocol.extensions.has(o.SshProtocolExtensionNames.sessionLatency),i=!0);else if(this.canAcceptRequests){const n=new x.SshRequestEventArgs(e.requestType||"",e,this.principal,t),s=(0,h.findService)(this.config.services,(t=>t.sessionRequest===e.requestType));if(s){const e=this.activateService(s);await e.onSessionRequest(n,t)}else this.raiseSessionRequest(n);n.responsePromise?(r=await n.responsePromise,i=r instanceof y.SessionRequestSuccessMessage):i=n.isAuthorized||!1}else this.trace(s.TraceLevel.Warning,s.SshTraceEventIds.sessionRequestFailed,"Session request blocked because the session is not yet authenticated."),i=!1;e.wantReply&&(i?r instanceof y.SessionRequestSuccessMessage||(r=new y.SessionRequestSuccessMessage):r instanceof y.SessionRequestFailureMessage||(r=new y.SessionRequestFailureMessage),await this.sendMessage(r,t))}raiseReportProgress(e){const t=new A.SshReportProgressEventArgs(e,this.sessionNumber);this.reportProgressEmitter.fire(t)}raiseSessionRequest(e){this.requestEmitter.fire(e)}async handleServiceRequestMessage(e,t){}async handleServiceAcceptMessage(e,t){}async handleKeyExchangeMessage(e,t){this.kexService?await this.kexService.handleMessage(e,t):e instanceof m.KeyExchangeInitMessage&&e.allowsNone||await this.close(y.SshDisconnectReason.keyExchangeFailed,"Encryption is disabled.")}async handleNewKeysMessage(e,t){var n;try{await this.blockedMessagesSemaphore.wait(t),await this.protocol.handleNewKeys(t),(null===(n=this.algorithms)||void 0===n?void 0:n.isExtensionInfoRequested)&&await this.sendExtensionInfo(t);try{for(;this.blockedMessages.length>0;){const e=this.blockedMessages.shift();if(!this.protocol)throw new T.ObjectDisposedError(this);await this.protocol.sendMessage(e,t)}}catch(e){if(!(e instanceof Error))throw e;await this.close(y.SshDisconnectReason.protocolError,void 0,e)}}finally{this.blockedMessagesSemaphore.release()}}async handleUnimplementedMessage(e,t){void 0!==e.unimplementedMessageType&&await this.sendMessage(e,t)}handleDebugMessage(e){e.message&&this.trace(e.alwaysDisplay?s.TraceLevel.Info:s.TraceLevel.Verbose,s.SshTraceEventIds.debugMessage,e.message)}async raiseAuthenticatingEvent(e){this.trace(s.TraceLevel.Info,s.SshTraceEventIds.sessionAuthenticating,`${this} Authenticating(${e})`),this.raiseReportProgress(k.Progress.StartingSessionAuthentication),this.authenticatingEmitter.fire(e);let t=e.authenticationPromise;t||(t=Promise.resolve(null));const n=await t;return this.raiseReportProgress(k.Progress.CompletedSessionAuthentication),n}async request(e,t){if(!e)throw new TypeError("Request is required.");return e.wantReply?await this.requestResponse(e,y.SessionRequestSuccessMessage,y.SessionRequestFailureMessage,t)instanceof y.SessionRequestSuccessMessage:(await this.sendMessage(e,t),!0)}async requestResponse(e,t,n,s){if(!e)throw new TypeError("Request is required.");if(!t)throw new TypeError("Success response type is required.");if(!n)throw new TypeError("Failure response type is required.");e.wantReply=!0;const i=(e,s)=>{var o,a;if(e)r.reject(e);else{if(i.isCancelled)return;if(s instanceof y.SessionRequestFailureMessage){const e=null!==(o=null==s?void 0:s.convertTo(new n,!0))&&void 0!==o?o:null;r.resolve(e)}else if(s instanceof y.SessionRequestSuccessMessage){const e=null!==(a=null==s?void 0:s.convertTo(new t,!0))&&void 0!==a?a:null;r.resolve(e)}else r.reject(new Error("Unknown response message type."))}},r=new w.PromiseCompletionSource;if(s){if(s.isCancellationRequested)throw new C.CancellationError;s.onCancellationRequested((()=>{i.isCancelled=!0,r.reject(new C.CancellationError)}))}return this.requestHandlers.enqueue(i),await this.sendMessage(e,s),await r.promise}handleRequestSuccessMessage(e){this.invokeRequestHandler(e,void 0,void 0)}handleRequestFailureMessage(e){this.invokeRequestHandler(void 0,e,void 0)}invokeRequestHandler(e,t,n){let s;for(;(s=this.requestHandlers.dequeue())&&(s(n,null!=e?e:t),n););}async acceptChannel(e,t){const n="string"==typeof e?e:void 0;t||"object"!=typeof e||(t=e),this.activateService(p.ConnectionService);const s=this.connectionService.acceptChannel(n||a.SshChannel.sessionChannelType,t);return await s}async openChannel(e,t,n){let s;if("string"==typeof e||null===e?(s=new g.ChannelOpenMessage,s.channelType=null!=e?e:a.SshChannel.sessionChannelType):e instanceof g.ChannelOpenMessage?s=e:(s=new g.ChannelOpenMessage,s.channelType=a.SshChannel.sessionChannelType,n=e),t instanceof g.ChannelRequestMessage)return await this.openChannelWithInitialRequest(s,t,n);n||null===t||(n=t),this.activateService(p.ConnectionService);const i=new w.PromiseCompletionSource;return await this.connectionService.openChannel(s,i,n),await i.promise}async openChannelWithInitialRequest(e,t,n){var s;this.activateService(p.ConnectionService);const i=new w.PromiseCompletionSource,r=await this.connectionService.openChannel(e,i,n);if(n){if(n.isCancellationRequested)throw new C.CancellationError;n.onCancellationRequested((()=>i.reject(new C.CancellationError)))}let a,c;const l=this.config.protocolExtensions.includes(o.SshProtocolExtensionNames.openChannelRequest)&&(null===(s=this.protocolExtensions)||void 0===s?void 0:s.has(o.SshProtocolExtensionNames.openChannelRequest));if(!1===l)a=await i.promise,c=await a.request(t,n);else{const e=t.wantReply||void 0===l,s=new y.SessionChannelRequestMessage;s.requestType="initial-channel-request@microsoft.com",s.senderChannel=r,s.request=t,s.wantReply=e;const o=this.request(s,n);a=await i.promise,e?(c=await o,c||void 0!==l||(c=await a.request(t))):c=!0}if(!c)throw await a.close(),new Error("The initial channel request was denied.");return a}async handleChannelOpening(e,t,n=!0){if(n){const n=(0,h.findService)(this.config.services,(t=>t.channelType===e.channel.channelType&&!t.channelRequest));if(n){const s=this.activateService(n);return void await s.onChannelOpening(e,t)}}e.cancellation=null!=t?t:r.CancellationToken.None,this.channelOpeningEmitter.fire(e)}async sendExtensionInfo(e){if(!this.protocol)return;const t=new y.ExtensionInfoMessage;t.extensionInfo={};for(const e of this.config.protocolExtensions)if(e===o.SshProtocolExtensionNames.serverSignatureAlgorithms){const n=Array.from(new Set((0,E.algorithmNames)(this.config.publicKeyAlgorithms))).join(",");t.extensionInfo[e]=n}else t.extensionInfo[e]="";await this.protocol.sendMessage(t,e)}async handleExtensionInfoMessage(e,t){if(this.protocol&&(this.protocol.extensions=new Map,e.extensionInfo)){for(const t of this.config.protocolExtensions){const n=e.extensionInfo[t];"string"==typeof n&&this.protocol.extensions.set(t,n)}this.protocol.extensions.has(o.SshProtocolExtensionNames.sessionReconnect)&&await this.enableReconnect(t)}}async close(e,t,n){var i,r,o;if(!this.disposed&&this.connected){if(this.connected=!1,this.trace(s.TraceLevel.Info,s.SshTraceEventIds.sessionClosing,`${this} Close(${y.SshDisconnectReason[e]}, "${t||""}")`),e!==y.SshDisconnectReason.connectionLost)try{const n=new y.DisconnectMessage;n.reasonCode=e,n.description=t||"",await(null===(i=this.protocol)||void 0===i?void 0:i.sendMessage(n))}catch(e){}else if(this.handleDisconnected())return null===(r=this.protocol)||void 0===r||r.dispose(),this.trace(s.TraceLevel.Info,s.SshTraceEventIds.sessionDisconnected,`${this} disconnected.`),void this.disconnectedEmitter.fire();this.disposed=!0,this.closedError=n,(n=null!=n?n:new T.SshConnectionError(t,e))&&(null===(o=this.connectionService)||void 0===o||o.close(n)),this.closedEmitter.fire(new S.SshSessionClosedEventArgs(e,t||"Disconnected.",n)),this.dispose()}}handleDisconnected(){var e,t;return this.connectPromise=void 0,null===(e=this.kexService)||void 0===e||e.abortKeyExchange(),!!(null===(t=this.protocolExtensions)||void 0===t?void 0:t.has(o.SshProtocolExtensionNames.sessionReconnect))}async handleDisconnectMessage(e){var t;const n=e.description||"Received disconnect message.";await this.close(null!==(t=e.reasonCode)&&void 0!==t?t:y.SshDisconnectReason.none,n)}dispose(e){var t,n;const i=null!=e?e:this.closedError instanceof T.SshConnectionError?this.closedError:new T.SshConnectionError(this.constructor.name+" disposed.");this.disposed||(this.trace(s.TraceLevel.Info,s.SshTraceEventIds.sessionClosing,`${this} disposed.`),this.disposed=!0,this.closedEmitter.fire(new S.SshSessionClosedEventArgs(y.SshDisconnectReason.none,i.message,i))),this.invokeRequestHandler(void 0,void 0,i),this.metrics.close(),null===(t=this.connectionService)||void 0===t||t.dispose();for(const e of this.activatedServices.values())e!==this.connectionService&&e.dispose();this.activatedServices.clear(),null===(n=this.protocol)||void 0===n||n.dispose(),this.protocol=void 0}async enableReconnect(e){var t;try{if(await this.blockedMessagesSemaphore.wait(),null===(t=this.kexService)||void 0===t?void 0:t.exchanging)this.trace(s.TraceLevel.Error,s.SshTraceEventIds.sessionReconnectInitFailed,"Failed to initialize session reconnect because a key-exchange was in-progress.");else{const t=new y.SessionRequestMessage("enable-session-reconnect@microsoft.com",!1);await this.protocol.sendMessage(t,e),this.protocol&&(this.protocol.outgoingMessagesHaveReconnectInfo=!0,this.protocol.outgoingMessagesHaveLatencyInfo=this.protocol.extensions.has(o.SshProtocolExtensionNames.sessionLatency))}this.blockedMessagesSemaphore.release()}catch(e){throw this.blockedMessagesSemaphore.release(),e instanceof Error&&await this.close(y.SshDisconnectReason.protocolError,void 0,e),e}}async createReconnectToken(e,t){return await this.algorithms.signer.sign(i.Buffer.concat([e,t]))}async verifyReconnectToken(e,t,n){return await this.algorithms.verifier.verify(i.Buffer.concat([e,t]),n)}pipe(e){return _.PipeExtensions.pipeSession(this,e)}toString(){return this.constructor.name}}t.SshSession=O,O.localVersion=c.SshVersionInfo.getLocalVersion()},890:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSessionAlgorithms=void 0,t.SshSessionAlgorithms=class{dispose(){this.cipher&&this.cipher.dispose(),this.decipher&&this.decipher.dispose(),this.signer&&this.signer.dispose(),this.verifier&&this.verifier.dispose()}}},9872:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSessionConfiguration=t.SshProtocolExtensionNames=void 0;const s=n(5844),i=n(7521),r=n(4237),o=n(3193),a=n(5263),c=n(6744);var l;!function(e){e.serverSignatureAlgorithms="server-sig-algs",e.openChannelRequest="open-channel-request@microsoft.com",e.sessionReconnect="session-reconnect@microsoft.com",e.sessionLatency="session-latency@microsoft.com"}(l=t.SshProtocolExtensionNames||(t.SshProtocolExtensionNames={})),t.SshSessionConfiguration=class{constructor(e=!0){this.protocolExtensions=[],this.services=new Map,this.authenticationMethods=[],this.messages=new Map,this.contextualMessages=new Map,this.keyExchangeAlgorithms=[],this.publicKeyAlgorithms=[],this.encryptionAlgorithms=[],this.hmacAlgorithms=[],this.compressionAlgorithms=[],this.traceChannelDataValue=!1,this.configurationChangedEmitter=new s.Emitter,this.onConfigurationChanged=this.configurationChangedEmitter.event,this.maxClientAuthenticationAttempts=5,this.enableKeyExchangeGuess=!1,this.keyRotationThreshold=536870912,this.protocolExtensions.push(l.serverSignatureAlgorithms),this.protocolExtensions.push(l.openChannelRequest),this.services.set(r.KeyExchangeService,null),this.services.set(o.ConnectionService,null),this.services.set(a.AuthenticationService,null),this.authenticationMethods.push("none","password","publickey","keyboard-interactive");for(const[e,t]of c.SshMessage.index)if("number"==typeof e)this.messages.set(e,t);else{const[n,s]=e;let i=this.contextualMessages.get(s);i||(i=new Map,this.contextualMessages.set(s,i)),i.set(n,t)}e?(this.keyExchangeAlgorithms.push(i.SshAlgorithms.keyExchange.ecdhNistp384Sha384),this.keyExchangeAlgorithms.push(i.SshAlgorithms.keyExchange.ecdhNistp256Sha256),this.keyExchangeAlgorithms.push(i.SshAlgorithms.keyExchange.dhGroup16Sha512),this.keyExchangeAlgorithms.push(i.SshAlgorithms.keyExchange.dhGroup14Sha256),this.publicKeyAlgorithms.push(i.SshAlgorithms.publicKey.rsaWithSha512),this.publicKeyAlgorithms.push(i.SshAlgorithms.publicKey.rsaWithSha256),this.publicKeyAlgorithms.push(i.SshAlgorithms.publicKey.ecdsaSha2Nistp384),this.publicKeyAlgorithms.push(i.SshAlgorithms.publicKey.ecdsaSha2Nistp256),this.encryptionAlgorithms.push(i.SshAlgorithms.encryption.aes256Gcm),this.encryptionAlgorithms.push(i.SshAlgorithms.encryption.aes256Ctr),this.hmacAlgorithms.push(i.SshAlgorithms.hmac.hmacSha512Etm),this.hmacAlgorithms.push(i.SshAlgorithms.hmac.hmacSha256Etm),this.hmacAlgorithms.push(i.SshAlgorithms.hmac.hmacSha512),this.hmacAlgorithms.push(i.SshAlgorithms.hmac.hmacSha256)):(this.keyExchangeAlgorithms.push(i.SshAlgorithms.keyExchange.none),this.publicKeyAlgorithms.push(i.SshAlgorithms.publicKey.none),this.encryptionAlgorithms.push(i.SshAlgorithms.encryption.none),this.hmacAlgorithms.push(i.SshAlgorithms.hmac.none)),this.compressionAlgorithms.push(i.SshAlgorithms.compression.none)}addService(e,t){if(this.services.has(e))throw new Error("Duplicate service entry.");this.services.set(e,t)}getKeyExchangeAlgorithm(e){return this.getAlgorithm(e,this.keyExchangeAlgorithms)}getPublicKeyAlgorithm(e){return this.getAlgorithm(e,this.publicKeyAlgorithms)}getEncryptionAlgorithm(e){return this.getAlgorithm(e,this.encryptionAlgorithms)}getHmacAlgorithm(e){return this.getAlgorithm(e,this.hmacAlgorithms)}getCompressionAlgorithm(e){return this.getAlgorithm(e,this.compressionAlgorithms)}getAlgorithm(e,t){const n=t.find((t=>!!t&&t.name===e));if(!n){if("none"===e)return null;throw new Error("Algorithm not found: "+e)}return n}get traceChannelData(){return this.traceChannelDataValue}set traceChannelData(e){e!==this.traceChannelDataValue&&(this.traceChannelDataValue=e,this.configurationChangedEmitter.fire())}}},6373:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshStream=void 0;const s=n(3305),i=n(2781);class r extends i.Duplex{constructor(e){let t=null;super({async write(t,n,s){let i;try{let s;if("string"==typeof t)s=Buffer.from(t,n);else{if(!(t instanceof Buffer||t instanceof Uint8Array))throw new Error("Unsupported chunk type: "+typeof t);s=t}await e.send(s)}catch(e){if(!(e instanceof Error))throw e;i=e}s&&s(i)},async writev(t,n){let s;try{if(1===t.length)return this.write(t[0].chunk,t[0].encoding,n);{function i(e,t){if(t.chunk instanceof Buffer||t.chunk instanceof Uint8Array)return e+t.chunk.length;throw new Error("Unsupported chunk type: "+typeof t.chunk)}const r=t.reduce(i,0),o=Buffer.alloc(r);let a=0;for(let c=0;c<t.length;c++)t[c].chunk.copy(o,a),a+=t[c].chunk.length;await e.send(o)}}catch(l){if(!(l instanceof Error))throw l;s=l}n&&n(s)},async final(t){let n;try{await e.close()}catch(e){if(!(e instanceof Error))throw e;n=e}t&&t(n)},read(){t&&(t.resolve(),t=null)}}),e.onDataReceived((async n=>{const i=Buffer.alloc(n.length);n.copy(i),this.push(i)||(t||(t=new s.PromiseCompletionSource),await t.promise),e.adjustWindow(i.length)})),e.onClosed((()=>{this.push(null)})),this.channel=e}destroy(e){return this.channel.close().catch(),super.destroy(e),this}toString(){return`SshStream(Channel Type: ${this.channel.channelType}, Id: ${this.channel.channelId}, RemoteId: ${this.channel.remoteChannelId})`}}t.SshStream=r},1163:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshVersionInfo=void 0;const s=n(4369),i=s.name.replace(/^@\w+\//,""),r=s.version;class o{static tryParse(e){if(!e)throw new TypeError("Version string expected.");if(!e.startsWith("SSH-"))return null;const t=e.indexOf("-",4);if(t<=0)return null;const n=e.substring(4,t);if(!/^\d+\.\d+$/.test(n))return null;let s,i;const r=e.substring(t+1),a=r.indexOf(" "),c=r.lastIndexOf("_",a>=0?a:r.length-1);if(c>=0){s=r.substring(0,c).replace(/_/g," "),i=r.substring(c+1);for(let e=0;e<i.length;e++){const t=i[e];if(!(t>="0"&&t<="9")&&"."!==t){i=i.substring(0,e);break}}/^\d+(\.\d+)*$/.test(i)||(i=null)}else s=r,i=null;return new o(e,n,s,i)}static getLocalVersion(){return new o(`SSH-2.0-${i}_${r}`,"2.0",i,r)}constructor(e,t,n,s){this.versionString=e,this.protocolVersion=t,this.name=n,this.version=s}toString(){return this.versionString}get isVsSsh(){return this.isVsSshCS||this.isVsSshTS}get isVsSshCS(){return"Microsoft.VisualStudio.Ssh"===this.name||"Microsoft.DevTunnels.Ssh"===this.name}get isVsSshTS(){return"vs-ssh"===this.name||"dev-tunnels-ssh"===this.name}}t.SshVersionInfo=o},3538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketStream=t.NodeStream=t.BaseStream=void 0;const s=n(4300),i=n(5844),r=n(9638),o=n(4608);function a(e,t){t&&(t.isCancellationRequested?e(new r.CancellationError):t.onCancellationRequested((()=>{e(new r.CancellationError)})))}class c{constructor(){this.incomingData=[],this.pendingReads=[],this.error=null,this.disposed=!1,this.closedEmitter=new i.Emitter,this.closed=this.closedEmitter.event}onData(e){for(;this.pendingReads.length>0;){const t=this.pendingReads.shift();if(t.count>=e.length)return void t.resolve(e);{const n=e.slice(0,t.count);e=e.slice(t.count),t.resolve(n)}}this.incomingData.push(e)}onEnd(){for(;this.pendingReads.length>0;)this.pendingReads.shift().resolve(null);this.incomingData.push(s.Buffer.alloc(0))}onError(e){for(this.error||(this.error=e);this.pendingReads.length>0;)this.pendingReads.shift().reject(e)}async read(e,t){if(this.disposed)throw new o.ObjectDisposedError(this);if(this.incomingData.length>0){let t=this.incomingData[0];return 0===t.length?null:(e>=t.length?this.incomingData.shift():(this.incomingData[0]=t.slice(e),t=t.slice(0,e)),t)}if(this.error)throw this.error;return await new Promise(((n,s)=>{if(t){if(t.isCancellationRequested)return void s(new r.CancellationError);t.onCancellationRequested((()=>{for(let e=0;e<this.pendingReads.length;e++)Object.is(t,this.pendingReads[e].cancellation)&&this.pendingReads.splice(e--,1)[0].reject(new r.CancellationError)}))}this.pendingReads.push({count:e,resolve:n,reject:s,cancellation:t})}))}dispose(){if(!this.disposed){this.disposed=!0;const e=new o.ObjectDisposedError(this);this.onError(e),this.fireOnClose(e)}}fireOnClose(e){this.closedEmitter.fire({error:e})}get isDisposed(){return this.disposed}}t.BaseStream=c,t.NodeStream=class extends c{constructor(e,t){if(super(),!e)throw new TypeError("Duplex or Readable/Writable stream are required.");this.readStream=e,this.writeStream=t||e,this.readStream.on("data",this.onData.bind(this)),this.readStream.on("end",this.onEnd.bind(this)),this.readStream.on("error",this.onError.bind(this)),this.readStream.on("close",(()=>{this.onEnd(),this.fireOnClose()}))}async write(e,t){if(!e)throw new TypeError("Data is required.");if(this.disposed)throw new o.ObjectDisposedError(this);return new Promise(((n,s)=>{a(s,t),this.writeStream.write(e,(e=>{e?s(e):n()}))}))}async close(e,t){if(this.disposed)throw new o.ObjectDisposedError(this);await new Promise(((e,n)=>{a(n,t),this.writeStream.end(e)})),this.disposed=!0,this.onError(e||new o.ObjectDisposedError(this)),this.closedEmitter.fire({error:e})}dispose(){if(!this.disposed){const e=new o.ObjectDisposedError(this);this.readStream.destroy(e),this.writeStream.destroy(e)}super.dispose()}},t.WebSocketStream=class extends c{constructor(e){if(super(),this.websocket=e,!e)throw new TypeError("WebSocket is required.");if("string"==typeof e.binaryType&&"arraybuffer"!==e.binaryType)throw new Error("WebSocket must use arraybuffer binary type.");e.onmessage=e=>{this.onData(s.Buffer.from(e.data))},e.onclose=e=>{if(e.wasClean)this.onEnd();else{const t=new Error(e.reason);t.code=e.code,this.onError(t)}}}get protocol(){return this.websocket.protocol}async write(e,t){if(!e)throw new TypeError("Data is required.");if(this.disposed)throw new o.ObjectDisposedError(this);if("readyState"in this.websocket&&(2===this.websocket.readyState||3===this.websocket.readyState))throw new DOMException("WebSocket is already in CLOSING or CLOSED state.","InvalidStateError");this.websocket.send(e)}async close(e,t){if(this.disposed)throw new o.ObjectDisposedError(this);if(e){const t="number"==typeof e.code?e.code:void 0;this.websocket.close(t,e.message)}else this.websocket.close();this.disposed=!0,this.closedEmitter.fire({error:e}),this.onError(e||new Error("Stream closed."))}dispose(){this.disposed||this.websocket.close(),super.dispose()}}},6197:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SshTraceEventIds=t.TraceLevel=void 0,(n=t.TraceLevel||(t.TraceLevel={})).Error="error",n.Warning="warning",n.Info="info",n.Verbose="verbose";class s{}t.SshTraceEventIds=s,s.unknownError=9e3,s.streamReadError=9001,s.streamWriteError=9002,s.streamCloseError=9003,s.sendMessageFailed=9004,s.receiveMessageFailed=9005,s.handleMessageFailed=9006,s.serverAuthenticationFailed=9007,s.clientAuthenticationFailed=9008,s.authenticationError=9009,s.channelWindowAdjustFailed=9010,s.channelWaitForWindowAdjust=9011,s.sessionReconnectInitFailed=9020,s.serverSessionReconnectFailed=9021,s.clientSessionReconnectFailed=9022,s.sessionRequestFailed=9023,s.channelRequestFailed=9024,s.serverListenFailed=9050,s.portForwardServerListenFailed=9051,s.portForwardRequestInvalid=9052,s.portForwardChannelInvalid=9053,s.portForwardChannelOpenFailed=9054,s.portForwardConnectionFailed=9055,s.metricsError=9061,s.protocolVersion=9100,s.sendingMessage=9101,s.receivingMessage=9102,s.sendingChannelData=9103,s.receivingChannelData=9104,s.sessionEncrypted=9110,s.sessionAuthenticating=9111,s.sessionAuthenticated=9112,s.sessionClosing=9113,s.sessionConnecting=9114,s.channelOpened=9120,s.channelOpenFailed=9121,s.channelEofReceived=9122,s.channelClosed=9123,s.serverListening=9150,s.serverClientConnected=9151,s.portForwardServerListening=9152,s.portForwardConnectionAccepted=9153,s.portForwardChannelOpened=9154,s.portForwardChannelClosed=9155,s.portForwardConnectionOpened=9156,s.portForwardConnectionClosed=9157,s.sessionDisconnected=9160,s.clientSessionReconnecting=9161,s.serverSessionReconnecting=9162,s.clientSessionStartReconnecting=9163,s.algorithmNegotiation=9170,s.debugMessage=9200},9638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withCancellation=t.CancellationError=t.CancellationTokenSource=t.CancellationToken=void 0;const s=n(5844);Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return s.CancellationToken}}),Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return s.CancellationTokenSource}});class i extends Error{constructor(e){super(e||"Operation cancelled.")}}t.CancellationError=i,t.withCancellation=function(e,t){return t?Promise.race([e,new Promise(((e,n)=>{t.isCancellationRequested?n(new i):t.onCancellationRequested((()=>{n(new i)}))}))]):e}},3305:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseCompletionSource=void 0,t.PromiseCompletionSource=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}resolve(e){}reject(e){}}},6655:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;class n{constructor(){this.array=new Array,this.first=0,this.count=0,this.version=0}get size(){return this.count}enqueue(e){if(this.count===this.array.length){const e=new Array(Math.max(16,2*this.count));for(let t=0;t<this.count;t++)e[t]=this.array[(this.first+t)%this.count];this.array=e,this.first=0}this.array[(this.first+this.count)%this.array.length]=e,this.count++,this.version++}dequeue(){if(0===this.count)return;const e=this.array[this.first];return this.array[this.first]=void 0,this.first=(this.first+1)%this.array.length,this.count--,this.version++,e}peek(){if(0!==this.count)return this.array[this.first]}clear(){this.first=0,this.count=0,this.array.fill(void 0),this.version++}*[Symbol.iterator](){const e=this.version;for(let t=0;t<this.count;t++){const n=this.array[(this.first+t)%this.array.length];if(yield n,this.version!==e)throw new Error("Iterator is invalid due to changes in the collection.")}}}t.Queue=n},7399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const s=n(3305),i=n(9638),r=n(4608);t.Semaphore=class{constructor(e=0){this.completions=[],this.disposed=!1,this.count=e}get currentCount(){return this.count}release(e=1){if(this.disposed)throw new r.ObjectDisposedError(this);const t=this.count;for(;e>0;e--)this.completions.length>0?this.completions.shift().resolve(!0):this.count++;return t}tryRelease(){try{this.release()}catch(e){if(!(e instanceof r.ObjectDisposedError))throw e}}async wait(e,t){const n="number"==typeof e?e:void 0;if(void 0===t&&"object"==typeof e&&(t=e),this.disposed)throw new r.ObjectDisposedError(this);if(null==t?void 0:t.isCancellationRequested)throw new i.CancellationError;if(this.count>0)return this.count--,!0;if(0===n)return!1;{const e=new s.PromiseCompletionSource;this.completions.push(e);const r=[e.promise];if(n&&r.push(new Promise((e=>setTimeout((()=>e(!1)),n)))),t){const e=new s.PromiseCompletionSource;t.onCancellationRequested((()=>{e.reject(new i.CancellationError)})),r.push(e.promise)}if(await Promise.race(r))return!0;{const t=this.completions.indexOf(e);return t>=0&&this.completions.splice(t,1),!1}}}dispose(){if(!this.disposed){this.disposed=!0;for(const e of this.completions)e.reject(new r.ObjectDisposedError(this));this.completions.splice(0,this.completions.length),this.count=0}}}},2761:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(2361),r=s(n(8423)),o=s(n(1881)),a=r.default("agent-base");function c(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}function l(e,t){return new l.Agent(e,t)}!function(e){class t extends i.EventEmitter{constructor(e,t){super();let n=t;"function"==typeof e?this.callback=e:e&&(n=e),this.timeout=null,n&&"number"==typeof n.timeout&&(this.timeout=n.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:c()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:c()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const n=Object.assign({},t);"boolean"!=typeof n.secureEndpoint&&(n.secureEndpoint=c()),null==n.host&&(n.host="localhost"),null==n.port&&(n.port=n.secureEndpoint?443:80),null==n.protocol&&(n.protocol=n.secureEndpoint?"https:":"http:"),n.host&&n.path&&delete n.path,delete n.agent,delete n.hostname,delete n._defaultAgent,delete n.defaultPort,delete n.createConnection,e._last=!0,e.shouldKeepAlive=!1;let s=!1,i=null;const r=n.timeout||this.timeout,l=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},u=()=>{i=null,s=!0;const e=new Error(`A "socket" was not created for HTTP request before ${r}ms`);e.code="ETIMEOUT",l(e)},h=e=>{s||(null!==i&&(clearTimeout(i),i=null),l(e))},p=t=>{if(s)return;if(null!=i&&(clearTimeout(i),i=null),r=t,Boolean(r)&&"function"==typeof r.addRequest)return a("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,n);var r;if(t)return t.once("free",(()=>{this.freeSocket(t,n)})),void e.onSocket(t);const o=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);l(o)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(a("Converting legacy callback function to promise"),this.promisifiedCallback=o.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof r&&r>0&&(i=setTimeout(u,r)),"port"in n&&"number"!=typeof n.port&&(n.port=Number(n.port));try{a("Resolving socket for %o request: %o",n.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,n)).then(p,h)}catch(e){Promise.reject(e).catch(h)}}else l(new Error("`callback` is not defined"))}freeSocket(e,t){a("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(l||(l={})),e.exports=l},1881:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){return new Promise(((s,i)=>{e.call(this,t,n,((e,t)=>{e?i(e):s(t)}))}))}}},4932:e=>{e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},6846:(e,t,n)=>{var s=n(4932),i=n(170),r=n(4588),o=n(4241);for(var a in e.exports={Reader:r,Writer:o},i)i.hasOwnProperty(a)&&(e.exports[a]=i[a]);for(var c in s)s.hasOwnProperty(c)&&(e.exports[c]=s[c])},4588:(e,t,n)=>{var s=n(9491),i=n(443).Buffer,r=n(170),o=n(4932).newInvalidAsn1Error;function a(e){if(!e||!i.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(a.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(a.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),a.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},a.prototype.peek=function(){return this.readByte(!0)},a.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128==(128&t)){if(0==(t&=127))throw o("Indefinite length not supported");if(t>4)throw o("encoding too long");if(this._size-e<t)return null;this._len=0;for(var n=0;n<t;n++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},a.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw o("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var n=this.readLength(this._offset+1);return null===n?null:(this._offset=n,t)},a.prototype.readInt=function(){return this._readTag(r.Integer)},a.prototype.readBoolean=function(){return 0!==this._readTag(r.Boolean)},a.prototype.readEnumeration=function(){return this._readTag(r.Enumeration)},a.prototype.readString=function(e,t){e||(e=r.OctetString);var n=this.peek();if(null===n)return null;if(n!==e)throw o("Expected 0x"+e.toString(16)+": got 0x"+n.toString(16));var s=this.readLength(this._offset+1);if(null===s)return null;if(this.length>this._size-s)return null;if(this._offset=s,0===this.length)return t?i.alloc(0):"";var a=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?a:a.toString("utf8")},a.prototype.readOID=function(e){e||(e=r.OID);var t=this.readString(e,!0);if(null===t)return null;for(var n=[],s=0,i=0;i<t.length;i++){var o=255&t[i];s<<=7,s+=127&o,0==(128&o)&&(n.push(s),s=0)}return s=n.shift(),n.unshift(s%40),n.unshift(s/40>>0),n.join(".")},a.prototype._readTag=function(e){s.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw o("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>4)throw o("Integer too long: "+this.length);if(this.length>this._size-n)return null;this._offset=n;for(var i=this._buf[this._offset],r=0,a=0;a<this.length;a++)r<<=8,r|=255&this._buf[this._offset++];return 128==(128&i)&&4!==a&&(r-=1<<8*a),r>>0},e.exports=a},170:e=>{e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},4241:(e,t,n)=>{var s=n(9491),i=n(443).Buffer,r=n(170),o=n(4932).newInvalidAsn1Error,a={size:1024,growthFactor:8};function c(e){var t,n;t=a,n=e||{},s.ok(t),s.equal(typeof t,"object"),s.ok(n),s.equal(typeof n,"object"),Object.getOwnPropertyNames(t).forEach((function(e){if(!n[e]){var s=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,s)}})),e=n,this._buf=i.alloc(e.size||1024),this._size=this._buf.length,this._offset=0,this._options=e,this._seq=[]}Object.defineProperty(c.prototype,"buffer",{get:function(){if(this._seq.length)throw o(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),c.prototype.writeByte=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=e},c.prototype.writeInt=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");"number"!=typeof t&&(t=r.Integer);for(var n=4;(0==(4286578688&e)||-8388608==(4286578688&e))&&n>1;)n--,e<<=8;if(n>4)throw o("BER ints cannot be > 0xffffffff");for(this._ensure(2+n),this._buf[this._offset++]=t,this._buf[this._offset++]=n;n-- >0;)this._buf[this._offset++]=(4278190080&e)>>>24,e<<=8},c.prototype.writeNull=function(){this.writeByte(r.Null),this.writeByte(0)},c.prototype.writeEnumeration=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");return"number"!=typeof t&&(t=r.Enumeration),this.writeInt(e,t)},c.prototype.writeBoolean=function(e,t){if("boolean"!=typeof e)throw new TypeError("argument must be a Boolean");"number"!=typeof t&&(t=r.Boolean),this._ensure(3),this._buf[this._offset++]=t,this._buf[this._offset++]=1,this._buf[this._offset++]=e?255:0},c.prototype.writeString=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string (was: "+typeof e+")");"number"!=typeof t&&(t=r.OctetString);var n=i.byteLength(e);this.writeByte(t),this.writeLength(n),n&&(this._ensure(n),this._buf.write(e,this._offset),this._offset+=n)},c.prototype.writeBuffer=function(e,t){if("number"!=typeof t)throw new TypeError("tag must be a number");if(!i.isBuffer(e))throw new TypeError("argument must be a buffer");this.writeByte(t),this.writeLength(e.length),this._ensure(e.length),e.copy(this._buf,this._offset,0,e.length),this._offset+=e.length},c.prototype.writeStringArray=function(e){if(!e instanceof Array)throw new TypeError("argument must be an Array[String]");var t=this;e.forEach((function(e){t.writeString(e)}))},c.prototype.writeOID=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string");if("number"!=typeof t&&(t=r.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(e))throw new Error("argument is not a valid OID string");var n=e.split("."),s=[];s.push(40*parseInt(n[0],10)+parseInt(n[1],10)),n.slice(2).forEach((function(e){!function(e,t){t<128?e.push(t):t<16384?(e.push(t>>>7|128),e.push(127&t)):t<2097152?(e.push(t>>>14|128),e.push(255&(t>>>7|128)),e.push(127&t)):t<268435456?(e.push(t>>>21|128),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t)):(e.push(255&(t>>>28|128)),e.push(255&(t>>>21|128)),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t))}(s,parseInt(e,10))}));var i=this;this._ensure(2+s.length),this.writeByte(t),this.writeLength(s.length),s.forEach((function(e){i.writeByte(e)}))},c.prototype.writeLength=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");if(this._ensure(4),e<=127)this._buf[this._offset++]=e;else if(e<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=e;else if(e<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e;else{if(!(e<=16777215))throw o("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=e>>16,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e}},c.prototype.startSequence=function(e){"number"!=typeof e&&(e=r.Sequence|r.Constructor),this.writeByte(e),this._seq.push(this._offset),this._ensure(3),this._offset+=3},c.prototype.endSequence=function(){var e=this._seq.pop(),t=e+3,n=this._offset-t;if(n<=127)this._shift(t,n,-2),this._buf[e]=n;else if(n<=255)this._shift(t,n,-1),this._buf[e]=129,this._buf[e+1]=n;else if(n<=65535)this._buf[e]=130,this._buf[e+1]=n>>8,this._buf[e+2]=n;else{if(!(n<=16777215))throw o("Sequence too long");this._shift(t,n,1),this._buf[e]=131,this._buf[e+1]=n>>16,this._buf[e+2]=n>>8,this._buf[e+3]=n}},c.prototype._shift=function(e,t,n){s.ok(void 0!==e),s.ok(void 0!==t),s.ok(n),this._buf.copy(this._buf,e+n,e,e+t),this._offset+=n},c.prototype._ensure=function(e){if(s.ok(e),this._size-this._offset<e){var t=this._size*this._options.growthFactor;t-this._offset<e&&(t+=e);var n=i.alloc(t);this._buf.copy(n,0,0,this._offset),this._buf=n,this._size=t}},e.exports=c},2701:(e,t,n)=>{var s=n(6846);e.exports={Ber:s,BerReader:s.Reader,BerWriter:s.Writer}},2216:(e,t,n)=>{e.exports={parallel:n(9968),serial:n(2371),serialOrdered:n(6577)}},7312:e=>{function t(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}e.exports=function(e){Object.keys(e.jobs).forEach(t.bind(e)),e.jobs={}}},3514:(e,t,n)=>{var s=n(206);e.exports=function(e){var t=!1;return s((function(){t=!0})),function(n,i){t?e(n,i):s((function(){e(n,i)}))}}},206:e=>{e.exports=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)}},9645:(e,t,n)=>{var s=n(3514),i=n(7312);e.exports=function(e,t,n,r){var o=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[o]=function(e,t,n,i){return 2==e.length?e(n,s(i)):e(n,t,s(i))}(t,o,e[o],(function(e,t){o in n.jobs&&(delete n.jobs[o],e?i(n):n.results[o]=t,r(e,n.results))}))}},2317:e=>{e.exports=function(e,t){var n=!Array.isArray(e),s={index:0,keyedList:n||t?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};return t&&s.keyedList.sort(n?t:function(n,s){return t(e[n],e[s])}),s}},3499:(e,t,n)=>{var s=n(7312),i=n(3514);e.exports=function(e){Object.keys(this.jobs).length&&(this.index=this.size,s(this),i(e)(null,this.results))}},9968:(e,t,n)=>{var s=n(9645),i=n(2317),r=n(3499);e.exports=function(e,t,n){for(var o=i(e);o.index<(o.keyedList||e).length;)s(e,t,o,(function(e,t){e?n(e,t):0!==Object.keys(o.jobs).length||n(null,o.results)})),o.index++;return r.bind(o,n)}},2371:(e,t,n)=>{var s=n(6577);e.exports=function(e,t,n){return s(e,t,null,n)}},6577:(e,t,n)=>{var s=n(9645),i=n(2317),r=n(3499);function o(e,t){return e<t?-1:e>t?1:0}e.exports=function(e,t,n,o){var a=i(e,n);return s(e,t,a,(function n(i,r){i?o(i,r):(a.index++,a.index<(a.keyedList||e).length?s(e,t,a,n):o(null,a.results))})),r.bind(a,o)},e.exports.ascending=o,e.exports.descending=function(e,t){return-1*o(e,t)}},4857:e=>{"use strict";e.exports={mask:(e,t,n,s,i)=>{for(var r=0;r<i;r++)n[s+r]=e[r]^t[3&r]},unmask:(e,t)=>{const n=e.length;for(var s=0;s<n;s++)e[s]^=t[3&s]}}},848:(e,t,n)=>{"use strict";try{e.exports=n(816)(__dirname)}catch(t){e.exports=n(4857)}},9500:(e,t,n)=>{var s=n(3837),i=n(2781).Stream,r=n(6710);function o(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}e.exports=o,s.inherits(o,i),o.create=function(e){var t=new this;for(var n in e=e||{})t[n]=e[n];return t},o.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},o.prototype.append=function(e){if(o.isStreamLike(e)){if(!(e instanceof r)){var t=r.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},o.prototype.pipe=function(e,t){return i.prototype.pipe.call(this,e,t),this.resume(),e},o.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},o.prototype._realGetNext=function(){var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){o.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e):this.end()},o.prototype._pipeNext=function(e){if(this._currentStream=e,o.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var t=e;this.write(t),this._getNext()},o.prototype._handleErrors=function(e){var t=this;e.on("error",(function(e){t._emitError(e)}))},o.prototype.write=function(e){this.emit("data",e)},o.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},o.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},o.prototype.end=function(){this._reset(),this.emit("end")},o.prototype.destroy=function(){this._reset(),this.emit("close")},o.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},o.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},o.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach((function(t){t.dataSize&&(e.dataSize+=t.dataSize)})),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},o.prototype._emitError=function(e){this._reset(),this.emit("error",e)}},3847:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let s=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(i=s))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(1311)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},1311:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,r,o=null;function a(...e){if(!a.enabled)return;const s=a,i=Number(new Date),r=i-(n||i);s.diff=r,s.prev=n,s.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";o++;const r=t.formatters[i];if("function"==typeof r){const t=e[o];n=r.call(s,t),e.splice(o,1),o--}return n})),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(i!==t.namespaces&&(i=t.namespaces,r=t.enabled(e)),r),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,n){const s=t(this.namespace+(void 0===n?":":n)+e);return s.log=this.log,s}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),i=s.length;for(n=0;n<i;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(2807),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},8423:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(3847):e.exports=n(8825)},8825:(e,t,n)=>{const s=n(6224),i=n(3837);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let s=0;s<n.length;s++)e.inspectOpts[n[s]]=t.inspectOpts[n[s]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:s,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),r=`  ${i};1m${s} [0m`;n[0]=r+n[0].split("\n").join("\n"+r),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+s+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(6795);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[n]=s,e}),{}),e.exports=n(1311)(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},6710:(e,t,n)=>{var s=n(2781).Stream,i=n(3837);function r(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}e.exports=r,i.inherits(r,s),r.create=function(e,t){var n=new this;for(var s in t=t||{})n[s]=t[s];n.source=e;var i=e.emit;return e.emit=function(){return n._handleEmit(arguments),i.apply(e,arguments)},e.on("error",(function(){})),n.pauseStream&&e.pause(),n},Object.defineProperty(r.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),r.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},r.prototype.resume=function(){this._released||this.release(),this.source.resume()},r.prototype.pause=function(){this.source.pause()},r.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},r.prototype.pipe=function(){var e=s.prototype.pipe.apply(this,arguments);return this.resume(),e},r.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},r.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}},2257:(e,t,n)=>{var s=n(6113);t.DiffieHellmanGroup=s.DiffieHellmanGroup,t.createDiffieHellmanGroup=s.createDiffieHellmanGroup,t.getDiffieHellman=s.getDiffieHellman,t.createDiffieHellman=s.createDiffieHellman,t.DiffieHellman=s.DiffieHellman},7730:(e,t,n)=>{var s;e.exports=function(){if(!s){try{s=n(8423)("follow-redirects")}catch(e){}"function"!=typeof s&&(s=function(){})}s.apply(null,arguments)}},2298:(e,t,n)=>{var s=n(7310),i=s.URL,r=n(3685),o=n(5687),a=n(2781).Writable,c=n(9491),l=n(7730),u=!1;try{c(new i)}catch(e){u="ERR_INVALID_URL"===e.code}var h=["auth","host","hostname","href","path","pathname","port","protocol","query","search"],p=["abort","aborted","connect","error","socket","timeout"],d=Object.create(null);p.forEach((function(e){d[e]=function(t,n,s){this._redirectable.emit(e,t,n,s)}}));var f=_("ERR_INVALID_URL","Invalid URL",TypeError),m=_("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),g=_("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",m),v=_("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),y=_("ERR_STREAM_WRITE_AFTER_END","write after end"),b=a.prototype.destroy||x;function w(e,t){a.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(e){try{n._processResponse(e)}catch(e){n.emit("error",e instanceof m?e:new m({cause:e}))}},this._performRequest()}function S(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach((function(s){var r=s+":",o=n[r]=e[s],a=t[s]=Object.create(o);Object.defineProperties(a,{request:{value:function(e,s,o){return i&&e instanceof i?e=T(e):k(e)?e=T(E(e)):(o=s,s=C(e),e={protocol:r}),A(s)&&(o=s,s=null),(s=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,s)).nativeProtocols=n,k(s.host)||k(s.hostname)||(s.hostname="::1"),c.equal(s.protocol,r,"protocol mismatch"),l("options",s),new w(s,o)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,n){var s=a.request(e,t,n);return s.end(),s},configurable:!0,enumerable:!0,writable:!0}})})),t}function x(){}function E(e){var t;if(u)t=new i(e);else if(!k((t=C(s.parse(e))).protocol))throw new f({input:e});return t}function C(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new f({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new f({input:e.href||e});return e}function T(e,t){var n=t||{};for(var s of h)n[s]=e[s];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),""!==n.port&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function R(e,t){var n;for(var s in t)e.test(s)&&(n=t[s],delete t[s]);return null==n?void 0:String(n).trim()}function _(e,t,n){function s(n){Error.captureStackTrace(this,this.constructor),Object.assign(this,n||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return s.prototype=new(n||Error),Object.defineProperties(s.prototype,{constructor:{value:s,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),s}function P(e,t){for(var n of p)e.removeListener(n,d[n]);e.on("error",x),e.destroy(t)}function k(e){return"string"==typeof e||e instanceof String}function A(e){return"function"==typeof e}w.prototype=Object.create(a.prototype),w.prototype.abort=function(){P(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},w.prototype.destroy=function(e){return P(this._currentRequest,e),b.call(this,e),this},w.prototype.write=function(e,t,n){if(this._ending)throw new y;if(!(k(e)||"object"==typeof(s=e)&&"length"in s))throw new TypeError("data should be a string, Buffer or Uint8Array");var s;A(t)&&(n=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new v),this.abort()):n&&n()},w.prototype.end=function(e,t,n){if(A(e)?(n=e,e=t=null):A(t)&&(n=t,t=null),e){var s=this,i=this._currentRequest;this.write(e,t,(function(){s._ended=!0,i.end(null,null,n)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,n)},w.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},w.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},w.prototype.setTimeout=function(e,t){var n=this;function s(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function i(t){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){n.emit("timeout"),r()}),e),s(t)}function r(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",r),n.removeListener("error",r),n.removeListener("response",r),n.removeListener("close",r),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",i)}return t&&this.on("timeout",t),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",s),this.on("abort",r),this.on("error",r),this.on("response",r),this.on("close",r),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){w.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(w.prototype,e,{get:function(){return this._currentRequest[e]}})})),w.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},w.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var i=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var r of(i._redirectable=this,p))i.on(r,d[r]);if(this._currentUrl=/^\//.test(this._options.path)?s.format(this._options):this._options.path,this._isRedirect){var o=0,a=this,c=this._requestBodyBuffers;!function e(t){if(i===a._currentRequest)if(t)a.emit("error",t);else if(o<c.length){var n=c[o++];i.finished||i.write(n.data,n.encoding,e)}else a._ended&&i.end()}()}},w.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n,r=e.headers.location;if(!r||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(P(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new g;var o=this._options.beforeRedirect;o&&(n=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var a=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],R(/^content-/i,this._options.headers));var h,p,d=R(/^host$/i,this._options.headers),f=E(this._currentUrl),m=d||f.host,v=/^\w+:/.test(r)?this._currentUrl:s.format(Object.assign(f,{host:m})),y=(h=r,p=v,u?new i(h,p):E(s.resolve(p,h)));if(l("redirecting to",y.href),this._isRedirect=!0,T(y,this._options),(y.protocol!==f.protocol&&"https:"!==y.protocol||y.host!==m&&!function(e,t){c(k(e)&&k(t));var n=e.length-t.length-1;return n>0&&"."===e[n]&&e.endsWith(t)}(y.host,m))&&R(/^(?:authorization|cookie)$/i,this._options.headers),A(o)){var b={headers:e.headers,statusCode:t},w={url:v,method:a,headers:n};o(this._options,b,w),this._sanitizeOptions(this._options)}this._performRequest()},e.exports=S({http:r,https:o}),e.exports.wrap=S},4102:(e,t,n)=>{var s=n(9500),i=n(3837),r=n(1017),o=n(3685),a=n(5687),c=n(7310).parse,l=n(7147),u=n(2781).Stream,h=n(8757),p=n(2216),d=n(516);function f(e){if(!(this instanceof f))return new f(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],s.call(this),e=e||{})this[t]=e[t]}e.exports=f,i.inherits(f,s),f.LINE_BREAK="\r\n",f.DEFAULT_CONTENT_TYPE="application/octet-stream",f.prototype.append=function(e,t,n){"string"==typeof(n=n||{})&&(n={filename:n});var r=s.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),i.isArray(t))this._error(new Error("Arrays are not supported."));else{var o=this._multiPartHeader(e,t,n),a=this._multiPartFooter();r(o),r(t),r(a),this._trackLength(o,t,n)}},f.prototype._trackLength=function(e,t,n){var s=0;null!=n.knownLength?s+=+n.knownLength:Buffer.isBuffer(t)?s=t.length:"string"==typeof t&&(s=Buffer.byteLength(t)),this._valueLength+=s,this._overheadLength+=Buffer.byteLength(e)+f.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion")||t instanceof u)&&(n.knownLength||this._valuesToMeasure.push(t))},f.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):l.stat(e.path,(function(n,s){var i;n?t(n):(i=s.size-(e.start?e.start:0),t(null,i))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),t(null,+n.headers["content-length"])})),e.resume()):t("Unknown stream")},f.prototype._multiPartHeader=function(e,t,n){if("string"==typeof n.header)return n.header;var s,i=this._getContentDisposition(t,n),r=this._getContentType(t,n),o="",a={"Content-Disposition":["form-data",'name="'+e+'"'].concat(i||[]),"Content-Type":[].concat(r||[])};for(var c in"object"==typeof n.header&&d(a,n.header),a)a.hasOwnProperty(c)&&null!=(s=a[c])&&(Array.isArray(s)||(s=[s]),s.length&&(o+=c+": "+s.join("; ")+f.LINE_BREAK));return"--"+this.getBoundary()+f.LINE_BREAK+o+f.LINE_BREAK},f.prototype._getContentDisposition=function(e,t){var n,s;return"string"==typeof t.filepath?n=r.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=r.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=r.basename(e.client._httpMessage.path||"")),n&&(s='filename="'+n+'"'),s},f.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=h.lookup(e.name)),!n&&e.path&&(n=h.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!t.filepath&&!t.filename||(n=h.lookup(t.filepath||t.filename)),n||"object"!=typeof e||(n=f.DEFAULT_CONTENT_TYPE),n},f.prototype._multiPartFooter=function(){return function(e){var t=f.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},f.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+f.LINE_BREAK},f.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n},f.prototype.setBoundary=function(e){this._boundary=e},f.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},f.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,s=this._streams.length;n<s;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(f.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},f.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},f.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},f.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},f.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?p.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,s){n?e(n):(s.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},f.prototype.submit=function(e,t){var n,s,i={method:"post"};return"string"==typeof e?(e=c(e),s=d({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(s=d(e,i)).port||(s.port="https:"==s.protocol?443:80),s.headers=this.getHeaders(e.headers),n="https:"==s.protocol?a.request(s):o.request(s),this.getLength(function(e,s){if(e&&"Unknown stream"!==e)this._error(e);else if(s&&n.setHeader("Content-Length",s),this.pipe(n),t){var i,r=function(e,s){return n.removeListener("error",r),n.removeListener("response",i),t.call(this,e,s)};i=r.bind(this,null),n.on("error",r),n.on("response",i)}}.bind(this)),n},f.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},f.prototype.toString=function(){return"[object FormData]"}},516:e=>{e.exports=function(e,t){return Object.keys(t).forEach((function(n){e[n]=e[n]||t[n]})),e}},9002:e=>{"use strict";e.exports=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(n+e),i=t.indexOf("--");return-1!==s&&(-1===i||s<i)}},7211:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{c(s.next(e))}catch(e){r(e)}}function a(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(1808)),o=i(n(4404)),a=i(n(7310)),c=i(n(9491)),l=i(n(8423)),u=n(2761),h=i(n(807)),p=l.default("https-proxy-agent:agent");class d extends u.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");p("creating new HttpsProxyAgent instance: %o",t),super(t);const n=Object.assign({},t);var s;this.secureProxy=t.secureProxy||"string"==typeof(s=n.protocol)&&/^https:?$/i.test(s),n.host=n.hostname||n.host,"string"==typeof n.port&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return s(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:s}=this;let i;s?(p("Creating `tls.Socket`: %o",n),i=o.default.connect(n)):(p("Creating `net.Socket`: %o",n),i=r.default.connect(n));const a=Object.assign({},n.headers);let l=`CONNECT ${t.host}:${t.port} HTTP/1.1\r\n`;n.auth&&(a["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:u,port:d,secureEndpoint:m}=t;(function(e,t){return Boolean(!t&&80===e||t&&443===e)})(d,m)||(u+=`:${d}`),a.Host=u,a.Connection="close";for(const e of Object.keys(a))l+=`${e}: ${a[e]}\r\n`;const g=h.default(i);i.write(`${l}\r\n`);const{statusCode:v,buffered:y}=yield g;if(200===v){if(e.once("socket",f),t.secureEndpoint){p("Upgrading socket connection to TLS");const e=t.servername||t.host;return o.default.connect(Object.assign(Object.assign({},function(e,...t){const n={};let s;for(s in e)t.includes(s)||(n[s]=e[s]);return n}(t,"host","hostname","path","port")),{socket:i,servername:e}))}return i}i.destroy();const b=new r.default.Socket({writable:!1});return b.readable=!0,e.once("socket",(e=>{p("replaying proxy buffer for failed request"),c.default(e.listenerCount("data")>0),e.push(y),e.push(null)})),b}))}}function f(e){e.resume()}t.default=d},3795:function(e,t,n){"use strict";const s=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(7211));function i(e){return new s.default(e)}!function(e){e.HttpsProxyAgent=s.default,e.prototype=s.default.prototype}(i||(i={})),e.exports=i},807:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(8423)).default("https-proxy-agent:parse-proxy-response");t.default=function(e){return new Promise(((t,n)=>{let s=0;const r=[];function o(){const n=e.read();n?function(e){r.push(e),s+=e.length;const n=Buffer.concat(r,s);if(-1===n.indexOf("\r\n\r\n"))return i("have not received end of HTTP headers yet..."),void o();const a=n.toString("ascii",0,n.indexOf("\r\n")),c=+a.split(" ")[1];i("got proxy server response: %o",a),t({statusCode:c,buffered:n})}(n):e.once("readable",o)}function a(e){i("onclose had error %o",e)}function c(){i("onend")}e.on("error",(function t(s){e.removeListener("end",c),e.removeListener("error",t),e.removeListener("close",a),e.removeListener("readable",o),i("onerror %o",s),n(s)})),e.on("close",a),e.on("end",c),o()}))}},4957:e=>{e.exports=s,s.strict=i,s.loose=r;var t=Object.prototype.toString,n={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function s(e){return i(e)||r(e)}function i(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function r(e){return n[t.call(e)]}},1748:(e,t,n)=>{e.exports=n(7392)},8757:(e,t,n)=>{"use strict";var s,i,r,o=n(1748),a=n(1017).extname,c=/^\s*([^;\s]*)(?:;|\s|$)/,l=/^text\//i;function u(e){if(!e||"string"!=typeof e)return!1;var t=c.exec(e),n=t&&o[t[1].toLowerCase()];return n&&n.charset?n.charset:!(!t||!l.test(t[1]))&&"UTF-8"}t.charset=u,t.charsets={lookup:u},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var n=-1===e.indexOf("/")?t.lookup(e):e;if(!n)return!1;if(-1===n.indexOf("charset")){var s=t.charset(n);s&&(n+="; charset="+s.toLowerCase())}return n},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var n=c.exec(e),s=n&&t.extensions[n[1].toLowerCase()];return!(!s||!s.length)&&s[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var n=a("x."+e).toLowerCase().substr(1);return n&&t.types[n]||!1},t.types=Object.create(null),s=t.extensions,i=t.types,r=["nginx","apache",void 0,"iana"],Object.keys(o).forEach((function(e){var t=o[e],n=t.extensions;if(n&&n.length){s[e]=n;for(var a=0;a<n.length;a++){var c=n[a];if(i[c]){var l=r.indexOf(o[i[c]].source),u=r.indexOf(t.source);if("application/octet-stream"!==i[c]&&(l>u||l===u&&"application/"===i[c].substr(0,12)))continue}i[c]=e}}}))},2807:e=>{var t=1e3,n=60*t,s=60*n,i=24*s;function r(e,t,n,s){var i=t>=1.5*n;return Math.round(e/n)+" "+s+(i?"s":"")}e.exports=function(e,o){o=o||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var o=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===l&&isFinite(e))return o.long?(a=e,(c=Math.abs(a))>=i?r(a,c,i,"day"):c>=s?r(a,c,s,"hour"):c>=n?r(a,c,n,"minute"):c>=t?r(a,c,t,"second"):a+" ms"):function(e){var r=Math.abs(e);return r>=i?Math.round(e/i)+"d":r>=s?Math.round(e/s)+"h":r>=n?Math.round(e/n)+"m":r>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},4841:(e,t,n)=>{if(!globalThis.DOMException)try{const{MessageChannel:e}=n(1267),t=(new e).port1,s=new ArrayBuffer;t.postMessage(s,[s,s])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}e.exports=globalThis.DOMException},816:(e,t,n)=>{var s=n(7147),i=n(1017),r=n(2037),o=require,a=process.config&&process.config.variables||{},c=!!process.env.PREBUILDS_ONLY,l=process.versions.modules,u=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",h=r.arch(),p=r.platform(),d=process.env.LIBC||(function(e){return"linux"===e&&s.existsSync("/etc/alpine-release")}(p)?"musl":"glibc"),f=process.env.ARM_VERSION||("arm64"===h?"8":a.arm_version)||"",m=(process.versions.uv||"").split(".")[0];function g(e){return o(g.path(e))}function v(e){try{return s.readdirSync(e)}catch(e){return[]}}function y(e,t){var n=v(e).filter(t);return n[0]&&i.join(e,n[0])}function b(e){return/\.node$/.test(e)}function w(e){var t=e.split("-");if(2===t.length){var n=t[0],s=t[1].split("+");if(n&&s.length&&s.every(Boolean))return{name:e,platform:n,architectures:s}}}function S(e,t){return function(n){return null!=n&&n.platform===e&&n.architectures.includes(t)}}function x(e,t){return e.architectures.length-t.architectures.length}function E(e){var t=e.split("."),n={file:e,specificity:0};if("node"===t.pop()){for(var s=0;s<t.length;s++){var i=t[s];if("node"===i||"electron"===i||"node-webkit"===i)n.runtime=i;else if("napi"===i)n.napi=!0;else if("abi"===i.slice(0,3))n.abi=i.slice(3);else if("uv"===i.slice(0,2))n.uv=i.slice(2);else if("armv"===i.slice(0,4))n.armv=i.slice(4);else{if("glibc"!==i&&"musl"!==i)continue;n.libc=i}n.specificity++}return n}}function C(e,t){return function(n){return!(null==n||n.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(n)||n.abi!==t&&!n.napi||n.uv&&n.uv!==m||n.armv&&n.armv!==f||n.libc&&n.libc!==d)}}function T(e){return function(t,n){return t.runtime!==n.runtime?t.runtime===e?-1:1:t.abi!==n.abi?t.abi?-1:1:t.specificity!==n.specificity?t.specificity>n.specificity?-1:1:0}}e.exports=g,g.path=function(e){e=i.resolve(e||".");try{var t=o(i.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!c){var n=y(i.join(e,"build/Release"),b);if(n)return n;var s=y(i.join(e,"build/Debug"),b);if(s)return s}var r=R(e);if(r)return r;var a=R(i.dirname(process.execPath));if(a)return a;var g=["platform="+p,"arch="+h,"runtime="+u,"abi="+l,"uv="+m,f?"armv="+f:"","libc="+d,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+g+"\n    loaded from: "+e+"\n");function R(e){var t=v(i.join(e,"prebuilds")).map(w).filter(S(p,h)).sort(x)[0];if(t){var n=i.join(e,"prebuilds",t.name),s=v(n).map(E).filter(C(u,l)).sort(T(u))[0];return s?i.join(n,s.file):void 0}}},g.parseTags=E,g.matchTags=C,g.compareTags=T,g.parseTuple=w,g.matchTuple=S,g.compareTuples=x},4024:(e,t,n)=>{var s=n(2057),i=n(450),r=(n(6113),n(2701).Ber,n(3016)._),o=n(3016),a=n(5954),c=n(4969);void 0===s.RSA_NO_PADDING&&(s.RSA_NO_PADDING=3),e.exports=function(){var e={node10:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],node:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],iojs:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],browser:["md5","ripemd160","sha1","sha256","sha512"]},t="pkcs1_oaep",n="pkcs1",s={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function l(e,s,a){if(!(this instanceof l))return new l(e,s,a);r.isObject(s)&&(a=s,s=void 0),this.$options={signingScheme:n,signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:t,encryptionSchemeOptions:{hash:"sha1",label:null},environment:o.detectEnvironment(),rsaUtils:this},this.keyPair=new i.Key,this.$cache={},Buffer.isBuffer(e)||r.isString(e)?this.importKey(e,s):r.isObject(e)&&this.generateKeyPair(e.b,e.e),this.setOptions(a)}return l.prototype.setOptions=function(s){if((s=s||{}).environment&&(this.$options.environment=s.environment),s.signingScheme){if(r.isString(s.signingScheme)){var i=s.signingScheme.toLowerCase().split("-");1==i.length?e.node.indexOf(i[0])>-1?(this.$options.signingSchemeOptions={hash:i[0]},this.$options.signingScheme=n):(this.$options.signingScheme=i[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:i[1]},this.$options.signingScheme=i[0])}else r.isObject(s.signingScheme)&&(this.$options.signingScheme=s.signingScheme.scheme||n,this.$options.signingSchemeOptions=r.omit(s.signingScheme,"scheme"));if(!a.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(s.encryptionScheme){if(r.isString(s.encryptionScheme)?(this.$options.encryptionScheme=s.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):r.isObject(s.encryptionScheme)&&(this.$options.encryptionScheme=s.encryptionScheme.scheme||t,this.$options.encryptionSchemeOptions=r.omit(s.encryptionScheme,"scheme")),!a.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},l.prototype.generateKeyPair=function(e,t){if(t=t||65537,(e=e||2048)%8!=0)throw Error("Key size must be a multiple of 8.");return this.keyPair.generate(e,t.toString(16)),this.$cache={},this},l.prototype.importKey=function(e,t){if(!e)throw Error("Empty key given");if(t&&(t=s[t]||t),!c.detectAndImport(this.keyPair,e,t)&&void 0===t)throw Error("Key format must be specified");return this.$cache={},this},l.prototype.exportKey=function(e){return e=s[e=e||"private"]||e,this.$cache[e]||(this.$cache[e]=c.detectAndExport(this.keyPair,e)),this.$cache[e]},l.prototype.isPrivate=function(){return this.keyPair.isPrivate()},l.prototype.isPublic=function(e){return this.keyPair.isPublic(e)},l.prototype.isEmpty=function(e){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},l.prototype.encrypt=function(e,t,n){return this.$$encryptKey(!1,e,t,n)},l.prototype.decrypt=function(e,t){return this.$$decryptKey(!1,e,t)},l.prototype.encryptPrivate=function(e,t,n){return this.$$encryptKey(!0,e,t,n)},l.prototype.decryptPublic=function(e,t){return this.$$decryptKey(!0,e,t)},l.prototype.$$encryptKey=function(e,t,n,s){try{var i=this.keyPair.encrypt(this.$getDataForEncrypt(t,s),e);return"buffer"!=n&&n?i.toString(n):i}catch(e){throw Error("Error during encryption. Original error: "+e)}},l.prototype.$$decryptKey=function(e,t,n){try{t=r.isString(t)?Buffer.from(t,"base64"):t;var s=this.keyPair.decrypt(t,e);if(null===s)throw Error("Key decrypt method returns null.");return this.$getDecryptedData(s,n)}catch(e){throw Error("Error during decryption (probably incorrect key). Original error: "+e)}},l.prototype.sign=function(e,t,n){if(!this.isPrivate())throw Error("This is not private key");var s=this.keyPair.sign(this.$getDataForEncrypt(e,n));return t&&"buffer"!=t&&(s=s.toString(t)),s},l.prototype.verify=function(e,t,n,s){if(!this.isPublic())throw Error("This is not public key");return s=s&&"buffer"!=s?s:null,this.keyPair.verify(this.$getDataForEncrypt(e,n),t,s)},l.prototype.getKeySize=function(){return this.keyPair.keySize},l.prototype.getMaxMessageSize=function(){return this.keyPair.maxMessageLength},l.prototype.$getDataForEncrypt=function(e,t){if(r.isString(e)||r.isNumber(e))return Buffer.from(""+e,t||"utf8");if(Buffer.isBuffer(e))return e;if(r.isObject(e))return Buffer.from(JSON.stringify(e));throw Error("Unexpected data type")},l.prototype.$getDecryptedData=function(e,t){return"buffer"==(t=t||"buffer")?e:"json"==t?JSON.parse(e.toString()):e.toString(t)},l}()},6591:(e,t,n)=>{var s=n(6113);e.exports={getEngine:function(e,t){var i=n(4689);return"node"===t.environment&&"function"==typeof s.publicEncrypt&&"function"==typeof s.privateDecrypt&&(i="function"==typeof s.privateEncrypt&&"function"==typeof s.publicDecrypt?n(5536):n(8170)),i(e,t)}}},5536:(e,t,n)=>{var s=n(6113),i=n(2057),r=n(5954);e.exports=function(e,t){var n=r.pkcs1.makeScheme(e,t);return{encrypt:function(e,r){var o;if(r)return o=i.RSA_PKCS1_PADDING,t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(o=t.encryptionSchemeOptions.padding),s.privateEncrypt({key:t.rsaUtils.exportKey("private"),padding:o},e);o=i.RSA_PKCS1_OAEP_PADDING,"pkcs1"===t.encryptionScheme&&(o=i.RSA_PKCS1_PADDING),t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(o=t.encryptionSchemeOptions.padding);var a=e;return o===i.RSA_NO_PADDING&&(a=n.pkcs0pad(e)),s.publicEncrypt({key:t.rsaUtils.exportKey("public"),padding:o},a)},decrypt:function(e,r){var o;if(r)return o=i.RSA_PKCS1_PADDING,t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(o=t.encryptionSchemeOptions.padding),s.publicDecrypt({key:t.rsaUtils.exportKey("public"),padding:o},e);o=i.RSA_PKCS1_OAEP_PADDING,"pkcs1"===t.encryptionScheme&&(o=i.RSA_PKCS1_PADDING),t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(o=t.encryptionSchemeOptions.padding);var a=s.privateDecrypt({key:t.rsaUtils.exportKey("private"),padding:o},e);return o===i.RSA_NO_PADDING?n.pkcs0unpad(a):a}}}},4689:(e,t,n)=>{var s=n(6200),i=n(5954);e.exports=function(e,t){var n=i.pkcs1.makeScheme(e,t);return{encrypt:function(t,i){var r,o;return i?(r=new s(n.encPad(t,{type:1})),o=e.$doPrivate(r)):(r=new s(e.encryptionScheme.encPad(t)),o=e.$doPublic(r)),o.toBuffer(e.encryptedDataLength)},decrypt:function(t,i){var r,o=new s(t);return i?(r=e.$doPublic(o),n.encUnPad(r.toBuffer(e.encryptedDataLength),{type:1})):(r=e.$doPrivate(o),e.encryptionScheme.encUnPad(r.toBuffer(e.encryptedDataLength)))}}}},8170:(e,t,n)=>{var s=n(6113),i=n(2057),r=n(5954);e.exports=function(e,t){var o=n(4689)(e,t),a=r.pkcs1.makeScheme(e,t);return{encrypt:function(e,n){if(n)return o.encrypt(e,n);var r=i.RSA_PKCS1_OAEP_PADDING;"pkcs1"===t.encryptionScheme&&(r=i.RSA_PKCS1_PADDING),t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(r=t.encryptionSchemeOptions.padding);var c=e;return r===i.RSA_NO_PADDING&&(c=a.pkcs0pad(e)),s.publicEncrypt({key:t.rsaUtils.exportKey("public"),padding:r},c)},decrypt:function(e,n){if(n)return o.decrypt(e,n);var r=i.RSA_PKCS1_OAEP_PADDING;"pkcs1"===t.encryptionScheme&&(r=i.RSA_PKCS1_PADDING),t.encryptionSchemeOptions&&t.encryptionSchemeOptions.padding&&(r=t.encryptionSchemeOptions.padding);var c=s.privateDecrypt({key:t.rsaUtils.exportKey("private"),padding:r},e);return r===i.RSA_NO_PADDING?a.pkcs0unpad(c):c}}}},5624:(e,t,n)=>{n(3016)._,n(3016),e.exports={privateExport:function(e,t){return{n:e.n.toBuffer(),e:e.e,d:e.d.toBuffer(),p:e.p.toBuffer(),q:e.q.toBuffer(),dmp1:e.dmp1.toBuffer(),dmq1:e.dmq1.toBuffer(),coeff:e.coeff.toBuffer()}},privateImport:function(e,t,n){if(!(t.n&&t.e&&t.d&&t.p&&t.q&&t.dmp1&&t.dmq1&&t.coeff))throw Error("Invalid key data");e.setPrivate(t.n,t.e,t.d,t.p,t.q,t.dmp1,t.dmq1,t.coeff)},publicExport:function(e,t){return{n:e.n.toBuffer(),e:e.e}},publicImport:function(e,t,n){if(!t.n||!t.e)throw Error("Invalid key data");e.setPublic(t.n,t.e)},autoImport:function(t,n){return!(!n.n||!n.e||(n.d&&n.p&&n.q&&n.dmp1&&n.dmq1&&n.coeff?(e.exports.privateImport(t,n),0):(e.exports.publicImport(t,n),0)))}}},4969:(e,t,n)=>{function s(e){e=e.split("-");for(var t="private",n={type:"default"},s=1;s<e.length;s++)if(e[s])switch(e[s]){case"public":case"private":t=e[s];break;case"pem":case"der":n.type=e[s]}return{scheme:e[0],keyType:t,keyOpt:n}}n(3016)._,e.exports={pkcs1:n(2768),pkcs8:n(6769),components:n(5624),openssh:n(7789),isPrivateExport:function(t){return e.exports[t]&&"function"==typeof e.exports[t].privateExport},isPrivateImport:function(t){return e.exports[t]&&"function"==typeof e.exports[t].privateImport},isPublicExport:function(t){return e.exports[t]&&"function"==typeof e.exports[t].publicExport},isPublicImport:function(t){return e.exports[t]&&"function"==typeof e.exports[t].publicImport},detectAndImport:function(t,n,i){if(void 0===i){for(var r in e.exports)if("function"==typeof e.exports[r].autoImport&&e.exports[r].autoImport(t,n))return!0}else if(i){var o=s(i);if(!e.exports[o.scheme])throw Error("Unsupported key format");"private"===o.keyType?e.exports[o.scheme].privateImport(t,n,o.keyOpt):e.exports[o.scheme].publicImport(t,n,o.keyOpt)}return!1},detectAndExport:function(t,n){if(n){var i=s(n);if(e.exports[i.scheme]){if("private"===i.keyType){if(!t.isPrivate())throw Error("This is not private key");return e.exports[i.scheme].privateExport(t,i.keyOpt)}if(!t.isPublic())throw Error("This is not public key");return e.exports[i.scheme].publicExport(t,i.keyOpt)}throw Error("Unsupported key format")}}}},7789:(e,t,n)=>{var s=n(3016)._,i=n(3016),r=n(6200);const o="-----BEGIN OPENSSH PRIVATE KEY-----",a="-----END OPENSSH PRIVATE KEY-----";function c(e){const t=e.buf.readInt32BE(e.off);e.off+=4;const n=e.buf.slice(e.off,e.off+t);return e.off+=t,n}function l(e,t){e.buf.writeInt32BE(t.byteLength,e.off),e.off+=4,e.off+=t.copy(e.buf,e.off)}e.exports={privateExport:function(e,t){const n=e.n.toBuffer();let s=Buffer.alloc(4);for(s.writeUInt32BE(e.e,0);0===s[0];)s=s.slice(1);const r=e.d.toBuffer(),c=e.coeff.toBuffer(),u=e.p.toBuffer(),h=e.q.toBuffer();let p;p=void 0!==e.sshcomment?Buffer.from(e.sshcomment):Buffer.from([]);const d=15+s.byteLength+4+n.byteLength,f=23+n.byteLength+4+s.byteLength+4+r.byteLength+4+c.byteLength+4+u.byteLength+4+h.byteLength+4+p.byteLength;let m=43+d+4+f;m+=8*Math.ceil(f/8)-f;const g=Buffer.alloc(m),v={buf:g,off:0};g.write("openssh-key-v1","utf8"),g.writeUInt8(0,14),v.off+=15,l(v,Buffer.from("none")),l(v,Buffer.from("none")),l(v,Buffer.from("")),v.off=v.buf.writeUInt32BE(1,v.off),v.off=v.buf.writeUInt32BE(d,v.off),l(v,Buffer.from("ssh-rsa")),l(v,s),l(v,n),v.off=v.buf.writeUInt32BE(m-47-d,v.off),v.off+=8,l(v,Buffer.from("ssh-rsa")),l(v,n),l(v,s),l(v,r),l(v,c),l(v,u),l(v,h),l(v,p);let y=1;for(;v.off<m;)v.off=v.buf.writeUInt8(y++,v.off);return"der"===t.type?v.buf:o+"\n"+i.linebrk(g.toString("base64"),70)+"\n"+a+"\n"},privateImport:function(e,t,n){var l;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),!s.isString(t))throw Error("Unsupported key format");var u=i.trimSurroundingText(t,o,a).replace(/\s+|\n\r|\n|\r$/gm,"");l=Buffer.from(u,"base64")}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");l=t}const h={buf:l,off:0};if("openssh-key-v1"!==l.slice(0,14).toString("ascii"))throw"Invalid file format.";if(h.off+=15,"none"!==c(h).toString("ascii"))throw Error("Unsupported key type");if("none"!==c(h).toString("ascii"))throw Error("Unsupported key type");if(""!==c(h).toString("ascii"))throw Error("Unsupported key type");if(h.off+=4,h.off+=4,"ssh-rsa"!==c(h).toString("ascii"))throw Error("Unsupported key type");if(c(h),c(h),h.off+=12,"ssh-rsa"!==c(h).toString("ascii"))throw Error("Unsupported key type");const p=c(h),d=c(h),f=c(h),m=c(h),g=c(h),v=c(h),y=new r(f),b=new r(v),w=new r(g),S=y.mod(w.subtract(r.ONE)),x=y.mod(b.subtract(r.ONE));e.setPrivate(p,d,f,g,v,S.toBuffer(),x.toBuffer(),m),e.sshcomment=c(h).toString("ascii")},publicExport:function(e,t){let n=Buffer.alloc(4);for(n.writeUInt32BE(e.e,0);0===n[0];)n=n.slice(1);const s=e.n.toBuffer(),i=Buffer.alloc(n.byteLength+4+s.byteLength+4+"ssh-rsa".length+4),r={buf:i,off:0};l(r,Buffer.from("ssh-rsa")),l(r,n),l(r,s);let o=e.sshcomment||"";return"der"===t.type?r.buf:"ssh-rsa "+i.toString("base64")+" "+o+"\n"},publicImport:function(e,t,n){var i;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),!s.isString(t))throw Error("Unsupported key format");{if("ssh-rsa "!==t.substring(0,8))throw Error("Unsupported key format");let n=t.indexOf(" ",8);-1===n?n=t.length:e.sshcomment=t.substring(n+1).replace(/\s+|\n\r|\n|\r$/gm,"");const s=t.substring(8,n).replace(/\s+|\n\r|\n|\r$/gm,"");i=Buffer.from(s,"base64")}}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");i=t}const r={buf:i,off:0},o=c(r).toString("ascii");if("ssh-rsa"!==o)throw Error("Invalid key type: "+o);const a=c(r),l=c(r);e.setPublic(l,a)},autoImport:function(t,n){return/^[\S\s]*-----BEGIN OPENSSH PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END OPENSSH PRIVATE KEY-----[\S\s]*$/g.test(n)?(e.exports.privateImport(t,n),!0):!!/^[\S\s]*ssh-rsa \s*(?=(([A-Za-z0-9+/=]+\s*)+))\1[\S\s]*$/g.test(n)&&(e.exports.publicImport(t,n),!0)}}},2768:(e,t,n)=>{var s=n(2701).Ber,i=n(3016)._,r=n(3016);const o="-----BEGIN RSA PRIVATE KEY-----",a="-----END RSA PRIVATE KEY-----",c="-----BEGIN RSA PUBLIC KEY-----",l="-----END RSA PUBLIC KEY-----";e.exports={privateExport:function(e,t){t=t||{};var n=e.n.toBuffer(),i=e.d.toBuffer(),c=e.p.toBuffer(),l=e.q.toBuffer(),u=e.dmp1.toBuffer(),h=e.dmq1.toBuffer(),p=e.coeff.toBuffer(),d=n.length+i.length+c.length+l.length+u.length+h.length+p.length+512,f=new s.Writer({size:d});return f.startSequence(),f.writeInt(0),f.writeBuffer(n,2),f.writeInt(e.e),f.writeBuffer(i,2),f.writeBuffer(c,2),f.writeBuffer(l,2),f.writeBuffer(u,2),f.writeBuffer(h,2),f.writeBuffer(p,2),f.endSequence(),"der"===t.type?f.buffer:o+"\n"+r.linebrk(f.buffer.toString("base64"),64)+"\n"+a},privateImport:function(e,t,n){var c;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),!i.isString(t))throw Error("Unsupported key format");var l=r.trimSurroundingText(t,o,a).replace(/\s+|\n\r|\n|\r$/gm,"");c=Buffer.from(l,"base64")}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");c=t}var u=new s.Reader(c);u.readSequence(),u.readString(2,!0),e.setPrivate(u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0))},publicExport:function(e,t){t=t||{};var n=e.n.toBuffer(),i=n.length+512,o=new s.Writer({size:i});return o.startSequence(),o.writeBuffer(n,2),o.writeInt(e.e),o.endSequence(),"der"===t.type?o.buffer:c+"\n"+r.linebrk(o.buffer.toString("base64"),64)+"\n"+l},publicImport:function(e,t,n){var o;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),i.isString(t)){var a=r.trimSurroundingText(t,c,l).replace(/\s+|\n\r|\n|\r$/gm,"");o=Buffer.from(a,"base64")}}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");o=t}var u=new s.Reader(o);u.readSequence(),e.setPublic(u.readString(2,!0),u.readString(2,!0))},autoImport:function(t,n){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(n)?(e.exports.privateImport(t,n),!0):!!/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(n)&&(e.exports.publicImport(t,n),!0)}}},6769:(e,t,n)=>{var s=n(2701).Ber,i=n(3016)._,r="1.2.840.113549.1.1.1",o=n(3016);const a="-----BEGIN PRIVATE KEY-----",c="-----END PRIVATE KEY-----",l="-----BEGIN PUBLIC KEY-----",u="-----END PUBLIC KEY-----";e.exports={privateExport:function(e,t){t=t||{};var n=e.n.toBuffer(),i=e.d.toBuffer(),l=e.p.toBuffer(),u=e.q.toBuffer(),h=e.dmp1.toBuffer(),p=e.dmq1.toBuffer(),d=e.coeff.toBuffer(),f=n.length+i.length+l.length+u.length+h.length+p.length+d.length+512,m=new s.Writer({size:f});m.startSequence(),m.writeInt(0),m.writeBuffer(n,2),m.writeInt(e.e),m.writeBuffer(i,2),m.writeBuffer(l,2),m.writeBuffer(u,2),m.writeBuffer(h,2),m.writeBuffer(p,2),m.writeBuffer(d,2),m.endSequence();var g=new s.Writer({size:f});return g.startSequence(),g.writeInt(0),g.startSequence(),g.writeOID(r),g.writeNull(),g.endSequence(),g.writeBuffer(m.buffer,4),g.endSequence(),"der"===t.type?g.buffer:a+"\n"+o.linebrk(g.buffer.toString("base64"),64)+"\n"+c},privateImport:function(e,t,n){var l;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),!i.isString(t))throw Error("Unsupported key format");var u=o.trimSurroundingText(t,a,c).replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");l=Buffer.from(u,"base64")}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");l=t}var h=new s.Reader(l);if(h.readSequence(),h.readInt(0),new s.Reader(h.readString(48,!0)).readOID(6,!0)!==r)throw Error("Invalid Public key format");var p=new s.Reader(h.readString(4,!0));p.readSequence(),p.readString(2,!0),e.setPrivate(p.readString(2,!0),p.readString(2,!0),p.readString(2,!0),p.readString(2,!0),p.readString(2,!0),p.readString(2,!0),p.readString(2,!0),p.readString(2,!0))},publicExport:function(e,t){t=t||{};var n=e.n.toBuffer(),i=n.length+512,a=new s.Writer({size:i});a.writeByte(0),a.startSequence(),a.writeBuffer(n,2),a.writeInt(e.e),a.endSequence();var c=new s.Writer({size:i});return c.startSequence(),c.startSequence(),c.writeOID(r),c.writeNull(),c.endSequence(),c.writeBuffer(a.buffer,3),c.endSequence(),"der"===t.type?c.buffer:l+"\n"+o.linebrk(c.buffer.toString("base64"),64)+"\n"+u},publicImport:function(e,t,n){var a;if("der"!==(n=n||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),i.isString(t)){var c=o.trimSurroundingText(t,l,u).replace(/\s+|\n\r|\n|\r$/gm,"");a=Buffer.from(c,"base64")}}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");a=t}var h=new s.Reader(a);if(h.readSequence(),new s.Reader(h.readString(48,!0)).readOID(6,!0)!==r)throw Error("Invalid Public key format");var p=new s.Reader(h.readString(3,!0));p.readByte(),p.readSequence(),e.setPublic(p.readString(2,!0),p.readString(2,!0))},autoImport:function(t,n){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(n)?(e.exports.privateImport(t,n),!0):!!/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(n)&&(e.exports.publicImport(t,n),!0)}}},6200:(e,t,n)=>{var s=n(6113),i=n(3016)._;function r(e,t){null!=e&&("number"==typeof e?this.fromNumber(e,t):Buffer.isBuffer(e)?this.fromBuffer(e):null==t&&"string"!=typeof e?this.fromByteArray(e):this.fromString(e,t))}function o(){return new r(null)}r.prototype.am=function(e,t,n,s,i,r){for(var o=16383&t,a=t>>14;--r>=0;){var c=16383&this[e],l=this[e++]>>14,u=a*c+l*o;i=((c=o*c+((16383&u)<<14)+n[s]+i)>>28)+(u>>14)+a*l,n[s++]=268435455&c}return i},r.prototype.DB=28,r.prototype.DM=268435455,r.prototype.DV=1<<28,r.prototype.FV=Math.pow(2,52),r.prototype.F1=24,r.prototype.F2=4;var a,c,l=new Array;for(a="0".charCodeAt(0),c=0;c<=9;++c)l[a++]=c;for(a="a".charCodeAt(0),c=10;c<36;++c)l[a++]=c;for(a="A".charCodeAt(0),c=10;c<36;++c)l[a++]=c;function u(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function h(e,t){var n=l[e.charCodeAt(t)];return null==n?-1:n}function p(e){var t=o();return t.fromInt(e),t}function d(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function f(e){this.m=e}function m(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function g(e,t){return e&t}function v(e,t){return e|t}function y(e,t){return e^t}function b(e,t){return e&~t}function w(e){if(0===e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function S(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function x(){}function E(e){return e}function C(e){this.r2=o(),this.q3=o(),r.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}f.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},f.prototype.revert=function(e){return e},f.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},f.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},f.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},m.prototype.convert=function(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t},m.prototype.revert=function(e){var t=o();return e.copyTo(t),this.reduce(t),t},m.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],s=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,s,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},m.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},x.prototype.convert=E,x.prototype.revert=E,x.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},x.prototype.sqrTo=function(e,t){e.squareTo(t)},C.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=o();return e.copyTo(t),this.reduce(t),t},C.prototype.revert=function(e){return e},C.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},C.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},C.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var T=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R=(1<<26)/T[T.length-1];r.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},r.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},r.prototype.fromString=function(e,t,n){var s;switch(t){case 2:s=1;break;case 4:s=2;break;case 8:s=3;break;case 16:s=4;break;case 32:s=5;break;case 256:s=8;break;default:return void this.fromRadix(e,t)}this.t=0,this.s=0;for(var i=e.length,o=!1,a=0;--i>=0;){var c=8==s?255&e[i]:h(e,i);c<0?"-"==e.charAt(i)&&(o=!0):(o=!1,0===a?this[this.t++]=c:a+s>this.DB?(this[this.t-1]|=(c&(1<<this.DB-a)-1)<<a,this[this.t++]=c>>this.DB-a):this[this.t-1]|=c<<a,(a+=s)>=this.DB&&(a-=this.DB))}n||8!=s||0==(128&e[0])||(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&r.ZERO.subTo(this,this)},r.prototype.fromByteArray=function(e,t){this.fromString(e,256,t)},r.prototype.fromBuffer=function(e){this.fromString(e,256,!0)},r.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},r.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},r.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},r.prototype.lShiftTo=function(e,t){var n,s=e%this.DB,i=this.DB-s,r=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<s&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>i|a,a=(this[n]&r)<<s;for(n=o-1;n>=0;--n)t[n]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},r.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var s=e%this.DB,i=this.DB-s,r=(1<<s)-1;t[0]=this[n]>>s;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&r)<<i,t[o-n]=this[o]>>s;s>0&&(t[this.t-n-1]|=(this.s&r)<<i),t.t=this.t-n,t.clamp()}},r.prototype.subTo=function(e,t){for(var n=0,s=0,i=Math.min(e.t,this.t);n<i;)s+=this[n]-e[n],t[n++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s-=e.s;n<this.t;)s+=this[n],t[n++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;n<e.t;)s-=e[n],t[n++]=s&this.DM,s>>=this.DB;s-=e.s}t.s=s<0?-1:0,s<-1?t[n++]=this.DV+s:s>0&&(t[n++]=s),t.t=n,t.clamp()},r.prototype.multiplyTo=function(e,t){var n=this.abs(),s=e.abs(),i=n.t;for(t.t=i+s.t;--i>=0;)t[i]=0;for(i=0;i<s.t;++i)t[i+n.t]=n.am(0,s[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&r.ZERO.subTo(t,t)},r.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var s=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,s,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},r.prototype.divRemTo=function(e,t,n){var s=e.abs();if(!(s.t<=0)){var i=this.abs();if(i.t<s.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=o());var a=o(),c=this.s,l=e.s,u=this.DB-d(s[s.t-1]);u>0?(s.lShiftTo(u,a),i.lShiftTo(u,n)):(s.copyTo(a),i.copyTo(n));var h=a.t,p=a[h-1];if(0!==p){var f=p*(1<<this.F1)+(h>1?a[h-2]>>this.F2:0),m=this.FV/f,g=(1<<this.F1)/f,v=1<<this.F2,y=n.t,b=y-h,w=null==t?o():t;for(a.dlShiftTo(b,w),n.compareTo(w)>=0&&(n[n.t++]=1,n.subTo(w,n)),r.ONE.dlShiftTo(h,w),w.subTo(a,a);a.t<h;)a[a.t++]=0;for(;--b>=0;){var S=n[--y]==p?this.DM:Math.floor(n[y]*m+(n[y-1]+v)*g);if((n[y]+=a.am(0,S,n,b,0,h))<S)for(a.dlShiftTo(b,w),n.subTo(w,n);n[y]<--S;)n.subTo(w,n)}null!=t&&(n.drShiftTo(h,t),c!=l&&r.ZERO.subTo(t,t)),n.t=h,n.clamp(),u>0&&n.rShiftTo(u,n),c<0&&r.ZERO.subTo(n,n)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},r.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},r.prototype.exp=function(e,t){if(e>4294967295||e<1)return r.ONE;var n=o(),s=o(),i=t.convert(this),a=d(e)-1;for(i.copyTo(n);--a>=0;)if(t.sqrTo(n,s),(e&1<<a)>0)t.mulTo(s,i,n);else{var c=n;n=s,s=c}return t.revert(n)},r.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},r.prototype.toRadix=function(e){if(null==e&&(e=10),0===this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),s=p(n),i=o(),r=o(),a="";for(this.divRemTo(s,i,r);i.signum()>0;)a=(n+r.intValue()).toString(e).substr(1)+a,i.divRemTo(s,i,r);return r.intValue().toString(e)+a},r.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),s=Math.pow(t,n),i=!1,o=0,a=0,c=0;c<e.length;++c){var l=h(e,c);l<0?"-"==e.charAt(c)&&0===this.signum()&&(i=!0):(a=t*a+l,++o>=n&&(this.dMultiply(s),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(a,0)),i&&r.ZERO.subTo(this,this)},r.prototype.fromNumber=function(e,t){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e),this.testBit(e-1)||this.bitwiseTo(r.ONE.shiftLeft(e-1),v,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(r.ONE.shiftLeft(e-1),this);else{var n=s.randomBytes(1+(e>>3)),i=7&e;i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromByteArray(n)}},r.prototype.bitwiseTo=function(e,t,n){var s,i,r=Math.min(e.t,this.t);for(s=0;s<r;++s)n[s]=t(this[s],e[s]);if(e.t<this.t){for(i=e.s&this.DM,s=r;s<this.t;++s)n[s]=t(this[s],i);n.t=this.t}else{for(i=this.s&this.DM,s=r;s<e.t;++s)n[s]=t(i,e[s]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},r.prototype.changeBit=function(e,t){var n=r.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},r.prototype.addTo=function(e,t){for(var n=0,s=0,i=Math.min(e.t,this.t);n<i;)s+=this[n]+e[n],t[n++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s+=e.s;n<this.t;)s+=this[n],t[n++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;n<e.t;)s+=e[n],t[n++]=s&this.DM,s>>=this.DB;s+=e.s}t.s=s<0?-1:0,s>0?t[n++]=s:s<-1&&(t[n++]=this.DV+s),t.t=n,t.clamp()},r.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},r.prototype.dAddOffset=function(e,t){if(0!==e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},r.prototype.multiplyLowerTo=function(e,t,n){var s,i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(s=n.t-this.t;i<s;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(s=Math.min(e.t,t);i<s;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},r.prototype.multiplyUpperTo=function(e,t,n){--t;var s=n.t=this.t+e.t-t;for(n.s=0;--s>=0;)n[s]=0;for(s=Math.max(t-this.t,0);s<e.t;++s)n[this.t+s-t]=this.am(t-s,e[s],n,0,0,this.t+s-t);n.clamp(),n.drShiftTo(1,n)},r.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0===t)n=this[0]%e;else for(var s=this.t-1;s>=0;--s)n=(t*n+this[s])%e;return n},r.prototype.millerRabin=function(e){var t=this.subtract(r.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var s=t.shiftRight(n);(e=e+1>>1)>T.length&&(e=T.length);for(var i=o(),a=0;a<e;++a){i.fromInt(T[Math.floor(Math.random()*T.length)]);var c=i.modPow(s,this);if(0!=c.compareTo(r.ONE)&&0!=c.compareTo(t)){for(var l=1;l++<n&&0!=c.compareTo(t);)if(0===(c=c.modPowInt(2,this)).compareTo(r.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},r.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,s=(1<<t)-1,i=!1,r="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,r=u(n));o>=0;)a<t?(n=(this[o]&(1<<a)-1)<<t-a,n|=this[--o]>>(a+=this.DB-t)):(n=this[o]>>(a-=t)&s,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(r+=u(n));return i?r:"0"},r.prototype.negate=function(){var e=o();return r.ZERO.subTo(this,e),e},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this[this.t-1]^this.s&this.DM)},r.prototype.mod=function(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(r.ZERO)>0&&e.subTo(t,t),t},r.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new f(t):new m(t),this.exp(e,n)},r.prototype.clone=function(){var e=o();return this.copyTo(e),e},r.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},r.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},r.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},r.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},r.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,s=this.DB-e*this.DB%8,i=0;if(e-- >0)for(s<this.DB&&(n=this[e]>>s)!=(this.s&this.DM)>>s&&(t[i++]=n|this.s<<this.DB-s);e>=0;)s<8?(n=(this[e]&(1<<s)-1)<<8-s,n|=this[--e]>>(s+=this.DB-8)):(n=this[e]>>(s-=8)&255,s<=0&&(s+=this.DB,--e)),0!=(128&n)&&(n|=-256),0===i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t},r.prototype.toBuffer=function(e){var t=Buffer.from(this.toByteArray());if(!0===e&&0===t[0])t=t.slice(1);else if(i.isNumber(e)){if(t.length>e){for(var n=0;n<t.length-e;n++)if(0!==t[n])return null;return t.slice(t.length-e)}if(t.length<e){var s=Buffer.alloc(e);return s.fill(0,0,e-t.length),t.copy(s,e-t.length),s}}return t},r.prototype.equals=function(e){return 0==this.compareTo(e)},r.prototype.min=function(e){return this.compareTo(e)<0?this:e},r.prototype.max=function(e){return this.compareTo(e)>0?this:e},r.prototype.and=function(e){var t=o();return this.bitwiseTo(e,g,t),t},r.prototype.or=function(e){var t=o();return this.bitwiseTo(e,v,t),t},r.prototype.xor=function(e){var t=o();return this.bitwiseTo(e,y,t),t},r.prototype.andNot=function(e){var t=o();return this.bitwiseTo(e,b,t),t},r.prototype.not=function(){for(var e=o(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},r.prototype.shiftLeft=function(e){var t=o();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},r.prototype.shiftRight=function(e){var t=o();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},r.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+w(this[e]);return this.s<0?this.t*this.DB:-1},r.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=S(this[n]^t);return e},r.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},r.prototype.setBit=function(e){return this.changeBit(e,v)},r.prototype.clearBit=function(e){return this.changeBit(e,b)},r.prototype.flipBit=function(e){return this.changeBit(e,y)},r.prototype.add=function(e){var t=o();return this.addTo(e,t),t},r.prototype.subtract=function(e){var t=o();return this.subTo(e,t),t},r.prototype.multiply=function(e){var t=o();return this.multiplyTo(e,t),t},r.prototype.divide=function(e){var t=o();return this.divRemTo(e,t,null),t},r.prototype.remainder=function(e){var t=o();return this.divRemTo(e,null,t),t},r.prototype.divideAndRemainder=function(e){var t=o(),n=o();return this.divRemTo(e,t,n),new Array(t,n)},r.prototype.modPow=function(e,t){var n,s,i=e.bitLength(),r=p(1);if(i<=0)return r;n=i<18?1:i<48?3:i<144?4:i<768?5:6,s=i<8?new f(t):t.isEven()?new C(t):new m(t);var a=new Array,c=3,l=n-1,u=(1<<n)-1;if(a[1]=s.convert(this),n>1){var h=o();for(s.sqrTo(a[1],h);c<=u;)a[c]=o(),s.mulTo(h,a[c-2],a[c]),c+=2}var g,v,y=e.t-1,b=!0,w=o();for(i=d(e[y])-1;y>=0;){for(i>=l?g=e[y]>>i-l&u:(g=(e[y]&(1<<i+1)-1)<<l-i,y>0&&(g|=e[y-1]>>this.DB+i-l)),c=n;0==(1&g);)g>>=1,--c;if((i-=c)<0&&(i+=this.DB,--y),b)a[g].copyTo(r),b=!1;else{for(;c>1;)s.sqrTo(r,w),s.sqrTo(w,r),c-=2;c>0?s.sqrTo(r,w):(v=r,r=w,w=v),s.mulTo(w,a[g],r)}for(;y>=0&&0==(e[y]&1<<i);)s.sqrTo(r,w),v=r,r=w,w=v,--i<0&&(i=this.DB-1,--y)}return s.revert(r)},r.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0===e.signum())return r.ZERO;for(var n=e.clone(),s=this.clone(),i=p(1),o=p(0),a=p(0),c=p(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;s.isEven();)s.rShiftTo(1,s),t?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(e,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);n.compareTo(s)>=0?(n.subTo(s,n),t&&i.subTo(a,i),o.subTo(c,o)):(s.subTo(n,s),t&&a.subTo(i,a),c.subTo(o,c))}return 0!=s.compareTo(r.ONE)?r.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},r.prototype.pow=function(e){return this.exp(e,new x)},r.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var s=t;t=n,n=s}var i=t.getLowestSetBit(),r=n.getLowestSetBit();if(r<0)return t;for(i<r&&(r=i),r>0&&(t.rShiftTo(r,t),n.rShiftTo(r,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return r>0&&n.lShiftTo(r,n),n},r.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=T[T.length-1]){for(t=0;t<T.length;++t)if(n[0]==T[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<T.length;){for(var s=T[t],i=t+1;i<T.length&&s<R;)s*=T[i++];for(s=n.modInt(s);t<i;)if(s%T[t++]==0)return!1}return n.millerRabin(e)},r.int2char=u,r.ZERO=p(0),r.ONE=p(1),r.prototype.square=function(){var e=o();return this.squareTo(e),e},e.exports=r},450:(e,t,n)=>{var s=n(3016)._,i=(n(6113),n(6200)),r=n(3016),o=n(5954),a=n(6591);t.BigInteger=i,e.exports.Key=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.setOptions=function(e){var t=o[e.signingScheme],n=o[e.encryptionScheme];t===n?this.signingScheme=this.encryptionScheme=n.makeScheme(this,e):(this.encryptionScheme=n.makeScheme(this,e),this.signingScheme=t.makeScheme(this,e)),this.encryptEngine=a.getEngine(this,e)},e.prototype.generate=function(e,t){var n=e>>1;this.e=parseInt(t,16);for(var s=new i(t,16);;){for(;this.p=new i(e-n,1),0!==this.p.subtract(i.ONE).gcd(s).compareTo(i.ONE)||!this.p.isProbablePrime(10););for(;this.q=new i(n,1),0!==this.q.subtract(i.ONE).gcd(s).compareTo(i.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var r=this.p;this.p=this.q,this.q=r}var o=this.p.subtract(i.ONE),a=this.q.subtract(i.ONE),c=o.multiply(a);if(0===c.gcd(s).compareTo(i.ONE)){if(this.n=this.p.multiply(this.q),this.n.bitLength()<e)continue;this.d=s.modInverse(c),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.$$recalculateCache()},e.prototype.setPrivate=function(e,t,n,o,a,c,l,u){if(!(e&&t&&n&&e.length>0&&(s.isNumber(t)||t.length>0)&&n.length>0))throw Error("Invalid RSA private key");this.n=new i(e),this.e=s.isNumber(t)?t:r.get32IntFromBuffer(t,0),this.d=new i(n),o&&a&&c&&l&&u&&(this.p=new i(o),this.q=new i(a),this.dmp1=new i(c),this.dmq1=new i(l),this.coeff=new i(u)),this.$$recalculateCache()},e.prototype.setPublic=function(e,t){if(!(e&&t&&e.length>0&&(s.isNumber(t)||t.length>0)))throw Error("Invalid RSA public key");this.n=new i(e),this.e=s.isNumber(t)?t:r.get32IntFromBuffer(t,0),this.$$recalculateCache()},e.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},e.prototype.$doPublic=function(e){return e.modPowInt(this.e,this.n)},e.prototype.encrypt=function(e,t){var n=[],s=[],i=e.length,r=Math.ceil(i/this.maxMessageLength)||1,o=Math.ceil(i/r||1);if(1==r)n.push(e);else for(var a=0;a<r;a++)n.push(e.slice(a*o,(a+1)*o));for(var c=0;c<n.length;c++)s.push(this.encryptEngine.encrypt(n[c],t));return Buffer.concat(s)},e.prototype.decrypt=function(e,t){if(e.length%this.encryptedDataLength>0)throw Error("Incorrect data or key");for(var n=[],s=0,i=0,r=e.length/this.encryptedDataLength,o=0;o<r;o++)i=(s=o*this.encryptedDataLength)+this.encryptedDataLength,n.push(this.encryptEngine.decrypt(e.slice(s,Math.min(i,e.length)),t));return Buffer.concat(n)},e.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},e.prototype.verify=function(e,t,n){return this.signingScheme.verify.apply(this.signingScheme,arguments)},e.prototype.isPrivate=function(){return!!(this.n&&this.e&&this.d)},e.prototype.isPublic=function(e){return this.n&&this.e&&!(e&&this.d)||!1},Object.defineProperty(e.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(e.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(e.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),e.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},e}()},2313:(e,t,n)=>{n(6200);var s=n(6113);e.exports={isEncryption:!0,isSignature:!1},e.exports.digestLength={md4:16,md5:16,ripemd160:20,rmd160:20,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64};var i="sha1";e.exports.eme_oaep_mgf1=function(t,n,r){r=r||i;for(var o=e.exports.digestLength[r],a=Math.ceil(n/o),c=Buffer.alloc(o*a),l=Buffer.alloc(4),u=0;u<a;++u){var h=s.createHash(r);h.update(t),l.writeUInt32BE(u,0),h.update(l),h.digest().copy(c,u*o)}return c.slice(0,n)},e.exports.makeScheme=function(t,n){function r(e,t){this.key=e,this.options=t}return r.prototype.maxMessageLength=function(){return this.key.encryptedDataLength-2*e.exports.digestLength[this.options.encryptionSchemeOptions.hash||i]-2},r.prototype.encPad=function(t){var n=this.options.encryptionSchemeOptions.hash||i,r=this.options.encryptionSchemeOptions.mgf||e.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||Buffer.alloc(0),a=this.key.encryptedDataLength,c=e.exports.digestLength[n];if(t.length>a-2*c-2)throw new Error("Message is too long to encode into an encoded message with a length of "+a+" bytes, increaseemLen to fix this error (minimum value for given parameters and options: "+(a-2*c-2)+")");var l=s.createHash(n);l.update(o),l=l.digest();var u=Buffer.alloc(a-t.length-2*c-1);u.fill(0),u[u.length-1]=1;for(var h=Buffer.concat([l,u,t]),p=s.randomBytes(c),d=r(p,h.length,n),f=0;f<h.length;f++)h[f]^=d[f];for(d=r(h,c,n),f=0;f<p.length;f++)p[f]^=d[f];var m=Buffer.alloc(1+p.length+h.length);return m[0]=0,p.copy(m,1),h.copy(m,1+p.length),m},r.prototype.encUnPad=function(t){var n=this.options.encryptionSchemeOptions.hash||i,r=this.options.encryptionSchemeOptions.mgf||e.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||Buffer.alloc(0),a=e.exports.digestLength[n];if(t.length<2*a+2)throw new Error("Error decoding message, the supplied message is not long enough to be a valid OAEP encoded message");for(var c=t.slice(1,a+1),l=t.slice(1+a),u=r(l,a,n),h=0;h<c.length;h++)c[h]^=u[h];for(u=r(c,l.length,n),h=0;h<l.length;h++)l[h]^=u[h];var p=s.createHash(n);if(p.update(o),p=p.digest(),l.slice(0,a).toString("hex")!=p.toString("hex"))throw new Error("Error decoding message, the lHash calculated from the label provided and the lHash in the encrypted data do not match.");for(h=a;0===l[h++]&&h<l.length;);if(1!=l[h-1])throw new Error("Error decoding message, there is no padding message separator byte");return l.slice(h)},new r(t,n)}},1381:(e,t,n)=>{var s=n(6200),i=n(6113),r=n(2057),o={md2:Buffer.from("3020300c06082a864886f70d020205000410","hex"),md5:Buffer.from("3020300c06082a864886f70d020505000410","hex"),sha1:Buffer.from("3021300906052b0e03021a05000414","hex"),sha224:Buffer.from("302d300d06096086480165030402040500041c","hex"),sha256:Buffer.from("3031300d060960864801650304020105000420","hex"),sha384:Buffer.from("3041300d060960864801650304020205000430","hex"),sha512:Buffer.from("3051300d060960864801650304020305000440","hex"),ripemd160:Buffer.from("3021300906052b2403020105000414","hex"),rmd160:Buffer.from("3021300906052b2403020105000414","hex")},a={ripemd160:"rmd160"},c="sha256";e.exports={isEncryption:!0,isSignature:!0},e.exports.makeScheme=function(e,t){function n(e,t){this.key=e,this.options=t}return n.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==r.RSA_NO_PADDING?this.key.encryptedDataLength:this.key.encryptedDataLength-11},n.prototype.encPad=function(e,t){var n;if(t=t||{},e.length>this.key.maxMessageLength)throw new Error("Message too long for RSA (n="+this.key.encryptedDataLength+", l="+e.length+")");if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==r.RSA_NO_PADDING)return(n=Buffer.alloc(this.key.maxMessageLength-e.length)).fill(0),Buffer.concat([n,e]);if(1===t.type)return(n=Buffer.alloc(this.key.encryptedDataLength-e.length-1)).fill(255,0,n.length-1),n[0]=1,n[n.length-1]=0,Buffer.concat([n,e]);(n=Buffer.alloc(this.key.encryptedDataLength-e.length))[0]=0,n[1]=2;for(var s=i.randomBytes(n.length-3),o=0;o<s.length;o++){for(var a=s[o];0===a;)a=i.randomBytes(1)[0];n[o+2]=a}return n[n.length-1]=0,Buffer.concat([n,e])},n.prototype.encUnPad=function(e,t){t=t||{};var n=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==r.RSA_NO_PADDING)return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length);if(e.length<4)return null;if(1===t.type){if(0!==e[0]||1!==e[1])return null;for(n=3;0!==e[n];)if(255!=e[n]||++n>=e.length)return null}else{if(0!==e[0]||2!==e[1])return null;for(n=3;0!==e[n];)if(++n>=e.length)return null}return e.slice(n+1,e.length)},n.prototype.sign=function(e){var t=this.options.signingSchemeOptions.hash||c;if("browser"===this.options.environment){t=a[t]||t;var n=i.createHash(t);n.update(e);var r=this.pkcs1pad(n.digest(),t);return this.key.$doPrivate(new s(r)).toBuffer(this.key.encryptedDataLength)}var o=i.createSign("RSA-"+t.toUpperCase());return o.update(e),o.sign(this.options.rsaUtils.exportKey("private"))},n.prototype.verify=function(e,t,n){if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==r.RSA_NO_PADDING)return!1;var o=this.options.signingSchemeOptions.hash||c;if("browser"===this.options.environment){o=a[o]||o,n&&(t=Buffer.from(t,n));var l=i.createHash(o);l.update(e);var u=this.pkcs1pad(l.digest(),o);return this.key.$doPublic(new s(t)).toBuffer().toString("hex")==u.toString("hex")}var h=i.createVerify("RSA-"+o.toUpperCase());return h.update(e),h.verify(this.options.rsaUtils.exportKey("public"),t,n)},n.prototype.pkcs0pad=function(e){var t=Buffer.alloc(this.key.maxMessageLength-e.length);return t.fill(0),Buffer.concat([t,e])},n.prototype.pkcs0unpad=function(e){return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length)},n.prototype.pkcs1pad=function(e,t){var n=o[t];if(!n)throw Error("Unsupported hash algorithm");var s=Buffer.concat([n,e]);if(s.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+t+")");var i=Buffer.alloc(this.key.encryptedDataLength-s.length-1);return i.fill(255,0,i.length-1),i[0]=1,i[i.length-1]=0,Buffer.concat([i,s])},new n(e,t)}},7971:(e,t,n)=>{var s=n(6200),i=n(6113);e.exports={isEncryption:!1,isSignature:!0};var r="sha1";e.exports.makeScheme=function(e,t){var o=n(5954).pkcs1_oaep;function a(e,t){this.key=e,this.options=t}return a.prototype.sign=function(e){var t=i.createHash(this.options.signingSchemeOptions.hash||r);t.update(e);var n=this.emsa_pss_encode(t.digest(),this.key.keySize-1);return this.key.$doPrivate(new s(n)).toBuffer(this.key.encryptedDataLength)},a.prototype.verify=function(e,t,n){n&&(t=Buffer.from(t,n)),t=new s(t);var o=Math.ceil((this.key.keySize-1)/8),a=this.key.$doPublic(t).toBuffer(o),c=i.createHash(this.options.signingSchemeOptions.hash||r);return c.update(e),this.emsa_pss_verify(c.digest(),a,this.key.keySize-1)},a.prototype.emsa_pss_encode=function(e,t){var n=this.options.signingSchemeOptions.hash||r,s=this.options.signingSchemeOptions.mgf||o.eme_oaep_mgf1,a=this.options.signingSchemeOptions.saltLength||20,c=o.digestLength[n],l=Math.ceil(t/8);if(l<c+a+2)throw new Error("Output length passed to emBits("+t+") is too small for the options specified("+n+", "+a+"). To fix this issue increase the value of emBits. (minimum size: "+(8*c+8*a+9)+")");var u=i.randomBytes(a),h=Buffer.alloc(8+c+a);h.fill(0,0,8),e.copy(h,8),u.copy(h,8+e.length);var p=i.createHash(n);p.update(h),p=p.digest();var d=Buffer.alloc(l-u.length-c-2);d.fill(0);var f=Buffer.alloc(d.length+1+u.length);d.copy(f),f[d.length]=1,u.copy(f,d.length+1);for(var m=s(p,f.length,n),g=Buffer.alloc(f.length),v=0;v<m.length;v++)g[v]=f[v]^m[v];var y=8*l-t,b=255^255>>8-y<<8-y;g[0]=g[0]&b;var w=Buffer.alloc(g.length+p.length+1);return g.copy(w,0),p.copy(w,g.length),w[w.length-1]=188,w},a.prototype.emsa_pss_verify=function(e,t,n){var s=this.options.signingSchemeOptions.hash||r,a=this.options.signingSchemeOptions.mgf||o.eme_oaep_mgf1,c=this.options.signingSchemeOptions.saltLength||20,l=o.digestLength[s],u=Math.ceil(n/8);if(u<l+c+2||188!=t[t.length-1])return!1;var h=Buffer.alloc(u-l-1);t.copy(h,0,0,u-l-1);for(var p=0,d=0,f=8*u-n;d<f;d++)p|=1<<7-d;if(0!=(h[0]&p))return!1;var m=t.slice(u-l-1,u-1),g=a(m,h.length,s);for(d=0;d<h.length;d++)h[d]^=g[d];for(p=255^255>>8-(f=8*u-n)<<8-f,h[0]=h[0]&p,d=0;0===h[d]&&d<h.length;d++);if(1!=h[d])return!1;var v=h.slice(h.length-c),y=Buffer.alloc(8+l+c);y.fill(0,0,8),e.copy(y,8),v.copy(y,8+e.length);var b=i.createHash(s);return b.update(y),b=b.digest(),m.toString("hex")===b.toString("hex")},new a(e,t)}},5954:(e,t,n)=>{e.exports={pkcs1:n(1381),pkcs1_oaep:n(2313),pss:n(7971),isEncryption:function(t){return e.exports[t]&&e.exports[t].isEncryption},isSignature:function(t){return e.exports[t]&&e.exports[t].isSignature}}},3016:(e,t,n)=>{n(6113),e.exports.linebrk=function(e,t){for(var n="",s=0;s+t<e.length;)n+=e.substring(s,s+t)+"\n",s+=t;return n+e.substring(s,e.length)},e.exports.detectEnvironment=function(){return"undefined"==typeof window||!window||process&&"node"===process.title?"node":"browser"},e.exports.get32IntFromBuffer=function(e,t){var n;if(t=t||0,(n=e.length-t)>0){if(n>=4)return e.readUIntBE(t,n);for(var s=0,i=t+n,r=0;i>t;i--,r+=2)s+=e[i-1]*Math.pow(16,r);return s}return NaN},e.exports._={isObject:function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e||!isNaN(parseFloat(e))&&isFinite(e)},omit:function(e,t){var n={};for(var s in e)e.hasOwnProperty(s)&&s!==t&&(n[s]=e[s]);return n}},e.exports.trimSurroundingText=function(e,t,n){var s=0,i=e.length,r=e.indexOf(t);r>=0&&(s=r+t.length);var o=e.indexOf(n,r);return o>=0&&(i=o),e.substring(s,i)}},328:(e,t,n)=>{"use strict";var s=n(7310).parse,i={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},r=String.prototype.endsWith||function(e){return e.length<=this.length&&-1!==this.indexOf(e,this.length-e.length)};function o(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}t.getProxyForUrl=function(e){var t="string"==typeof e?s(e):e||{},n=t.protocol,a=t.host,c=t.port;if("string"!=typeof a||!a||"string"!=typeof n)return"";if(n=n.split(":",1)[0],!function(e,t){var n=(o("npm_config_no_proxy")||o("no_proxy")).toLowerCase();return!n||"*"!==n&&n.split(/[,\s]/).every((function(n){if(!n)return!0;var s=n.match(/^(.+):(\d+)$/),i=s?s[1]:n,o=s?parseInt(s[2]):0;return!(!o||o===t)||(/^[.*]/.test(i)?("*"===i.charAt(0)&&(i=i.slice(1)),!r.call(e,i)):e!==i)}))}(a=a.replace(/:\d*$/,""),c=parseInt(c)||i[n]||0))return"";var l=o("npm_config_"+n+"_proxy")||o(n+"_proxy")||o("npm_config_proxy")||o("all_proxy");return l&&-1===l.indexOf("://")&&(l=n+"://"+l),l}},443:(e,t,n)=>{"use strict";var s,i=n(4300),r=i.Buffer,o={};for(s in i)i.hasOwnProperty(s)&&"SlowBuffer"!==s&&"Buffer"!==s&&(o[s]=i[s]);var a=o.Buffer={};for(s in r)r.hasOwnProperty(s)&&"allocUnsafe"!==s&&"allocUnsafeSlow"!==s&&(a[s]=r[s]);if(o.Buffer.prototype=r.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return r(e,t,n)}),a.alloc||(a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var s=r(e);return t&&0!==t.length?"string"==typeof n?s.fill(t,n):s.fill(t):s.fill(0),s}),!o.kStringMaxLength)try{o.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),e.exports=o},6795:(e,t,n)=>{"use strict";const s=n(2037),i=n(9002),r=process.env;let o;function a(e){const t=function(e){if(!1===o)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==o)return 0;const t=o?1:0;if("win32"===process.platform){const e=s.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((e=>e in r))||"codeship"===r.CI_NAME?1:t;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if("truecolor"===r.COLORTERM)return 3;if("TERM_PROGRAM"in r){const e=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)||"COLORTERM"in r?1:(r.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}i("no-color")||i("no-colors")||i("color=false")?o=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(o=!0),"FORCE_COLOR"in r&&(o=0===r.FORCE_COLOR.length||0!==parseInt(r.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},901:(e,t,n)=>{var s=n(4957).strict;e.exports=function(e){if(s(e)){var t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return Buffer.from(e)}},533:e=>{"use strict";e.exports=function(e){const t=e.length;let n=0;for(;n<t;)if(0==(128&e[n]))n++;else if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0}},3682:(e,t,n)=>{"use strict";try{e.exports=n(816)(__dirname)}catch(t){e.exports=n(533)}},1328:(e,t,n)=>{var s=n(5195),i=n(6876),r=i;r.v1=s,r.v4=i,e.exports=r},6746:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var s=n||0,i=t;return[i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]]].join("")}},2373:(e,t,n)=>{var s=n(6113);e.exports=function(){return s.randomBytes(16)}},5195:(e,t,n)=>{var s,i,r=n(2373),o=n(6746),a=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],h=(e=e||{}).node||s,p=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==p){var d=r();null==h&&(h=s=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==p&&(p=i=16383&(d[6]<<8|d[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=f-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||f>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=m,i=p;var v=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var y=f/4294967296*1e4&268435455;u[l++]=y>>>8&255,u[l++]=255&y,u[l++]=y>>>24&15|16,u[l++]=y>>>16&255,u[l++]=p>>>8|128,u[l++]=255&p;for(var b=0;b<6;++b)u[l+b]=h[b];return t||o(u)}},6876:(e,t,n)=>{var s=n(2373),i=n(6746);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[r+a]=o[a];return t||i(o)}},2962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(8957),i=n(5897);var r;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:s.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:s.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(r=t.CancellationToken||(t.CancellationToken={}));const o=Object.freeze((function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?o:(this._emitter||(this._emitter=new s.Emitter),this._emitter.event)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=r.Cancelled}dispose(){this.cancel()}}},8957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}},function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class n{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,s=0,i=this._callbacks.length;s<i;s++)if(this._callbacks[s]===e){if(this._contexts[s]===t)return this._callbacks.splice(s,1),void this._contexts.splice(s,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),s=this._contexts.slice(0),i=0,r=n.length;i<r;i++)try{t.push(n[i].apply(s[i],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class s{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,i)=>{let r;return this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),r={dispose:()=>{this._callbacks.remove(e,t),r.dispose=s._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(i)&&i.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}s._noop=function(){},t.Emitter=s},5897:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function s(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=s,t.stringArray=function(e){return s(e)&&e.every((e=>n(e)))}},4274:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(n=t.Touch||(t.Touch={})),t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,s=n.None){let i=this._map.get(e);if(i)i.value=t,s!==n.None&&this.touch(i,s);else{switch(i={key:e,value:t,next:void 0,previous:void 0},s){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===n.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},5844:(e,t,n)=>{"use strict";function s(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(5897),r=n(1907);t.RequestType=r.RequestType,t.RequestType0=r.RequestType0,t.RequestType1=r.RequestType1,t.RequestType2=r.RequestType2,t.RequestType3=r.RequestType3,t.RequestType4=r.RequestType4,t.RequestType5=r.RequestType5,t.RequestType6=r.RequestType6,t.RequestType7=r.RequestType7,t.RequestType8=r.RequestType8,t.RequestType9=r.RequestType9,t.ResponseError=r.ResponseError,t.ErrorCodes=r.ErrorCodes,t.NotificationType=r.NotificationType,t.NotificationType0=r.NotificationType0,t.NotificationType1=r.NotificationType1,t.NotificationType2=r.NotificationType2,t.NotificationType3=r.NotificationType3,t.NotificationType4=r.NotificationType4,t.NotificationType5=r.NotificationType5,t.NotificationType6=r.NotificationType6,t.NotificationType7=r.NotificationType7,t.NotificationType8=r.NotificationType8,t.NotificationType9=r.NotificationType9;const o=n(8152);t.MessageReader=o.MessageReader,t.StreamMessageReader=o.StreamMessageReader,t.IPCMessageReader=o.IPCMessageReader,t.SocketMessageReader=o.SocketMessageReader;const a=n(1618);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const c=n(8957);t.Disposable=c.Disposable,t.Event=c.Event,t.Emitter=c.Emitter;const l=n(2962);t.CancellationTokenSource=l.CancellationTokenSource,t.CancellationToken=l.CancellationToken;const u=n(4274);var h,p,d,f,m,g,v;s(n(3718)),s(n(2351)),function(e){e.type=new r.NotificationType("$/cancelRequest")}(h||(h={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(p=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(p=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(d=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new r.NotificationType("$/setTraceNotification")}(f=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new r.NotificationType("$/logTraceNotification")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(g=t.ConnectionErrors||(t.ConnectionErrors={}));class y extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,y.prototype)}}function b(e,t,n,s){let o=0,a=0,b=0;const w="2.0";let S,x,E,C,T=Object.create(null),R=Object.create(null),_=new u.LinkedMap,P=Object.create(null),k=Object.create(null),A=p.Off,M=d.Text,O=v.New,I=new c.Emitter,B=new c.Emitter,q=new c.Emitter,L=new c.Emitter;function F(e){return"req-"+e.toString()}function j(e){}function D(){return O===v.Listening}function N(){return O===v.Closed}function U(){return O===v.Disposed}function $(){O!==v.New&&O!==v.Listening||(O=v.Closed,B.fire(void 0))}function z(){E||0===_.size||(E=setImmediate((()=>{E=void 0,function(){if(0===_.size)return;let e=_.shift();try{r.isRequestMessage(e)?function(e){if(U())return;function n(n,s,i){let o={jsonrpc:w,id:e.id};n instanceof r.ResponseError?o.error=n.toJson():o.result=void 0===n?null:n,W(o,s,i),t.write(o)}function s(n,s,i){let r={jsonrpc:w,id:e.id,error:n.toJson()};W(r,s,i),t.write(r)}!function(e){if(A!==p.Off&&C)if(M===d.Text){let t;A===p.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),C.log(`Received request '${e.method} - (${e.id})'.`,t)}else H("receive-request",e)}(e);let o,a,c=T[e.method];c&&(o=c.type,a=c.handler);let u=Date.now();if(a||S){let c=new l.CancellationTokenSource,h=String(e.id);k[h]=c;try{let l;l=void 0===e.params||void 0!==o&&0===o.numberOfParams?a?a(c.token):S(e.method,c.token):i.array(e.params)&&(void 0===o||o.numberOfParams>1)?a?a(...e.params,c.token):S(e.method,...e.params,c.token):a?a(e.params,c.token):S(e.method,e.params,c.token);let p=l;l?p.then?p.then((t=>{delete k[h],n(t,e.method,u)}),(t=>{delete k[h],t instanceof r.ResponseError?s(t,e.method,u):t&&i.string(t.message)?s(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):s(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)})):(delete k[h],n(l,e.method,u)):(delete k[h],function(n,s,i){void 0===n&&(n=null);let r={jsonrpc:w,id:e.id,result:n};W(r,s,i),t.write(r)}(l,e.method,u))}catch(t){delete k[h],t instanceof r.ResponseError?n(t,e.method,u):t&&i.string(t.message)?s(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):s(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else s(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):r.isNotificationMessage(e)?function(e){if(U())return;let t,s;if(e.method===h.type.method)s=e=>{let t=e.id,n=k[String(t)];n&&n.cancel()};else{let n=R[e.method];n&&(s=n.handler,t=n.type)}if(s||x)try{!function(e){if(A!==p.Off&&C&&e.method!==m.type.method)if(M===d.Text){let t;A===p.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),C.log(`Received notification '${e.method}'.`,t)}else H("receive-notification",e)}(e),void 0===e.params||void 0!==t&&0===t.numberOfParams?s?s():x(e.method):i.array(e.params)&&(void 0===t||t.numberOfParams>1)?s?s(...e.params):x(e.method,...e.params):s?s(e.params):x(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else q.fire(e)}(e):r.isResponseMessage(e)?function(e){if(!U())if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),s=P[t];if(function(e,t){if(A!==p.Off&&C)if(M===d.Text){let n;if(A===p.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let s=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";C.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${s}`,n)}else C.log(`Received response ${e.id} without active response promise.`,n)}else H("receive-response",e)}(e,s),s){delete P[t];try{if(e.error){let t=e.error;s.reject(new r.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");s.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${s.method}' failed with message: ${e.message}`):n.error(`Response handler '${s.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(i.string(t.id)||i.number(t.id)){let e=String(t.id),n=P[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{z()}}()})))}e.onClose($),e.onError((function(e){I.fire([e,void 0,void 0])})),t.onClose($),t.onError((function(e){I.fire(e)}));let K=e=>{try{if(r.isNotificationMessage(e)&&e.method===h.type.method){let n=F(e.params.id),i=_.get(n);if(r.isRequestMessage(i)){let r=s&&s.cancelUndispatched?s.cancelUndispatched(i,j):void 0;if(r&&(void 0!==r.error||void 0!==r.result))return _.delete(n),r.id=i.id,W(r,e.method,Date.now()),void t.write(r)}}!function(e,t){var n;r.isRequestMessage(t)?e.set(F(t.id),t):r.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++b).toString():"res-"+n.toString(),t):e.set("not-"+(++a).toString(),t)}(_,e)}finally{z()}};function W(e,t,n){if(A!==p.Off&&C)if(M===d.Text){let s;A===p.Verbose&&(e.error&&e.error.data?s=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?s=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(s="No result returned.\n\n")),C.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,s)}else H("send-response",e)}function H(e,t){if(!C||A===p.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};C.log(n)}function V(){if(N())throw new y(g.Closed,"Connection is closed.");if(U())throw new y(g.Disposed,"Connection is disposed.")}function G(e){return void 0===e?null:e}function J(e,t){let n,s=e.numberOfParams;switch(s){case 0:n=null;break;case 1:n=G(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<s;e++)n.push(G(t[e]));if(t.length<s)for(let e=t.length;e<s;e++)n.push(null)}return n}let Y={sendNotification:(e,...n)=>{let s,r;if(V(),i.string(e))switch(s=e,n.length){case 0:r=null;break;case 1:r=n[0];break;default:r=n}else s=e.method,r=J(e,n);let o={jsonrpc:w,method:s,params:r};!function(e){if(A!==p.Off&&C)if(M===d.Text){let t;A===p.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),C.log(`Sending notification '${e.method}'.`,t)}else H("send-notification",e)}(o),t.write(o)},onNotification:(e,t)=>{V(),i.func(e)?x=e:t&&(i.string(e)?R[e]={type:void 0,handler:t}:R[e.method]={type:e,handler:t})},sendRequest:(e,...n)=>{let s,a,c;if(V(),function(){if(!D())throw new Error("Call listen() first.")}(),i.string(e))switch(s=e,n.length){case 0:a=null;break;case 1:l.CancellationToken.is(n[0])?(a=null,c=n[0]):a=G(n[0]);break;default:const e=n.length-1;l.CancellationToken.is(n[e])?(c=n[e],a=2===n.length?G(n[0]):n.slice(0,e).map((e=>G(e)))):a=n.map((e=>G(e)))}else{s=e.method,a=J(e,n);let t=e.numberOfParams;c=l.CancellationToken.is(n[t])?n[t]:void 0}let u=o++,f=new Promise(((e,n)=>{let i={jsonrpc:w,id:u,method:s,params:a},o={method:s,timerStart:Date.now(),resolve:e,reject:n};!function(e){if(A!==p.Off&&C)if(M===d.Text){let t;A===p.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),C.log(`Sending request '${e.method} - (${e.id})'.`,t)}else H("send-request",e)}(i);try{t.write(i)}catch(e){o.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),o=null}o&&(P[String(u)]=o)}));return c&&c.onCancellationRequested((()=>{Y.sendNotification(h.type,{id:u})})),f},onRequest:(e,t)=>{V(),i.func(e)?S=e:t&&(i.string(e)?T[e]={type:void 0,handler:t}:T[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let s=!1,r=d.Text;void 0!==n&&(i.boolean(n)?s=n:(s=n.sendNotification||!1,r=n.traceFormat||d.Text)),A=e,M=r,C=A===p.Off?void 0:t,!s||N()||U()||Y.sendNotification(f.type,{value:p.toString(e)})},onError:I.event,onClose:B.event,onUnhandledNotification:q.event,onDispose:L.event,dispose:()=>{if(U())return;O=v.Disposed,L.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(P).forEach((e=>{P[e].reject(n)})),P=Object.create(null),k=Object.create(null),_=new u.LinkedMap,i.func(t.dispose)&&t.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{V(),function(){if(D())throw new y(g.AlreadyListening,"Connection is already listening")}(),O=v.Listening,e.listen(K)},inspect:()=>{console.log("inspect")}};return Y.onNotification(m.type,(e=>{A!==p.Off&&C&&C.log(e.message,A===p.Verbose?e.verbose:void 0)})),Y}t.ConnectionError=y,(t.ConnectionStrategy||(t.ConnectionStrategy={})).is=function(e){let t=e;return t&&i.func(t.cancelUndispatched)},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(v||(v={})),t.createMessageConnection=function(e,n,s,i){s||(s=t.NullLogger);let r=void 0!==(c=e).listen&&void 0===c.read?e:new o.StreamMessageReader(e);var c;let l=function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new a.StreamMessageWriter(n);return b(r,l,s,i)}},8152:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(8957),i=n(5897);let r=8192,o=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0];class c{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(r)}append(e){var t=e;if("string"==typeof e){var n=e,s=Buffer.byteLength(n,this.encoding);(t=Buffer.allocUnsafe(s)).write(n,0,s,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var i=(Math.ceil((this.index+t.length)/r)+1)*r;0===this.index?(this.buffer=Buffer.allocUnsafe(i),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],i)}this.index+=t.length}tryReadHeaders(){let e,t=0;for(;t+3<this.index&&(this.buffer[t]!==o||this.buffer[t+1]!==a||this.buffer[t+2]!==o||this.buffer[t+3]!==a);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach((t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let s=t.substr(0,n),i=t.substr(n+1).trim();e[s]=i}));let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)};class l{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter,this.partialMessageEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=l;class u extends l{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new c(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",(e=>{this.onData(e)})),this.readable.on("error",(e=>this.fireError(e))),this.readable.on("close",(()=>this.fireClose()))}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=u,t.IPCMessageReader=class extends l{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){this.process.on("message",e)}},t.SocketMessageReader=class extends u{constructor(e,t="utf-8"){super(e,t)}}},1618:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(8957),i=n(5897);let r="Content-Length: ",o="\r\n";(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)};class a{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=a,t.StreamMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",(e=>this.fireError(e))),this.writable.on("close",(()=>this.fireClose()))}write(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),s=[r,n.toString(),o,o];try{this.writable.write(s.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.IPCMessageWriter=class extends a{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,(t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.SocketMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",(e=>this.fireError(e))),this.socket.on("close",(()=>this.fireClose()))}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),s=[r,n.toString(),o,o];try{this.sending=!0,this.socket.write(s.join(""),"ascii",(n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,(t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(n){this.handleError(n,e)}}))}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},1907:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(5897);var i;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(i=t.ErrorCodes||(t.ErrorCodes={}));class r extends Error{constructor(e,t,n){super(t),this.code=s.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,r.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=r;class o{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=o,t.RequestType0=class extends o{constructor(e){super(e,0),this._=void 0}},t.RequestType=class extends o{constructor(e){super(e,1),this._=void 0}},t.RequestType1=class extends o{constructor(e){super(e,1),this._=void 0}},t.RequestType2=class extends o{constructor(e){super(e,2),this._=void 0}},t.RequestType3=class extends o{constructor(e){super(e,3),this._=void 0}},t.RequestType4=class extends o{constructor(e){super(e,4),this._=void 0}},t.RequestType5=class extends o{constructor(e){super(e,5),this._=void 0}},t.RequestType6=class extends o{constructor(e){super(e,6),this._=void 0}},t.RequestType7=class extends o{constructor(e){super(e,7),this._=void 0}},t.RequestType8=class extends o{constructor(e){super(e,8),this._=void 0}},t.RequestType9=class extends o{constructor(e){super(e,9),this._=void 0}},t.NotificationType=class extends o{constructor(e){super(e,1),this._=void 0}},t.NotificationType0=class extends o{constructor(e){super(e,0),this._=void 0}},t.NotificationType1=class extends o{constructor(e){super(e,1),this._=void 0}},t.NotificationType2=class extends o{constructor(e){super(e,2),this._=void 0}},t.NotificationType3=class extends o{constructor(e){super(e,3),this._=void 0}},t.NotificationType4=class extends o{constructor(e){super(e,4),this._=void 0}},t.NotificationType5=class extends o{constructor(e){super(e,5),this._=void 0}},t.NotificationType6=class extends o{constructor(e){super(e,6),this._=void 0}},t.NotificationType7=class extends o{constructor(e){super(e,7),this._=void 0}},t.NotificationType8=class extends o{constructor(e){super(e,8),this._=void 0}},t.NotificationType9=class extends o{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&s.string(t.method)&&(s.string(t.id)||s.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&s.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(s.string(t.id)||s.number(t.id)||null===t.id)}},3718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(1017),i=n(2037),r=n(6113),o=n(1808),a=n(8152),c=n(1618);t.generateRandomPipeName=function(){const e=r.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:s.join(i.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,s=new Promise(((e,t)=>{n=e}));return new Promise(((i,r)=>{let l=o.createServer((e=>{l.close(),n([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])}));l.on("error",r),l.listen(e,(()=>{l.removeListener("error",r),i({onConnected:()=>s})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const n=o.createConnection(e);return[new a.SocketMessageReader(n,t),new c.SocketMessageWriter(n,t)]}},2351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(1808),i=n(8152),r=n(1618);t.createClientSocketTransport=function(e,t="utf-8"){let n,o=new Promise(((e,t)=>{n=e}));return new Promise(((a,c)=>{let l=s.createServer((e=>{l.close(),n([new i.SocketMessageReader(e,t),new r.SocketMessageWriter(e,t)])}));l.on("error",c),l.listen(e,"127.0.0.1",(()=>{l.removeListener("error",c),a({onConnected:()=>o})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const n=s.createConnection(e,"127.0.0.1");return[new i.SocketMessageReader(n,t),new r.SocketMessageWriter(n,t)]}},5952:function(e,t){var n;n=function(e){"use strict";const t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function n(){}const s="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;function i(e){return"object"==typeof e&&null!==e||"function"==typeof e}const r=n,o=Promise,a=Promise.prototype.then,c=Promise.resolve.bind(o),l=Promise.reject.bind(o);function u(e){return new o(e)}function h(e){return c(e)}function p(e){return l(e)}function d(e,t,n){return a.call(e,t,n)}function f(e,t,n){d(d(e,t,n),void 0,r)}function m(e,t){f(e,t)}function g(e,t){f(e,void 0,t)}function v(e,t,n){return d(e,t,n)}function y(e){d(e,void 0,r)}const b=(()=>{const e=s&&s.queueMicrotask;if("function"==typeof e)return e;const t=h(void 0);return e=>d(t,e)})();function w(e,t,n){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,n)}function S(e,t,n){try{return h(w(e,t,n))}catch(e){return p(e)}}class x{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let n=t;16383===t._elements.length&&(n={_elements:[],_next:void 0}),t._elements.push(e),n!==t&&(this._back=n,t._next=n),++this._size}shift(){const e=this._front;let t=e;const n=this._cursor;let s=n+1;const i=e._elements,r=i[n];return 16384===s&&(t=e._next,s=0),--this._size,this._cursor=s,e!==t&&(this._front=t),i[n]=void 0,r}forEach(e){let t=this._cursor,n=this._front,s=n._elements;for(;!(t===s.length&&void 0===n._next||t===s.length&&(n=n._next,s=n._elements,t=0,0===s.length));)e(s[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}function E(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?_(e):"closed"===t._state?function(e){_(e),A(e)}(e):P(e,t._storedError)}function C(e,t){return Sn(e._ownerReadableStream,t)}function T(e){"readable"===e._ownerReadableStream._state?k(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e,t){P(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))}(e),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function R(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function _(e){e._closedPromise=u(((t,n)=>{e._closedPromise_resolve=t,e._closedPromise_reject=n}))}function P(e,t){_(e),k(e,t)}function k(e,t){void 0!==e._closedPromise_reject&&(y(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function A(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const M=t("[[AbortSteps]]"),O=t("[[ErrorSteps]]"),I=t("[[CancelSteps]]"),B=t("[[PullSteps]]"),q=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},L=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function F(e,t){if(void 0!==e&&"object"!=typeof(n=e)&&"function"!=typeof n)throw new TypeError(`${t} is not an object.`);var n}function j(e,t){if("function"!=typeof e)throw new TypeError(`${t} is not a function.`)}function D(e,t){if(!function(e){return"object"==typeof e&&null!==e||"function"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function N(e,t,n){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${n}'.`)}function U(e,t,n){if(void 0===e)throw new TypeError(`${t} is required in '${n}'.`)}function $(e){return Number(e)}function z(e){return 0===e?0:e}function K(e,t){const n=Number.MAX_SAFE_INTEGER;let s=Number(e);if(s=z(s),!q(s))throw new TypeError(`${t} is not a finite number`);if(s=function(e){return z(L(e))}(s),s<0||s>n)throw new TypeError(`${t} is outside the accepted range of 0 to ${n}, inclusive`);return q(s)&&0!==s?s:0}function W(e,t){if(!bn(e))throw new TypeError(`${t} is not a ReadableStream.`)}function H(e){return new Q(e)}function V(e,t){e._reader._readRequests.push(t)}function G(e,t,n){const s=e._reader._readRequests.shift();n?s._closeSteps():s._chunkSteps(t)}function J(e){return e._reader._readRequests.length}function Y(e){const t=e._reader;return void 0!==t&&!!Z(t)}class Q{constructor(e){if(N(e,1,"ReadableStreamDefaultReader"),W(e,"First parameter"),wn(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");E(this,e),this._readRequests=new x}get closed(){return Z(this)?this._closedPromise:p(ee("closed"))}cancel(e){return Z(this)?void 0===this._ownerReadableStream?p(R("cancel")):C(this,e):p(ee("cancel"))}read(){if(!Z(this))return p(ee("read"));if(void 0===this._ownerReadableStream)return p(R("read from"));let e,t;const n=u(((n,s)=>{e=n,t=s}));return X(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),n}releaseLock(){if(!Z(this))throw ee("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");T(this)}}}function Z(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof Q}function X(e,t){const n=e._ownerReadableStream;n._disturbed=!0,"closed"===n._state?t._closeSteps():"errored"===n._state?t._errorSteps(n._storedError):n._readableStreamController[B](t)}function ee(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(Q.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Q.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});const te=Object.getPrototypeOf(Object.getPrototypeOf((async function*(){})).prototype);class ne{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?v(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise?v(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;if(void 0===e._ownerReadableStream)return p(R("iterate"));let t,n;const s=u(((e,s)=>{t=e,n=s}));return X(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,b((()=>t({value:e,done:!1})))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,T(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,T(e),n(t)}}),s}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(void 0===t._ownerReadableStream)return p(R("finish iterating"));if(!this._preventCancel){const n=C(t,e);return T(t),v(n,(()=>({value:e,done:!0})))}return T(t),h({value:e,done:!0})}}const se={next(){return ie(this)?this._asyncIteratorImpl.next():p(re("next"))},return(e){return ie(this)?this._asyncIteratorImpl.return(e):p(re("return"))}};function ie(e){if(!i(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ne}catch(e){return!1}}function re(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==te&&Object.setPrototypeOf(se,te);const oe=Number.isNaN||function(e){return e!=e};function ae(e){return e.slice()}function ce(e,t,n,s,i){new Uint8Array(e).set(new Uint8Array(n,s,i),t)}function le(e,t,n){if(e.slice)return e.slice(t,n);const s=n-t,i=new ArrayBuffer(s);return ce(i,0,e,t,s),i}function ue(e){const t=le(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function he(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function pe(e,t,n){if("number"!=typeof(s=n)||oe(s)||s<0||n===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var s;e._queue.push({value:t,size:n}),e._queueTotalSize+=n}function de(e){e._queue=new x,e._queueTotalSize=0}class fe{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!ve(this))throw De("view");return this._view}respond(e){if(!ve(this))throw De("respond");if(N(e,1,"respond"),e=K(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,Le(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!ve(this))throw De("respondWithNewView");if(N(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");e.buffer,Fe(this._associatedReadableByteStreamController,e)}}Object.defineProperties(fe.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(fe.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class me{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ge(this))throw Ne("byobRequest");return Be(this)}get desiredSize(){if(!ge(this))throw Ne("desiredSize");return qe(this)}close(){if(!ge(this))throw Ne("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);Me(this)}enqueue(e){if(!ge(this))throw Ne("enqueue");if(N(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);Oe(this,e)}error(e){if(!ge(this))throw Ne("error");Ie(this,e)}[I](e){be(this),de(this);const t=this._cancelAlgorithm(e);return Ae(this),t}[B](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0){const t=this._queue.shift();this._queueTotalSize-=t.byteLength,Te(this);const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return void e._chunkSteps(n)}const n=this._autoAllocateChunkSize;if(void 0!==n){let t;try{t=new ArrayBuffer(n)}catch(t){return void e._errorSteps(t)}const s={buffer:t,bufferByteLength:n,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(s)}V(t,e),ye(this)}}function ge(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof me}function ve(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof fe}function ye(e){const t=function(e){const t=e._controlledReadableByteStream;return"readable"===t._state&&!e._closeRequested&&!!e._started&&(!!(Y(t)&&J(t)>0)||!!(Ke(t)&&ze(t)>0)||qe(e)>0)}(e);t&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,f(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ye(e))}),(t=>{Ie(e,t)}))))}function be(e){Re(e),e._pendingPullIntos=new x}function we(e,t){let n=!1;"closed"===e._state&&(n=!0);const s=Se(t);"default"===t.readerType?G(e,s,n):function(e,t,n){const s=e._reader._readIntoRequests.shift();n?s._closeSteps(t):s._chunkSteps(t)}(e,s,n)}function Se(e){const t=e.bytesFilled,n=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/n)}function xe(e,t,n,s){e._queue.push({buffer:t,byteOffset:n,byteLength:s}),e._queueTotalSize+=s}function Ee(e,t){const n=t.elementSize,s=t.bytesFilled-t.bytesFilled%n,i=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),r=t.bytesFilled+i,o=r-r%n;let a=i,c=!1;o>s&&(a=o-t.bytesFilled,c=!0);const l=e._queue;for(;a>0;){const n=l.peek(),s=Math.min(a,n.byteLength),i=t.byteOffset+t.bytesFilled;ce(t.buffer,i,n.buffer,n.byteOffset,s),n.byteLength===s?l.shift():(n.byteOffset+=s,n.byteLength-=s),e._queueTotalSize-=s,Ce(0,s,t),a-=s}return c}function Ce(e,t,n){n.bytesFilled+=t}function Te(e){0===e._queueTotalSize&&e._closeRequested?(Ae(e),xn(e._controlledReadableByteStream)):ye(e)}function Re(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function _e(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;const t=e._pendingPullIntos.peek();Ee(e,t)&&(ke(e),we(e._controlledReadableByteStream,t))}}function Pe(e,t){const n=e._pendingPullIntos.peek();Re(e),"closed"===e._controlledReadableByteStream._state?function(e,t){const n=e._controlledReadableByteStream;if(Ke(n))for(;ze(n)>0;)we(n,ke(e))}(e):function(e,t,n){if(Ce(0,t,n),n.bytesFilled<n.elementSize)return;ke(e);const s=n.bytesFilled%n.elementSize;if(s>0){const t=n.byteOffset+n.bytesFilled,i=le(n.buffer,t-s,t);xe(e,i,0,i.byteLength)}n.bytesFilled-=s,we(e._controlledReadableByteStream,n),_e(e)}(e,t,n),ye(e)}function ke(e){return e._pendingPullIntos.shift()}function Ae(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Me(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ie(e,t),t}Ae(e),xn(t)}}function Oe(e,t){const n=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==n._state)return;const s=t.buffer,i=t.byteOffset,r=t.byteLength,o=s;if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();t.buffer,t.buffer=t.buffer}Re(e),Y(n)?0===J(n)?xe(e,o,i,r):(e._pendingPullIntos.length>0&&ke(e),G(n,new Uint8Array(o,i,r),!1)):Ke(n)?(xe(e,o,i,r),_e(e)):xe(e,o,i,r),ye(e)}function Ie(e,t){const n=e._controlledReadableByteStream;"readable"===n._state&&(be(e),de(e),Ae(e),En(n,t))}function Be(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),n=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),s=Object.create(fe.prototype);!function(e,t,n){e._associatedReadableByteStreamController=t,e._view=n}(s,e,n),e._byobRequest=s}return e._byobRequest}function qe(e){const t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function Le(e,t){const n=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+t>n.byteLength)throw new RangeError("bytesWritten out of range")}n.buffer=n.buffer,Pe(e,t)}function Fe(e,t){const n=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+t.byteLength>n.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const s=t.byteLength;n.buffer=t.buffer,Pe(e,s)}function je(e,t,n,s,i,r,o){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,de(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=r,t._pullAlgorithm=s,t._cancelAlgorithm=i,t._autoAllocateChunkSize=o,t._pendingPullIntos=new x,e._readableStreamController=t,f(h(n()),(()=>{t._started=!0,ye(t)}),(e=>{Ie(t,e)}))}function De(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ne(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ue(e){return new We(e)}function $e(e,t){e._reader._readIntoRequests.push(t)}function ze(e){return e._reader._readIntoRequests.length}function Ke(e){const t=e._reader;return void 0!==t&&!!He(t)}Object.defineProperties(me.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(me.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class We{constructor(e){if(N(e,1,"ReadableStreamBYOBReader"),W(e,"First parameter"),wn(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ge(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");E(this,e),this._readIntoRequests=new x}get closed(){return He(this)?this._closedPromise:p(Ge("closed"))}cancel(e){return He(this)?void 0===this._ownerReadableStream?p(R("cancel")):C(this,e):p(Ge("cancel"))}read(e){if(!He(this))return p(Ge("read"));if(!ArrayBuffer.isView(e))return p(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return p(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return p(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return p(R("read from"));let t,n;const s=u(((e,s)=>{t=e,n=s}));return Ve(this,e,{_chunkSteps:e=>t({value:e,done:!1}),_closeSteps:e=>t({value:e,done:!0}),_errorSteps:e=>n(e)}),s}releaseLock(){if(!He(this))throw Ge("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");T(this)}}}function He(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof We}function Ve(e,t,n){const s=e._ownerReadableStream;s._disturbed=!0,"errored"===s._state?n._errorSteps(s._storedError):function(e,t,n){const s=e._controlledReadableByteStream;let i=1;t.constructor!==DataView&&(i=t.constructor.BYTES_PER_ELEMENT);const r=t.constructor,o=t.buffer,a={buffer:o,bufferByteLength:o.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:i,viewConstructor:r,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(a),void $e(s,n);if("closed"!==s._state){if(e._queueTotalSize>0){if(Ee(e,a)){const t=Se(a);return Te(e),void n._chunkSteps(t)}if(e._closeRequested){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");return Ie(e,t),void n._errorSteps(t)}}e._pendingPullIntos.push(a),$e(s,n),ye(e)}else{const e=new r(a.buffer,a.byteOffset,0);n._closeSteps(e)}}(s._readableStreamController,t,n)}function Ge(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Je(e,t){const{highWaterMark:n}=e;if(void 0===n)return t;if(oe(n)||n<0)throw new RangeError("Invalid highWaterMark");return n}function Ye(e){const{size:t}=e;return t||(()=>1)}function Qe(e,t){F(e,t);const n=null==e?void 0:e.highWaterMark,s=null==e?void 0:e.size;return{highWaterMark:void 0===n?void 0:$(n),size:void 0===s?void 0:Ze(s,`${t} has member 'size' that`)}}function Ze(e,t){return j(e,t),t=>$(e(t))}function Xe(e,t,n){return j(e,n),n=>S(e,t,[n])}function et(e,t,n){return j(e,n),()=>S(e,t,[])}function tt(e,t,n){return j(e,n),n=>w(e,t,[n])}function nt(e,t,n){return j(e,n),(n,s)=>S(e,t,[n,s])}function st(e,t){if(!ct(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(We.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(We.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const it="function"==typeof AbortController;class rt{constructor(e={},t={}){void 0===e?e=null:D(e,"First parameter");const n=Qe(t,"Second parameter"),s=function(e,t){F(e,t);const n=null==e?void 0:e.abort,s=null==e?void 0:e.close,i=null==e?void 0:e.start,r=null==e?void 0:e.type,o=null==e?void 0:e.write;return{abort:void 0===n?void 0:Xe(n,e,`${t} has member 'abort' that`),close:void 0===s?void 0:et(s,e,`${t} has member 'close' that`),start:void 0===i?void 0:tt(i,e,`${t} has member 'start' that`),write:void 0===o?void 0:nt(o,e,`${t} has member 'write' that`),type:r}}(e,"First parameter");if(at(this),void 0!==s.type)throw new RangeError("Invalid type is specified");const i=Ye(n);!function(e,t,n,s){const i=Object.create(Tt.prototype);let r=()=>{},o=()=>h(void 0),a=()=>h(void 0),c=()=>h(void 0);void 0!==t.start&&(r=()=>t.start(i)),void 0!==t.write&&(o=e=>t.write(e,i)),void 0!==t.close&&(a=()=>t.close()),void 0!==t.abort&&(c=e=>t.abort(e)),_t(e,i,r,o,a,c,n,s)}(this,s,Je(n,1),i)}get locked(){if(!ct(this))throw Bt("locked");return lt(this)}abort(e){return ct(this)?lt(this)?p(new TypeError("Cannot abort a stream that already has a writer")):ut(this,e):p(Bt("abort"))}close(){return ct(this)?lt(this)?p(new TypeError("Cannot close a stream that already has a writer")):mt(this)?p(new TypeError("Cannot close an already-closing stream")):ht(this):p(Bt("close"))}getWriter(){if(!ct(this))throw Bt("getWriter");return ot(this)}}function ot(e){return new yt(e)}function at(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new x,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function ct(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof rt}function lt(e){return void 0!==e._writer}function ut(e,t){var n;if("closed"===e._state||"errored"===e._state)return h(void 0);e._writableStreamController._abortReason=t,null===(n=e._writableStreamController._abortController)||void 0===n||n.abort();const s=e._state;if("closed"===s||"errored"===s)return h(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let i=!1;"erroring"===s&&(i=!0,t=void 0);const r=u(((n,s)=>{e._pendingAbortRequest={_promise:void 0,_resolve:n,_reject:s,_reason:t,_wasAlreadyErroring:i}}));return e._pendingAbortRequest._promise=r,i||dt(e,t),r}function ht(e){const t=e._state;if("closed"===t||"errored"===t)return p(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const n=u(((t,n)=>{const s={_resolve:t,_reject:n};e._closeRequest=s})),s=e._writer;var i;return void 0!==s&&e._backpressure&&"writable"===t&&Ht(s),pe(i=e._writableStreamController,Ct,0),At(i),n}function pt(e,t){"writable"!==e._state?ft(e):dt(e,t)}function dt(e,t){const n=e._writableStreamController;e._state="erroring",e._storedError=t;const s=e._writer;void 0!==s&&St(s,t),!function(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&n._started&&ft(e)}function ft(e){e._state="errored",e._writableStreamController[O]();const t=e._storedError;if(e._writeRequests.forEach((e=>{e._reject(t)})),e._writeRequests=new x,void 0===e._pendingAbortRequest)return void gt(e);const n=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,n._wasAlreadyErroring)return n._reject(t),void gt(e);f(e._writableStreamController[M](n._reason),(()=>{n._resolve(),gt(e)}),(t=>{n._reject(t),gt(e)}))}function mt(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function gt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&Nt(t,e._storedError)}function vt(e,t){const n=e._writer;void 0!==n&&t!==e._backpressure&&(t?function(e){$t(e)}(n):Ht(n)),e._backpressure=t}Object.defineProperties(rt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(rt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});class yt{constructor(e){if(N(e,1,"WritableStreamDefaultWriter"),st(e,"First parameter"),lt(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const t=e._state;if("writable"===t)!mt(e)&&e._backpressure?$t(this):Kt(this),jt(this);else if("erroring"===t)zt(this,e._storedError),jt(this);else if("closed"===t)Kt(this),jt(this),Ut(this);else{const t=e._storedError;zt(this,t),Dt(this,t)}}get closed(){return bt(this)?this._closedPromise:p(Lt("closed"))}get desiredSize(){if(!bt(this))throw Lt("desiredSize");if(void 0===this._ownerWritableStream)throw Ft("desiredSize");return function(e){const t=e._ownerWritableStream,n=t._state;return"errored"===n||"erroring"===n?null:"closed"===n?0:kt(t._writableStreamController)}(this)}get ready(){return bt(this)?this._readyPromise:p(Lt("ready"))}abort(e){return bt(this)?void 0===this._ownerWritableStream?p(Ft("abort")):function(e,t){return ut(e._ownerWritableStream,t)}(this,e):p(Lt("abort"))}close(){if(!bt(this))return p(Lt("close"));const e=this._ownerWritableStream;return void 0===e?p(Ft("close")):mt(e)?p(new TypeError("Cannot close an already-closing stream")):wt(this)}releaseLock(){if(!bt(this))throw Lt("releaseLock");void 0!==this._ownerWritableStream&&xt(this)}write(e){return bt(this)?void 0===this._ownerWritableStream?p(Ft("write to")):Et(this,e):p(Lt("write"))}}function bt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof yt}function wt(e){return ht(e._ownerWritableStream)}function St(e,t){"pending"===e._readyPromiseState?Wt(e,t):function(e,t){zt(e,t)}(e,t)}function xt(e){const t=e._ownerWritableStream,n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");St(e,n),function(e,t){"pending"===e._closedPromiseState?Nt(e,t):function(e,t){Dt(e,t)}(e,t)}(e,n),t._writer=void 0,e._ownerWritableStream=void 0}function Et(e,t){const n=e._ownerWritableStream,s=n._writableStreamController,i=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return Mt(e,t),1}}(s,t);if(n!==e._ownerWritableStream)return p(Ft("write to"));const r=n._state;if("errored"===r)return p(n._storedError);if(mt(n)||"closed"===r)return p(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===r)return p(n._storedError);const o=function(e){return u(((t,n)=>{const s={_resolve:t,_reject:n};e._writeRequests.push(s)}))}(n);return function(e,t,n){try{pe(e,t,n)}catch(t){return void Mt(e,t)}const s=e._controlledWritableStream;mt(s)||"writable"!==s._state||vt(s,Ot(e)),At(e)}(s,t,i),o}Object.defineProperties(yt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(yt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const Ct={};class Tt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Rt(this))throw qt("abortReason");return this._abortReason}get signal(){if(!Rt(this))throw qt("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e){if(!Rt(this))throw qt("error");"writable"===this._controlledWritableStream._state&&It(this,e)}[M](e){const t=this._abortAlgorithm(e);return Pt(this),t}[O](){de(this)}}function Rt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof Tt}function _t(e,t,n,s,i,r,o,a){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,de(t),t._abortReason=void 0,t._abortController=function(){if(it)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=a,t._strategyHWM=o,t._writeAlgorithm=s,t._closeAlgorithm=i,t._abortAlgorithm=r;const c=Ot(t);vt(e,c),f(h(n()),(()=>{t._started=!0,At(t)}),(n=>{t._started=!0,pt(e,n)}))}function Pt(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function kt(e){return e._strategyHWM-e._queueTotalSize}function At(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if("erroring"===t._state)return void ft(t);if(0===e._queue.length)return;const n=e._queue.peek().value;n===Ct?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),he(e);const n=e._closeAlgorithm();Pt(e),f(n,(()=>{!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";const t=e._writer;void 0!==t&&Ut(t)}(t)}),(e=>{!function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),pt(e,t)}(t,e)}))}(e):function(e,t){const n=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(n),f(e._writeAlgorithm(t),(()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(n);const t=n._state;if(he(e),!mt(n)&&"writable"===t){const t=Ot(e);vt(n,t)}At(e)}),(t=>{"writable"===n._state&&Pt(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,pt(e,t)}(n,t)}))}(e,n)}function Mt(e,t){"writable"===e._controlledWritableStream._state&&It(e,t)}function Ot(e){return kt(e)<=0}function It(e,t){const n=e._controlledWritableStream;Pt(e),dt(n,t)}function Bt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function qt(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Lt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Ft(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function jt(e){e._closedPromise=u(((t,n)=>{e._closedPromise_resolve=t,e._closedPromise_reject=n,e._closedPromiseState="pending"}))}function Dt(e,t){jt(e),Nt(e,t)}function Nt(e,t){void 0!==e._closedPromise_reject&&(y(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Ut(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function $t(e){e._readyPromise=u(((t,n)=>{e._readyPromise_resolve=t,e._readyPromise_reject=n})),e._readyPromiseState="pending"}function zt(e,t){$t(e),Wt(e,t)}function Kt(e){$t(e),Ht(e)}function Wt(e,t){void 0!==e._readyPromise_reject&&(y(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Ht(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Tt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Tt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const Vt="undefined"!=typeof DOMException?DOMException:void 0,Gt=function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}(Vt)?Vt:function(){const e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Jt(e,t,s,i,r,o){const a=H(e),c=ot(t);e._disturbed=!0;let l=!1,v=h(void 0);return u(((b,w)=>{let S;if(void 0!==o){if(S=()=>{const n=new Gt("Aborted","AbortError"),s=[];i||s.push((()=>"writable"===t._state?ut(t,n):h(void 0))),r||s.push((()=>"readable"===e._state?Sn(e,n):h(void 0))),P((()=>Promise.all(s.map((e=>e())))),!0,n)},o.aborted)return void S();o.addEventListener("abort",S)}var x,E,C;if(_(e,a._closedPromise,(e=>{i?k(!0,e):P((()=>ut(t,e)),!0,e)})),_(t,c._closedPromise,(t=>{r?k(!0,t):P((()=>Sn(e,t)),!0,t)})),x=e,E=a._closedPromise,C=()=>{s?k():P((()=>function(e){const t=e._ownerWritableStream,n=t._state;return mt(t)||"closed"===n?h(void 0):"errored"===n?p(t._storedError):wt(e)}(c)))},"closed"===x._state?C():m(E,C),mt(t)||"closed"===t._state){const t=new TypeError("the destination writable stream closed before all data could be piped to it");r?k(!0,t):P((()=>Sn(e,t)),!0,t)}function R(){const e=v;return d(v,(()=>e!==v?R():void 0))}function _(e,t,n){"errored"===e._state?n(e._storedError):g(t,n)}function P(e,n,s){function i(){f(e(),(()=>A(n,s)),(e=>A(!0,e)))}l||(l=!0,"writable"!==t._state||mt(t)?i():m(R(),i))}function k(e,n){l||(l=!0,"writable"!==t._state||mt(t)?A(e,n):m(R(),(()=>A(e,n))))}function A(e,t){xt(c),T(a),void 0!==o&&o.removeEventListener("abort",S),e?w(t):b(void 0)}y(u(((e,t)=>{!function s(i){i?e():d(l?h(!0):d(c._readyPromise,(()=>u(((e,t)=>{X(a,{_chunkSteps:t=>{v=d(Et(c,t),void 0,n),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})))),s,t)}(!1)})))}))}class Yt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Qt(this))throw cn("desiredSize");return rn(this)}close(){if(!Qt(this))throw cn("close");if(!on(this))throw new TypeError("The stream is not in a state that permits close");tn(this)}enqueue(e){if(!Qt(this))throw cn("enqueue");if(!on(this))throw new TypeError("The stream is not in a state that permits enqueue");return nn(this,e)}error(e){if(!Qt(this))throw cn("error");sn(this,e)}[I](e){de(this);const t=this._cancelAlgorithm(e);return en(this),t}[B](e){const t=this._controlledReadableStream;if(this._queue.length>0){const n=he(this);this._closeRequested&&0===this._queue.length?(en(this),xn(t)):Zt(this),e._chunkSteps(n)}else V(t,e),Zt(this)}}function Qt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof Yt}function Zt(e){Xt(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,f(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Zt(e))}),(t=>{sn(e,t)}))))}function Xt(e){const t=e._controlledReadableStream;return!!on(e)&&!!e._started&&(!!(wn(t)&&J(t)>0)||rn(e)>0)}function en(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function tn(e){if(!on(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(en(e),xn(t))}function nn(e,t){if(!on(e))return;const n=e._controlledReadableStream;if(wn(n)&&J(n)>0)G(n,t,!1);else{let n;try{n=e._strategySizeAlgorithm(t)}catch(t){throw sn(e,t),t}try{pe(e,t,n)}catch(t){throw sn(e,t),t}}Zt(e)}function sn(e,t){const n=e._controlledReadableStream;"readable"===n._state&&(de(e),en(e),En(n,t))}function rn(e){const t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function on(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function an(e,t,n,s,i,r,o){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,de(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=o,t._strategyHWM=r,t._pullAlgorithm=s,t._cancelAlgorithm=i,e._readableStreamController=t,f(h(n()),(()=>{t._started=!0,Zt(t)}),(e=>{sn(t,e)}))}function cn(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function ln(e,t,n){return j(e,n),n=>S(e,t,[n])}function un(e,t,n){return j(e,n),n=>S(e,t,[n])}function hn(e,t,n){return j(e,n),n=>w(e,t,[n])}function pn(e,t){if("bytes"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function dn(e,t){if("byob"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function fn(e,t){F(e,t);const n=null==e?void 0:e.preventAbort,s=null==e?void 0:e.preventCancel,i=null==e?void 0:e.preventClose,r=null==e?void 0:e.signal;return void 0!==r&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(r,`${t} has member 'signal' that`),{preventAbort:Boolean(n),preventCancel:Boolean(s),preventClose:Boolean(i),signal:r}}Object.defineProperties(Yt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Yt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class mn{constructor(e={},t={}){void 0===e?e=null:D(e,"First parameter");const n=Qe(t,"Second parameter"),s=function(e,t){F(e,t);const n=e,s=null==n?void 0:n.autoAllocateChunkSize,i=null==n?void 0:n.cancel,r=null==n?void 0:n.pull,o=null==n?void 0:n.start,a=null==n?void 0:n.type;return{autoAllocateChunkSize:void 0===s?void 0:K(s,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===i?void 0:ln(i,n,`${t} has member 'cancel' that`),pull:void 0===r?void 0:un(r,n,`${t} has member 'pull' that`),start:void 0===o?void 0:hn(o,n,`${t} has member 'start' that`),type:void 0===a?void 0:pn(a,`${t} has member 'type' that`)}}(e,"First parameter");if(yn(this),"bytes"===s.type){if(void 0!==n.size)throw new RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,n){const s=Object.create(me.prototype);let i=()=>{},r=()=>h(void 0),o=()=>h(void 0);void 0!==t.start&&(i=()=>t.start(s)),void 0!==t.pull&&(r=()=>t.pull(s)),void 0!==t.cancel&&(o=e=>t.cancel(e));const a=t.autoAllocateChunkSize;if(0===a)throw new TypeError("autoAllocateChunkSize must be greater than 0");je(e,s,i,r,o,n,a)}(this,s,Je(n,0))}else{const e=Ye(n);!function(e,t,n,s){const i=Object.create(Yt.prototype);let r=()=>{},o=()=>h(void 0),a=()=>h(void 0);void 0!==t.start&&(r=()=>t.start(i)),void 0!==t.pull&&(o=()=>t.pull(i)),void 0!==t.cancel&&(a=e=>t.cancel(e)),an(e,i,r,o,a,n,s)}(this,s,Je(n,1),e)}}get locked(){if(!bn(this))throw Cn("locked");return wn(this)}cancel(e){return bn(this)?wn(this)?p(new TypeError("Cannot cancel a stream that already has a reader")):Sn(this,e):p(Cn("cancel"))}getReader(e){if(!bn(this))throw Cn("getReader");return void 0===function(e,t){F(e,t);const n=null==e?void 0:e.mode;return{mode:void 0===n?void 0:dn(n,`${t} has member 'mode' that`)}}(e,"First parameter").mode?H(this):Ue(this)}pipeThrough(e,t={}){if(!bn(this))throw Cn("pipeThrough");N(e,1,"pipeThrough");const n=function(e,t){F(e,t);const n=null==e?void 0:e.readable;U(n,"readable","ReadableWritablePair"),W(n,`${t} has member 'readable' that`);const s=null==e?void 0:e.writable;return U(s,"writable","ReadableWritablePair"),st(s,`${t} has member 'writable' that`),{readable:n,writable:s}}(e,"First parameter"),s=fn(t,"Second parameter");if(wn(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(lt(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return y(Jt(this,n.writable,s.preventClose,s.preventAbort,s.preventCancel,s.signal)),n.readable}pipeTo(e,t={}){if(!bn(this))return p(Cn("pipeTo"));if(void 0===e)return p("Parameter 1 is required in 'pipeTo'.");if(!ct(e))return p(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let n;try{n=fn(t,"Second parameter")}catch(e){return p(e)}return wn(this)?p(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):lt(e)?p(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Jt(this,e,n.preventClose,n.preventAbort,n.preventCancel,n.signal)}tee(){if(!bn(this))throw Cn("tee");return ae(ge((e=this)._readableStreamController)?function(e){let t,n,s,i,r,o=H(e),a=!1,c=!1,l=!1,p=!1,d=!1;const f=u((e=>{r=e}));function m(e){g(e._closedPromise,(t=>{e===o&&(Ie(s._readableStreamController,t),Ie(i._readableStreamController,t),p&&d||r(void 0))}))}function v(){He(o)&&(T(o),o=H(e),m(o)),X(o,{_chunkSteps:t=>{b((()=>{c=!1,l=!1;const n=t;let o=t;if(!p&&!d)try{o=ue(t)}catch(t){return Ie(s._readableStreamController,t),Ie(i._readableStreamController,t),void r(Sn(e,t))}p||Oe(s._readableStreamController,n),d||Oe(i._readableStreamController,o),a=!1,c?w():l&&S()}))},_closeSteps:()=>{a=!1,p||Me(s._readableStreamController),d||Me(i._readableStreamController),s._readableStreamController._pendingPullIntos.length>0&&Le(s._readableStreamController,0),i._readableStreamController._pendingPullIntos.length>0&&Le(i._readableStreamController,0),p&&d||r(void 0)},_errorSteps:()=>{a=!1}})}function y(t,n){Z(o)&&(T(o),o=Ue(e),m(o));const u=n?i:s,h=n?s:i;Ve(o,t,{_chunkSteps:t=>{b((()=>{c=!1,l=!1;const s=n?d:p;if(n?p:d)s||Fe(u._readableStreamController,t);else{let n;try{n=ue(t)}catch(t){return Ie(u._readableStreamController,t),Ie(h._readableStreamController,t),void r(Sn(e,t))}s||Fe(u._readableStreamController,t),Oe(h._readableStreamController,n)}a=!1,c?w():l&&S()}))},_closeSteps:e=>{a=!1;const t=n?d:p,s=n?p:d;t||Me(u._readableStreamController),s||Me(h._readableStreamController),void 0!==e&&(t||Fe(u._readableStreamController,e),!s&&h._readableStreamController._pendingPullIntos.length>0&&Le(h._readableStreamController,0)),t&&s||r(void 0)},_errorSteps:()=>{a=!1}})}function w(){if(a)return c=!0,h(void 0);a=!0;const e=Be(s._readableStreamController);return null===e?v():y(e._view,!1),h(void 0)}function S(){if(a)return l=!0,h(void 0);a=!0;const e=Be(i._readableStreamController);return null===e?v():y(e._view,!0),h(void 0)}function x(){}return s=vn(x,w,(function(s){if(p=!0,t=s,d){const s=ae([t,n]),i=Sn(e,s);r(i)}return f})),i=vn(x,S,(function(s){if(d=!0,n=s,p){const s=ae([t,n]),i=Sn(e,s);r(i)}return f})),m(o),[s,i]}(e):function(e,t){const n=H(e);let s,i,r,o,a,c=!1,l=!1,p=!1,d=!1;const f=u((e=>{a=e}));function m(){return c?(l=!0,h(void 0)):(c=!0,X(n,{_chunkSteps:e=>{b((()=>{l=!1;const t=e,n=e;p||nn(r._readableStreamController,t),d||nn(o._readableStreamController,n),c=!1,l&&m()}))},_closeSteps:()=>{c=!1,p||tn(r._readableStreamController),d||tn(o._readableStreamController),p&&d||a(void 0)},_errorSteps:()=>{c=!1}}),h(void 0))}function v(){}return r=gn(v,m,(function(t){if(p=!0,s=t,d){const t=ae([s,i]),n=Sn(e,t);a(n)}return f})),o=gn(v,m,(function(t){if(d=!0,i=t,p){const t=ae([s,i]),n=Sn(e,t);a(n)}return f})),g(n._closedPromise,(e=>{sn(r._readableStreamController,e),sn(o._readableStreamController,e),p&&d||a(void 0)})),[r,o]}(e));var e}values(e){if(!bn(this))throw Cn("values");return function(e,t){const n=H(e),s=new ne(n,t),i=Object.create(se);return i._asyncIteratorImpl=s,i}(this,function(e,t){F(e,"First parameter");const n=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(n)}}(e).preventCancel)}}function gn(e,t,n,s=1,i=(()=>1)){const r=Object.create(mn.prototype);return yn(r),an(r,Object.create(Yt.prototype),e,t,n,s,i),r}function vn(e,t,n){const s=Object.create(mn.prototype);return yn(s),je(s,Object.create(me.prototype),e,t,n,0,void 0),s}function yn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function bn(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof mn}function wn(e){return void 0!==e._reader}function Sn(e,t){if(e._disturbed=!0,"closed"===e._state)return h(void 0);if("errored"===e._state)return p(e._storedError);xn(e);const s=e._reader;return void 0!==s&&He(s)&&(s._readIntoRequests.forEach((e=>{e._closeSteps(void 0)})),s._readIntoRequests=new x),v(e._readableStreamController[I](t),n)}function xn(e){e._state="closed";const t=e._reader;void 0!==t&&(A(t),Z(t)&&(t._readRequests.forEach((e=>{e._closeSteps()})),t._readRequests=new x))}function En(e,t){e._state="errored",e._storedError=t;const n=e._reader;void 0!==n&&(k(n,t),Z(n)?(n._readRequests.forEach((e=>{e._errorSteps(t)})),n._readRequests=new x):(n._readIntoRequests.forEach((e=>{e._errorSteps(t)})),n._readIntoRequests=new x))}function Cn(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Tn(e,t){F(e,t);const n=null==e?void 0:e.highWaterMark;return U(n,"highWaterMark","QueuingStrategyInit"),{highWaterMark:$(n)}}Object.defineProperties(mn.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(mn.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof t.asyncIterator&&Object.defineProperty(mn.prototype,t.asyncIterator,{value:mn.prototype.values,writable:!0,configurable:!0});const Rn=e=>e.byteLength;try{Object.defineProperty(Rn,"name",{value:"size",configurable:!0})}catch(e){}class _n{constructor(e){N(e,1,"ByteLengthQueuingStrategy"),e=Tn(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!kn(this))throw Pn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!kn(this))throw Pn("size");return Rn}}function Pn(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function kn(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof _n}Object.defineProperties(_n.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(_n.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const An=()=>1;try{Object.defineProperty(An,"name",{value:"size",configurable:!0})}catch(e){}class Mn{constructor(e){N(e,1,"CountQueuingStrategy"),e=Tn(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!In(this))throw On("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!In(this))throw On("size");return An}}function On(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function In(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof Mn}function Bn(e,t,n){return j(e,n),n=>S(e,t,[n])}function qn(e,t,n){return j(e,n),n=>w(e,t,[n])}function Ln(e,t,n){return j(e,n),(n,s)=>S(e,t,[n,s])}Object.defineProperties(Mn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Mn.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class Fn{constructor(e={},t={},n={}){void 0===e&&(e=null);const s=Qe(t,"Second parameter"),i=Qe(n,"Third parameter"),r=function(e,t){F(e,t);const n=null==e?void 0:e.flush,s=null==e?void 0:e.readableType,i=null==e?void 0:e.start,r=null==e?void 0:e.transform,o=null==e?void 0:e.writableType;return{flush:void 0===n?void 0:Bn(n,e,`${t} has member 'flush' that`),readableType:s,start:void 0===i?void 0:qn(i,e,`${t} has member 'start' that`),transform:void 0===r?void 0:Ln(r,e,`${t} has member 'transform' that`),writableType:o}}(e,"First parameter");if(void 0!==r.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==r.writableType)throw new RangeError("Invalid writableType specified");const o=Je(i,0),a=Ye(i),c=Je(s,1),l=Ye(s);let d;!function(e,t,n,s,i,r){function o(){return t}e._writable=function(e,t,n,s,i=1,r=(()=>1)){const o=Object.create(rt.prototype);return at(o),_t(o,Object.create(Tt.prototype),e,t,n,s,i,r),o}(o,(function(t){return function(e,t){const n=e._transformStreamController;return e._backpressure?v(e._backpressureChangePromise,(()=>{const s=e._writable;if("erroring"===s._state)throw s._storedError;return Hn(n,t)})):Hn(n,t)}(e,t)}),(function(){return function(e){const t=e._readable,n=e._transformStreamController,s=n._flushAlgorithm();return Kn(n),v(s,(()=>{if("errored"===t._state)throw t._storedError;tn(t._readableStreamController)}),(n=>{throw Dn(e,n),t._storedError}))}(e)}),(function(t){return function(e,t){return Dn(e,t),h(void 0)}(e,t)}),n,s),e._readable=gn(o,(function(){return function(e){return Un(e,!1),e._backpressureChangePromise}(e)}),(function(t){return Nn(e,t),h(void 0)}),i,r),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Un(e,!0),e._transformStreamController=void 0}(this,u((e=>{d=e})),c,l,o,a),function(e,t){const n=Object.create($n.prototype);let s=e=>{try{return Wn(n,e),h(void 0)}catch(e){return p(e)}},i=()=>h(void 0);void 0!==t.transform&&(s=e=>t.transform(e,n)),void 0!==t.flush&&(i=()=>t.flush(n)),function(e,t,n,s){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=n,t._flushAlgorithm=s}(e,n,s,i)}(this,r),void 0!==r.start?d(r.start(this._transformStreamController)):d(void 0)}get readable(){if(!jn(this))throw Gn("readable");return this._readable}get writable(){if(!jn(this))throw Gn("writable");return this._writable}}function jn(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Fn}function Dn(e,t){sn(e._readable._readableStreamController,t),Nn(e,t)}function Nn(e,t){Kn(e._transformStreamController),Mt(e._writable._writableStreamController,t),e._backpressure&&Un(e,!1)}function Un(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=u((t=>{e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(Fn.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Fn.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});class $n{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!zn(this))throw Vn("desiredSize");return rn(this._controlledTransformStream._readable._readableStreamController)}enqueue(e){if(!zn(this))throw Vn("enqueue");Wn(this,e)}error(e){if(!zn(this))throw Vn("error");var t;t=e,Dn(this._controlledTransformStream,t)}terminate(){if(!zn(this))throw Vn("terminate");!function(e){const t=e._controlledTransformStream;tn(t._readable._readableStreamController);Nn(t,new TypeError("TransformStream terminated"))}(this)}}function zn(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof $n}function Kn(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Wn(e,t){const n=e._controlledTransformStream,s=n._readable._readableStreamController;if(!on(s))throw new TypeError("Readable side is not in a state that permits enqueue");try{nn(s,t)}catch(e){throw Nn(n,e),n._readable._storedError}const i=function(e){return!Xt(e)}(s);i!==n._backpressure&&Un(n,!0)}function Hn(e,t){return v(e._transformAlgorithm(t),void 0,(t=>{throw Dn(e._controlledTransformStream,t),t}))}function Vn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Gn(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties($n.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty($n.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=_n,e.CountQueuingStrategy=Mn,e.ReadableByteStreamController=me,e.ReadableStream=mn,e.ReadableStreamBYOBReader=We,e.ReadableStreamBYOBRequest=fe,e.ReadableStreamDefaultController=Yt,e.ReadableStreamDefaultReader=Q,e.TransformStream=Fn,e.TransformStreamDefaultController=$n,e.WritableStream=rt,e.WritableStreamDefaultController=Tt,e.WritableStreamDefaultWriter=yt,Object.defineProperty(e,"__esModule",{value:!0})},n(t)},8766:(e,t,n)=>{e.exports=n(5729)},9168:e=>{var t={disableWarnings:!1,deprecationWarningMap:{},warn:function(e){!this.disableWarnings&&this.deprecationWarningMap[e]&&(console.warn("DEPRECATION WARNING: "+this.deprecationWarningMap[e]),this.deprecationWarningMap[e]=!1)}};e.exports=t},348:(e,t,n)=>{var s=n(2339),i=n(901),r=n(1334);const o=0,a=1,c=2,l=3;function u(e,t,n,i,a,c){r.EventTarget.call(this),(c=c||{}).assembleFragments=!0;var l=this;this._url=e,this._readyState=o,this._protocol=void 0,this._extensions="",this._bufferedAmount=0,this._binaryType="arraybuffer",this._connection=void 0,this._client=new s(c),this._client.on("connect",(function(e){d.call(l,e)})),this._client.on("connectFailed",(function(){f.call(l)})),this._client.connect(e,t,n,i,a)}function h(e,t){var n=new r.Event("close");return n.code=e,n.reason=t,n.wasClean=void 0===e||1e3===e,n}function p(e){var t=new r.Event("message");return t.data=e,t}function d(e){var t=this;this._readyState=a,this._connection=e,this._protocol=e.protocol,this._extensions=e.extensions,this._connection.on("close",(function(e,n){m.call(t,e,n)})),this._connection.on("message",(function(e){g.call(t,e)})),this.dispatchEvent(new r.Event("open"))}function f(){v.call(this),this._readyState=l;try{this.dispatchEvent(new r.Event("error"))}finally{this.dispatchEvent(h(1006,"connection failed"))}}function m(e,t){v.call(this),this._readyState=l,this.dispatchEvent(h(e,t||""))}function g(e){if(e.utf8Data)this.dispatchEvent(p(e.utf8Data));else if(e.binaryData&&"arraybuffer"===this.binaryType){for(var t=e.binaryData,n=new ArrayBuffer(t.length),s=new Uint8Array(n),i=0,r=t.length;i<r;++i)s[i]=t[i];this.dispatchEvent(p(n))}}function v(){this._client.removeAllListeners(),this._connection&&this._connection.removeAllListeners()}e.exports=u,Object.defineProperties(u.prototype,{url:{get:function(){return this._url}},readyState:{get:function(){return this._readyState}},protocol:{get:function(){return this._protocol}},extensions:{get:function(){return this._extensions}},bufferedAmount:{get:function(){return this._bufferedAmount}}}),Object.defineProperties(u.prototype,{binaryType:{get:function(){return this._binaryType},set:function(e){if("arraybuffer"!==e)throw new SyntaxError('just "arraybuffer" type allowed for "binaryType" attribute');this._binaryType=e}}}),[["CONNECTING",o],["OPEN",a],["CLOSING",c],["CLOSED",l]].forEach((function(e){Object.defineProperty(u.prototype,e[0],{get:function(){return e[1]}})})),[["CONNECTING",o],["OPEN",a],["CLOSING",c],["CLOSED",l]].forEach((function(e){Object.defineProperty(u,e[0],{get:function(){return e[1]}})})),u.prototype.send=function(e){if(this._readyState!==a)throw new Error("cannot call send() while not connected");if("string"==typeof e||e instanceof String)this._connection.sendUTF(e);else if(e instanceof Buffer)this._connection.sendBytes(e);else{if(!e.byteLength&&0!==e.byteLength)throw new Error("unknown binary data:",e);e=i(e),this._connection.sendBytes(e)}},u.prototype.close=function(e,t){switch(this._readyState){case o:f.call(this),this._client.on("connect",(function(n){e?n.close(e,t):n.close()}));break;case a:this._readyState=c,e?this._connection.close(e,t):this._connection.close()}}},2339:(e,t,n)=>{var s=n(144),i=s.extend,r=n(3837),o=n(2361).EventEmitter,a=n(3685),c=n(5687),l=n(7310),u=n(6113),h=n(4016),p=s.bufferAllocUnsafe,d=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ",String.fromCharCode(9)],f=["hostname","port","method","path","headers"];function m(e){var t;switch(o.call(this),this.config={maxReceivedFrameSize:1048576,maxReceivedMessageSize:8388608,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,webSocketVersion:13,assembleFragments:!0,disableNagleAlgorithm:!0,closeTimeout:5e3,tlsOptions:{}},e&&(e.tlsOptions?(t=e.tlsOptions,delete e.tlsOptions):t={},i(this.config,e),i(this.config.tlsOptions,t)),this._req=null,this.config.webSocketVersion){case 8:case 13:break;default:throw new Error("Requested webSocketVersion is not supported. Allowed values are 8 and 13.")}}r.inherits(m,o),m.prototype.connect=function(e,t,n,r,o){var u=this;if("string"==typeof t&&(t=t.length>0?[t]:[]),t instanceof Array||(t=[]),this.protocols=t,this.origin=n,this.url="string"==typeof e?l.parse(e):e,!this.url.protocol)throw new Error("You must specify a full WebSocket URL, including protocol.");if(!this.url.host)throw new Error("You must specify a full WebSocket URL, including hostname. Relative URLs are not supported.");this.secure="wss:"===this.url.protocol,this.protocols.forEach((function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t),s=e.charAt(t);if(n<33||n>126||-1!==d.indexOf(s))throw new Error('Protocol list contains invalid character "'+String.fromCharCode(n)+'"')}})),this.url.port||(this.url.port={"ws:":"80","wss:":"443"}[this.url.protocol]);for(var h=p(16),m=0;m<16;m++)h[m]=Math.round(255*Math.random());this.base64nonce=h.toString("base64");var g=this.url.hostname;("ws:"===this.url.protocol&&"80"!==this.url.port||"wss:"===this.url.protocol&&"443"!==this.url.port)&&(g+=":"+this.url.port);var v,y={};function b(e){u._req=null,u.emit("connectFailed",e)}this.secure&&this.config.tlsOptions.hasOwnProperty("headers")&&i(y,this.config.tlsOptions.headers),r&&i(y,r),i(y,{Upgrade:"websocket",Connection:"Upgrade","Sec-WebSocket-Version":this.config.webSocketVersion.toString(10),"Sec-WebSocket-Key":this.base64nonce,Host:y.Host||g}),this.protocols.length>0&&(y["Sec-WebSocket-Protocol"]=this.protocols.join(", ")),this.origin&&(13===this.config.webSocketVersion?y.Origin=this.origin:8===this.config.webSocketVersion&&(y["Sec-WebSocket-Origin"]=this.origin)),v=this.url.pathname?this.url.path:this.url.path?"/"+this.url.path:"/";var w={agent:!1};if(o&&i(w,o),i(w,{hostname:this.url.hostname,port:this.url.port,method:"GET",path:v,headers:y}),this.secure){var S=this.config.tlsOptions;for(var x in S)S.hasOwnProperty(x)&&-1===f.indexOf(x)&&(w[x]=S[x])}var E=this._req=(this.secure?c:a).request(w);E.on("upgrade",(function(e,t,n){u._req=null,E.removeListener("error",b),u.socket=t,u.response=e,u.firstDataChunk=n,u.validateHandshake()})),E.on("error",b),E.on("response",(function(e){if(u._req=null,s.eventEmitterListenerCount(u,"httpResponse")>0)u.emit("httpResponse",e,u),e.socket&&e.socket.end();else{var t=[];for(var n in e.headers)t.push(n+": "+e.headers[n]);u.failHandshake("Server responded with a non-101 status: "+e.statusCode+" "+e.statusMessage+"\nResponse Headers Follow:\n"+t.join("\n")+"\n")}})),E.end()},m.prototype.validateHandshake=function(){var e=this.response.headers;if(this.protocols.length>0){if(this.protocol=e["sec-websocket-protocol"],!this.protocol)return void this.failHandshake("Expected a Sec-WebSocket-Protocol header.");if(-1===this.protocols.indexOf(this.protocol))return void this.failHandshake("Server did not respond with a requested protocol.")}if(e.connection&&"upgrade"===e.connection.toLocaleLowerCase())if(e.upgrade&&"websocket"===e.upgrade.toLocaleLowerCase()){var t=u.createHash("sha1");t.update(this.base64nonce+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var n=t.digest("base64");e["sec-websocket-accept"]?e["sec-websocket-accept"]===n?this.succeedHandshake():this.failHandshake("Sec-WebSocket-Accept header from server didn't match expected value of "+n):this.failHandshake("Expected Sec-WebSocket-Accept header from server")}else this.failHandshake("Expected an Upgrade: websocket header from the server");else this.failHandshake("Expected a Connection: Upgrade header from the server")},m.prototype.failHandshake=function(e){this.socket&&this.socket.writable&&this.socket.end(),this.emit("connectFailed",new Error(e))},m.prototype.succeedHandshake=function(){var e=new h(this.socket,[],this.protocol,!0,this.config);e.webSocketVersion=this.config.webSocketVersion,e._addSocketEventListeners(),this.emit("connect",e),this.firstDataChunk.length>0&&e.handleSocketData(this.firstDataChunk),this.firstDataChunk=null},m.prototype.abort=function(){this._req&&this._req.abort()},e.exports=m},4016:(e,t,n)=>{var s=n(3837),i=n(144),r=n(2361).EventEmitter,o=n(347),a=n(8452),c=n(3682),l=i.bufferAllocUnsafe,u=i.bufferFromString;const h="open",p="peer_requested_close",d="ending",f="closed";var m="setImmediate"in global?global.setImmediate.bind(global):process.nextTick.bind(process),g=0;function v(e,t,n,s,c){if(this._debug=i.BufferingLogger("websocket:connection",++g),this._debug("constructor"),this._debug.enabled&&function(e,t){if(e._debug.enabled){var n=t.emit;for(var s in t.emit=function(t){e._debug("||| Socket Event  '%s'",t),n.apply(this,arguments)},t)"function"==typeof t[s]&&-1===["emit"].indexOf(s)&&function(n){var s=t[n];t[n]="on"!==n?function(){return e._debug("||| Socket method called:  %s",n),s.apply(this,arguments)}:function(){return e._debug("||| Socket method called:  %s (%s)",n,arguments[0]),s.apply(this,arguments)}}(s)}}(this,e),r.call(this),this._pingListenerCount=0,this.on("newListener",(function(e){"ping"===e&&this._pingListenerCount++})).on("removeListener",(function(e){"ping"===e&&this._pingListenerCount--})),this.config=c,this.socket=e,this.protocol=n,this.extensions=t,this.remoteAddress=e.remoteAddress,this.closeReasonCode=-1,this.closeDescription=null,this.closeEventEmitted=!1,this.maskOutgoingPackets=s,this.maskBytes=l(4),this.frameHeader=l(10),this.bufferList=new a,this.currentFrame=new o(this.maskBytes,this.frameHeader,this.config),this.fragmentationSize=0,this.frameQueue=[],this.connected=!0,this.state=h,this.waitingForCloseResponse=!1,this.receivedEnd=!1,this.closeTimeout=this.config.closeTimeout,this.assembleFragments=this.config.assembleFragments,this.maxReceivedMessageSize=this.config.maxReceivedMessageSize,this.outputBufferFull=!1,this.inputPaused=!1,this.receivedDataHandler=this.processReceivedData.bind(this),this._closeTimerHandler=this.handleCloseTimer.bind(this),this.socket.setNoDelay(this.config.disableNagleAlgorithm),this.socket.setTimeout(0),this.config.keepalive&&!this.config.useNativeKeepalive){if("number"!=typeof this.config.keepaliveInterval)throw new Error("keepaliveInterval must be specified and numeric if keepalive is true.");if(this._keepaliveTimerHandler=this.handleKeepaliveTimer.bind(this),this.setKeepaliveTimer(),this.config.dropConnectionOnKeepaliveTimeout){if("number"!=typeof this.config.keepaliveGracePeriod)throw new Error("keepaliveGracePeriod  must be specified and numeric if dropConnectionOnKeepaliveTimeout is true.");this._gracePeriodTimerHandler=this.handleGracePeriodTimer.bind(this)}}else if(this.config.keepalive&&this.config.useNativeKeepalive){if(!("setKeepAlive"in this.socket))throw new Error("Unable to use native keepalive: unsupported by this version of Node.");this.socket.setKeepAlive(!0,this.config.keepaliveInterval)}this.socket.removeAllListeners("error")}function y(e){return!(e<1e3)&&(e>=1e3&&e<=2999?-1!==[1e3,1001,1002,1003,1007,1008,1009,1010,1011,1012,1013,1014,1015].indexOf(e):e>=3e3&&e<=3999||e>=4e3&&e<=4999||!(e>=5e3)&&void 0)}v.CLOSE_REASON_NORMAL=1e3,v.CLOSE_REASON_GOING_AWAY=1001,v.CLOSE_REASON_PROTOCOL_ERROR=1002,v.CLOSE_REASON_UNPROCESSABLE_INPUT=1003,v.CLOSE_REASON_RESERVED=1004,v.CLOSE_REASON_NOT_PROVIDED=1005,v.CLOSE_REASON_ABNORMAL=1006,v.CLOSE_REASON_INVALID_DATA=1007,v.CLOSE_REASON_POLICY_VIOLATION=1008,v.CLOSE_REASON_MESSAGE_TOO_BIG=1009,v.CLOSE_REASON_EXTENSION_REQUIRED=1010,v.CLOSE_REASON_INTERNAL_SERVER_ERROR=1011,v.CLOSE_REASON_TLS_HANDSHAKE_FAILED=1015,v.CLOSE_DESCRIPTIONS={1e3:"Normal connection closure",1001:"Remote peer is going away",1002:"Protocol error",1003:"Unprocessable input",1004:"Reserved",1005:"Reason not provided",1006:"Abnormal closure, no further detail available",1007:"Invalid data received",1008:"Policy violation",1009:"Message too big",1010:"Extension requested by client is required",1011:"Internal Server Error",1015:"TLS Handshake Failed"},s.inherits(v,r),v.prototype._addSocketEventListeners=function(){this.socket.on("error",this.handleSocketError.bind(this)),this.socket.on("end",this.handleSocketEnd.bind(this)),this.socket.on("close",this.handleSocketClose.bind(this)),this.socket.on("drain",this.handleSocketDrain.bind(this)),this.socket.on("pause",this.handleSocketPause.bind(this)),this.socket.on("resume",this.handleSocketResume.bind(this)),this.socket.on("data",this.handleSocketData.bind(this))},v.prototype.setKeepaliveTimer=function(){this._debug("setKeepaliveTimer"),this.config.keepalive&&!this.config.useNativeKeepalive&&(this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this._keepaliveTimeoutID=setTimeout(this._keepaliveTimerHandler,this.config.keepaliveInterval))},v.prototype.clearKeepaliveTimer=function(){this._keepaliveTimeoutID&&clearTimeout(this._keepaliveTimeoutID)},v.prototype.handleKeepaliveTimer=function(){this._debug("handleKeepaliveTimer"),this._keepaliveTimeoutID=null,this.ping(),this.config.dropConnectionOnKeepaliveTimeout?this.setGracePeriodTimer():this.setKeepaliveTimer()},v.prototype.setGracePeriodTimer=function(){this._debug("setGracePeriodTimer"),this.clearGracePeriodTimer(),this._gracePeriodTimeoutID=setTimeout(this._gracePeriodTimerHandler,this.config.keepaliveGracePeriod)},v.prototype.clearGracePeriodTimer=function(){this._gracePeriodTimeoutID&&clearTimeout(this._gracePeriodTimeoutID)},v.prototype.handleGracePeriodTimer=function(){this._debug("handleGracePeriodTimer"),this._gracePeriodTimeoutID=null,this.drop(v.CLOSE_REASON_ABNORMAL,"Peer not responding.",!0)},v.prototype.handleSocketData=function(e){this._debug("handleSocketData"),this.setKeepaliveTimer(),this.bufferList.write(e),this.processReceivedData()},v.prototype.processReceivedData=function(){if(this._debug("processReceivedData"),this.connected&&!this.inputPaused){var e=this.currentFrame;if(e.addData(this.bufferList)){var t=this;if(e.protocolError)return this._debug("-- protocol error"),void process.nextTick((function(){t.drop(v.CLOSE_REASON_PROTOCOL_ERROR,e.dropReason)}));if(e.frameTooLarge)return this._debug("-- frame too large"),void process.nextTick((function(){t.drop(v.CLOSE_REASON_MESSAGE_TOO_BIG,e.dropReason)}));if(e.rsv1||e.rsv2||e.rsv3)return this._debug("-- illegal rsv flag"),void process.nextTick((function(){t.drop(v.CLOSE_REASON_PROTOCOL_ERROR,"Unsupported usage of rsv bits without negotiated extension.")}));this.assembleFragments||(this._debug("-- emitting frame"),process.nextTick((function(){t.emit("frame",e)}))),process.nextTick((function(){t.processFrame(e)})),this.currentFrame=new o(this.maskBytes,this.frameHeader,this.config),this.bufferList.length>0&&m(this.receivedDataHandler)}else this._debug("-- insufficient data for frame")}},v.prototype.handleSocketError=function(e){this._debug("handleSocketError: %j",e),this.state!==f?(this.closeReasonCode=v.CLOSE_REASON_ABNORMAL,this.closeDescription="Socket Error: "+e.syscall+" "+e.code,this.connected=!1,this.state=f,this.fragmentationSize=0,i.eventEmitterListenerCount(this,"error")>0&&this.emit("error",e),this.socket.destroy(),this._debug.printOutput()):this._debug("  --- Socket 'error' after 'close'")},v.prototype.handleSocketEnd=function(){this._debug("handleSocketEnd: received socket end.  state = %s",this.state),this.receivedEnd=!0,this.state!==f?this.state!==p&&this.state!==d&&(this._debug("  --- UNEXPECTED socket end."),this.socket.end()):this._debug("  --- Socket 'end' after 'close'")},v.prototype.handleSocketClose=function(e){this._debug("handleSocketClose: received socket close"),this.socketHadError=e,this.connected=!1,this.state=f,-1===this.closeReasonCode&&(this.closeReasonCode=v.CLOSE_REASON_ABNORMAL,this.closeDescription="Connection dropped by remote peer."),this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("-- Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription))},v.prototype.handleSocketDrain=function(){this._debug("handleSocketDrain: socket drain event"),this.outputBufferFull=!1,this.emit("drain")},v.prototype.handleSocketPause=function(){this._debug("handleSocketPause: socket pause event"),this.inputPaused=!0,this.emit("pause")},v.prototype.handleSocketResume=function(){this._debug("handleSocketResume: socket resume event"),this.inputPaused=!1,this.emit("resume"),this.processReceivedData()},v.prototype.pause=function(){this._debug("pause: pause requested"),this.socket.pause()},v.prototype.resume=function(){this._debug("resume: resume requested"),this.socket.resume()},v.prototype.close=function(e,t){if(this.connected){if(this._debug("close: Initating clean WebSocket close sequence."),"number"!=typeof e&&(e=v.CLOSE_REASON_NORMAL),!y(e))throw new Error("Close code "+e+" is not valid.");"string"!=typeof t&&(t=v.CLOSE_DESCRIPTIONS[e]),this.closeReasonCode=e,this.closeDescription=t,this.setCloseTimer(),this.sendCloseFrame(this.closeReasonCode,this.closeDescription),this.state=d,this.connected=!1}},v.prototype.drop=function(e,t,n){this._debug("drop"),"number"!=typeof e&&(e=v.CLOSE_REASON_PROTOCOL_ERROR),"string"!=typeof t&&(t=v.CLOSE_DESCRIPTIONS[e]),this._debug("Forcefully dropping connection. skipCloseFrame: %s, code: %d, description: %s",n,e,t),this.closeReasonCode=e,this.closeDescription=t,this.frameQueue=[],this.fragmentationSize=0,n||this.sendCloseFrame(e,t),this.connected=!1,this.state=f,this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription)),this._debug("Drop: destroying socket"),this.socket.destroy()},v.prototype.setCloseTimer=function(){this._debug("setCloseTimer"),this.clearCloseTimer(),this._debug("Setting close timer"),this.waitingForCloseResponse=!0,this.closeTimer=setTimeout(this._closeTimerHandler,this.closeTimeout)},v.prototype.clearCloseTimer=function(){this._debug("clearCloseTimer"),this.closeTimer&&(this._debug("Clearing close timer"),clearTimeout(this.closeTimer),this.waitingForCloseResponse=!1,this.closeTimer=null)},v.prototype.handleCloseTimer=function(){this._debug("handleCloseTimer"),this.closeTimer=null,this.waitingForCloseResponse&&(this._debug("Close response not received from client.  Forcing socket end."),this.waitingForCloseResponse=!1,this.state=f,this.socket.end())},v.prototype.processFrame=function(e){if(this._debug("processFrame"),this._debug(" -- frame: %s",e),0!==this.frameQueue.length&&e.opcode>0&&e.opcode<8)this.drop(v.CLOSE_REASON_PROTOCOL_ERROR,"Illegal frame opcode 0x"+e.opcode.toString(16)+" received in middle of fragmented message.");else switch(e.opcode){case 2:this._debug("-- Binary Frame"),this.assembleFragments&&(e.fin?(this._debug("---- Emitting 'message' event"),this.emit("message",{type:"binary",binaryData:e.binaryPayload})):(this.frameQueue.push(e),this.fragmentationSize=e.length));break;case 1:if(this._debug("-- Text Frame"),this.assembleFragments)if(e.fin){if(!c(e.binaryPayload))return void this.drop(v.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this._debug("---- Emitting 'message' event"),this.emit("message",{type:"utf8",utf8Data:e.binaryPayload.toString("utf8")})}else this.frameQueue.push(e),this.fragmentationSize=e.length;break;case 0:if(this._debug("-- Continuation Frame"),this.assembleFragments){if(0===this.frameQueue.length)return void this.drop(v.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected Continuation Frame");if(this.fragmentationSize+=e.length,this.fragmentationSize>this.maxReceivedMessageSize)return void this.drop(v.CLOSE_REASON_MESSAGE_TOO_BIG,"Maximum message size exceeded.");if(this.frameQueue.push(e),e.fin){var t=0,n=l(this.fragmentationSize),s=this.frameQueue[0].opcode;switch(this.frameQueue.forEach((function(e){e.binaryPayload.copy(n,t),t+=e.binaryPayload.length})),this.frameQueue=[],this.fragmentationSize=0,s){case 2:this.emit("message",{type:"binary",binaryData:n});break;case 1:if(!c(n))return void this.drop(v.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this.emit("message",{type:"utf8",utf8Data:n.toString("utf8")});break;default:return void this.drop(v.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected first opcode in fragmentation sequence: 0x"+s.toString(16))}}}break;case 9:if(this._debug("-- Ping Frame"),this._pingListenerCount>0){var i=!1;this.emit("ping",(function(){i=!0}),e.binaryPayload),i||this.pong(e.binaryPayload)}else this.pong(e.binaryPayload);break;case 10:this._debug("-- Pong Frame"),this.emit("pong",e.binaryPayload);break;case 8:if(this._debug("-- Close Frame"),this.waitingForCloseResponse)return this._debug("---- Got close response from peer.  Completing closing handshake."),this.clearCloseTimer(),this.waitingForCloseResponse=!1,this.state=f,void this.socket.end();var r;if(this._debug("---- Closing handshake initiated by peer."),this.state=p,e.invalidCloseFrameLength?(this.closeReasonCode=1005,r=v.CLOSE_REASON_PROTOCOL_ERROR):-1===e.closeStatus||y(e.closeStatus)?(this.closeReasonCode=e.closeStatus,r=v.CLOSE_REASON_NORMAL):(this.closeReasonCode=e.closeStatus,r=v.CLOSE_REASON_PROTOCOL_ERROR),e.binaryPayload.length>1){if(!c(e.binaryPayload))return void this.drop(v.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this.closeDescription=e.binaryPayload.toString("utf8")}else this.closeDescription=v.CLOSE_DESCRIPTIONS[this.closeReasonCode];this._debug("------ Remote peer %s - code: %d - %s - close frame payload length: %d",this.remoteAddress,this.closeReasonCode,this.closeDescription,e.length),this._debug("------ responding to remote peer's close request."),this.sendCloseFrame(r,null),this.connected=!1;break;default:this._debug("-- Unrecognized Opcode %d",e.opcode),this.drop(v.CLOSE_REASON_PROTOCOL_ERROR,"Unrecognized Opcode: 0x"+e.opcode.toString(16))}},v.prototype.send=function(e,t){if(this._debug("send"),Buffer.isBuffer(e))this.sendBytes(e,t);else{if("function"!=typeof e.toString)throw new Error("Data provided must either be a Node Buffer or implement toString()");this.sendUTF(e,t)}},v.prototype.sendUTF=function(e,t){e=u(e.toString(),"utf8"),this._debug("sendUTF: %d bytes",e.length);var n=new o(this.maskBytes,this.frameHeader,this.config);n.opcode=1,n.binaryPayload=e,this.fragmentAndSend(n,t)},v.prototype.sendBytes=function(e,t){if(this._debug("sendBytes"),!Buffer.isBuffer(e))throw new Error("You must pass a Node Buffer object to WebSocketConnection.prototype.sendBytes()");var n=new o(this.maskBytes,this.frameHeader,this.config);n.opcode=2,n.binaryPayload=e,this.fragmentAndSend(n,t)},v.prototype.ping=function(e){this._debug("ping");var t=new o(this.maskBytes,this.frameHeader,this.config);t.opcode=9,t.fin=!0,e&&(Buffer.isBuffer(e)||(e=u(e.toString(),"utf8")),e.length>125&&(this._debug("WebSocket: Data for ping is longer than 125 bytes.  Truncating."),e=e.slice(0,124)),t.binaryPayload=e),this.sendFrame(t)},v.prototype.pong=function(e){this._debug("pong");var t=new o(this.maskBytes,this.frameHeader,this.config);t.opcode=10,Buffer.isBuffer(e)&&e.length>125&&(this._debug("WebSocket: Data for pong is longer than 125 bytes.  Truncating."),e=e.slice(0,124)),t.binaryPayload=e,t.fin=!0,this.sendFrame(t)},v.prototype.fragmentAndSend=function(e,t){if(this._debug("fragmentAndSend"),e.opcode>7)throw new Error("You cannot fragment control frames.");var n=this.config.fragmentationThreshold,s=e.binaryPayload.length;if(!this.config.fragmentOutgoingMessages||e.binaryPayload&&s<=n)return e.fin=!0,void this.sendFrame(e,t);for(var i=Math.ceil(s/n),r=0,a=function(e){e?"function"==typeof t&&(t(e),t=null):++r===i&&"function"==typeof t&&t()},c=1;c<=i;c++){var l=new o(this.maskBytes,this.frameHeader,this.config);l.opcode=1===c?e.opcode:0,l.fin=c===i;var u=c===i?s-n*(c-1):n,h=n*(c-1);l.binaryPayload=e.binaryPayload.slice(h,h+u),this.sendFrame(l,a)}},v.prototype.sendCloseFrame=function(e,t,n){if("number"!=typeof e&&(e=v.CLOSE_REASON_NORMAL),this._debug("sendCloseFrame state: %s, reasonCode: %d, description: %s",this.state,e,t),this.state===h||this.state===p){var s=new o(this.maskBytes,this.frameHeader,this.config);s.fin=!0,s.opcode=8,s.closeStatus=e,"string"==typeof t&&(s.binaryPayload=u(t,"utf8")),this.sendFrame(s,n),this.socket.end()}},v.prototype.sendFrame=function(e,t){this._debug("sendFrame"),e.mask=this.maskOutgoingPackets;var n=this.socket.write(e.toBuffer(),t);return this.outputBufferFull=!n,n},e.exports=v},347:(e,t,n)=>{var s=n(848),i=n(144).bufferAllocUnsafe;function r(e,t,n){this.maskBytes=e,this.frameHeader=t,this.config=n,this.maxReceivedFrameSize=n.maxReceivedFrameSize,this.protocolError=!1,this.frameTooLarge=!1,this.invalidCloseFrameLength=!1,this.parseState=1,this.closeStatus=-1}r.prototype.addData=function(e){if(1===this.parseState&&e.length>=2){e.joinInto(this.frameHeader,0,0,2),e.advance(2);var t=this.frameHeader[0],n=this.frameHeader[1];if(this.fin=Boolean(128&t),this.rsv1=Boolean(64&t),this.rsv2=Boolean(32&t),this.rsv3=Boolean(16&t),this.mask=Boolean(128&n),this.opcode=15&t,this.length=127&n,this.opcode>=8){if(this.length>125)return this.protocolError=!0,this.dropReason="Illegal control frame longer than 125 bytes.",!0;if(!this.fin)return this.protocolError=!0,this.dropReason="Control frames must not be fragmented.",!0}126===this.length?this.parseState=2:127===this.length?this.parseState=3:this.parseState=4}if(2===this.parseState)e.length>=2&&(e.joinInto(this.frameHeader,2,0,2),e.advance(2),this.length=this.frameHeader.readUInt16BE(2),this.parseState=4);else if(3===this.parseState&&e.length>=8){e.joinInto(this.frameHeader,2,0,8),e.advance(8);var r=[this.frameHeader.readUInt32BE(2),this.frameHeader.readUInt32BE(6)];if(0!==r[0])return this.protocolError=!0,this.dropReason="Unsupported 64-bit length frame received",!0;this.length=r[1],this.parseState=4}if(4===this.parseState&&(this.mask?e.length>=4&&(e.joinInto(this.maskBytes,0,0,4),e.advance(4),this.parseState=5):this.parseState=5),5===this.parseState){if(this.length>this.maxReceivedFrameSize)return this.frameTooLarge=!0,this.dropReason="Frame size of "+this.length.toString(10)+" bytes exceeds maximum accepted frame size",!0;if(0===this.length)return this.binaryPayload=i(0),this.parseState=6,!0;if(e.length>=this.length)return this.binaryPayload=e.take(this.length),e.advance(this.length),this.mask&&s.unmask(this.binaryPayload,this.maskBytes),8===this.opcode&&(1===this.length&&(this.binaryPayload=i(0),this.invalidCloseFrameLength=!0),this.length>=2&&(this.closeStatus=this.binaryPayload.readUInt16BE(0),this.binaryPayload=this.binaryPayload.slice(2))),this.parseState=6,!0}return!1},r.prototype.throwAwayPayload=function(e){return e.length>=this.length&&(e.advance(this.length),this.parseState=6,!0)},r.prototype.toBuffer=function(e){var t,n,r,o=2,a=0,c=0;this.fin&&(a|=128),this.rsv1&&(a|=64),this.rsv2&&(a|=32),this.rsv3&&(a|=16),this.mask&&(c|=128),a|=15&this.opcode,8===this.opcode?(this.length=2,this.binaryPayload&&(this.length+=this.binaryPayload.length),(n=i(this.length)).writeUInt16BE(this.closeStatus,0),this.length>2&&this.binaryPayload.copy(n,2)):this.binaryPayload?(n=this.binaryPayload,this.length=n.length):this.length=0,this.length<=125?c|=127&this.length:this.length>125&&this.length<=65535?(c|=126,o+=2):this.length>65535&&(c|=127,o+=8);var l=i(this.length+o+(this.mask?4:0));return l[0]=a,l[1]=c,r=2,this.length>125&&this.length<=65535?(l.writeUInt16BE(this.length,r),r+=2):this.length>65535&&(l.writeUInt32BE(0,r),l.writeUInt32BE(this.length,r+4),r+=8),this.mask?(t=e?0:4294967295*Math.random()>>>0,this.maskBytes.writeUInt32BE(t,0),this.maskBytes.copy(l,r),r+=4,n&&s.mask(n,this.maskBytes,l,r,this.length)):n&&n.copy(l,r),l},r.prototype.toString=function(){return"Opcode: "+this.opcode+", fin: "+this.fin+", length: "+this.length+", hasPayload: "+Boolean(this.binaryPayload)+", masked: "+this.mask},e.exports=r},9332:(e,t,n)=>{for(var s=n(6113),i=n(3837),r=n(7310),o=n(2361).EventEmitter,a=n(4016),c=/,\s*/,l=/;\s*/,u=/[\r\n]/g,h=/,\s*/,p=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ",String.fromCharCode(9)],d=[String.fromCharCode(127)],f=0;f<31;f++)d.push(String.fromCharCode(f));var m=/([\x00-\x20\x22\x28\x29\x2c\x2f\x3a-\x3f\x40\x5b-\x5e\x7b\x7d\x7f])/,g=/[^\x21\x23-\x2b\x2d-\x3a\x3c-\x5b\x5d-\x7e]/,v=/^"[^"]*"$/,y=/[\x00-\x20\x3b]/g,b=/[;,] */,w={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",406:"Not Acceptable",407:"Proxy Authorization Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Long",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};function S(e,t,n){o.call(this),this.socket=e,this.httpRequest=t,this.resource=t.url,this.remoteAddress=e.remoteAddress,this.remoteAddresses=[this.remoteAddress],this.serverConfig=n,this._socketIsClosing=!1,this._socketCloseHandler=this._handleSocketCloseBeforeAccept.bind(this),this.socket.on("end",this._socketCloseHandler),this.socket.on("close",this._socketCloseHandler),this._resolved=!1}function x(e){process.nextTick((function(){e.drop(1006,"TCP connection lost before handshake completed.",!0)}))}i.inherits(S,o),S.prototype.readHandshake=function(){var e=this,t=this.httpRequest;if(this.resourceURL=r.parse(this.resource,!0),this.host=t.headers.host,!this.host)throw new Error("Client must provide a Host header.");if(this.key=t.headers["sec-websocket-key"],!this.key)throw new Error("Client must provide a value for Sec-WebSocket-Key.");if(this.webSocketVersion=parseInt(t.headers["sec-websocket-version"],10),!this.webSocketVersion||isNaN(this.webSocketVersion))throw new Error("Client must provide a value for Sec-WebSocket-Version.");switch(this.webSocketVersion){case 8:case 13:break;default:var n=new Error("Unsupported websocket client version: "+this.webSocketVersion+"Only versions 8 and 13 are supported.");throw n.httpCode=426,n.headers={"Sec-WebSocket-Version":"13"},n}13===this.webSocketVersion?this.origin=t.headers.origin:8===this.webSocketVersion&&(this.origin=t.headers["sec-websocket-origin"]);var s=t.headers["sec-websocket-protocol"];if(this.protocolFullCaseMap={},this.requestedProtocols=[],s&&s.split(c).forEach((function(t){var n=t.toLocaleLowerCase();e.requestedProtocols.push(n),e.protocolFullCaseMap[n]=t})),!this.serverConfig.ignoreXForwardedFor&&t.headers["x-forwarded-for"]){var i=this.remoteAddress;this.remoteAddresses=t.headers["x-forwarded-for"].split(h),this.remoteAddresses.push(i),this.remoteAddress=this.remoteAddresses[0]}if(this.serverConfig.parseExtensions){var o=t.headers["sec-websocket-extensions"];this.requestedExtensions=this.parseExtensions(o)}else this.requestedExtensions=[];if(this.serverConfig.parseCookies){var a=t.headers.cookie;this.cookies=this.parseCookies(a)}else this.cookies=[]},S.prototype.parseExtensions=function(e){if(!e||0===e.length)return[];var t=e.toLocaleLowerCase().split(c);return t.forEach((function(e,t,n){var s=e.split(l),i=s[0],r=s.slice(1);r.forEach((function(e,t,n){var s=e.split("="),i={name:s[0],value:s[1]};n.splice(t,1,i)}));var o={name:i,params:r};n.splice(t,1,o)})),t},S.prototype.parseCookies=function(e){if(!e||"string"!=typeof e)return[];var t=[];return e.split(b).forEach((function(e){var n=e.indexOf("=");if(-1!==n){var s=e.substr(0,n).trim(),i=e.substr(++n,e.length).trim();'"'===i[0]&&(i=i.slice(1,-1)),t.push({name:s,value:decodeURIComponent(i)})}else t.push({name:e,value:null})})),t},S.prototype.accept=function(e,t,n){var i;this._verifyResolution(),e?void 0===(i=this.protocolFullCaseMap[e.toLocaleLowerCase()])&&(i=e):i=e,this.protocolFullCaseMap=null;var r=s.createHash("sha1");r.update(this.key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var o="HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: "+r.digest("base64")+"\r\n";if(i){for(var c=0;c<i.length;c++){var l=i.charCodeAt(c),h=i.charAt(c);if(l<33||l>126||-1!==p.indexOf(h))throw this.reject(500),new Error('Illegal character "'+String.fromCharCode(h)+'" in subprotocol.')}if(-1===this.requestedProtocols.indexOf(e))throw this.reject(500),new Error("Specified protocol was not requested by the client.");i=i.replace(u,""),o+="Sec-WebSocket-Protocol: "+i+"\r\n"}if(this.requestedProtocols=null,t&&(t=t.replace(u,""),13===this.webSocketVersion?o+="Origin: "+t+"\r\n":8===this.webSocketVersion&&(o+="Sec-WebSocket-Origin: "+t+"\r\n")),n){if(!Array.isArray(n))throw this.reject(500),new Error('Value supplied for "cookies" argument must be an array.');var d={};n.forEach(function(e){if(!e.name||!e.value)throw this.reject(500),new Error('Each cookie to set must at least provide a "name" and "value"');if(e.name=e.name.replace(y,""),e.value=e.value.replace(y,""),d[e.name])throw this.reject(500),new Error("You may not specify the same cookie name twice.");d[e.name]=!0;var t=e.name.match(m);if(t)throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie name");if(t=e.value.match(v)?e.value.slice(1,-1).match(g):e.value.match(g))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie value");var n=[e.name+"="+e.value];if(e.path){if(t=e.path.match(y))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie path");n.push("Path="+e.path)}if(e.domain){if("string"!=typeof e.domain)throw this.reject(500),new Error("Domain must be specified and must be a string.");if(t=e.domain.match(y))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie domain");n.push("Domain="+e.domain.toLowerCase())}if(e.expires){if(!(e.expires instanceof Date))throw this.reject(500),new Error('Value supplied for cookie "expires" must be a vaild date object');n.push("Expires="+e.expires.toGMTString())}if(e.maxage){var s=e.maxage;if("string"==typeof s&&(s=parseInt(s,10)),isNaN(s)||s<=0)throw this.reject(500),new Error('Value supplied for cookie "maxage" must be a non-zero number');s=Math.round(s),n.push("Max-Age="+s.toString(10))}if(e.secure){if("boolean"!=typeof e.secure)throw this.reject(500),new Error('Value supplied for cookie "secure" must be of type boolean');n.push("Secure")}if(e.httponly){if("boolean"!=typeof e.httponly)throw this.reject(500),new Error('Value supplied for cookie "httponly" must be of type boolean');n.push("HttpOnly")}o+="Set-Cookie: "+n.join(";")+"\r\n"}.bind(this))}this._resolved=!0,this.emit("requestResolved",this),o+="\r\n";var f=new a(this.socket,[],e,!1,this.serverConfig);f.webSocketVersion=this.webSocketVersion,f.remoteAddress=this.remoteAddress,f.remoteAddresses=this.remoteAddresses;var b=this;return this._socketIsClosing?x(f):this.socket.write(o,"ascii",(function(e){e?x(f):(b._removeSocketCloseListeners(),f._addSocketEventListeners())})),this.emit("requestAccepted",f),f},S.prototype.reject=function(e,t,n){this._verifyResolution(),this._resolved=!0,this.emit("requestResolved",this),"number"!=typeof e&&(e=403);var s="HTTP/1.1 "+e+" "+w[e]+"\r\nConnection: close\r\n";if(t&&(s+="X-WebSocket-Reject-Reason: "+(t=t.replace(u,""))+"\r\n"),n)for(var i in n){var r=n[i].toString().replace(u,"");s+=i.replace(u,"")+": "+r+"\r\n"}s+="\r\n",this.socket.end(s,"ascii"),this.emit("requestRejected",this)},S.prototype._handleSocketCloseBeforeAccept=function(){this._socketIsClosing=!0,this._removeSocketCloseListeners()},S.prototype._removeSocketCloseListeners=function(){this.socket.removeListener("end",this._socketCloseHandler),this.socket.removeListener("close",this._socketCloseHandler)},S.prototype._verifyResolution=function(){if(this._resolved)throw new Error("WebSocketRequest may only be accepted or rejected one time.")},e.exports=S},3544:(e,t,n)=>{var s=n(144).extend,i=n(3837),r=n(2361).EventEmitter,o=n(7998);function a(e){r.call(this),this.config={server:null},e&&s(this.config,e),this.handlers=[],this._requestHandler=this.handleRequest.bind(this),this.config.server&&this.attachServer(this.config.server)}i.inherits(a,r),a.prototype.attachServer=function(e){if(!e)throw new Error("You must specify a WebSocketServer instance to attach to.");this.server=e,this.server.on("request",this._requestHandler)},a.prototype.detachServer=function(){if(!this.server)throw new Error("Cannot detach from server: not attached.");this.server.removeListener("request",this._requestHandler),this.server=null},a.prototype.mount=function(e,t,n){if(!e)throw new Error("You must specify a path for this handler.");if(t||(t="____no_protocol____"),!n)throw new Error("You must specify a callback for this handler.");if(!((e=this.pathToRegExp(e))instanceof RegExp))throw new Error("Path must be specified as either a string or a RegExp.");var s=e.toString();if(t=t.toLocaleLowerCase(),-1!==this.findHandlerIndex(s,t))throw new Error("You may only mount one handler per path/protocol combination.");this.handlers.push({path:e,pathString:s,protocol:t,callback:n})},a.prototype.unmount=function(e,t){var n=this.findHandlerIndex(this.pathToRegExp(e).toString(),t);if(-1===n)throw new Error("Unable to find a route matching the specified path and protocol.");this.handlers.splice(n,1)},a.prototype.findHandlerIndex=function(e,t){t=t.toLocaleLowerCase();for(var n=0,s=this.handlers.length;n<s;n++){var i=this.handlers[n];if(i.pathString===e&&i.protocol===t)return n}return-1},a.prototype.pathToRegExp=function(e){return"string"==typeof e&&("*"===e?e=/^.*$/:(e=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),e=new RegExp("^"+e+"$"))),e},a.prototype.handleRequest=function(e){var t=e.requestedProtocols;0===t.length&&(t=["____no_protocol____"]);for(var n=0;n<t.length;n++)for(var s=t[n].toLocaleLowerCase(),i=0,r=this.handlers.length;i<r;i++){var a=this.handlers[i];if(a.path.test(e.resourceURL.pathname)&&(s===a.protocol||"*"===a.protocol)){var c=new o(e,s);return void a.callback(c)}}e.reject(404,"No handler is available for the given request.")},e.exports=a},7998:(e,t,n)=>{var s=n(3837),i=n(2361).EventEmitter;function r(e,t){i.call(this),this.webSocketRequest=e,this.protocol="____no_protocol____"===t?null:t,this.origin=e.origin,this.resource=e.resource,this.resourceURL=e.resourceURL,this.httpRequest=e.httpRequest,this.remoteAddress=e.remoteAddress,this.webSocketVersion=e.webSocketVersion,this.requestedExtensions=e.requestedExtensions,this.cookies=e.cookies}s.inherits(r,i),r.prototype.accept=function(e,t){var n=this.webSocketRequest.accept(this.protocol,e,t);return this.emit("requestAccepted",n),n},r.prototype.reject=function(e,t,n){this.webSocketRequest.reject(e,t,n),this.emit("requestRejected",this)},e.exports=r},1172:(e,t,n)=>{var s=n(144).extend,i=n(144),r=n(3837),o=n(8995)("websocket:server"),a=n(2361).EventEmitter,c=n(9332),l=function(e){a.call(this),this._handlers={upgrade:this.handleUpgrade.bind(this),requestAccepted:this.handleRequestAccepted.bind(this),requestResolved:this.handleRequestResolved.bind(this)},this.connections=[],this.pendingRequests=[],e&&this.mount(e)};r.inherits(l,a),l.prototype.mount=function(e){if(this.config={httpServer:null,maxReceivedFrameSize:65536,maxReceivedMessageSize:1048576,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,keepalive:!0,keepaliveInterval:2e4,dropConnectionOnKeepaliveTimeout:!0,keepaliveGracePeriod:1e4,useNativeKeepalive:!1,assembleFragments:!0,autoAcceptConnections:!1,ignoreXForwardedFor:!1,parseCookies:!0,parseExtensions:!0,disableNagleAlgorithm:!0,closeTimeout:5e3},s(this.config,e),!this.config.httpServer)throw new Error("You must specify an httpServer on which to mount the WebSocket server.");Array.isArray(this.config.httpServer)||(this.config.httpServer=[this.config.httpServer]);var t=this._handlers.upgrade;this.config.httpServer.forEach((function(e){e.on("upgrade",t)}))},l.prototype.unmount=function(){var e=this._handlers.upgrade;this.config.httpServer.forEach((function(t){t.removeListener("upgrade",e)}))},l.prototype.closeAllConnections=function(){this.connections.forEach((function(e){e.close()})),this.pendingRequests.forEach((function(e){process.nextTick((function(){e.reject(503)}))}))},l.prototype.broadcast=function(e){Buffer.isBuffer(e)?this.broadcastBytes(e):"function"==typeof e.toString&&this.broadcastUTF(e)},l.prototype.broadcastUTF=function(e){this.connections.forEach((function(t){t.sendUTF(e)}))},l.prototype.broadcastBytes=function(e){this.connections.forEach((function(t){t.sendBytes(e)}))},l.prototype.shutDown=function(){this.unmount(),this.closeAllConnections()},l.prototype.handleUpgrade=function(e,t){var n=this,s=new c(t,e,this.config);try{s.readHandshake()}catch(e){return s.reject(e.httpCode?e.httpCode:400,e.message,e.headers),o("Invalid handshake: %s",e.message),void this.emit("upgradeError",e)}this.pendingRequests.push(s),s.once("requestAccepted",this._handlers.requestAccepted),s.once("requestResolved",this._handlers.requestResolved),t.once("close",(function(){n._handlers.requestResolved(s)})),!this.config.autoAcceptConnections&&i.eventEmitterListenerCount(this,"request")>0?this.emit("request",s):this.config.autoAcceptConnections?s.accept(s.requestedProtocols[0],s.origin):s.reject(404,"No handler is configured to accept the connection.")},l.prototype.handleRequestAccepted=function(e){var t=this;e.once("close",(function(n,s){t.handleConnectionClose(e,n,s)})),this.connections.push(e),this.emit("connect",e)},l.prototype.handleConnectionClose=function(e,t,n){var s=this.connections.indexOf(e);-1!==s&&this.connections.splice(s,1),this.emit("close",e,t,n)},l.prototype.handleRequestResolved=function(e){var t=this.pendingRequests.indexOf(e);-1!==t&&this.pendingRequests.splice(t,1)},e.exports=l},144:(e,t,n)=>{var s=t.noop=function(){};function i(e,t,n){this.logFunction=n,this.identifier=e,this.uniqueID=t,this.buffer=[]}t.extend=function(e,t){for(var n in t)e[n]=t[n]},t.eventEmitterListenerCount=n(2361).EventEmitter.listenerCount||function(e,t){return e.listeners(t).length},t.bufferAllocUnsafe=Buffer.allocUnsafe?Buffer.allocUnsafe:function(e){return new Buffer(e)},t.bufferFromString=Buffer.from?Buffer.from:function(e,t){return new Buffer(e,t)},t.BufferingLogger=function(e,t){var r=n(8995)(e);if(r.enabled){var o=new i(e,t,r),a=o.log.bind(o);return a.printOutput=o.printOutput.bind(o),a.enabled=r.enabled,a}return r.printOutput=s,r},i.prototype.log=function(){return this.buffer.push([new Date,Array.prototype.slice.call(arguments)]),this},i.prototype.clear=function(){return this.buffer=[],this},i.prototype.printOutput=function(e){e||(e=this.logFunction);var t=this.uniqueID;this.buffer.forEach((function(n){var s=n[0].toLocaleString(),i=n[1].slice(),r=i[0];null!=r&&(r="%s - %s - "+r.toString(),i.splice(0,1,r,s,t),e.apply(global,i))}))}},455:(e,t,n)=>{e.exports=n(5232).version},5729:(e,t,n)=>{e.exports={server:n(1172),client:n(2339),router:n(3544),frame:n(347),request:n(9332),connection:n(4016),w3cwebsocket:n(348),deprecation:n(9168),version:n(455)}},5965:(e,t,n)=>{function s(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(7723)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var s="color: "+this.color;e.splice(1,0,s,"color: inherit");var i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(r=i))})),e.splice(r,0,s)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=s,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())},7723:(e,t,n)=>{var s;function i(e){function n(){if(n.enabled){var e=n,i=+new Date,r=i-(s||i);e.diff=r,e.prev=s,e.curr=i,s=i;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,s){if("%%"===n)return n;c++;var i=t.formatters[s];if("function"==typeof i){var r=o[c];n=i.call(e,r),o.splice(c,1),c--}return n})),t.formatArgs.call(e,o);var l=n.log||t.log||console.log.bind(console);l.apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,s=0;for(n in e)s=(s<<5)-s+e.charCodeAt(n),s|=0;return t.colors[Math.abs(s)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),s=n.length,i=0;i<s;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(2939),t.names=[],t.skips=[],t.formatters={}},8995:(e,t,n)=>{"undefined"!=typeof process&&"renderer"===process.type?e.exports=n(5965):e.exports=n(6285)},6285:(e,t,n)=>{var s=n(6224),i=n(3837);(t=e.exports=n(7723)).init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),s=0;s<n.length;s++)e.inspectOpts[n[s]]=t.inspectOpts[n[s]]},t.log=function(){return o.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function(e){var n=this.namespace;if(this.useColors){var s=this.color,i="  [3"+s+";1m"+n+" [0m";e[0]=i+e[0].split("\n").join("\n"+i),e.push("[3"+s+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+n+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=a,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(r)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[n]=s,e}),{});var r=parseInt(process.env.DEBUG_FD,10)||2;1!==r&&2!==r&&i.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var o=1===r?process.stdout:2===r?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new s.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":(t=new(n(7147).SyncWriteStream)(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":(t=new(n(1808).Socket)({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(r);function a(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)},t.enable(a())},2939:e=>{var t=1e3,n=60*t,s=60*n,i=24*s;function r(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,o){o=o||{};var a,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var o=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return o.long?r(a=e,i,"day")||r(a,s,"hour")||r(a,n,"minute")||r(a,t,"second")||a+" ms":function(e){return e>=i?Math.round(e/i)+"d":e>=s?Math.round(e/s)+"h":e>=n?Math.round(e/n)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8452:(e,t,n)=>{var s=n(4300).Buffer,i=n(2361).EventEmitter,r=n(144).bufferAllocUnsafe;function o(e){if(!(this instanceof o))return new o(e);i.call(this);var t=this;void 0===e&&(e={}),t.encoding=e.encoding;var n={next:null,buffer:null},a={next:null,buffer:null},c=0;t.__defineGetter__("length",(function(){return c}));var l=0;t.write=function(e){return n.buffer?(a.next={next:null,buffer:e},a=a.next):(n.buffer=e,a=n),c+=e.length,t.emit("write",e),!0},t.end=function(e){s.isBuffer(e)&&t.write(e)},t.push=function(){var e=[].concat.apply([],arguments);return e.forEach(t.write),t},t.forEach=function(e){if(!n.buffer)return r(0);if(n.buffer.length-l<=0)return t;for(var s={buffer:n.buffer.slice(l),next:n.next};s&&s.buffer&&!e(s.buffer);)s=s.next;return t},t.join=function(e,s){if(!n.buffer)return r(0);null==e&&(e=0),null==s&&(s=t.length);var i=r(s-e),o=0;return t.forEach((function(t){if(e<o+t.length&&o<s&&t.copy(i,Math.max(0,o-e),Math.max(0,e-o),Math.min(t.length,s-o)),(o+=t.length)>s)return!0})),i},t.joinInto=function(e,s,i,o){if(!n.buffer)return new r(0);null==i&&(i=0),null==o&&(o=t.length);var a=e;if(a.length-s<o-i)throw new Error("Insufficient space available in target Buffer.");var c=0;return t.forEach((function(e){if(i<c+e.length&&c<o&&e.copy(a,Math.max(s,s+c-i),Math.max(0,i-c),Math.min(e.length,o-c)),(c+=e.length)>o)return!0})),a},t.advance=function(e){for(l+=e,c-=e;n.buffer&&l>=n.buffer.length;)l-=n.buffer.length,n=n.next?n.next:{buffer:null,next:null};return null===n.buffer&&(a={next:null,buffer:null}),t.emit("advance",e),t},t.take=function(e,n){if(null==e?e=t.length:"number"!=typeof e&&(n=e,e=t.length),n||(n=t.encoding),n){var s="";return t.forEach((function(t){if(e<=0)return!0;s+=t.toString(n,0,Math.min(e,t.length)),e-=t.length})),s}return t.join(0,e)},t.toString=function(){return t.take("binary")}}e.exports=o,e.exports.BufferList=o,n(3837).inherits(o,i)},1334:(e,t,n)=>{e.exports={EventTarget:n(4794),Event:n(2918)}},2918:e=>{e.exports=function(e){this.type=e,this.isTrusted=!1,this._yaeti=!0}},4794:e=>{function t(){"function"!=typeof this.addEventListener&&(this._listeners={},this.addEventListener=n,this.removeEventListener=s,this.dispatchEvent=i)}function n(e,t){var n,s,i;if(e&&t){for(void 0===(n=this._listeners[e])&&(this._listeners[e]=n=[]),s=0;i=n[s];s++)if(i===t)return;n.push(t)}}function s(e,t){var n,s,i;if(e&&t&&void 0!==(n=this._listeners[e])){for(s=0;i=n[s];s++)if(i===t){n.splice(s,1);break}0===n.length&&delete this._listeners[e]}}function i(e){var t,n,s,i,r,o=!1;if(!e||"string"!=typeof e.type)throw new Error("`event` must have a valid `type` property");e._yaeti&&(e.target=this,e.cancelable=!0);try{e.stopImmediatePropagation=function(){o=!0}}catch(e){}for(t=e.type,n=this._listeners[t]||[],"function"==typeof(s=this["on"+t])&&s.call(this,e),i=0;(r=n[i])&&!o;i++)r.call(this,e);return!e.defaultPrevented}e.exports=t,Object.defineProperties(t.prototype,{listeners:{get:function(){return this._listeners}}})},3807:(e,t,n)=>{(()=>{"use strict";var e=[,(e,t,n)=>{n.r(t),n.d(t,{CallHandlers:()=>s.CallHandlers,Connection:()=>s.Connection,ConnectionBearer:()=>s.ConnectionBearer,ConnectionManager:()=>i.ConnectionManager,DeferredPromise:()=>r.DeferredPromise,ExecServer:()=>a.ExecServer,FileSystemProviderErrorCode:()=>a.FileSystemProviderErrorCode,FileType:()=>a.FileType,NetworkError:()=>o.NetworkError,RPCError:()=>s.RPCError,RemoteVersion:()=>c.RemoteVersion,ServerWebSocket:()=>l.ServerWebSocket,TimeoutError:()=>o.TimeoutError,closedDuplexStream:()=>u.closedDuplexStream,msgPackEncode:()=>s.msgPackEncode});var s=n(2),i=n(6),r=n(5),o=n(10),a=n(11),c=n(7),l=n(14),u=n(12)},(e,t,n)=>{n.r(t),n.d(t,{CallHandlers:()=>u,Connection:()=>c,ConnectionBearer:()=>h,RPCError:()=>a,msgPackEncode:()=>l});var s=n(3),i=n(4),r=n(5);let o=0;class a extends Error{constructor(e,t){super(`json rpc error ${e}: message`),this.code=e,this.message=t}}class c{constructor(e,t=i.encode,n=new u){this.tunnel=e,this.globalHandlers=n,this.callbacks=new Map,this.streams=new Map,this.notifyEmitter=new s.EventEmitter,this.closeEmitter=new s.EventEmitter,this.ownHandlers=new u,this.onClose=this.closeEmitter.event,this.registerRequestHandler=this.ownHandlers.register,this.encode=t,(async()=>{try{for await(const t of(0,i.decodeMultiStream)(e)){const e=t;"result"in e||"error"in e?this.callbacks.get(e.id)?.resolve(e):"id"in e&&"number"==typeof e.id?this.handleRequest(e):this.notifyEmitter.fire(e)}}catch(t){e.end(),this.closeEmitter.fire(t)}})(),e.once("close",(()=>{this.rejectAllCalls(new a(0,"Connection closed")),this.closeEmitter.fire(void 0)})),e.once("error",(e=>{const t=new a(0,e.message);this.rejectAllCalls(t),this.closeEmitter.fire(t)})),this.onNotification("stream_data",(e=>{this.streams.get(e.stream)?.pushData(e.segment)})),this.onNotification("stream_ended",(e=>{this.streams.get(e.stream)?.markEnded(),this.streams.delete(e.stream)})),this.onNotification("streams_started",(e=>{const t=e.stream_ids,n=this.callbacks.get(e.for_request_id);if(n?.onStream)for(const e of t){const t=new p(e,this);this.streams.set(e,t),n.onStream(t)}}))}static fromDuplexStreams(e,t){const n={once:(t,n)=>{"close"===t&&e.onEnd.then(n)},write:e=>t.write(e),async*[Symbol.asyncIterator](){let t=new r.DeferredPromise,n=t;for(e.onDidReceiveMessage((e=>{const n=new r.DeferredPromise;t.complete({data:e,next:n}),t=n})),e.onEnd.then((()=>{t.complete(void 0)}));;){const e=await n.p;if(!e)return;yield e.data,n=e.next}},end:()=>t.end()};return new c(n,i.encode)}dispose(){this.tunnel.end()}async call(e,t,n,s){const i=o++;return new Promise(((r,o)=>{this.callbacks.set(i,{onStream:s,resolve:e=>{"error"in e?o(new a(e.error?.code,e.error?.message)):r(e.result)},reject:o}),n?.addEventListener("abort",(()=>o(new a(0,"Operation cancelled")))),this.write(this.encode({id:i,method:e,params:t}))})).finally((()=>this.callbacks.delete(i)))}onNotification(e,t){return this.notifyEmitter.event((n=>{n.method===e&&t(n.params)}))}notify(e,t){this.write(this.encode({method:e,params:t}))}async handleRequest(e){const t=this.ownHandlers.map.get(e.method)||this.globalHandlers.map.get(e.method);if(!t){const t={id:e.id,error:{message:`Unknown method ${e.method}. Cannot resolve request`,code:36}};return void this.write(this.encode(t))}let n;try{n={id:e.id,result:await t(e.params,e.id)}}catch(t){t instanceof a?n={id:e.id,error:{code:t.code,message:t.message}}:(console.warn("Unexpected error handling request",e,t),n={id:e.id,error:{code:-1,message:String(t)}})}this.write(this.encode(n))}write(e){this.tunnel.write(e)}rejectAllCalls(e){for(const{reject:t}of this.callbacks.values())t(e);this.callbacks.clear()}}function l(e){const t=(0,i.encode)(e),n=new Uint8Array(4+t.length);return new DataView(n.buffer).setUint32(0,t.length),n.set(t,4),n}class u{constructor(){this.map=new Map,this.register=(e,t)=>{this.map.has(e)&&console.warn("Overriding previous handler for method: ",e),this.map.set(e,t)}}}class h{constructor(e){this.callHandlers=new u,this.startEmitter=new s.EventEmitter,this.onStartConnecting=this.startEmitter.event,this.notifyEmitter=new s.EventEmitter,this.closeEmitter=new s.EventEmitter,this.onClose=this.closeEmitter.event,this.registerRequestHandler=this.callHandlers.register,this.BEARER_TYPE=e}async checkedAcquire(){if(this.streamPromise){const e=await this.streamPromise;if(await this.isStreamValid(e))return e;e.dispose()}this.streamPromise=this.acquireNow();try{return await this.streamPromise}catch(e){throw this.streamPromise=void 0,e}}async acquire(){this.streamPromise??(this.streamPromise=this.acquireNow());try{return await this.streamPromise}catch(e){throw this.streamPromise=void 0,e}}async isStreamValid(e){return!0}async close(){this.streamPromise?.then((e=>e.dispose())),this.streamPromise=void 0}async acquireNow(){const e=await this.getConnectionTunnel(),t=new c(e,(e=>this.encodeMessage(e)),this.callHandlers);return t.onClose((e=>{this.streamPromise=void 0,this.closeEmitter.fire(e)})),this.startEmitter.fire(t),t}}class p{constructor(e,t){this.id=e,this.connection=t,this.queue=[],this.dataEmitter=new s.EventEmitter,this.endDeferred=new r.DeferredPromise,this.onDidReceiveMessage=(...e)=>(this.queue&&setTimeout((()=>this.dequeue())),this.dataEmitter.event(...e))}get onData(){return this.onDidReceiveMessage}get onEnd(){return this.queue&&setTimeout((()=>this.dequeue())),this.endDeferred.p}write(e){this.connection.notify("stream_data",{stream:this.id,segment:e})}end(){this.connection.notify("stream_ended",{stream:this.id})}pushData(e){this.queue?this.queue.push(e):this.dataEmitter.fire(e)}markEnded(){this.queue?this.queue.push(null):this.endDeferred.complete()}dequeue(){if(!this.queue)return;const e=this.queue;this.queue=void 0;for(const t of e)null===t?this.endDeferred.complete():this.dataEmitter.fire(t)}}},e=>{e.exports=n(9016)},e=>{e.exports=n(2398)},(e,t,n)=>{n.r(t),n.d(t,{DeferredPromise:()=>s});class s{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise(((e,t)=>{this.completeCallback=e,this.errorCallback=t}))}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(e){this.completeCallback(e),this.resolved=!0}error(e){this.errorCallback(e),this.rejected=!0}}},(e,t,n)=>{n.r(t),n.d(t,{ConnectionManager:()=>a});var s=n(3),i=n(8),r=n(5),o=n(7);class a{constructor({bearer:e}){this.socketId=0,this.connectingEmitter=new s.EventEmitter,this.onStartConnecting=this.connectingEmitter.event,this.connectedEmitter=new s.EventEmitter,this.onConnected=this.connectedEmitter.event,this.logEmitter=new s.EventEmitter,this.onLog=this.logEmitter.event,this.versionPromise=new r.DeferredPromise,this.bearer=e,this.bearer.onStartConnecting((e=>{e.onNotification("version",(({version:e,protocol_version:t})=>{this.versionPromise.isSettled&&(this.versionPromise=new r.DeferredPromise),this.versionPromise.complete(new o.RemoteVersion(e,t))}))})),this.onClose=this.bearer.onClose;let t=!0;this.bearer.onStartConnecting((e=>{if(this.connectingEmitter.fire(),e.onNotification("serverlog",(e=>{this.logEmitter.fire(e)})),e.onNotification("makehttpreq",(async({url:t,method:n,req_id:s})=>{this.makeHttpCall(e,t,n,s)})),t){const n=e.onNotification("servermsg",(()=>{t&&(this.connectedEmitter.fire(),n.dispose(),t=!1)}))}}))}get version(){return this.versionPromise.p}async makeHttpCall(e,t,n,s){let r;try{r=await(0,i.fetchFn)(t,{method:n})}catch(t){return e.notify("httpheaders",{headers:[],status_code:503,req_id:s}),void e.notify("httpbody",{segment:(new TextEncoder).encode(String(t)),complete:!0,req_id:s})}e.notify("httpheaders",{headers:[...r.headers],status_code:r.status,req_id:s});const o=()=>e.notify("httpbody",{segment:new Uint8Array,complete:!0,req_id:s});if(r.body&&"function"==typeof r.body.on){const t=r.body;return t.on("data",(t=>e.notify("httpbody",{segment:t,complete:!1,req_id:s}))),t.on("end",o),t.on("error",o),void t.resume()}const a=r.body;if(a)try{const t=a.getReader();for(;;){const{done:n,value:i}=await t.read();if(e.notify("httpbody",{segment:i||new Uint8Array,complete:n,req_id:s}),n)break}}catch(e){throw o(),e}else o()}nextSocketId(){return this.socketId++}async checkForUpdates(e){return(await this.bearer.acquire()).call("update",{do_update:e?.doUpdate??!1})}async call(e,t,n,s){const i=await this.bearer.acquire();return await i.call(e,t,n,s)}}},(e,t,n)=>{n.r(t),n.d(t,{RemoteVersion:()=>s});class s{constructor(e,t=0){this.cliVersion=e,this.protocolVerson=t}shouldWarnOutdated(){return this.protocolVerson<=2}canPing(){return this.protocolVerson>=1}canCompressServerMsg(){return this.protocolVerson>=2}usesConnectionToken(){return this.protocolVerson>=3}shouldLengthPrefixMessages(){return this.protocolVerson<4}}},(e,t,n)=>{n.r(t),n.d(t,{fetchFn:()=>i});var s=n(9);const i=n.n(s)()},e=>{e.exports=n(3765)},(e,t,n)=>{n.r(t),n.d(t,{NetworkError:()=>s,TimeoutError:()=>i});class s extends Error{constructor(e,t="ECONNREFUSED"){super(e.message),this.code=t,this.syscall="connect",this.stack=e.stack}}class i extends Error{constructor(){super("Operation timed out")}}},(e,t,n)=>{n.r(t),n.d(t,{ExecServer:()=>c,FileSystemProviderErrorCode:()=>h,FileType:()=>p});var s=n(3),i=n(13),r=n(2),o=n(5),a=n(12);class c{constructor(e){this.connection=e,this.fs={stat:async e=>{const t=await this.connection.call("fs_stat",{path:e});if(!t.exists)throw new u(`File not found: ${e}`,h.FileNotFound);return{ctime:0,mtime:0,size:0,type:l(t.type)}},mkdirp:async e=>{await this.connection.call("fs_mkdirp",{path:e})},rm:async e=>{await this.connection.call("fs_rm",{path:e})},rename:async(e,t)=>{await this.connection.call("fs_rename",{from_path:e,to_path:t})},readdir:async e=>{const{contents:t}=await this.connection.call("fs_readdir",{path:e});return t.map((({name:e,type:t})=>({name:e,type:l(t)})))},read:e=>{const t=new o.DeferredPromise;return this.connection.call("fs_read",{path:e},void 0,(e=>t.complete(e))).catch((e=>t.error(e))),t.p},write:async e=>{const t=new o.DeferredPromise,n=this.connection.call("fs_write",{path:e},void 0,(e=>t.complete(e))).then((()=>{}),(e=>{if(t.complete)throw e;t.error(e)}));return{stream:await t.p,done:n}},connect:async e=>{const t=new o.DeferredPromise,n=this.connection.call("fs_connect",{path:e},void 0,(e=>t.complete(e))).then((()=>{}),(e=>{if(t.complete)throw e;t.error(e)}));return{stream:await t.p,done:n}}}}async kill(e){await this.connection.call("sys_kill",{pid:e})}async spawn(e,t,{env:n={},cwd:s}={}){const i=Array.from({length:3},(()=>new o.DeferredPromise)),r=Promise.all(i.map((e=>e.p))),c=this.connection.call("spawn",{command:e,args:t,env:n,cwd:s},void 0,(e=>{i.shift()?.complete(e)})).then((e=>(i.forEach((e=>e.complete(a.closedDuplexStream))),{status:e.exit_code,message:e.message}))),[l,u,h]=await r;return{stdin:l,stdout:u,stderr:h,onExit:c}}async spawnRemoteServerConnector(e,t,n={}){const{connection:i,logs:r,onExit:o}=await this.spawnCli(e,t,n),a=new c(i);return{logs:r,onExit:o,connect:async e=>{const t=await a.serve(e),n=new s.EventEmitter,i=new s.EventEmitter;return t.onEnd.then((()=>n.fire())),{send:e=>t.write(e),end:()=>t.end(),onDidEnd:n.event,onDidClose:i.event,onDidReceiveMessage:t.onDidReceiveMessage}}}}async spawnCli(e,t,{env:n={},cwd:s}={}){const i=Array.from({length:3},(()=>new o.DeferredPromise)),c=Promise.all(i.map((e=>e.p))),l=this.connection.call("spawn_cli",{command:e,args:t,env:n,cwd:s},void 0,(e=>{i.shift()?.complete(e)})).then((e=>(i.forEach((e=>e.complete(a.closedDuplexStream))),{status:e.exit_code,message:e.message}))),[u,h,p]=await c;return{connection:r.Connection.fromDuplexStreams(h,u),logs:p,onExit:l}}async downloadCliExecutable(e,t,n,s){return this.connection.call("acquire_cli",{command:t,args:n,platform:e.buildTarget,quality:e.quality,commit_id:e.commit,env:s?.env}).then((e=>({status:e.exit_code,message:e.message})))}async acquireCli(e){return this.connection.call("acquire_cli",{command:e.command,args:e.args,platform:e.buildTarget??e.platform,quality:e.quality,commit_id:e.commit??e.commit_id,env:e.env}).then((e=>({status:e.exit_code,message:e.message})))}async serve(e){const t=e.socketId??e.socket_id;return await this.connection.call("serve",{socket_id:t,commit_id:e.commit??e.commit_id,extensions:e.extensions,quality:e.quality,archive_path:e.archivePath??e.archive_path,compress:e.compress,connection_token:e.connectionToken??e.connection_token}),new d(t,this.connection,!!e.compress)}async env(){const e=await this.connection.call("get_env",{});return{env:e.env,osRelease:e.os_release,osPlatform:e.os_platform}}async fsStat(e){const t=await this.connection.call("fs_stat",{path:e});return t.exists?{exists:!0,size:t.size,type:t.type}:{exists:!1}}async tcpConnect(e,t){const n=new o.DeferredPromise,s=this.connection.call("net_connect",{host:e,port:t},void 0,(e=>n.complete(e))).then((()=>{}),(e=>{if(n.complete)throw e;n.error(e)}));return{stream:await n.p,done:s}}}const l=e=>{switch(e){case"file":return p.File;case"dir":return p.Directory;case"link":return p.SymbolicLink;default:return p.Unknown}};class u extends Error{constructor(e,t){super(e),this.code=t}}var h,p;!function(e){e.FileNotFound="EntryNotFound"}(h||(h={})),function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(p||(p={}));class d{constructor(e,t,n){this.socketId=e,this.connection=t,this.id=0,this.disposables=[],this.onDataEmitter=new s.EventEmitter,this.onDidReceiveMessage=this.onDataEmitter.event,this.onData=this.onDidReceiveMessage,this.onCloseEmitter=new s.EventEmitter,this.onClose=this.onCloseEmitter.event,this.onEndDeferred=new o.DeferredPromise,this.onEnd=this.onEndDeferred.p;let r=Promise.resolve();if(n){const n=this.zip={deflate:(0,i.createDeflateRaw)(),inflate:(0,i.createInflateRaw)()};n.inflate.on("data",(e=>this.onDataEmitter.fire(e))),n.deflate.on("data",(n=>{t.notify("servermsg",{i:e,body:n})})),this.disposables.push({dispose:()=>{n.deflate.close(),n.inflate.close()}})}this.disposables.push(t.onNotification("serverclose",(({i:t})=>{t===e&&(this.zip?r.then((()=>{this.zip.inflate.close((()=>this.onDidClose()))})):this.onDidClose())})),t.onNotification("servermsg",(({i:t,body:n})=>{if(t===e)if(this.zip){const e=new Promise((e=>this.zip.inflate.write(n,e)));r=r.then((()=>e))}else this.onDataEmitter.fire(n)})))}write(e){const t=this.socketId,n=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);this.zip?this.zip.deflate.write(n,void 0,(()=>{this.zip.deflate.flush(2)})):this.connection.notify("servermsg",{i:t,body:n})}end(){this.disposables.forEach((e=>e.dispose()))}onDidClose(){this.onCloseEmitter.fire(),this.onEndDeferred.complete()}}},(e,t,n)=>{n.r(t),n.d(t,{closedDuplexStream:()=>s});const s={id:0,onData:()=>({dispose:()=>{}}),onDidReceiveMessage:()=>({dispose:()=>{}}),onEnd:Promise.resolve(void 0),write:()=>{},end:()=>{}}},e=>{e.exports=n(9796)},(e,t,n)=>{n.r(t),n.d(t,{ServerWebSocket:()=>o});var s=n(3),i=n(10),r=n(11);class o{constructor(e,t){this.options=e,this.version=t,this.SOCKET_TYPE="Local Proxy Server Socket",this.dispose=[],this.onDataEmitter=new s.EventEmitter,this.onData=this.onDataEmitter.event,this.onOpenEmitter=new s.EventEmitter,this.onOpen=this.onOpenEmitter.event,this.onCloseEmitter=new s.EventEmitter,this.onClose=this.onCloseEmitter.event,this.onErrorEmitter=new s.EventEmitter,this.onError=this.onErrorEmitter.event}send(e){const t=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);this.stream?this.stream.write(t):console.warn(new Error("attempted to send data before socket was open").stack)}close(){this.dispose.forEach((e=>e.dispose()))}onMessage(e){this.onDataEmitter.fire(e)}upgradeToWebSocketConnection(){}async initialize(){const e=await this.options.bearer.checkedAcquire(),t=!!(await this.version).canCompressServerMsg()&&(this.options.compress??!0),n=this.stream=await new r.ExecServer(e).serve({socketId:this.options.socketId,extensions:this.options.extensions||[],quality:this.options.product.quality,commit:this.options.product.commit,archivePath:this.options.archivePath,connectionToken:this.options.connectionToken,compress:t});this.dispose.push(n.onDidReceiveMessage(this.onMessage,this)),this.dispose.push(e.onClose((e=>{e&&this.onErrorEmitter.fire(new i.NetworkError(e)),this.onCloseEmitter.fire()}))),this.upgradeToWebSocketConnection()}}},(e,t,n)=>{n.r(t),n.d(t,{ProxyConnection:()=>v,State:()=>g});var s=n(3),i=n(4),r=n(16),o=n(17),a=n(18),c=n(19),l=n(20),u=n(21),h=n(2),p=n(5),d=n(22),f=n(23);const m=!process.env.VSCODE_TUNNELS_DISABLE_PROCESS_REUSE;var g;!function(e){e[e.Idle=0]="Idle",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.Closed=3]="Closed"}(g||(g={}));class v{constructor(e,t){this.args=e,this.logger=t,this.extraHandlers=new h.CallHandlers,this.registerRequestHandler=this.extraHandlers.register.bind(this.extraHandlers),this.bearerPromise=new p.DeferredPromise,this.bearer=this.bearerPromise.p,this.localPortPromise=new p.DeferredPromise,this.localPort=this.localPortPromise.p,this.startEmitter=new s.EventEmitter,this.onStartConnecting=this.startEmitter.event,this.closeEmitter=new s.EventEmitter,this.onClose=this.closeEmitter.event,this.connectedEmitter=new s.EventEmitter,this.onConnected=this.connectedEmitter.event,this.logEmitter=new s.EventEmitter,this.onLog=this.logEmitter.event,this._state=g.Idle,this.initialize(),this.bearer.catch((e=>{this.closeEmitter.fire(e)}))}get state(){return this._state}static async create(e){const t=v.getPathForRunningProxyInTmpDir(e.nonce),n={args:e.args,productInfo:e.productInfo,runningProxyInfoFile:t},s=await v.getValidProxySocket(t);if(s){e.logger.log(3,`Found running server in ${s}`);try{const t=new b({...n,proxySocketPath:s},e.logger);return e.setup?.(t),await(0,d.timeoutPromise)(5e3,t.callOnProxy("greet",{})),t}catch(t){e.logger.log(3,`Error greeting the server, starting a new instance (${t})`)}}e.logger.log(3,"Creating new tunnel proxy server");const i=function(e,t){const n=(0,o.createHash)("sha256").update(e).update("\0").update(t).digest("hex").slice(0,16);return"win32"===process.platform?`\\\\.\\pipe\\vscode-tunneling-${n}-sock`:process.env.XDG_RUNTIME_DIR?u.join(process.env.XDG_RUNTIME_DIR,`vscode-tunneling-${n}.sock`):u.join(l.tmpdir(),`vscode-tunneling-${n}.sock`)}(e.nonce,(0,o.randomBytes)(20).toString("hex")),r=new y({...n,proxySocketPath:i},e.logger,e.serverPath);return e.setup?.(r),r}static async getValidProxySocket(e){try{const t=JSON.parse(await a.promises.readFile(e,"utf-8"));if(t.at>Date.now()-f.proxyFileTimeout)return await a.promises.stat(t.socket),t.socket}catch{}}static getPathForRunningProxyInTmpDir(e){const t=`vscode-server-proxy-${(0,o.createHash)("sha256").update(e).digest("hex").slice(0,16)}-daemon`;return u.join(l.tmpdir(),t)}async callOnProxy(e,t){return(await this.bearer).call(e,t)}async call(e,t,n,s){return(await this.bearer).call("calltunnel",{method:e,params:t,stream:!!s},n,s)}async initialize(){this.connectToProxyServer();const e=await this.bearer;e.onNotification("serverlog",(e=>{this.logger.log(e.level,`[server] ${e.line}`),this.logEmitter.fire(e)})),e.onNotification("proxylog",(e=>this.logger.log(e.level,`[proxy] ${e.message}`,...e.args))),e.onNotification("statechange",(e=>{switch(e.state){case"connecting":this._state=g.Connecting,this.startEmitter.fire();break;case"connected":this._state=g.Connected,this.connectedEmitter.fire();break;case"closed":let t;this._state=g.Closed,e.reason&&(t=new Error(e.reason.message),t.stack=e.reason.stack||t.stack),this.closeEmitter.fire(t)}})),e.onClose((e=>{this.closeEmitter.fire(e)}))}connectToProxyServer(){let e,t=!1;const n=()=>{t=!1,e?.destroy(),e=void 0},s=()=>{t||(n(),e=c.connect(this.args.proxySocketPath),e.on("connect",(async()=>{t=!0,this.bearerPromise.complete(new h.Connection(e,i.encode,this.extraHandlers)),this.getPortOfTunnelProxyServer()})),e.on("error",(e=>{n()})))};let r;const o=()=>{s(),r&&clearTimeout(r),r=setTimeout((async()=>{t||o()}),500)};o()}async getPortOfTunnelProxyServer(){const e=await this.bearer,t=(await e.call("getlocalport",{})).value;this.localPortPromise.complete(t)}async dispose(){(await this.bearer).dispose()}}v.State=g;class y extends v{constructor(e,t,n){const s=r.spawn(process.execPath,[n],{detached:m,stdio:m?"ignore":"pipe",env:{...process.env,VSCODE_TUNNEL_ARGS:JSON.stringify(e)}});s.stdout?.on("data",(e=>console.log("Proxy process stdout:",e.toString().trim()))),s.stderr?.on("data",(e=>console.log("Proxy process stderr:",e.toString().trim()))),m&&s.unref(),super(e,t)}}class b extends v{}},e=>{e.exports=n(2081)},e=>{e.exports=n(6113)},e=>{e.exports=n(7147)},e=>{e.exports=n(1808)},e=>{e.exports=n(2037)},e=>{e.exports=n(1017)},(e,t,n)=>{n.r(t),n.d(t,{timeoutPromise:()=>s});const s=(e,t)=>new Promise(((n,s)=>{const i=setTimeout((()=>{s(new Error("Operation timed out"))}),e);t.finally((()=>clearTimeout(i))).then(n,s)}))},(e,t,n)=>{n.r(t),n.d(t,{proxyFileTimeout:()=>s});const s=6e3},(e,t,n)=>{n.r(t),n.d(t,{ProxyServer:()=>u});var s=n(4),i=n(18),r=n(19),o=n(5),a=n(2),c=n(14),l=n(25);class u{constructor(e){this._options=e,this.serverConnections=new Set,this.disposables=[],this.setupPromise=new o.DeferredPromise,this.setup=this.setupPromise.p,this.didSetup=!1,this.connectionCount=0,this.connectionIdCounter=0,this.args=e.args,this.proxyServer=r.createServer((async e=>{await this.onProxyConnection(e)})),this.disposables.push({dispose:()=>this.proxyServer.close()}),this.controlServer=r.createServer((async e=>{await this.onServerConnection(e)})),this.disposables.push({dispose:()=>this.controlServer.close()}),this.initialize().catch((e=>{this.log(5,`Failed to initialize proxy server: ${e}}`),console.error(e),process.exit(1)})),this.startSavingRunningInfo(),this.delayShutdown(9e4)}incrementConnectionCount(){this.connectionCount+=1,this.shutdownTimer&&(clearTimeout(this.shutdownTimer),this.shutdownTimer=void 0)}decrementConnectionCount(){this.connectionCount-=1,0===this.connectionCount&&this.delayShutdown(3e4)}static readArgsFromEnvironment(){return JSON.parse(process.env.VSCODE_TUNNEL_ARGS)}getWebSocket(e,t){return new c.ServerWebSocket(t,e.version)}onDidSetUpServerConnection(e){}async initialize(){await Promise.all([new Promise(((e,t)=>{this.proxyServer.listen(0,"127.0.0.1",(()=>e())),this.proxyServer.on("error",t)})),new Promise(((e,t)=>{this.controlServer.listen(this._options.proxySocketPath,e),this.controlServer.on("error",t)}))])}delayShutdown(e=3e4){this.shutdownTimer&&clearTimeout(this.shutdownTimer),this.shutdownTimer=setTimeout((()=>{this.dispose(),this.log(2,"Timed out, shutting down"),process.exit(0)}),e)}async onServerConnection(e){this.log(2,"Server connection from:  ",e.localAddress," ",e.localPort),this.incrementConnectionCount();const t=new a.Connection(e,s.encode);this.didSetup||this.acquireTunnel(t),this.serverConnections.add(t),t.onClose((e=>{this.log(2,`Server connection closed (err: ${e})`),this.serverConnections.delete(t),this.decrementConnectionCount()})),t.registerRequestHandler("greet",(()=>(this.log(2,"Server greeted"),Promise.resolve({})))),t.registerRequestHandler("getlocalport",(async()=>({value:this.proxyServer.address().port}))),t.onNotification("stream_data",(e=>t.notify("stream_data",e))),t.onNotification("stream_ended",(e=>t.notify("stream_ended",e))),t.registerRequestHandler("calltunnel",(async({method:e,params:n,stream:s},i)=>(await this.setup).call(e,n,void 0,s?e=>{t.notify("streams_started",{for_request_id:i,stream_ids:[e.id]}),e.onDidReceiveMessage((n=>t.notify("stream_data",{segment:n,stream:e.id}))),e.onEnd.then((()=>t.notify("stream_ended",{stream:e.id})))}:void 0))),this.onDidSetUpServerConnection(t),this.lastState&&t.notify("statechange",this.lastState)}async onProxyConnection(e){const t=`[connection.${this.connectionIdCounter++}]`;this.log(2,`${t} connection from:  ${e.localAddress} ${e.localPort}`),this.incrementConnectionCount();const n=(0,l.writeBuffer)();let s;e.on("data",(e=>n.write(e))),e.on("close",(()=>{s?.close(),this.decrementConnectionCount()}));try{const e=await this.setup,t=this.getWebSocket(e,{bearer:e.bearer,product:this._options.productInfo,socketId:e.nextSocketId(),compress:!0});await t.initialize(),s=t}catch(e){return this.log(5,`${t} error setting up websocket: ${e}`),void this.setState({state:"closed",reason:{message:e.message,stack:e.stack}})}n.connect((e=>s.send(e))),this.disposables.push(s.onData((t=>e.write(new Uint8Array(t)))),s.onError((e=>{this.log(5,`${t} tunnel connection error: ${e}`)})),s.onClose((()=>{this.log(5,`${t} tunnel connection ended`),e.end()}))),this.log(3,`${t} tunnel connection established`)}async acquireTunnel(e){let t;try{t=await this.createConnectionManager(e)}catch(e){return this.log(5,e.message),this.setState({state:"closed",reason:{message:e.message,stack:e.stack}})}this.setupPromise.complete(t),t.onLog((e=>{this.serverConnections.forEach((t=>{t.notify("serverlog",e)}))})),t.onStartConnecting((()=>{this.log(2,"Tunnel started connecting"),this.setState({state:"connecting"})})),t.onConnected((()=>{this.log(3,"Tunnel connection successful"),this.setState({state:"connected"})})),t.onClose((e=>{this.log(5,`Tunnel connection closed with: ${e?.message}`),this.setState({state:"closed",reason:{message:e?.message||"Remote server disconnected"}})}))}setState(e){if(e.state!==this.lastState?.state){this.lastState=e;for(const t of this.serverConnections)t.notify("statechange",e);"closed"===e.state&&process.exit(1)}}startSavingRunningInfo(){this.log(2,`Saving socket path "${this._options.proxySocketPath}" to daemon in: ${this._options.runningProxyInfoFile}`);const e=()=>JSON.stringify({at:Date.now(),socket:this._options.proxySocketPath,pid:process.pid});i.writeFileSync(this._options.runningProxyInfoFile,e());const t=setInterval((()=>i.writeFile(this._options.runningProxyInfoFile,e(),(()=>{}))),3e3);this.disposables.push({dispose:()=>{clearInterval(t);try{i.rmSync(this._options.runningProxyInfoFile)}catch{}}})}log(e,t,...n){for(const s of this.serverConnections)s.notify("proxylog",{level:e,message:t,args:n})}dispose(){this.serverConnections.forEach((e=>{e.notify("statechange",{state:"closed",reason:new Error("Disposing proxy server.")}),e.dispose()})),this.disposables.forEach((e=>e.dispose()))}}},(e,t,n)=>{n.r(t),n.d(t,{writeBuffer:()=>s});const s=()=>{let e=[];return{write:t=>{e.push(t)},connect(t){for(const n of e)t(n);this.write=t,e=void 0}}}}],s={};function i(t){var n=s[t];if(void 0!==n)return n.exports;var r=s[t]={exports:{}};return e[t](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{i.r(r),i.d(r,{CallHandlers:()=>e.CallHandlers,Connection:()=>e.Connection,ConnectionBearer:()=>e.ConnectionBearer,ConnectionManager:()=>e.ConnectionManager,DeferredPromise:()=>e.DeferredPromise,ExecServer:()=>e.ExecServer,FileSystemProviderErrorCode:()=>e.FileSystemProviderErrorCode,FileType:()=>e.FileType,NetworkError:()=>e.NetworkError,ProxyConnection:()=>t.ProxyConnection,ProxyServer:()=>n.ProxyServer,RPCError:()=>e.RPCError,RemoteVersion:()=>e.RemoteVersion,ServerWebSocket:()=>e.ServerWebSocket,State:()=>t.State,TimeoutError:()=>e.TimeoutError,closedDuplexStream:()=>e.closedDuplexStream,msgPackEncode:()=>e.msgPackEncode});var e=i(1),t=i(15),n=i(24)})();var o=t;for(var a in r)o[a]=r[a];r.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})()},3758:(e,t,n)=>{(()=>{"use strict";var e,s,i=[(e,t,n)=>{n.r(t),n.d(t,{AccessTokenBasisClient:()=>o.AccessTokenBasisClient,BasisClient:()=>o.BasisClient,BasisConnectionBearer:()=>c.BasisConnectionBearer,BasisWebSocketFactory:()=>l.BasisWebSocketFactory,TunnelNotFoundError:()=>o.TunnelNotFoundError,TunnelNotFoundInSessionsError:()=>g,TunnelProvider:()=>u.TunnelProvider,TunnelTags:()=>h,createLoopbackHandler:()=>b,fixTunnelTags:()=>o.fixTunnelTags,getConnectionToken:()=>v,getMatchingSessionForTunnel:()=>f,getMatchingSessionForTunnelName:()=>d,getProtocolVersionFromTags:()=>y,getTunnelNameFromTags:()=>p});var s=n(1),i=n(2),r=n(3),o=n(4),a=n(8),c=n(10),l=n(12),u=n(15);class h{constructor(e){if(this.value=e,this.protocolVersion=2,e)for(const t of e)t.startsWith("_flag")?this.flags=Number(t.slice("_flag".length)):t.startsWith("protocolv")?this.protocolVersion=Number(t.slice("protocolv".length)):t.startsWith("_")||"vscode-server-launcher"===t||this.name||(this.name=t)}is(e){return this.flags?0!=(this.flags&e):void 0}}function p(e){return new h(e.labels||[]).name||e.name||e.tunnelId}async function d({userAgent:e,name:t,sessions:n}){const s=await m({lookup:t,userAgent:e,getTunnel:async(e,t)=>e.getTunnelForTag(t),lookupToString:e=>e,sessions:n});return void 0!==s?s:f({userAgent:e,sessions:n,tunnel:{name:t}})}async function f({userAgent:e,tunnel:t,sessions:n}){return m({lookup:t,userAgent:e,getTunnel:async(e,t)=>e.getTunnel(t),lookupToString:e=>e.name||e.tunnelId,sessions:n})}async function m({lookup:e,userAgent:t,getTunnel:n,lookupToString:s,sessions:r}){const a=`tunneling-${t}-auth-attempted`,c=`tunneling-${t}-session-${s(e)}`,l=localStorage.getItem(c);if(l){const s=r.find((e=>e.id===l));if(s){const i=new o.AccessTokenBasisClient(s.provider,t,(()=>s.getAccessToken()));try{const t=await n(i,e);if(t)return console.log("Reusing session from localStorage"),localStorage.removeItem(a),{client:i,session:s,tunnel:t};localStorage.removeItem(c)}catch(e){console.error(e)}}}const u=await(0,i.firstPromise)(r.map((async s=>{if(s.id===l)return;const i=new o.AccessTokenBasisClient(s.provider,t,(()=>s.getAccessToken()));try{const t=await n(i,e);if(t)return{client:i,session:s,tunnel:t}}catch(e){console.error(e)}})));if(u)return localStorage.setItem(c,u.session.id),localStorage.removeItem(a),u;if(localStorage.getItem(a))throw localStorage.removeItem(a),new g(s(e));localStorage.setItem(a,"1")}class g extends Error{constructor(e){super(`Could not find a tunnel named ${e}. Please make sure you are logged into the correct account. You can reloading, logging in, then running 'Connect to Remote Server'.`),this.tunnelIdentifier=e}}async function v(e){if(!new s.RemoteVersion("",y(e)).usesConnectionToken())return;const t=await(0,a.sha256)(e.tunnelId),n=(0,r.encodeBase64)(t,!1,!0);return n.startsWith("-")?`a${n}`:n}function y(e){return new h(e.labels||[]).protocolVersion}const b=(e,t)=>async n=>{const s=new URLSearchParams({path:n.uri.path});t&&s.set("tkn",t);try{const t=await e.bearer.acquire(),i=await t.call("callserverhttp",{path:"/vscode-remote-resource?"+s,method:n.method,headers:n.headers}),r=new ArrayBuffer(i.body.length);return new Uint8Array(r).set(i.body),{status:i.status,body:r,headers:i.headers}}catch(e){return{status:500,headers:{},body:(new TextEncoder).encode(e.message).buffer}}}},e=>{e.exports=n(3807)},(e,t,n)=>{n.r(t),n.d(t,{TimeoutError:()=>i,firstPromise:()=>s,timeoutPromise:()=>r});const s=e=>new Promise(((t,n)=>{let s=e.length;for(const i of e)i.then((e=>{s--,void 0===e&&0!==s||(t(e),s=-1)})).catch(n)}));class i extends Error{}const r=(e,t,n)=>new Promise(((s,r)=>{const o=setTimeout((()=>r(new i(n??"Operation timed out"))),t);e.then(s,r).finally((()=>clearTimeout(o)))}))},(e,t,n)=>{function s(e,t=!0,n=!1){const s=n?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let i="";const r=e.byteLength%3;let o=0;for(;o<e.byteLength-r;o+=3){const t=e[o+0],n=e[o+1],r=e[o+2];i+=s[t>>>2],i+=s[63&(t<<4|n>>>4)],i+=s[63&(n<<2|r>>>6)],i+=s[63&r]}if(1===r){const n=e[o+0];i+=s[n>>>2],i+=s[n<<4&63],t&&(i+="==")}else if(2===r){const n=e[o+0],r=e[o+1];i+=s[n>>>2],i+=s[63&(n<<4|r>>>4)],i+=s[r<<2&63],t&&(i+="=")}return i}n.r(t),n.d(t,{encodeBase64:()=>s})},(e,t,n)=>{n.r(t),n.d(t,{AccessTokenBasisClient:()=>a,BasisClient:()=>o,TunnelNotFoundError:()=>c,fixTunnelTags:()=>l});var s=n(5),i=n(6),r=n(7);class o{constructor(){this.managementClient=new r.Lazy((()=>this.createTunnelManagementClient())),this.tunnelLookupCache=new Map,this.taggedTunnelLookupCache=new Map}getManagementClient(){return this.managementClient.getValue()}async connect(e){if(!e.endpoints){const t=await this.getTunnel(e);if(!t)throw new c;e=t}const{TunnelRelayTunnelClient:t}=await Promise.resolve().then(n.t.bind(n,16,23)),s=new t(void 0,await this.getManagementClient());return s.acceptLocalConnectionsForForwardedPorts=!1,s.endpoints=e.endpoints,await s.connect(e),s}async getTunnelForTag(e){const t=e.toLowerCase();return await this._getTunnelForTag(t)??(t!==e?this._getTunnelForTag(e):void 0)}async _getTunnelForTag(e){if(this.taggedTunnelLookupCache.has(e))return this.taggedTunnelLookupCache.get(e);const t=await this.getManagementClient(),[n]=await t.listTunnels(void 0,void 0,{labels:[e,"vscode-server-launcher"],requireAllLabels:!0,limit:1});if(!n)return;l(n);const s=await this.getTunnel(n);return s&&this.taggedTunnelLookupCache.set(e,s),s}async getTunnel(e,t=!0){const n=e.name||e.tunnelId;if(t&&this.tunnelLookupCache.has(n))return this.tunnelLookupCache.get(n);try{const t=await this.getManagementClient(),s=await t.getTunnel(e,{includePorts:!0,tokenScopes:["connect"]});return s&&(l(s),this.tunnelLookupCache.set(n,s)),s||void 0}catch(e){if(e instanceof Error&&e.message.includes("Not Found"))return;throw e}}}o.BASIS_SCOPES=[`${s.TunnelServiceProperties.production.serviceAppId}/.default`];class a extends o{constructor(e,t,n,s){super(),this.provider=e,this.userAgent=t,this.getAccessToken=n,this.agent=s}async createTunnelManagementClient(){const e="microsoft"===this.provider?`Bearer ${await this.getAccessToken()}`:`${this.provider} ${await this.getAccessToken()}`;return new i.TunnelManagementHttpClient(this.userAgent,"2023-09-27-preview",(async()=>e),void 0,this.agent)}}class c extends Error{constructor(){super("Tunnel not found")}}function l(e){const t=e;return t.labels&&(e.labels=t.labels),e}},e=>{e.exports=n(3399)},e=>{e.exports=n(5927)},(e,t,n)=>{n.r(t),n.d(t,{Lazy:()=>s});class s{constructor(e){this.executor=e,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}map(e){return new s((()=>e(this.getValue())))}}},(e,t,n)=>{n.r(t),n.d(t,{sha256:()=>i});var s=n(9);const i=e=>{const t=(0,s.createHash)("sha256");return t.update(e),Promise.resolve(t.digest())}},e=>{e.exports=n(6113)},(e,t,n)=>{n.r(t),n.d(t,{BasisConnectionBearer:()=>c});var s=n(11),i=n(1),r=n(0),o=n(2);const a=3e4;class c extends i.ConnectionBearer{constructor(e,t,n){super("Port Forwarding Service"),this.basis=e,this.tunnel=t,this.port=n,this.tunnelMayBeStale=!1;const o=new i.RemoteVersion("",new r.TunnelTags(t.labels).protocolVersion);this.encodeMessage=o.shouldLengthPrefixMessages()?i.msgPackEncode:s.encode,this.onStartConnecting((e=>{e.onNotification("version",(({version:e,protocol_version:t})=>{this.version=new i.RemoteVersion(e,t)}))}))}async isStreamValid(e){if(!0!==this.version?.canPing())return!0;const t=new AbortController,n=setTimeout((()=>t.abort()),5e3);try{return await e.call("ping",{},t.signal),!0}catch{return!1}finally{clearTimeout(n)}}async getConnectionTunnel(){if(this.tunnelMayBeStale){const e=await this.basis.getTunnel(this.tunnel,!1);e&&(this.tunnel=e)}if(!this.tunnel.endpoints?.length)throw new i.NetworkError(new Error("The VS Code gateway is not currently running."),"EHOSTDOWN");const e=await(0,o.timeoutPromise)(this.basis.connect(this.tunnel),a,"Timeout connecting to relay");try{await(0,o.timeoutPromise)(e.waitForForwardedPort(this.port),a,"Timeout waiting for forwarded port");const t=await(0,o.timeoutPromise)(e.connectToForwardedPort(this.port),a,"Timeout connecting to port");return t.on("close",(()=>{this.tunnelMayBeStale=!0})),t.on("error",(()=>{this.tunnelMayBeStale=!0})),t}catch(t){throw e.dispose(),t}}}},e=>{e.exports=n(2398)},(e,t,n)=>{n.r(t),n.d(t,{BasisWebSocketFactory:()=>i});var s=n(13);class i{constructor(e,t,n){this.manager=e,this.product=t,this.extensions=n}create(e){const t=new s.BasisWebSocket({bearer:this.manager.bearer,product:this.product,socketId:this.manager.nextSocketId(),extensions:this.extensions,url:e},this.manager.version);return t.initialize(),t}}},(e,t,n)=>{n.r(t),n.d(t,{BasisWebSocket:()=>o});var s=n(14),i=n(1),r=n(2);class o extends i.ServerWebSocket{constructor(e,t){super(e,t),this._options=e,this.onDataEmitter=new s.EventEmitter,this.onData=this.onDataEmitter.event,this.onOpenEmitter=new s.EventEmitter,this.onOpen=this.onOpenEmitter.event,this.onCloseEmitter=new s.EventEmitter,this.onClose=this.onCloseEmitter.event,this.onErrorEmitter=new s.EventEmitter,this.onError=this.onErrorEmitter.event,this.waitingForOpen=!0,this.SOCKET_TYPE="Basis Socket"}async initialize(){try{await super.initialize()}catch(e){return e instanceof r.TimeoutError&&(e=new i.NetworkError(e)),void this.onErrorEmitter.fire(e)}}onMessage(e){this.waitingForOpen?(this.onOpenEmitter.fire(),this.waitingForOpen=!1):this.onDataEmitter.fire(e)}async upgradeToWebSocketConnection(){const e=this._options.url.replace(/skipWebSocketFrames=false/gim,"skipWebSocketFrames=true");this.send((new TextEncoder).encode(this.createHandshakeRequest(e)))}createHandshakeRequest(e){return[`GET ${e} HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${this.randomString(32)}`,"\r\n"].join("\r\n")}randomString(e=16){const t=new Uint32Array(e);return crypto.getRandomValues(t),t.toString()}}},e=>{e.exports=n(9016)},(e,t,n)=>{n.r(t),n.d(t,{TunnelProvider:()=>i});var s=n(14);class i{constructor(e){this.rpc=e,this.features={elevation:!1,public:!1},this.tunnelFactory=async(e,t)=>{let n;try{n=await this.rpc.call("forward",{port:e.remoteAddress.port})}catch(e){throw new Error(`Could not forward port: ${e}`)}const i=new s.EventEmitter,r=this.rpc.onClose((()=>i.fire()));return i.event((()=>r.dispose())),{remoteAddress:e.remoteAddress,localAddress:n.uri,public:!1,onDidDispose:i.event,dispose:async()=>{try{await this.rpc.call("unforward",{port:e.remoteAddress.port})}catch{}i.fire()}}}}}},e=>{e.exports=n(1139)}],r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return i[e](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"==typeof t.then)return t}var i=Object.create(null);o.r(i);var r={};e=e||[null,s({}),s([]),s(s)];for(var a=2&n&&t;"object"==typeof a&&!~e.indexOf(a);a=s(a))Object.getOwnPropertyNames(a).forEach((e=>r[e]=()=>t[e]));return r.default=()=>t,o.d(i,r),i},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a=o(0),c=t;for(var l in a)c[l]=a[l];a.__esModule&&Object.defineProperty(c,"__esModule",{value:!0})})()},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},2057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},7742:e=>{"use strict";e.exports=require("node:process")},2477:e=>{"use strict";e.exports=require("node:stream/web")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},1267:e=>{"use strict";e.exports=require("worker_threads")},9796:e=>{"use strict";e.exports=require("zlib")},3315:(e,t,n)=>{"use strict";const s=n(4102),i=n(7310),r=n(328),o=n(3685),a=n(5687),c=n(3837),l=n(2298),u=n(9796),h=n(2781),p=n(2361);function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}const f=d(s),m=d(i),g=d(o),v=d(a),y=d(c),b=d(l),w=d(u),S=d(h),x=d(p);function E(e,t){return function(){return e.apply(t,arguments)}}const{toString:C}=Object.prototype,{getPrototypeOf:T}=Object,R=(_=Object.create(null),e=>{const t=C.call(e);return _[t]||(_[t]=t.slice(8,-1).toLowerCase())});var _;const P=e=>(e=e.toLowerCase(),t=>R(t)===e),k=e=>t=>typeof t===e,{isArray:A}=Array,M=k("undefined"),O=P("ArrayBuffer"),I=k("string"),B=k("function"),q=k("number"),L=e=>null!==e&&"object"==typeof e,F=e=>{if("object"!==R(e))return!1;const t=T(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},j=P("Date"),D=P("File"),N=P("Blob"),U=P("FileList"),$=P("URLSearchParams");function z(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let s,i;if("object"!=typeof e&&(e=[e]),A(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let o;for(s=0;s<r;s++)o=i[s],t.call(null,e[o],o,e)}}function K(e,t){t=t.toLowerCase();const n=Object.keys(e);let s,i=n.length;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,H=e=>!M(e)&&e!==W,V=(G="undefined"!=typeof Uint8Array&&T(Uint8Array),e=>G&&e instanceof G);var G;const J=P("HTMLFormElement"),Y=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Q=P("RegExp"),Z=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};z(n,((n,i)=>{let r;!1!==(r=t(n,i,e))&&(s[i]=r||n)})),Object.defineProperties(e,s)},X="abcdefghijklmnopqrstuvwxyz",ee="0123456789",te={DIGIT:ee,ALPHA:X,ALPHA_DIGIT:X+X.toUpperCase()+ee},ne=P("AsyncFunction"),se={isArray:A,isArrayBuffer:O,isBuffer:function(e){return null!==e&&!M(e)&&null!==e.constructor&&!M(e.constructor)&&B(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||B(e.append)&&("formdata"===(t=R(e))||"object"===t&&B(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&O(e.buffer),t},isString:I,isNumber:q,isBoolean:e=>!0===e||!1===e,isObject:L,isPlainObject:F,isUndefined:M,isDate:j,isFile:D,isBlob:N,isRegExp:Q,isFunction:B,isStream:e=>L(e)&&B(e.pipe),isURLSearchParams:$,isTypedArray:V,isFileList:U,forEach:z,merge:function e(){const{caseless:t}=H(this)&&this||{},n={},s=(s,i)=>{const r=t&&K(n,i)||i;F(n[r])&&F(s)?n[r]=e(n[r],s):F(s)?n[r]=e({},s):A(s)?n[r]=s.slice():n[r]=s};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&z(arguments[e],s);return n},extend:(e,t,n,{allOwnKeys:s}={})=>(z(t,((t,s)=>{n&&B(t)?e[s]=E(t,n):e[s]=t}),{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,s)=>{let i,r,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)o=i[r],s&&!s(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&T(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:R,kindOfTest:P,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return-1!==s&&s===n},toArray:e=>{if(!e)return null;if(A(e))return e;let t=e.length;if(!q(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=n.next())&&!s.done;){const n=s.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const s=[];for(;null!==(n=e.exec(t));)s.push(n);return s},isHTMLForm:J,hasOwnProperty:Y,hasOwnProp:Y,reduceDescriptors:Z,freezeMethods:e=>{Z(e,((t,n)=>{if(B(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const s=e[n];B(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},s=e=>{e.forEach((e=>{n[e]=!0}))};return A(e)?s(e):s(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:K,global:W,isContextDefined:H,ALPHABET:te,generateString:(e=16,t=te.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n},isSpecCompliantForm:function(e){return!!(e&&B(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,s)=>{if(L(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[s]=e;const i=A(e)?[]:{};return z(e,((e,t)=>{const r=n(e,s+1);!M(r)&&(i[t]=r)})),t[s]=void 0,i}}return e};return n(e,0)},isAsyncFn:ne,isThenable:e=>e&&(L(e)||B(e))&&B(e.then)&&B(e.catch)};function ie(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i)}se.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const re=ie.prototype,oe={};function ae(e){return se.isPlainObject(e)||se.isArray(e)}function ce(e){return se.endsWith(e,"[]")?e.slice(0,-2):e}function le(e,t,n){return e?e.concat(t).map((function(e,t){return e=ce(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{oe[e]={value:e}})),Object.defineProperties(ie,oe),Object.defineProperty(re,"isAxiosError",{value:!0}),ie.from=(e,t,n,s,i,r)=>{const o=Object.create(re);return se.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),ie.call(o,e.message,t,n,s,i),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const ue=se.toFlatObject(se,{},null,(function(e){return/^is[A-Z]/.test(e)}));function he(e,t,n){if(!se.isObject(e))throw new TypeError("target must be an object");t=t||new(f.default||FormData);const s=(n=se.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!se.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,r=n.dots,o=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&se.isSpecCompliantForm(t);if(!se.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(se.isDate(e))return e.toISOString();if(!a&&se.isBlob(e))throw new ie("Blob is not supported. Use a Buffer instead.");return se.isArrayBuffer(e)||se.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"==typeof e)if(se.endsWith(n,"{}"))n=s?n:n.slice(0,-2),e=JSON.stringify(e);else if(se.isArray(e)&&function(e){return se.isArray(e)&&!e.some(ae)}(e)||(se.isFileList(e)||se.endsWith(n,"[]"))&&(a=se.toArray(e)))return n=ce(n),a.forEach((function(e,s){!se.isUndefined(e)&&null!==e&&t.append(!0===o?le([n],s,r):null===o?n:n+"[]",c(e))})),!1;return!!ae(e)||(t.append(le(i,n,r),c(e)),!1)}const u=[],h=Object.assign(ue,{defaultVisitor:l,convertValue:c,isVisitable:ae});if(!se.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!se.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+s.join("."));u.push(n),se.forEach(n,(function(n,r){!0===(!(se.isUndefined(n)||null===n)&&i.call(t,n,se.isString(r)?r.trim():r,s,h))&&e(n,s?s.concat(r):[r])})),u.pop()}}(e),t}function pe(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function de(e,t){this._pairs=[],e&&he(e,this,t)}const fe=de.prototype;function me(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ge(e,t,n){if(!t)return e;const s=n&&n.encode||me,i=n&&n.serialize;let r;if(r=i?i(t,n):se.isURLSearchParams(t)?t.toString():new de(t,n).toString(s),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}fe.append=function(e,t){this._pairs.push([e,t])},fe.toString=function(e){const t=e?function(t){return e.call(this,t,pe)}:pe;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const ve=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){se.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ye={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},be={isNode:!0,classes:{URLSearchParams:m.default.URLSearchParams,FormData:f.default,Blob:"undefined"!=typeof Blob&&Blob||null},protocols:["http","https","file","data"]},we="undefined"!=typeof window&&"undefined"!=typeof document,Se=(xe="undefined"!=typeof navigator&&navigator.product,we&&["ReactNative","NativeScript","NS"].indexOf(xe)<0);var xe;const Ee="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ce={...Object.freeze({__proto__:null,hasBrowserEnv:we,hasStandardBrowserWebWorkerEnv:Ee,hasStandardBrowserEnv:Se}),...be};function Te(e){function t(e,n,s,i){let r=e[i++];const o=Number.isFinite(+r),a=i>=e.length;return r=!r&&se.isArray(s)?s.length:r,a?(se.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!o):(s[r]&&se.isObject(s[r])||(s[r]=[]),t(e,n,s[r],i)&&se.isArray(s[r])&&(s[r]=function(e){const t={},n=Object.keys(e);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],t[r]=e[r];return t}(s[r])),!o)}if(se.isFormData(e)&&se.isFunction(e.entries)){const n={};return se.forEachEntry(e,((e,s)=>{t(function(e){return se.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),s,n,0)})),n}return null}const Re={transitional:ye,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=se.isObject(e);if(i&&se.isHTMLForm(e)&&(e=new FormData(e)),se.isFormData(e))return s&&s?JSON.stringify(Te(e)):e;if(se.isArrayBuffer(e)||se.isBuffer(e)||se.isStream(e)||se.isFile(e)||se.isBlob(e))return e;if(se.isArrayBufferView(e))return e.buffer;if(se.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return he(e,new Ce.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,s){return Ce.isNode&&se.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=se.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return he(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),function(e,t,n){if(se.isString(e))try{return(0,JSON.parse)(e),se.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Re.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(e&&se.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw ie.from(e,ie.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ce.classes.FormData,Blob:Ce.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};se.forEach(["delete","get","head","post","put","patch"],(e=>{Re.headers[e]={}}));const _e=Re,Pe=se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ke=Symbol("internals");function Ae(e){return e&&String(e).trim().toLowerCase()}function Me(e){return!1===e||null==e?e:se.isArray(e)?e.map(Me):String(e)}function Oe(e,t,n,s,i){return se.isFunction(s)?s.call(this,t,n):(i&&(t=n),se.isString(t)?se.isString(s)?-1!==t.indexOf(s):se.isRegExp(s)?s.test(t):void 0:void 0)}class Ie{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function i(e,t,n){const i=Ae(t);if(!i)throw new Error("header name must be a non-empty string");const r=se.findKey(s,i);(!r||void 0===s[r]||!0===n||void 0===n&&!1!==s[r])&&(s[r||t]=Me(e))}const r=(e,t)=>se.forEach(e,((e,n)=>i(e,n,t)));return se.isPlainObject(e)||e instanceof this.constructor?r(e,t):se.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?r((e=>{const t={};let n,s,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),s=e.substring(i+1).trim(),!n||t[n]&&Pe[n]||("set-cookie"===n?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=Ae(e)){const n=se.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}(e);if(se.isFunction(t))return t.call(this,e,n);if(se.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ae(e)){const n=se.findKey(this,e);return!(!n||void 0===this[n]||t&&!Oe(0,this[n],n,t))}return!1}delete(e,t){const n=this;let s=!1;function i(e){if(e=Ae(e)){const i=se.findKey(n,e);!i||t&&!Oe(0,n[i],i,t)||(delete n[i],s=!0)}}return se.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const i=t[n];e&&!Oe(0,this[i],i,e,!0)||(delete this[i],s=!0)}return s}normalize(e){const t=this,n={};return se.forEach(this,((s,i)=>{const r=se.findKey(n,i);if(r)return t[r]=Me(s),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Me(s),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return se.forEach(this,((n,s)=>{null!=n&&!1!==n&&(t[s]=e&&se.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[ke]=this[ke]={accessors:{}}).accessors,n=this.prototype;function s(e){const s=Ae(e);t[s]||(function(e,t){const n=se.toCamelCase(" "+t);["get","set","has"].forEach((s=>{Object.defineProperty(e,s+n,{value:function(e,n,i){return this[s].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[s]=!0)}return se.isArray(e)?e.forEach(s):s(e),this}}Ie.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),se.reduceDescriptors(Ie.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),se.freezeMethods(Ie);const Be=Ie;function qe(e,t){const n=this||_e,s=t||n,i=Be.from(s.headers);let r=s.data;return se.forEach(e,(function(e){r=e.call(n,r,i.normalize(),t?t.status:void 0)})),i.normalize(),r}function Le(e){return!(!e||!e.__CANCEL__)}function Fe(e,t,n){ie.call(this,null==e?"canceled":e,ie.ERR_CANCELED,t,n),this.name="CanceledError"}function je(e,t,n){const s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new ie("Request failed with status code "+n.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function De(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}se.inherits(Fe,ie,{__CANCEL__:!0});function Ne(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const Ue=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function $e(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i,r=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=s[o];i||(i=c),n[r]=a,s[r]=c;let u=o,h=0;for(;u!==r;)h+=n[u++],u%=e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),c-i<t)return;const p=l&&c-l;return p?Math.round(1e3*h/p):void 0}}const ze=Symbol("internals");class Ke extends S.default.Transform{constructor(e){super({readableHighWaterMark:(e=se.toFlatObject(e,{maxRate:0,chunkSize:65536,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,((e,t)=>!se.isUndefined(t[e])))).chunkSize});const t=this,n=this[ze]={length:e.length,timeWindow:e.timeWindow,ticksRate:e.ticksRate,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null},s=$e(n.ticksRate*e.samplesCount,n.timeWindow);this.on("newListener",(e=>{"progress"===e&&(n.isCaptured||(n.isCaptured=!0))}));let i=0;n.updateProgress=function(e,t){let n=0;const s=1e3/t;let i=null;return function(t,r){const o=Date.now();if(t||o-n>s)return i&&(clearTimeout(i),i=null),n=o,e.apply(null,r);i||(i=setTimeout((()=>(i=null,n=Date.now(),e.apply(null,r))),s-(o-n)))}}((function(){const e=n.length,r=n.bytesSeen,o=r-i;if(!o||t.destroyed)return;const a=s(o);i=r,process.nextTick((()=>{t.emit("progress",{loaded:r,total:e,progress:e?r/e:void 0,bytes:o,rate:a||void 0,estimated:a&&e&&r<=e?(e-r)/a:void 0})}))}),n.ticksRate);const r=()=>{n.updateProgress(!0)};this.once("end",r),this.once("error",r)}_read(e){const t=this[ze];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,n){const s=this,i=this[ze],r=i.maxRate,o=this.readableHighWaterMark,a=i.timeWindow,c=r/(1e3/a),l=!1!==i.minChunkSize?Math.max(i.minChunkSize,.01*c):0,u=(e,t)=>{const n=Buffer.byteLength(e);let u,h=null,p=o,d=0;if(r){const e=Date.now();(!i.ts||(d=e-i.ts)>=a)&&(i.ts=e,u=c-i.bytes,i.bytes=u<0?-u:0,d=0),u=c-i.bytes}if(r){if(u<=0)return setTimeout((()=>{t(null,e)}),a-d);u<p&&(p=u)}p&&n>p&&n-p>l&&(h=e.subarray(p),e=e.subarray(0,p)),function(e,t){const n=Buffer.byteLength(e);i.bytesSeen+=n,i.bytes+=n,i.isCaptured&&i.updateProgress(),s.push(e)?process.nextTick(t):i.onReadCallback=()=>{i.onReadCallback=null,process.nextTick(t)}}(e,h?()=>{process.nextTick(t,null,h)}:t)};u(e,(function e(t,s){if(t)return n(t);s?u(s,e):n(null)}))}setLength(e){return this[ze].length=+e,this}}const We=Ke,{asyncIterator:He}=Symbol,Ve=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[He]?yield*e[He]():yield e},Ge=se.ALPHABET.ALPHA_DIGIT+"-_",Je=new c.TextEncoder,Ye="\r\n",Qe=Je.encode(Ye);class Ze{constructor(e,t){const{escapeName:n}=this.constructor,s=se.isString(t);let i=`Content-Disposition: form-data; name="${n(e)}"${!s&&t.name?`; filename="${n(t.name)}"`:""}\r\n`;s?t=Je.encode(String(t).replace(/\r?\n|\r\n?/g,Ye)):i+=`Content-Type: ${t.type||"application/octet-stream"}\r\n`,this.headers=Je.encode(i+Ye),this.contentLength=s?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+2,this.name=e,this.value=t}async*encode(){yield this.headers;const{value:e}=this;se.isTypedArray(e)?yield e:yield*Ve(e),yield Qe}static escapeName(e){return String(e).replace(/[\r\n"]/g,(e=>({"\r":"%0D","\n":"%0A",'"':"%22"}[e])))}}class Xe extends S.default.Transform{__transform(e,t,n){this.push(e),n()}_transform(e,t,n){if(0!==e.length&&(this._transform=this.__transform,120!==e[0])){const e=Buffer.alloc(2);e[0]=120,e[1]=156,this.push(e,t)}this.__transform(e,t,n)}}const et=Xe,tt=(e,t)=>se.isAsyncFn(e)?function(...n){const s=n.pop();e.apply(this,n).then((e=>{try{t?s(null,...t(e)):s(null,e)}catch(e){s(e)}}),s)}:e,nt={flush:w.default.constants.Z_SYNC_FLUSH,finishFlush:w.default.constants.Z_SYNC_FLUSH},st={flush:w.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:w.default.constants.BROTLI_OPERATION_FLUSH},it=se.isFunction(w.default.createBrotliDecompress),{http:rt,https:ot}=b.default,at=/https:?/,ct=Ce.protocols.map((e=>e+":"));function lt(e){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e)}function ut(e,t,n){let s=t;if(!s&&!1!==s){const e=r.getProxyForUrl(n);e&&(s=new URL(e))}if(s){if(s.username&&(s.auth=(s.username||"")+":"+(s.password||"")),s.auth){(s.auth.username||s.auth.password)&&(s.auth=(s.auth.username||"")+":"+(s.auth.password||""));const t=Buffer.from(s.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+t}e.headers.host=e.hostname+(e.port?":"+e.port:"");const t=s.hostname||s.host;e.hostname=t,e.host=t,e.port=s.port,e.path=n,s.protocol&&(e.protocol=s.protocol.includes(":")?s.protocol:`${s.protocol}:`)}e.beforeRedirects.proxy=function(e){ut(e,t,e.href)}}const ht="undefined"!=typeof process&&"process"===se.kindOf(process),pt=(e,t)=>(({address:e,family:t})=>{if(!se.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(e.indexOf(".")<0?6:4)}})(se.isObject(e)?e:{address:e,family:t}),dt=ht&&function(e){return t=async function(t,n,s){let{data:i,lookup:r,family:o}=e;const{responseType:a,responseEncoding:c}=e,l=e.method.toUpperCase();let u,p,d=!1;if(r){const e=tt(r,(e=>se.isArray(e)?e:[e]));r=(t,n,s)=>{e(t,n,((e,t,i)=>{const r=se.isArray(t)?t.map((e=>pt(e))):[pt(t,i)];n.all?s(e,r):s(e,r[0].address,r[0].family)}))}}const f=new x.default,m=()=>{e.cancelToken&&e.cancelToken.unsubscribe(b),e.signal&&e.signal.removeEventListener("abort",b),f.removeAllListeners()};function b(t){f.emit("abort",!t||t.type?new Fe(null,e,p):t)}s(((e,t)=>{u=!0,t&&(d=!0,m())})),f.once("abort",n),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(b),e.signal&&(e.signal.aborted?b():e.signal.addEventListener("abort",b)));const E=De(e.baseURL,e.url),C=new URL(E,"http://localhost"),T=C.protocol||ct[0];if("data:"===T){let s;if("GET"!==l)return je(t,n,{status:405,statusText:"method not allowed",headers:{},config:e});try{s=function(e,t,n){const s=n&&n.Blob||Ce.classes.Blob,i=Ne(e);if(void 0===t&&s&&(t=!0),"data"===i){e=i.length?e.slice(i.length+1):e;const n=Ue.exec(e);if(!n)throw new ie("Invalid URL",ie.ERR_INVALID_URL);const r=n[1],o=n[2],a=n[3],c=Buffer.from(decodeURIComponent(a),o?"base64":"utf8");if(t){if(!s)throw new ie("Blob is not supported",ie.ERR_NOT_SUPPORT);return new s([c],{type:r})}return c}throw new ie("Unsupported protocol "+i,ie.ERR_NOT_SUPPORT)}(e.url,"blob"===a,{Blob:e.env&&e.env.Blob})}catch(t){throw ie.from(t,ie.ERR_BAD_REQUEST,e)}return"text"===a?(s=s.toString(c),c&&"utf8"!==c||(s=se.stripBOM(s))):"stream"===a&&(s=S.default.Readable.from(s)),je(t,n,{data:s,status:200,statusText:"OK",headers:new Be,config:e})}if(-1===ct.indexOf(T))return n(new ie("Unsupported protocol "+T,ie.ERR_BAD_REQUEST,e));const R=Be.from(e.headers).normalize();R.set("User-Agent","axios/1.6.2",!1);const _=e.onDownloadProgress,P=e.onUploadProgress,k=e.maxRate;let A,M;if(se.isSpecCompliantForm(i)){const e=R.getContentType(/boundary=([-_\w\d]{10,70})/i);i=((e,t,n)=>{const{tag:s="form-data-boundary",size:i=25,boundary:r=s+"-"+se.generateString(i,Ge)}=n||{};if(!se.isFormData(e))throw TypeError("FormData instance required");if(r.length<1||r.length>70)throw Error("boundary must be 10-70 characters long");const o=Je.encode("--"+r+Ye),a=Je.encode("--"+r+"--"+Ye+Ye);let c=a.byteLength;const l=Array.from(e.entries()).map((([e,t])=>{const n=new Ze(e,t);return c+=n.size,n}));c+=o.byteLength*l.length,c=se.toFiniteNumber(c);const u={"Content-Type":`multipart/form-data; boundary=${r}`};return Number.isFinite(c)&&(u["Content-Length"]=c),t&&t(u),h.Readable.from(async function*(){for(const e of l)yield o,yield*e.encode();yield a}())})(i,(e=>{R.set(e)}),{tag:"axios-1.6.2-boundary",boundary:e&&e[1]||void 0})}else if(se.isFormData(i)&&se.isFunction(i.getHeaders)){if(R.set(i.getHeaders()),!R.hasContentLength())try{const e=await y.default.promisify(i.getLength).call(i);Number.isFinite(e)&&e>=0&&R.setContentLength(e)}catch(e){}}else if(se.isBlob(i))i.size&&R.setContentType(i.type||"application/octet-stream"),R.setContentLength(i.size||0),i=S.default.Readable.from(Ve(i));else if(i&&!se.isStream(i)){if(Buffer.isBuffer(i));else if(se.isArrayBuffer(i))i=Buffer.from(new Uint8Array(i));else{if(!se.isString(i))return n(new ie("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",ie.ERR_BAD_REQUEST,e));i=Buffer.from(i,"utf-8")}if(R.setContentLength(i.length,!1),e.maxBodyLength>-1&&i.length>e.maxBodyLength)return n(new ie("Request body larger than maxBodyLength limit",ie.ERR_BAD_REQUEST,e))}const O=se.toFiniteNumber(R.getContentLength());let I,B;se.isArray(k)?(A=k[0],M=k[1]):A=M=k,i&&(P||A)&&(se.isStream(i)||(i=S.default.Readable.from(i,{objectMode:!1})),i=S.default.pipeline([i,new We({length:O,maxRate:se.toFiniteNumber(A)})],se.noop),P&&i.on("progress",(e=>{P(Object.assign(e,{upload:!0}))}))),e.auth&&(I=(e.auth.username||"")+":"+(e.auth.password||"")),!I&&C.username&&(I=C.username+":"+C.password),I&&R.delete("authorization");try{B=ge(C.pathname+C.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){const s=new Error(t.message);return s.config=e,s.url=e.url,s.exists=!0,n(s)}R.set("Accept-Encoding","gzip, compress, deflate"+(it?", br":""),!1);const q={path:B,method:l,headers:R.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:I,protocol:T,family:o,beforeRedirect:lt,beforeRedirects:{}};let L;!se.isUndefined(r)&&(q.lookup=r),e.socketPath?q.socketPath=e.socketPath:(q.hostname=C.hostname,q.port=C.port,ut(q,e.proxy,T+"//"+C.hostname+(C.port?":"+C.port:"")+q.path));const F=at.test(q.protocol);if(q.agent=F?e.httpsAgent:e.httpAgent,e.transport?L=e.transport:0===e.maxRedirects?L=F?v.default:g.default:(e.maxRedirects&&(q.maxRedirects=e.maxRedirects),e.beforeRedirect&&(q.beforeRedirects.config=e.beforeRedirect),L=F?ot:rt),e.maxBodyLength>-1?q.maxBodyLength=e.maxBodyLength:q.maxBodyLength=1/0,e.insecureHTTPParser&&(q.insecureHTTPParser=e.insecureHTTPParser),p=L.request(q,(function(s){if(p.destroyed)return;const i=[s],r=+s.headers["content-length"];if(_){const e=new We({length:se.toFiniteNumber(r),maxRate:se.toFiniteNumber(M)});_&&e.on("progress",(e=>{_(Object.assign(e,{download:!0}))})),i.push(e)}let o=s;const u=s.req||p;if(!1!==e.decompress&&s.headers["content-encoding"])switch("HEAD"!==l&&204!==s.statusCode||delete s.headers["content-encoding"],(s.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":i.push(w.default.createUnzip(nt)),delete s.headers["content-encoding"];break;case"deflate":i.push(new et),i.push(w.default.createUnzip(nt)),delete s.headers["content-encoding"];break;case"br":it&&(i.push(w.default.createBrotliDecompress(st)),delete s.headers["content-encoding"])}o=i.length>1?S.default.pipeline(i,se.noop):i[0];const h=S.default.finished(o,(()=>{h(),m()})),g={status:s.statusCode,statusText:s.statusMessage,headers:new Be(s.headers),config:e,request:u};if("stream"===a)g.data=o,je(t,n,g);else{const s=[];let i=0;o.on("data",(function(t){s.push(t),i+=t.length,e.maxContentLength>-1&&i>e.maxContentLength&&(d=!0,o.destroy(),n(new ie("maxContentLength size of "+e.maxContentLength+" exceeded",ie.ERR_BAD_RESPONSE,e,u)))})),o.on("aborted",(function(){if(d)return;const t=new ie("maxContentLength size of "+e.maxContentLength+" exceeded",ie.ERR_BAD_RESPONSE,e,u);o.destroy(t),n(t)})),o.on("error",(function(t){p.destroyed||n(ie.from(t,null,e,u))})),o.on("end",(function(){try{let e=1===s.length?s[0]:Buffer.concat(s);"arraybuffer"!==a&&(e=e.toString(c),c&&"utf8"!==c||(e=se.stripBOM(e))),g.data=e}catch(t){return n(ie.from(t,null,e,g.request,g))}je(t,n,g)}))}f.once("abort",(e=>{o.destroyed||(o.emit("error",e),o.destroy())}))})),f.once("abort",(e=>{n(e),p.destroy(e)})),p.on("error",(function(t){n(ie.from(t,null,e,p))})),p.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){const t=parseInt(e.timeout,10);if(Number.isNaN(t))return void n(new ie("error trying to parse `config.timeout` to int",ie.ERR_BAD_OPTION_VALUE,e,p));p.setTimeout(t,(function(){if(u)return;let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const s=e.transitional||ye;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ie(t,s.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,e,p)),b()}))}if(se.isStream(i)){let t=!1,n=!1;i.on("end",(()=>{t=!0})),i.once("error",(e=>{n=!0,p.destroy(e)})),i.on("close",(()=>{t||n||b(new Fe("Request stream has been aborted",e,p))})),i.pipe(p)}else p.end(i)},new Promise(((e,n)=>{let s,i;const r=(e,t)=>{i||(i=!0,s&&s(e,t))},o=e=>{r(e,!0),n(e)};t((t=>{r(t),e(t)}),o,(e=>s=e)).catch(o)}));var t},ft=Ce.hasStandardBrowserEnv?{write(e,t,n,s,i,r){const o=[e+"="+encodeURIComponent(t)];se.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),se.isString(s)&&o.push("path="+s),se.isString(i)&&o.push("domain="+i),!0===r&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}},mt=Ce.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function s(n){let s=n;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(e){const t=se.isString(e)?s(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function gt(e,t){let n=0;const s=$e(50,250);return i=>{const r=i.loaded,o=i.lengthComputable?i.total:void 0,a=r-n,c=s(a);n=r;const l={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&r<=o?(o-r)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const vt={http:dt,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let s=e.data;const i=Be.from(e.headers).normalize();let r,o,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}if(se.isFormData(s))if(Ce.hasStandardBrowserEnv||Ce.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const h=De(e.baseURL,e.url);function p(){if(!u)return;const s=Be.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());je((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:s,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),ge(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=p:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(p)},u.onabort=function(){u&&(n(new ie("Request aborted",ie.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new ie("Network Error",ie.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const s=e.transitional||ye;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ie(t,s.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,e,u)),u=null},Ce.hasStandardBrowserEnv&&(c&&se.isFunction(c)&&(c=c(e)),c||!1!==c&&mt(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&ft.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===s&&i.setContentType(null),"setRequestHeader"in u&&se.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),se.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",gt(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",gt(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=t=>{u&&(n(!t||t.type?new Fe(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));const d=Ne(h);d&&-1===Ce.protocols.indexOf(d)?n(new ie("Unsupported protocol "+d+":",ie.ERR_BAD_REQUEST,e)):u.send(s||null)}))}};se.forEach(vt,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const yt=e=>`- ${e}`,bt=e=>se.isFunction(e)||null===e||!1===e,wt=e=>{e=se.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let r=0;r<t;r++){let t;if(n=e[r],s=n,!bt(n)&&(s=vt[(t=String(n)).toLowerCase()],void 0===s))throw new ie(`Unknown adapter '${t}'`);if(s)break;i[t||"#"+r]=s}if(!s){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new ie("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(yt).join("\n"):" "+yt(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function St(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fe(null,e)}function xt(e){return St(e),e.headers=Be.from(e.headers),e.data=qe.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),wt(e.adapter||_e.adapter)(e).then((function(t){return St(e),t.data=qe.call(e,e.transformResponse,t),t.headers=Be.from(t.headers),t}),(function(t){return Le(t)||(St(e),t&&t.response&&(t.response.data=qe.call(e,e.transformResponse,t.response),t.response.headers=Be.from(t.response.headers))),Promise.reject(t)}))}const Et=e=>e instanceof Be?e.toJSON():e;function Ct(e,t){t=t||{};const n={};function s(e,t,n){return se.isPlainObject(e)&&se.isPlainObject(t)?se.merge.call({caseless:n},e,t):se.isPlainObject(t)?se.merge({},t):se.isArray(t)?t.slice():t}function i(e,t,n){return se.isUndefined(t)?se.isUndefined(e)?void 0:s(void 0,e,n):s(e,t,n)}function r(e,t){if(!se.isUndefined(t))return s(void 0,t)}function o(e,t){return se.isUndefined(t)?se.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function a(n,i,r){return r in t?s(n,i):r in e?s(void 0,n):void 0}const c={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(Et(e),Et(t),!0)};return se.forEach(Object.keys(Object.assign({},e,t)),(function(s){const r=c[s]||i,o=r(e[s],t[s],s);se.isUndefined(o)&&r!==a||(n[s]=o)})),n}const Tt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Tt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Rt={};Tt.transitional=function(e,t,n){function s(e,t){return"[Axios v1.6.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,r)=>{if(!1===e)throw new ie(s(i," has been removed"+(t?" in "+t:"")),ie.ERR_DEPRECATED);return t&&!Rt[i]&&(Rt[i]=!0,console.warn(s(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,r)}};const _t={assertOptions:function(e,t,n){if("object"!=typeof e)throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const r=s[i],o=t[r];if(o){const t=e[r],n=void 0===t||o(t,r,e);if(!0!==n)throw new ie("option "+r+" must be "+n,ie.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ie("Unknown option "+r,ie.ERR_BAD_OPTION)}},validators:Tt},Pt=_t.validators;class kt{constructor(e){this.defaults=e,this.interceptors={request:new ve,response:new ve}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ct(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:i}=t;void 0!==n&&_t.assertOptions(n,{silentJSONParsing:Pt.transitional(Pt.boolean),forcedJSONParsing:Pt.transitional(Pt.boolean),clarifyTimeoutError:Pt.transitional(Pt.boolean)},!1),null!=s&&(se.isFunction(s)?t.paramsSerializer={serialize:s}:_t.assertOptions(s,{encode:Pt.function,serialize:Pt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=i&&se.merge(i.common,i[t.method]);i&&se.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Be.concat(r,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[xt.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);h<u;)l=l.then(e[h++],e[h++]);return l}u=o.length;let p=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{p=e(p)}catch(e){t.call(this,e);break}}try{l=xt.call(this,p)}catch(e){return Promise.reject(e)}for(h=0,u=c.length;h<u;)l=l.then(c[h++],c[h++]);return l}getUri(e){return ge(De((e=Ct(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}se.forEach(["delete","get","head","options"],(function(e){kt.prototype[e]=function(t,n){return this.request(Ct(n||{},{method:e,url:t,data:(n||{}).data}))}})),se.forEach(["post","put","patch"],(function(e){function t(t){return function(n,s,i){return this.request(Ct(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:s}))}}kt.prototype[e]=t(),kt.prototype[e+"Form"]=t(!0)}));const At=kt;class Mt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const s=new Promise((e=>{n.subscribe(e),t=e})).then(e);return s.cancel=function(){n.unsubscribe(t)},s},e((function(e,s,i){n.reason||(n.reason=new Fe(e,s,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Mt((function(t){e=t})),cancel:e}}}const Ot=Mt,It={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(It).forEach((([e,t])=>{It[t]=e}));const Bt=It,qt=function e(t){const n=new At(t),s=E(At.prototype.request,n);return se.extend(s,At.prototype,n,{allOwnKeys:!0}),se.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e(Ct(t,n))},s}(_e);qt.Axios=At,qt.CanceledError=Fe,qt.CancelToken=Ot,qt.isCancel=Le,qt.VERSION="1.6.2",qt.toFormData=he,qt.AxiosError=ie,qt.Cancel=qt.CanceledError,qt.all=function(e){return Promise.all(e)},qt.spread=function(e){return function(t){return e.apply(null,t)}},qt.isAxiosError=function(e){return se.isObject(e)&&!0===e.isAxiosError},qt.mergeConfig=Ct,qt.AxiosHeaders=Be,qt.formToJSON=e=>Te(se.isHTMLForm(e)?new FormData(e):e),qt.getAdapter=wt,qt.HttpStatusCode=Bt,qt.default=qt,e.exports=qt},8177:(e,t,n)=>{if(!globalThis.ReadableStream)try{const e=n(7742),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,n(2477)),e.emitWarning=t}catch(n){throw e.emitWarning=t,n}}catch(e){Object.assign(globalThis,n(5952))}try{const{Blob:e}=n(4300);e&&!e.prototype.stream&&(e.prototype.stream=function(e){let t=0;const n=this;return new ReadableStream({type:"bytes",async pull(e){const s=n.slice(t,Math.min(n.size,t+65536)),i=await s.arrayBuffer();t+=i.byteLength,e.enqueue(new Uint8Array(i)),t===n.size&&e.close()}})})}catch(e){}},2398:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DataViewIndexOutOfBoundsError:()=>U,DecodeError:()=>w,Decoder:()=>K,EXT_TIMESTAMP:()=>S,Encoder:()=>A,ExtData:()=>y,ExtensionCodec:()=>P,decode:()=>H,decodeArrayStream:()=>ee,decodeAsync:()=>X,decodeMulti:()=>V,decodeMultiStream:()=>te,decodeStream:()=>ne,decodeTimestampExtension:()=>R,decodeTimestampToTimeSpec:()=>T,encode:()=>O,encodeDateToTimeSpec:()=>E,encodeTimeSpecToTimestamp:()=>x,encodeTimestampExtension:()=>C});var s,i,r,o=4294967295;function a(e,t,n){var s=Math.floor(n/4294967296),i=n;e.setUint32(t,s),e.setUint32(t+4,i)}function c(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var l=("undefined"==typeof process||"never"!==(null===(s=null===process||void 0===process?void 0:process.env)||void 0===s?void 0:s.TEXT_ENCODING))&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function u(e){for(var t=e.length,n=0,s=0;s<t;){var i=e.charCodeAt(s++);if(0!=(4294967168&i))if(0==(4294965248&i))n+=2;else{if(i>=55296&&i<=56319&&s<t){var r=e.charCodeAt(s);56320==(64512&r)&&(++s,i=((1023&i)<<10)+(1023&r)+65536)}n+=0==(4294901760&i)?3:4}else n++}return n}var h=l?new TextEncoder:void 0,p=l?"undefined"!=typeof process&&"force"!==(null===(i=null===process||void 0===process?void 0:process.env)||void 0===i?void 0:i.TEXT_ENCODING)?200:0:o,d=(null==h?void 0:h.encodeInto)?function(e,t,n){h.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(h.encode(e),n)};function f(e,t,n){for(var s=t,i=s+n,r=[],o="";s<i;){var a=e[s++];if(0==(128&a))r.push(a);else if(192==(224&a)){var c=63&e[s++];r.push((31&a)<<6|c)}else if(224==(240&a)){c=63&e[s++];var l=63&e[s++];r.push((31&a)<<12|c<<6|l)}else if(240==(248&a)){var u=(7&a)<<18|(c=63&e[s++])<<12|(l=63&e[s++])<<6|63&e[s++];u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u)}else r.push(a);r.length>=4096&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return r.length>0&&(o+=String.fromCharCode.apply(String,r)),o}var m,g=l?new TextDecoder:null,v=l?"undefined"!=typeof process&&"force"!==(null===(r=null===process||void 0===process?void 0:process.env)||void 0===r?void 0:r.TEXT_DECODER)?200:0:o,y=function(e,t){this.type=e,this.data=t},b=(m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},m(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w=function(e){function t(n){var s=e.call(this,n)||this,i=Object.create(t.prototype);return Object.setPrototypeOf(s,i),Object.defineProperty(s,"name",{configurable:!0,enumerable:!1,value:t.name}),s}return b(t,e),t}(Error),S=-1;function x(e){var t,n=e.sec,s=e.nsec;if(n>=0&&s>=0&&n<=17179869183){if(0===s&&n<=4294967295){var i=new Uint8Array(4);return(t=new DataView(i.buffer)).setUint32(0,n),i}var r=n/4294967296,o=4294967295&n;return i=new Uint8Array(8),(t=new DataView(i.buffer)).setUint32(0,s<<2|3&r),t.setUint32(4,o),i}return i=new Uint8Array(12),(t=new DataView(i.buffer)).setUint32(0,s),a(t,4,n),i}function E(e){var t=e.getTime(),n=Math.floor(t/1e3),s=1e6*(t-1e3*n),i=Math.floor(s/1e9);return{sec:n+i,nsec:s-1e9*i}}function C(e){return e instanceof Date?x(E(e)):null}function T(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var n=t.getUint32(0);return{sec:4294967296*(3&n)+t.getUint32(4),nsec:n>>>2};case 12:return{sec:c(t,4),nsec:t.getUint32(0)};default:throw new w("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}function R(e){var t=T(e);return new Date(1e3*t.sec+t.nsec/1e6)}var _={type:S,encode:C,decode:R},P=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(_)}return e.prototype.register=function(e){var t=e.type,n=e.encode,s=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=s;else{var i=1+t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=s}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++)if(null!=(s=this.builtInEncoders[n])&&null!=(i=s(e,t)))return new y(-1-n,i);for(n=0;n<this.encoders.length;n++){var s,i;if(null!=(s=this.encoders[n])&&null!=(i=s(e,t)))return new y(n,i)}return e instanceof y?e:null},e.prototype.decode=function(e,t,n){var s=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return s?s(e,t,n):new y(t,e)},e.defaultCodec=new e,e}();function k(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var A=function(){function e(e,t,n,s,i,r,o,a){void 0===e&&(e=P.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===s&&(s=2048),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=s,this.sortKeys=i,this.forceFloat32=r,this.ignoreUndefined=o,this.forceIntegerToFloat=a,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.getUint8Array()},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),s=new DataView(t);n.set(this.bytes),this.view=s,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>p){var t=u(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),d(e,this.bytes,this.pos),this.pos+=t}else t=u(e),this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){for(var s=e.length,i=n,r=0;r<s;){var o=e.charCodeAt(r++);if(0!=(4294967168&o)){if(0==(4294965248&o))t[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&r<s){var a=e.charCodeAt(r);56320==(64512&a)&&(++r,o=((1023&o)<<10)+(1023&a)+65536)}0==(4294901760&o)?(t[i++]=o>>12&15|224,t[i++]=o>>6&63|128):(t[i++]=o>>18&7|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128)}t[i++]=63&o|128}else t[i++]=o}}(e,this.bytes,this.pos),this.pos+=t},e.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var n=k(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: ".concat(n));this.writeU8(221),this.writeU32(n)}for(var s=0,i=e;s<i.length;s++){var r=i[s];this.doEncode(r,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var n=0,s=0,i=t;s<i.length;s++)void 0!==e[i[s]]&&n++;return n},e.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var s=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else{if(!(s<4294967296))throw new Error("Too large map object: ".concat(s));this.writeU8(223),this.writeU32(s)}for(var i=0,r=n;i<r.length;i++){var o=r[i],a=e[o];this.ignoreUndefined&&void 0===a||(this.encodeString(o),this.doEncode(a,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: ".concat(t));this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,n){var s=n/4294967296,i=n;e.setUint32(t,s),e.setUint32(t+4,i)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),a(this.view,this.pos,e),this.pos+=8},e}(),M={};function O(e,t){return void 0===t&&(t=M),new A(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat).encode(e)}function I(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}var B=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){e:for(var s=0,i=this.caches[n-1];s<i.length;s++){for(var r=i[s],o=r.bytes,a=0;a<n;a++)if(o[a]!==e[t+a])continue e;return r.str}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],s={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)},e.prototype.decode=function(e,t,n){var s=this.find(e,t,n);if(null!=s)return this.hit++,s;this.miss++;var i=f(e,t,n),r=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(r,i),i},e}(),q=function(e,t){var n,s,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,s&&(i=2&r[0]?s.return:r[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,r[1])).done)return i;switch(s=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],s=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},L=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(n){t[n]=e[n]&&function(t){return new Promise((function(s,i){!function(e,t,n,s){Promise.resolve(s).then((function(t){e({value:t,done:n})}),t)}(s,i,(t=e[n](t)).done,t.value)}))}}},F=function(e){return this instanceof F?(this.v=e,this):new F(e)},j=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=n.apply(e,t||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(e){i[e]&&(s[e]=function(t){return new Promise((function(n,s){r.push([e,t,n,s])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof F?Promise.resolve(n.value.v).then(c,l):u(r[0][2],n)}catch(e){u(r[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}},D=new DataView(new ArrayBuffer(0)),N=new Uint8Array(D.buffer),U=function(){try{D.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),$=new U("Insufficient data"),z=new B,K=function(){function e(e,t,n,s,i,r,a,c){void 0===e&&(e=P.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=o),void 0===s&&(s=o),void 0===i&&(i=o),void 0===r&&(r=o),void 0===a&&(a=o),void 0===c&&(c=z),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=s,this.maxArrayLength=i,this.maxMapLength=r,this.maxExtLength=a,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=D,this.bytes=N,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=k(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=k(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=k(e),s=new Uint8Array(t.length+n.length);s.set(t),s.set(n,t.length),this.setBuffer(s)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return new RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return q(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,n,s,i,r,o,a,c;return r=this,o=void 0,c=function(){var r,o,a,c,l,u,h,p;return q(this,(function(d){switch(d.label){case 0:r=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),t=L(e),d.label=2;case 2:return[4,t.next()];case 3:if((n=d.sent()).done)return[3,5];if(a=n.value,r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{o=this.doDecodeSync(),r=!0}catch(e){if(!(e instanceof U))throw e}this.totalPos+=this.pos,d.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=d.sent(),s={error:c},[3,12];case 7:return d.trys.push([7,,10,11]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,9];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(s)throw s.error;return[7];case 11:return[7];case 12:if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,o]}throw u=(l=this).headByte,h=l.pos,p=l.totalPos,new RangeError("Insufficient data in parsing ".concat(I(u)," at ").concat(p," (").concat(h," in the current buffer)"))}}))},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function s(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(n,s)}i((c=c.apply(r,o||[])).next())}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return j(this,arguments,(function(){var n,s,i,r,o,a,c,l,u;return q(this,(function(h){switch(h.label){case 0:n=t,s=-1,h.label=1;case 1:h.trys.push([1,13,14,19]),i=L(e),h.label=2;case 2:return[4,F(i.next())];case 3:if((r=h.sent()).done)return[3,12];if(o=r.value,t&&0===s)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),n&&(s=this.readArraySize(),n=!1,this.complete()),h.label=4;case 4:h.trys.push([4,9,,10]),h.label=5;case 5:return[4,F(this.doDecodeSync())];case 6:return[4,h.sent()];case 7:return h.sent(),0==--s?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((a=h.sent())instanceof U))throw a;return[3,10];case 10:this.totalPos+=this.pos,h.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return c=h.sent(),l={error:c},[3,19];case 14:return h.trys.push([14,,17,18]),r&&!r.done&&(u=i.return)?[4,F(u.call(i))]:[3,16];case 15:h.sent(),h.label=16;case 16:return[3,18];case 17:if(l)throw l.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!=(s=e-128)){this.pushMapState(s),this.complete();continue e}t={}}else if(e<160){if(0!=(s=e-144)){this.pushArrayState(s),this.complete();continue e}t=[]}else{var n=e-160;t=this.decodeUtf8String(n,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e)n=this.lookU8(),t=this.decodeUtf8String(n,1);else if(218===e)n=this.lookU16(),t=this.decodeUtf8String(n,2);else if(219===e)n=this.lookU32(),t=this.decodeUtf8String(n,4);else if(220===e){if(0!==(s=this.readU16())){this.pushArrayState(s),this.complete();continue e}t=[]}else if(221===e){if(0!==(s=this.readU32())){this.pushArrayState(s),this.complete();continue e}t=[]}else if(222===e){if(0!==(s=this.readU16())){this.pushMapState(s),this.complete();continue e}t={}}else if(223===e){if(0!==(s=this.readU32())){this.pushMapState(s),this.complete();continue e}t={}}else if(196===e){var s=this.lookU8();t=this.decodeBinary(s,1)}else if(197===e)s=this.lookU16(),t=this.decodeBinary(s,2);else if(198===e)s=this.lookU32(),t=this.decodeBinary(s,4);else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e)s=this.lookU8(),t=this.decodeExtension(s,1);else if(200===e)s=this.lookU16(),t=this.decodeExtension(s,2);else{if(201!==e)throw new w("Unrecognized type byte: ".concat(I(e)));s=this.lookU32(),t=this.decodeExtension(s,4)}this.complete();for(var i=this.stack;i.length>0;){var r=i[i.length-1];if(0===r.type){if(r.array[r.position]=t,r.position++,r.position!==r.size)continue e;i.pop(),t=r.array}else{if(1===r.type){if(void 0,"string"!=(o=typeof t)&&"number"!==o)throw new w("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new w("The key __proto__ is not allowed");r.key=t,r.type=2;continue e}if(r.map[r.key]=t,r.readCount++,r.readCount!==r.size){r.key=null,r.type=1;continue e}i.pop(),t=r.map}}return t}var o},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new w("Unrecognized array type byte: ".concat(I(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new w("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new w("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var n;if(e>this.maxStrLength)throw new w("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw $;var s,i=this.pos+t;return s=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,i,e):e>v?function(e,t,n){var s=e.subarray(t,t+n);return g.decode(s)}(this.bytes,i,e):f(this.bytes,i,e),this.pos+=t+e,s},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new w("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw $;var n=this.pos+t,s=this.bytes.subarray(n,n+e);return this.pos+=t+e,s},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new w("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),s=this.decodeBinary(e,t+1);return this.extensionCodec.decode(s,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=c(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}(),W={};function H(e,t){return void 0===t&&(t=W),new K(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decode(e)}function V(e,t){return void 0===t&&(t=W),new K(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeMulti(e)}var G=function(e,t){var n,s,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,s&&(i=2&r[0]?s.return:r[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,r[1])).done)return i;switch(s=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],s=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},J=function(e){return this instanceof J?(this.v=e,this):new J(e)},Y=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=n.apply(e,t||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(e){i[e]&&(s[e]=function(t){return new Promise((function(n,s){r.push([e,t,n,s])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof J?Promise.resolve(n.value.v).then(c,l):u(r[0][2],n)}catch(e){u(r[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}};function Q(e){if(null==e)throw new Error("Assertion Failure: value must not be null nor undefined")}function Z(e){return null!=e[Symbol.asyncIterator]?e:function(e){return Y(this,arguments,(function(){var t,n,s,i;return G(this,(function(r){switch(r.label){case 0:t=e.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,J(t.read())];case 3:return n=r.sent(),s=n.done,i=n.value,s?[4,J(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return Q(i),[4,J(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e)}function X(e,t){return void 0===t&&(t=W),n=this,s=void 0,r=function(){var n;return function(e,t){var n,s,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,s&&(i=2&r[0]?s.return:r[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,r[1])).done)return i;switch(s=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],s=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(s){return n=Z(e),[2,new K(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeAsync(n)]}))},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{c(r.next(e))}catch(e){t(e)}}function a(e){try{c(r.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,a)}c((r=r.apply(n,s||[])).next())}));var n,s,i,r}function ee(e,t){void 0===t&&(t=W);var n=Z(e);return new K(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeArrayStream(n)}function te(e,t){void 0===t&&(t=W);var n=Z(e);return new K(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeStream(n)}function ne(e,t){return void 0===t&&(t=W),te(e,t)}},9016:(e,t,n)=>{"use strict";function s(e,t){return t?t.aborted?Promise.resolve(void 0):new Promise((n=>{const s=i(e,(e=>{t.removeEventListener("abort",r),n(e)})),r=()=>{s.dispose(),t.removeEventListener("abort",r),n(void 0)};t.addEventListener("abort",r)})):new Promise((t=>i(e,t)))}n.r(t),n.d(t,{EventEmitter:()=>r,once:()=>i,toPromise:()=>s});const i=(e,t)=>{const n=e((e=>{t(e),n.dispose()}));return n};class r{constructor(){this.event=(e,t,n)=>{const s=this.add(t?e.bind(t):e);return n?.push(s),s}}get size(){return this.listeners?"function"==typeof this.listeners?1:this.listeners.length:0}fire(e){if(this.listeners)if("function"==typeof this.listeners)this.listeners(e);else for(const t of this.listeners)t(e)}dispose(){this.listeners=void 0}add(e){return this.listeners?"function"==typeof this.listeners?this.listeners=[this.listeners,e]:this.listeners.push(e):this.listeners=e,{dispose:()=>this.rm(e)}}rm(e){if(!this.listeners)return;if("function"==typeof this.listeners)return void(this.listeners===e&&(this.listeners=void 0));const t=this.listeners.indexOf(e);-1!==t&&(2===this.listeners.length?this.listeners=0===t?this.listeners[1]:this.listeners[0]:this.listeners=this.listeners.slice(0,t).concat(this.listeners.slice(t+1)))}}},9453:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(7842);const i=class extends s.Z{#e=0;#t="";constructor(e,t,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),null===n&&(n={});const s=void 0===n.lastModified?Date.now():Number(n.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(t)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof s.Z&&/^(File)$/.test(e[Symbol.toStringTag])}}},6459:(e,t,n)=>{"use strict";n.d(t,{t6:()=>a.Z,$B:()=>o.Z,xB:()=>u,SX:()=>l,e2:()=>h,RA:()=>p});const s=require("node:fs"),i=require("node:path");var r=n(4841),o=n(9453),a=n(7842);const{stat:c}=s.promises,l=(e,t)=>d((0,s.statSync)(e),e,t),u=(e,t)=>c(e).then((n=>d(n,e,t))),h=(e,t)=>c(e).then((n=>f(n,e,t))),p=(e,t)=>f((0,s.statSync)(e),e,t),d=(e,t,n="")=>new a.Z([new m({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:n}),f=(e,t,n="")=>new o.Z([new m({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],(0,i.basename)(t),{type:n,lastModified:e.mtimeMs});class m{#n;#s;constructor(e){this.#n=e.path,this.#s=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,t){return new m({path:this.#n,lastModified:this.lastModified,size:t-e,start:this.#s+e})}async*stream(){const{mtimeMs:e}=await c(this.#n);if(e>this.lastModified)throw new r("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,s.createReadStream)(this.#n,{start:this.#s,end:this.#s+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}},7842:(e,t,n)=>{"use strict";async function*s(e,t=!0){for(const n of e)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(t){let e=n.byteOffset;const t=n.byteOffset+n.byteLength;for(;e!==t;){const s=Math.min(t-e,65536),i=n.buffer.slice(e,e+s);e+=i.byteLength,yield new Uint8Array(i)}}else yield n;else{let e=0,t=n;for(;e!==t.size;){const n=t.slice(e,Math.min(t.size,e+65536)),s=await n.arrayBuffer();e+=s.byteLength,yield new Uint8Array(s)}}}n.d(t,{Z:()=>r}),n(8177);const i=class e{#i=[];#r="";#o=0;#a="transparent";constructor(t=[],n={}){if("object"!=typeof t||null===t)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof n&&"function"!=typeof n)throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===n&&(n={});const s=new TextEncoder;for(const n of t){let t;t=ArrayBuffer.isView(n)?new Uint8Array(n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)):n instanceof ArrayBuffer?new Uint8Array(n.slice(0)):n instanceof e?n:s.encode(`${n}`),this.#o+=ArrayBuffer.isView(t)?t.byteLength:t.size,this.#i.push(t)}this.#a=`${void 0===n.endings?"transparent":n.endings}`;const i=void 0===n.type?"":String(n.type);this.#r=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#o}get type(){return this.#r}async text(){const e=new TextDecoder;let t="";for await(const n of s(this.#i,!1))t+=e.decode(n,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const n of s(this.#i,!1))e.set(n,t),t+=n.length;return e.buffer}stream(){const e=s(this.#i,!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){const n=await e.next();n.done?t.close():t.enqueue(n.value)},async cancel(){await e.return()}})}slice(t=0,n=this.size,s=""){const{size:i}=this;let r=t<0?Math.max(i+t,0):Math.min(t,i),o=n<0?Math.max(i+n,0):Math.min(n,i);const a=Math.max(o-r,0),c=this.#i,l=[];let u=0;for(const e of c){if(u>=a)break;const t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(r&&t<=r)r-=t,o-=t;else{let n;ArrayBuffer.isView(e)?(n=e.subarray(r,Math.min(t,o)),u+=n.byteLength):(n=e.slice(r,Math.min(t,o)),u+=n.size),o-=t,l.push(n),r=0}}const h=new e([],{type:String(s).toLowerCase()});return h.#o=a,h.#i=l,h}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(i.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});const r=i},693:(e,t,n)=>{"use strict";n.d(t,{Ct:()=>d,au:()=>f});var s=n(7842),i=n(9453),{toStringTag:r,iterator:o,hasInstance:a}=Symbol,c=Math.random,l="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),u=(e,t,n)=>(e+="",/^(Blob|File)$/.test(t&&t[r])?[(n=void 0!==n?n+"":"File"==t[r]?t.name:"blob",e),t.name!==n||"blob"==t[r]?new i.Z([t],n,t):t]:[e,t+""]),h=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),p=(e,t,n)=>{if(t.length<n)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${n} arguments required, but only ${t.length} present.`)};const d=class{#c=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[r](){return"FormData"}[o](){return this.entries()}static[a](e){return e&&"object"==typeof e&&"FormData"===e[r]&&!l.some((t=>"function"!=typeof e[t]))}append(...e){p("append",arguments,2),this.#c.push(u(...e))}delete(e){p("delete",arguments,1),e+="",this.#c=this.#c.filter((([t])=>t!==e))}get(e){p("get",arguments,1),e+="";for(var t=this.#c,n=t.length,s=0;s<n;s++)if(t[s][0]===e)return t[s][1];return null}getAll(e,t){return p("getAll",arguments,1),t=[],e+="",this.#c.forEach((n=>n[0]===e&&t.push(n[1]))),t}has(e){return p("has",arguments,1),e+="",this.#c.some((t=>t[0]===e))}forEach(e,t){for(var[n,s]of(p("forEach",arguments,1),this))e.call(t,s,n,this)}set(...e){p("set",arguments,2);var t=[],n=!0;e=u(...e),this.#c.forEach((s=>{s[0]===e[0]?n&&(n=!t.push(e)):t.push(s)})),n&&t.push(e),this.#c=t}*entries(){yield*this.#c}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};function f(e,t=s.Z){var n=`${c()}${c()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],r=`--${n}\r\nContent-Disposition: form-data; name="`;return e.forEach(((e,t)=>"string"==typeof e?i.push(r+h(t)+`"\r\n\r\n${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r\n`):i.push(r+h(t)+`"; filename="${h(e.name,1)}"\r\nContent-Type: ${e.type||"application/octet-stream"}\r\n\r\n`,e,"\r\n"))),i.push(`--${n}--`),new t(i,{type:"multipart/form-data; boundary="+n})}},3765:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbortError:()=>D,Blob:()=>N.t6,FetchError:()=>p,File:()=>N.$B,FormData:()=>u.Ct,Headers:()=>T,Request:()=>j,Response:()=>k,blobFrom:()=>N.xB,blobFromSync:()=>N.SX,default:()=>$,fileFrom:()=>N.e2,fileFromSync:()=>N.RA,isRedirect:()=>_});const s=require("node:http"),i=require("node:https"),r=require("node:zlib"),o=require("node:stream"),a=require("node:buffer"),c=require("node:util");var l=n(7842),u=n(693);class h extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class p extends h{constructor(e,t,n){super(e,t),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}const d=Symbol.toStringTag,f=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[d],m=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[d]),g=(0,c.promisify)(o.pipeline),v=Symbol("Body internals");class y{constructor(e,{size:t=0}={}){let n=null;null===e?e=null:f(e)?e=a.Buffer.from(e.toString()):m(e)||a.Buffer.isBuffer(e)||(c.types.isAnyArrayBuffer(e)?e=a.Buffer.from(e):ArrayBuffer.isView(e)?e=a.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof o||(e instanceof u.Ct?n=(e=(0,u.au)(e)).type.split("=")[1]:e=a.Buffer.from(String(e))));let s=e;a.Buffer.isBuffer(e)?s=o.Readable.from(e):m(e)&&(s=o.Readable.from(e.stream())),this[v]={body:e,stream:s,boundary:n,disturbed:!1,error:null},this.size=t,e instanceof o&&e.on("error",(e=>{const t=e instanceof h?e:new p(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[v].error=t}))}get body(){return this[v].stream}get bodyUsed(){return this[v].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:n}=await b(this);return e.slice(t,t+n)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const e=new u.Ct,t=new URLSearchParams(await this.text());for(const[n,s]of t)e.append(n,s);return e}const{toFormData:t}=await n.e(669).then(n.bind(n,4669));return t(this.body,e)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[v].body&&this[v].body.type||"",t=await this.arrayBuffer();return new l.Z([t],{type:e})}async json(){const e=await this.text();return JSON.parse(e)}async text(){const e=await b(this);return(new TextDecoder).decode(e)}buffer(){return b(this)}}async function b(e){if(e[v].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[v].disturbed=!0,e[v].error)throw e[v].error;const{body:t}=e;if(null===t)return a.Buffer.alloc(0);if(!(t instanceof o))return a.Buffer.alloc(0);const n=[];let s=0;try{for await(const i of t){if(e.size>0&&s+i.length>e.size){const n=new p(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(n),n}s+=i.length,n.push(i)}}catch(t){throw t instanceof h?t:new p(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t)}if(!0!==t.readableEnded&&!0!==t._readableState.ended)throw new p(`Premature close of server response while trying to fetch ${e.url}`);try{return n.every((e=>"string"==typeof e))?a.Buffer.from(n.join("")):a.Buffer.concat(n,s)}catch(t){throw new p(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}}y.prototype.buffer=(0,c.deprecate)(y.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(y.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,c.deprecate)((()=>{}),"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});const w=(e,t)=>{let n,s,{body:i}=e[v];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof o&&"function"!=typeof i.getBoundary&&(n=new o.PassThrough({highWaterMark:t}),s=new o.PassThrough({highWaterMark:t}),i.pipe(n),i.pipe(s),e[v].stream=n,i=s),i},S=(0,c.deprecate)((e=>e.getBoundary()),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),x=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":f(e)?"application/x-www-form-urlencoded;charset=UTF-8":m(e)?e.type||null:a.Buffer.isBuffer(e)||c.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof u.Ct?`multipart/form-data; boundary=${t[v].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${S(e)}`:e instanceof o?null:"text/plain;charset=UTF-8",E="function"==typeof s.validateHeaderName?s.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},C="function"==typeof s.validateHeaderValue?s.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const t=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class T extends URLSearchParams{constructor(e){let t=[];if(e instanceof T){const n=e.raw();for(const[e,s]of Object.entries(n))t.push(...s.map((t=>[e,t])))}else if(null==e);else{if("object"!=typeof e||c.types.isBoxedPrimitive(e))throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");{const n=e[Symbol.iterator];if(null==n)t.push(...Object.entries(e));else{if("function"!=typeof n)throw new TypeError("Header pairs must be iterable");t=[...e].map((e=>{if("object"!=typeof e||c.types.isBoxedPrimitive(e))throw new TypeError("Each header pair must be an iterable object");return[...e]})).map((e=>{if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");return[...e]}))}}}return t=t.length>0?t.map((([e,t])=>(E(e),C(e,String(t)),[String(e).toLowerCase(),String(t)]))):void 0,super(t),new Proxy(this,{get(e,t,n){switch(t){case"append":case"set":return(n,s)=>(E(n),C(n,String(s)),URLSearchParams.prototype[t].call(e,String(n).toLowerCase(),String(s)));case"delete":case"has":case"getAll":return n=>(E(n),URLSearchParams.prototype[t].call(e,String(n).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,t,n)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(0===t.length)return null;let n=t.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,t){for(const n of this.keys())Reflect.apply(e,t,[this.get(n),n,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce(((e,t)=>(e[t]=this.getAll(t),e)),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce(((e,t)=>{const n=this.getAll(t);return e[t]="host"===t?n[0]:n.length>1?n:n[0],e}),{})}}Object.defineProperties(T.prototype,["get","entries","forEach","values"].reduce(((e,t)=>(e[t]={enumerable:!0},e)),{}));const R=new Set([301,302,303,307,308]),_=e=>R.has(e),P=Symbol("Response internals");class k extends y{constructor(e=null,t={}){super(e,t);const n=null!=t.status?t.status:200,s=new T(t.headers);if(null!==e&&!s.has("Content-Type")){const t=x(e,this);t&&s.append("Content-Type",t)}this[P]={type:"default",url:t.url,status:n,statusText:t.statusText||"",headers:s,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[P].type}get url(){return this[P].url||""}get status(){return this[P].status}get ok(){return this[P].status>=200&&this[P].status<300}get redirected(){return this[P].counter>0}get statusText(){return this[P].statusText}get headers(){return this[P].headers}get highWaterMark(){return this[P].highWaterMark}clone(){return new k(w(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!_(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new k(null,{headers:{location:new URL(e).toString()},status:t})}static error(){const e=new k(null,{status:0,statusText:""});return e[P].type="error",e}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(k.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const A=require("node:url"),M=require("node:net");function O(e,t=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol)?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e))}const I=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function B(e){return!!/^about:(blank|srcdoc)$/.test(e)||"data:"===e.protocol||!!/^(blob|filesystem):$/.test(e.protocol)||function(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;const t=e.host.replace(/(^\[)|(]$)/g,""),n=(0,M.isIP)(t);return!(4!==n||!/^127\./.test(t))||!(6!==n||!/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||"localhost"!==e.host&&!e.host.endsWith(".localhost")&&"file:"===e.protocol}(e)}const q=Symbol("Request internals"),L=e=>"object"==typeof e&&"object"==typeof e[q],F=(0,c.deprecate)((()=>{}),".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class j extends y{constructor(e,t={}){let n;if(L(e)?n=new URL(e.url):(n=new URL(e),e={}),""!==n.username||""!==n.password)throw new TypeError(`${n} is an url with embedded credentials.`);let s=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!L(t)&&"data"in t&&F(),(null!=t.body||L(e)&&null!==e.body)&&("GET"===s||"HEAD"===s))throw new TypeError("Request with GET/HEAD method cannot have body");const i=t.body?t.body:L(e)&&null!==e.body?w(e):null;super(i,{size:t.size||e.size||0});const r=new T(t.headers||e.headers||{});if(null!==i&&!r.has("Content-Type")){const e=x(i,this);e&&r.set("Content-Type",e)}let o=L(e)?e.signal:null;if("signal"in t&&(o=t.signal),null!=o&&("object"!=typeof(a=o)||"AbortSignal"!==a[d]&&"EventTarget"!==a[d]))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");var a;let c=null==t.referrer?e.referrer:t.referrer;if(""===c)c="no-referrer";else if(c){const e=new URL(c);c=/^about:(\/\/)?client$/.test(e)?"client":e}else c=void 0;this[q]={method:s,redirect:t.redirect||e.redirect||"follow",headers:r,parsedURL:n,signal:o,referrer:c},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[q].method}get url(){return(0,A.format)(this[q].parsedURL)}get headers(){return this[q].headers}get redirect(){return this[q].redirect}get signal(){return this[q].signal}get referrer(){return"no-referrer"===this[q].referrer?"":"client"===this[q].referrer?"about:client":this[q].referrer?this[q].referrer.toString():void 0}get referrerPolicy(){return this[q].referrerPolicy}set referrerPolicy(e){this[q].referrerPolicy=function(e){if(!I.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new j(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(j.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});class D extends h{constructor(e,t="aborted"){super(e,t)}}var N=n(6459);const U=new Set(["data:","http:","https:"]);async function $(e,t){return new Promise(((n,c)=>{const l=new j(e,t),{parsedURL:u,options:h}=(e=>{const{parsedURL:t}=e[q],n=new T(e[q].headers);n.has("Accept")||n.set("Accept","*/*");let s=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(s="0"),null!==e.body){const t=(e=>{const{body:t}=e[v];return null===t?0:m(t)?t.size:a.Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null})(e);"number"!=typeof t||Number.isNaN(t)||(s=String(t))}s&&n.set("Content-Length",s),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[q].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:n}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;const s=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";const i=e.referrer;let r=O(i),o=O(i,!0);r.toString().length>4096&&(r=o),t&&(r=t(r)),n&&(o=n(o));const a=new URL(e.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return o;case"unsafe-url":return r;case"strict-origin":return B(r)&&!B(a)?"no-referrer":o.toString();case"strict-origin-when-cross-origin":return r.origin===a.origin?r:B(r)&&!B(a)?"no-referrer":o;case"same-origin":return r.origin===a.origin?r:"no-referrer";case"origin-when-cross-origin":return r.origin===a.origin?r:o;case"no-referrer-when-downgrade":return B(r)&&!B(a)?"no-referrer":r;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}(e):e[q].referrer="no-referrer",e[q].referrer instanceof URL&&n.set("Referer",e.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),e.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=e;"function"==typeof i&&(i=i(t)),n.has("Connection")||i||n.set("Connection","close");const r=(e=>{if(e.search)return e.search;const t=e.href.length-1,n=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-n.length]?"?":""})(t);return{parsedURL:t,options:{path:t.pathname+r,method:e.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:i}}})(l);if(!U.has(u.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===u.protocol){const e=function(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');const t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw new TypeError("malformed data: URI");const n=e.substring(5,t).split(";");let s="",i=!1;const r=n[0]||"text/plain";let o=r;for(let e=1;e<n.length;e++)"base64"===n[e]?i=!0:(o+=`;${n[e]}`,0===n[e].indexOf("charset=")&&(s=n[e].substring(8)));n[0]||s.length||(o+=";charset=US-ASCII",s="US-ASCII");const a=i?"base64":"ascii",c=unescape(e.substring(t+1)),l=Buffer.from(c,a);return l.type=r,l.typeFull=o,l.charset=s,l}(l.url),t=new k(e,{headers:{"Content-Type":e.typeFull}});return void n(t)}const d=("https:"===u.protocol?i:s).request,{signal:f}=l;let y=null;const b=()=>{const e=new D("The operation was aborted.");c(e),l.body&&l.body instanceof o.Readable&&l.body.destroy(e),y&&y.body&&y.body.emit("error",e)};if(f&&f.aborted)return void b();const S=()=>{b(),R()},x=d(u.toString(),h);f&&f.addEventListener("abort",S);const R=()=>{x.abort(),f&&f.removeEventListener("abort",S)};x.on("error",(e=>{c(new p(`request to ${l.url} failed, reason: ${e.message}`,"system",e)),R()})),function(e,t){const n=a.Buffer.from("0\r\n\r\n");let s,i=!1,r=!1;e.on("response",(e=>{const{headers:t}=e;i="chunked"===t["transfer-encoding"]&&!t["content-length"]})),e.on("socket",(t=>{const o=()=>{if(i&&!r){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",(e=>{y&&y.body&&y.body.destroy(e)})(e)}},c=e=>{r=0===a.Buffer.compare(e.slice(-5),n),!r&&s&&(r=0===a.Buffer.compare(s.slice(-3),n.slice(0,3))&&0===a.Buffer.compare(e.slice(-2),n.slice(3))),s=e};t.prependListener("close",o),t.on("data",c),e.on("close",(()=>{t.removeListener("close",o),t.removeListener("data",c)}))}))}(x),process.version<"v14"&&x.on("socket",(e=>{let t;e.prependListener("end",(()=>{t=e._eventsCount})),e.prependListener("close",(n=>{if(y&&t<e._eventsCount&&!n){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",y.body.emit("error",e)}}))})),x.on("response",(e=>{x.setTimeout(0);const s=function(e=[]){return new T(e.reduce(((e,t,n,s)=>(n%2==0&&e.push(s.slice(n,n+2)),e)),[]).filter((([e,t])=>{try{return E(e),C(e,String(t)),!0}catch{return!1}})))}(e.rawHeaders);if(_(e.statusCode)){const r=s.get("Location");let a=null;try{a=null===r?null:new URL(r,l.url)}catch{if("manual"!==l.redirect)return c(new p(`uri requested responds with an invalid redirect URL: ${r}`,"invalid-redirect")),void R()}switch(l.redirect){case"error":return c(new p(`uri requested responds with a redirect, redirect mode is set to error: ${l.url}`,"no-redirect")),void R();case"manual":break;case"follow":{if(null===a)break;if(l.counter>=l.follow)return c(new p(`maximum redirect reached at: ${l.url}`,"max-redirect")),void R();const r={headers:new T(l.headers),follow:l.follow,counter:l.counter+1,agent:l.agent,compress:l.compress,method:l.method,body:w(l),signal:l.signal,size:l.size,referrer:l.referrer,referrerPolicy:l.referrerPolicy};if(!((e,t)=>{const n=new URL(t).hostname,s=new URL(e).hostname;return n===s||n.endsWith(`.${s}`)})(l.url,a)||(i=l.url,new URL(a).protocol!==new URL(i).protocol))for(const e of["authorization","www-authenticate","cookie","cookie2"])r.headers.delete(e);if(303!==e.statusCode&&l.body&&t.body instanceof o.Readable)return c(new p("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void R();303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==l.method)||(r.method="GET",r.body=void 0,r.headers.delete("content-length"));const u=function(e){const t=(e.get("referrer-policy")||"").split(/[,\s]+/);let n="";for(const e of t)e&&I.has(e)&&(n=e);return n}(s);return u&&(r.referrerPolicy=u),n($(new j(a,r))),void R()}default:return c(new TypeError(`Redirect option '${l.redirect}' is not a valid value of RequestRedirect`))}}var i;f&&e.once("end",(()=>{f.removeEventListener("abort",S)}));let a=(0,o.pipeline)(e,new o.PassThrough,(e=>{e&&c(e)}));process.version<"v12.10"&&e.on("aborted",S);const u={url:l.url,status:e.statusCode,statusText:e.statusMessage,headers:s,size:l.size,counter:l.counter,highWaterMark:l.highWaterMark},h=s.get("Content-Encoding");if(!l.compress||"HEAD"===l.method||null===h||204===e.statusCode||304===e.statusCode)return y=new k(a,u),void n(y);const d={flush:r.Z_SYNC_FLUSH,finishFlush:r.Z_SYNC_FLUSH};if("gzip"===h||"x-gzip"===h)return a=(0,o.pipeline)(a,r.createGunzip(d),(e=>{e&&c(e)})),y=new k(a,u),void n(y);if("deflate"===h||"x-deflate"===h){const t=(0,o.pipeline)(e,new o.PassThrough,(e=>{e&&c(e)}));return t.once("data",(e=>{a=8==(15&e[0])?(0,o.pipeline)(a,r.createInflate(),(e=>{e&&c(e)})):(0,o.pipeline)(a,r.createInflateRaw(),(e=>{e&&c(e)})),y=new k(a,u),n(y)})),void t.once("end",(()=>{y||(y=new k(a,u),n(y))}))}if("br"===h)return a=(0,o.pipeline)(a,r.createBrotliDecompress(),(e=>{e&&c(e)})),y=new k(a,u),void n(y);y=new k(a,u),n(y)})),(async(e,{body:t})=>{null===t?e.end():await g(t,e)})(x,l).catch(c)}))}},8492:e=>{"use strict";e.exports=JSON.parse('{"name":"@microsoft/dev-tunnels-management","version":"1.0.7473","description":"Tunnels library for Visual Studio tools","keywords":["Tunnels"],"author":"Microsoft","license":"MIT","dependencies":{"buffer":"^5.2.1","debug":"^4.1.1","vscode-jsonrpc":"^4.0.0","@microsoft/dev-tunnels-contracts":"^1.0.0","axios":"^1.6.2"},"main":"./index.js"}')},4369:e=>{"use strict";e.exports=JSON.parse('{"name":"@microsoft/dev-tunnels-ssh","version":"3.11.35","description":"SSH library for Dev Tunnels","repository":"https://github.com/microsoft/dev-tunnels-ssh.git","keywords":["SSH"],"author":"Microsoft","license":"MIT","dependencies":{"buffer":"^5.2.1","debug":"^4.1.1","diffie-hellman":"^5.0.3","vscode-jsonrpc":"^4.0.0"},"main":"./index.js"}')},7392:e=>{"use strict";e.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/3gpphal+json":{"source":"iana","compressible":true},"application/3gpphalforms+json":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/ace+cbor":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/alto-updatestreamcontrol+json":{"source":"iana","compressible":true},"application/alto-updatestreamparams+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/at+jwt":{"source":"iana"},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true,"extensions":["atomdeleted"]},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true,"extensions":["dwd"]},"application/atsc-dynamic-event-message":{"source":"iana"},"application/atsc-held+xml":{"source":"iana","compressible":true,"extensions":["held"]},"application/atsc-rdt+json":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true,"extensions":["rsat"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true,"extensions":["xcs"]},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/captive+json":{"source":"iana","compressible":true},"application/cbor":{"source":"iana"},"application/cbor-seq":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true,"extensions":["cdfx"]},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/city+json":{"source":"iana","compressible":true},"application/clr":{"source":"iana"},"application/clue+xml":{"source":"iana","compressible":true},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true,"extensions":["cpl"]},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dash-patch+xml":{"source":"iana","compressible":true,"extensions":["mpp"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dots+cbor":{"source":"iana"},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["es","ecma"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/elm+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/elm+xml":{"source":"iana","compressible":true},"application/emergencycalldata.cap+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true,"extensions":["emotionml"]},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/express":{"source":"iana","extensions":["exp"]},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true,"extensions":["fdt"]},"application/fhir+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/fhir+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/flexfec":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true,"extensions":["its"]},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/jscalendar+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true,"extensions":["lgr"]},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lpf+zip":{"source":"iana","compressible":false},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true,"extensions":["mpf"]},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mipc":{"source":"iana"},"application/missing-blocks+cbor-seq":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true,"extensions":["maei"]},"application/mmt-usd+xml":{"source":"iana","compressible":true,"extensions":["musd"]},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true},"application/mrb-publish+xml":{"source":"iana","compressible":true},"application/msc-ivr+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msc-mixer+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/multipart-core":{"source":"iana"},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana","charset":"US-ASCII"},"application/news-groupinfo":{"source":"iana","charset":"US-ASCII"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana","extensions":["cjs"]},"application/nss":{"source":"iana"},"application/oauth-authz-req+jwt":{"source":"iana"},"application/oblivious-dns-message":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{"source":"iana","compressible":true},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p21":{"source":"iana"},"application/p21+zip":{"source":"iana","compressible":false},"application/p2p-overlay+xml":{"source":"iana","compressible":true,"extensions":["relo"]},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana","extensions":["asc"]},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pidf-diff+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true,"extensions":["provx"]},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.cyn":{"source":"iana","charset":"7-BIT"},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/pvd+json":{"source":"iana","compressible":true},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true,"extensions":["rapd"]},"application/route-s-tsid+xml":{"source":"iana","compressible":true,"extensions":["sls"]},"application/route-usd+xml":{"source":"iana","compressible":true,"extensions":["rusd"]},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sarif+json":{"source":"iana","compressible":true},"application/sarif-external-properties+json":{"source":"iana","compressible":true},"application/sbe":{"source":"iana"},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true,"extensions":["senmlx"]},"application/senml-etch+cbor":{"source":"iana"},"application/senml-etch+json":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true,"extensions":["sensmlx"]},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/sipc":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spdx+json":{"source":"iana","compressible":true},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/swid+xml":{"source":"iana","compressible":true,"extensions":["swidtag"]},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/td+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/token-introspection+jwt":{"source":"iana"},"application/toml":{"compressible":true,"extensions":["toml"]},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana","extensions":["trig"]},"application/ttml+xml":{"source":"iana","compressible":true,"extensions":["ttml"]},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ubjson":{"compressible":false,"extensions":["ubj"]},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true,"extensions":["rsheet"]},"application/urc-targetdesc+xml":{"source":"iana","compressible":true,"extensions":["td"]},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true,"extensions":["1km"]},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.5gnas":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gtpc":{"source":"iana"},"application/vnd.3gpp.interworking-data":{"source":"iana"},"application/vnd.3gpp.lpp":{"source":"iana"},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ngap":{"source":"iana"},"application/vnd.3gpp.pfcp":{"source":"iana"},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.s1ap":{"source":"iana"},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.afplinedata-pagedef":{"source":"iana"},"application/vnd.afpc.cmoca-cmresource":{"source":"iana"},"application/vnd.afpc.foca-charset":{"source":"iana"},"application/vnd.afpc.foca-codedfont":{"source":"iana"},"application/vnd.afpc.foca-codepage":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.afpc.modca-cmtable":{"source":"iana"},"application/vnd.afpc.modca-formdef":{"source":"iana"},"application/vnd.afpc.modca-mediummap":{"source":"iana"},"application/vnd.afpc.modca-objectcontainer":{"source":"iana"},"application/vnd.afpc.modca-overlay":{"source":"iana"},"application/vnd.afpc.modca-pagesegment":{"source":"iana"},"application/vnd.age":{"source":"iana","extensions":["age"]},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.ota":{"source":"iana"},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.arrow.file":{"source":"iana"},"application/vnd.apache.arrow.stream":{"source":"iana"},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.aplextor.warrp+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["key"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true,"extensions":["bmml"]},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.error":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.bpf":{"source":"iana"},"application/vnd.bpf3":{"source":"iana"},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.ciedi":{"source":"iana"},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.cryptii.pipe+json":{"source":"iana","compressible":true},"application/vnd.crypto-shade-file":{"source":"iana"},"application/vnd.cryptomator.encrypted":{"source":"iana"},"application/vnd.cryptomator.vault":{"source":"iana"},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.cyclonedx+json":{"source":"iana","compressible":true},"application/vnd.cyclonedx+xml":{"source":"iana","compressible":true},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.d3m-dataset":{"source":"iana"},"application/vnd.d3m-problem":{"source":"iana"},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.dbf":{"source":"iana","extensions":["dbf"]},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbisl+xml":{"source":"iana","compressible":true},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.eclipse.ditto+json":{"source":"iana","compressible":true},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eu.kasparian.car+json":{"source":"iana","compressible":true},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.familysearch.gedcom+zip":{"source":"iana","compressible":false},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.ficlab.flb+zip":{"source":"iana","compressible":false},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujifilm.fb.docuworks":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.container":{"source":"iana"},"application/vnd.fujifilm.fb.jfi+xml":{"source":"iana","compressible":true},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.gentics.grd+json":{"source":"iana","compressible":true},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.slides":{"source":"iana"},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hl7cda+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hl7v2+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.iso11783-10+zip":{"source":"iana","compressible":false},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las":{"source":"iana"},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.laszip":{"source":"iana"},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.logipipe.circuit+zip":{"source":"iana","compressible":false},"application/vnd.loom":{"source":"iana"},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana","extensions":["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxar.archive.3tz+zip":{"source":"iana","compressible":false},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.nacamar.ybrid+json":{"source":"iana","compressible":true},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nebumind.line":{"source":"iana"},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true,"extensions":["ac"]},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oci.image.manifest.v1+json":{"source":"iana","compressible":true},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+cbor":{"source":"iana"},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true,"extensions":["obgx"]},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true,"extensions":["osm"]},"application/vnd.opentimestamps.ots":{"source":"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana","extensions":["rar"]},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.resilient.logic":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sar":{"source":"iana"},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.seis+json":{"source":"iana","compressible":true},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shade-save-file":{"source":"iana"},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.shopkick+json":{"source":"iana","compressible":true},"application/vnd.shp":{"source":"iana"},"application/vnd.shx":{"source":"iana"},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.snesdev-page-table":{"source":"iana"},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true,"extensions":["fo"]},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.sycle+xml":{"source":"iana","compressible":true},"application/vnd.syft+json":{"source":"iana","compressible":true},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","charset":"UTF-8","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veritone.aion+json":{"source":"iana","compressible":true},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.ves.encrypted":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","charset":"UTF-8","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.dpp":{"source":"iana"},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"source":"iana","compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true,"extensions":["wif"]},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-iwork-keynote-sffkey":{"extensions":["key"]},"application/x-iwork-numbers-sffnumbers":{"extensions":["numbers"]},"application/x-iwork-pages-sffpages":{"extensions":["pages"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-keepass2":{"extensions":["kdbx"]},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-pki-message":{"source":"iana"},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"iana","extensions":["der","crt","pem"]},"application/x-x509-ca-ra-cert":{"source":"iana"},"application/x-x509-next-ca-cert":{"source":"iana"},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true,"extensions":["xav"]},"application/xcap-caps+xml":{"source":"iana","compressible":true,"extensions":["xca"]},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true,"extensions":["xel"]},"application/xcap-error+xml":{"source":"iana","compressible":true},"application/xcap-ns+xml":{"source":"iana","compressible":true,"extensions":["xns"]},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true,"extensions":["xlf"]},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xsl","xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana","extensions":["amr"]},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/flexfec":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/mhas":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana","extensions":["mxmf"]},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx","opus"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/scip":{"source":"iana"},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sofa":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tetra_acelp_bb":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/tsvcis":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","compressible":true,"extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana","extensions":["avci"]},"image/avcs":{"source":"iana","extensions":["avcs"]},"image/avif":{"source":"iana","compressible":false,"extensions":["avif"]},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/hej2k":{"source":"iana","extensions":["hej2"]},"image/hsj2":{"source":"iana","extensions":["hsj2"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jph":{"source":"iana","extensions":["jph"]},"image/jphc":{"source":"iana","extensions":["jhc"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/jxra":{"source":"iana","extensions":["jxra"]},"image/jxrs":{"source":"iana","extensions":["jxrs"]},"image/jxs":{"source":"iana","extensions":["jxs"]},"image/jxsc":{"source":"iana","extensions":["jxsc"]},"image/jxsi":{"source":"iana","extensions":["jxsi"]},"image/jxss":{"source":"iana","extensions":["jxss"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/ktx2":{"source":"iana","extensions":["ktx2"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","compressible":true,"extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-dds":{"compressible":true,"extensions":["dds"]},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.pco.b16":{"source":"iana","extensions":["b16"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/e57":{"source":"iana"},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/mtl":{"source":"iana","extensions":["mtl"]},"model/obj":{"source":"iana","extensions":["obj"]},"model/step":{"source":"iana"},"model/step+xml":{"source":"iana","compressible":true,"extensions":["stpx"]},"model/step+zip":{"source":"iana","compressible":false,"extensions":["stpz"]},"model/step-xml+zip":{"source":"iana","compressible":false,"extensions":["stpxz"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.pytha.pyox":{"source":"iana"},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.sap.vds":{"source":"iana","extensions":["vds"]},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana"},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/cql":{"source":"iana"},"text/cql-expression":{"source":"iana"},"text/cql-identifier":{"source":"iana"},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/fhirpath":{"source":"iana"},"text/flexfec":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/gff3":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana","charset":"UTF-8"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana","charset":"UTF-8"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shaclc":{"source":"iana"},"text/shex":{"source":"iana","extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/spdx":{"source":"iana","extensions":["spdx"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana","charset":"UTF-8"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana","charset":"UTF-8"},"text/vnd.familysearch.gedcom":{"source":"iana","extensions":["ged"]},"text/vnd.ficlab.flt":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hans":{"source":"iana"},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sosi":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","charset":"UTF-8","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana","charset":"UTF-8"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"compressible":true,"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/av1":{"source":"iana"},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/ffv1":{"source":"iana"},"video/flexfec":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana","extensions":["m4s"]},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/jxsv":{"source":"iana"},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/scip":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vnd.youtube.yt":{"source":"iana"},"video/vp8":{"source":"iana"},"video/vp9":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')},5232:e=>{"use strict";e.exports={version:"1.0.34"}}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,s),r.exports}s.m=t,s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>e+".js",s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e={484:1},s.f.require=(t,n)=>{e[t]||(t=>{var n=t.modules,i=t.ids,r=t.runtime;for(var o in n)s.o(n,o)&&(s.m[o]=n[o]);r&&r(s);for(var a=0;a<i.length;a++)e[i[a]]=1})(require("./"+s.u(t)))};var i={};(()=>{"use strict";s.r(i);var e=s(3807),t=s(3758),n=s(2057),r=s(3795);class o extends e.ProxyServer{constructor(){super(...arguments),this.managerTunnels=new WeakMap}onDidSetUpServerConnection(e){e.registerRequestHandler("gettunnel",(async()=>{const e=await this.setup;return{value:this.managerTunnels.get(e).tunnel}})),e.registerRequestHandler("getlimits",(async()=>{const e=await this.setup,t=await this.managerTunnels.get(e).client.getManagementClient();return await t.listUserLimits()}))}async createConnectionManager(n){const{tunnel:s,client:i}=await this.getTunnel(n);this.log(3,`Found tunnel (ID=${s.tunnelId}, Cluster=${s.clusterId})`);const r=new e.ConnectionManager({bearer:new t.BasisConnectionBearer(i,s,31545)});return this.managerTunnels.set(r,{tunnel:s,client:i}),r}async getTunnel(e){const n=this.args;let s=await e.call("getaccesstoken",{tunnelName:n.tunnelName});for(;;){const i=new t.AccessTokenBasisClient(s.provider,"vscode.dev.remote-server",(async()=>s.token),n.httpProxy?new r.HttpsProxyAgent(n.httpProxy):void 0),o=await i.getTunnelForTag(n.tunnelName);if(o)return e.call("saveauthprovider",{tunnelName:n.tunnelName,tunnel:o,provider:s.provider}),{tunnel:o,client:i};const{retryWith:a}=await e.call("tunnelnotfound",{tunnelName:n.tunnelName});if(!a)throw new Error(`Tunnel with tag ${n.tunnelName} not found`);s=a}}}const a=o.readArgsFromEnvironment(),c=new o(a);process.on("exit",(()=>{c.dispose()})),process.on("SIGTERM",(()=>{c.dispose(),process.exit(n.SIGTERM)}))})();var r=exports;for(var o in i)r[o]=i[o];i.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();