(()=>{"use strict";var e={750:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(173),n=s.n(i),a=s(806),r=s.n(a)()(n());r.push([e.id,'*{margin:0;padding:0}.QBF9sM4GG1eVY93XBUyl{display:flex;flex-direction:column;min-height:100vh}.QBF9sM4GG1eVY93XBUyl.m7RtgQVaFYAsHm2oJeHY>*,.ycLg1Kq9wdcyPdsYRCD0{display:none}.ycLg1Kq9wdcyPdsYRCD0{align-items:center;bottom:0;justify-content:center;left:0;opacity:.8;position:absolute;right:0;text-align:center;top:0}.QBF9sM4GG1eVY93XBUyl.m7RtgQVaFYAsHm2oJeHY .ycLg1Kq9wdcyPdsYRCD0{display:flex}@media (min-width:600px){.Tfoo3nFTRvAh8W2SZo46.QBF9sM4GG1eVY93XBUyl{align-items:stretch;flex-direction:row}}.Tfoo3nFTRvAh8W2SZo46 canvas,.YrU8cdFeeZfR9gUxAAFZ{cursor:pointer}.YrU8cdFeeZfR9gUxAAFZ{align-items:center;display:flex;font-family:var(--font-family);font-size:11px;white-space:nowrap}.YrU8cdFeeZfR9gUxAAFZ>span>span{padding-left:.25em}.YrU8cdFeeZfR9gUxAAFZ>span{align-items:center;color:var(--sideBar-foreground,var(--vscode-foreground));display:inline-flex;margin:0 4px}.YrU8cdFeeZfR9gUxAAFZ>span:before{background:var(--metric-color);border-radius:100%;content:"";display:inline-block;height:8px;margin-right:4px;width:8px}.nnuM4wL0FS1sa7czvhs3{background:linear-gradient(to bottom,var(--vscode-sideBar-background),transparent);font-size:.8em;left:.3em;position:absolute;top:0}.nnuM4wL0FS1sa7czvhs3.AcXoW8_olZbp58AXwSVf{position:static}.nnuM4wL0FS1sa7czvhs3.AcXoW8_olZbp58AXwSVf .OPXnF3aElc5qZuoDQJZo{left:.3em;position:absolute}.nnuM4wL0FS1sa7czvhs3.AcXoW8_olZbp58AXwSVf .xKyz1CHqllrnBBAVT8y6{display:inline}.nnuM4wL0FS1sa7czvhs3.AcXoW8_olZbp58AXwSVf .OPXnF3aElc5qZuoDQJZo:before{content:none!important}.xKyz1CHqllrnBBAVT8y6{display:none}.OPXnF3aElc5qZuoDQJZo{display:inline}.OPXnF3aElc5qZuoDQJZo+.OPXnF3aElc5qZuoDQJZo:before{content:" / "}.cL_7Ge845ofbCLLztAU6,.qSGqlZk8QFpfoPDyvcoa{bottom:2px;font-size:11px;position:absolute}.cL_7Ge845ofbCLLztAU6{left:.3em}.qSGqlZk8QFpfoPDyvcoa{right:.3em}',""]),r.locals={container:"QBF9sM4GG1eVY93XBUyl",noData:"m7RtgQVaFYAsHm2oJeHY",noDataText:"ycLg1Kq9wdcyPdsYRCD0",configOpen:"Tfoo3nFTRvAh8W2SZo46",labelList:"YrU8cdFeeZfR9gUxAAFZ",maxContainer:"nnuM4wL0FS1sa7czvhs3",split:"AcXoW8_olZbp58AXwSVf",max:"OPXnF3aElc5qZuoDQJZo",maxLabel:"xKyz1CHqllrnBBAVT8y6",timeLeft:"cL_7Ge845ofbCLLztAU6",timeRight:"qSGqlZk8QFpfoPDyvcoa"};const o=r},298:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(173),n=s.n(i),a=s(806),r=s.n(a)()(n());r.push([e.id,"*{margin:0;padding:0}canvas{display:block}.y9tcQvAXrWw4D_ubZe7x{color:var(--sideBar-foreground,var(--vscode-foreground));height:100vh;overflow-x:hidden;padding:0!important;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}",""]),r.locals={body:"y9tcQvAXrWw4D_ubZe7x"};const o=r},139:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(173),n=s.n(i),a=s(806),r=s.n(a)()(n());r.push([e.id,'.DY2zFNkiINFRZuZbsTPf{padding-top:4px}.TUx3vir135y_TCykQSlW{align-items:center;cursor:pointer;display:none;height:2em;line-height:0;padding:0 7px;position:relative}.TUx3vir135y_TCykQSlW:before{background:transparent;border:2px solid var(--vscode-debugIcon-breakpointUnverifiedForeground);border-radius:100%;color:var(--vscode-debugIcon-breakpointUnverifiedForeground);content:"";height:6px;margin-right:7px;width:6px}.TUx3vir135y_TCykQSlW.O1vu3bq1hMtgfjs9GDDX,.TUx3vir135y_TCykQSlW.nKy9fqDvezCnEYqrIIJi{display:flex}.TUx3vir135y_TCykQSlW.nKy9fqDvezCnEYqrIIJi{color:inherit}.TUx3vir135y_TCykQSlW.nKy9fqDvezCnEYqrIIJi:before{background:var(--metric-color);border-color:var(--metric-color)}.efGT_wA2fz2kl7WExIcC{flex-grow:1}',""]),r.locals={configurator:"DY2zFNkiINFRZuZbsTPf",metric:"TUx3vir135y_TCykQSlW",available:"O1vu3bq1hMtgfjs9GDDX",enabled:"nKy9fqDvezCnEYqrIIJi",label:"efGT_wA2fz2kl7WExIcC"};const o=r},806:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",i=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),i&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),i&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,i,n,a){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(i)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(r[l]=!0)}for(var c=0;c<e.length;c++){var h=[].concat(e[c]);i&&r[h[0]]||(void 0!==a&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),s&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=s):h[2]=s),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),t.push(h))}},t}},173:e=>{e.exports=function(e){return e[1]}},604:e=>{var t=[];function s(e){for(var s=-1,i=0;i<t.length;i++)if(t[i].identifier===e){s=i;break}return s}function i(e,i){for(var a={},r=[],o=0;o<e.length;o++){var l=e[o],c=i.base?l[0]+i.base:l[0],h=a[c]||0,d="".concat(c," ").concat(h);a[c]=h+1;var u=s(d),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(m);else{var p=n(m,i);i.byIndex=o,t.splice(o,0,{identifier:d,updater:p,references:1})}r.push(d)}return r}function n(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,n){var a=i(e=e||[],n=n||{});return function(e){e=e||[];for(var r=0;r<a.length;r++){var o=s(a[r]);t[o].references--}for(var l=i(e,n),c=0;c<a.length;c++){var h=s(a[c]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}a=l}}},863:e=>{var t={};e.exports=function(e,s){var i=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},896:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},124:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},101:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var a=s.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},917:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={id:i,exports:{}};return e[i](a,a.exports,s),a.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.nc=void 0,(()=>{var e=s(604),t=s.n(e),i=s(101),n=s.n(i),a=s(863),r=s.n(a),o=s(124),l=s.n(o),c=s(896),h=s.n(c),d=s(917),u=s.n(d),m=s(750),p={};p.styleTagTransform=u(),p.setAttributes=l(),p.insert=r().bind(null,"head"),p.domAPI=n(),p.insertStyleElement=h(),t()(m.A,p);const g=m.A&&m.A.locals?m.A.locals:void 0;var f=s(139),v={};v.styleTagTransform=u(),v.setAttributes=l(),v.insert=r().bind(null,"head"),v.domAPI=n(),v.insertStyleElement=h(),t()(f.A,v);const x=f.A&&f.A.locals?f.A.locals:void 0;class y{constructor(e){this.settings=e,this.metrics=new Map,this.elem=document.createElement("div"),this.dispose=this.settings.onChange((()=>this.applySettings())),this.elem.classList.add(x.configurator);for(const t of e.allMetrics){const s=document.createElement("div");s.classList.add(x.metric),s.addEventListener("click",(()=>e.toggleMetric(t)));const i=document.createElement("span");i.classList.add(x.label),i.innerText=t.name(),s.appendChild(i);const n=document.createElement("span");n.classList.add(x.value),s.appendChild(n),this.metrics.set(t,{element:s,enabled:!1,available:!1,value:n}),this.elem.appendChild(s)}for(const{element:e,enabled:t}of this.metrics.values())t||this.elem.appendChild(e);this.applySettings()}updateMetrics(){for(const[e,t]of this.metrics)e.hasData()!==t.available&&(t.available=e.hasData(),t.element.classList[e.hasData()?"add":"remove"](x.available))}updateMetric(e,t){const s=this.metrics.get(e);s&&(e.hasData()!==s.available&&(s.available=e.hasData(),s.element.classList[e.hasData()?"add":"remove"](x.available)),s.available&&(s.value.innerText=e.format(t)))}applySettings(){for(const[e,t]of this.metrics.entries())t.enabled=this.settings.enabledMetrics.includes(e),t.element.classList[t.enabled?"add":"remove"](x.enabled),t.element.style.setProperty("--metric-color",this.settings.metricColor(e))}}const M=window.devicePixelRatio||1;class b{constructor(e,t,s){this.width=e,this.height=t,this.settings=s,this.elem=document.createElement("canvas"),this.ctx=this.elem.getContext("2d"),this.scale=1,this.updateSize(e,t,!0)}dispose(){}updateSize(e,t,s=!1){(s||e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.applySizing())}applySizing(){const{ctx:e}=this,t=this.scale=M;e.canvas.width=this.width*t,e.canvas.height=this.height*t,e.canvas.style.width=`${this.width}px`,e.canvas.style.height=`${this.height}px`,e.resetTransform(),e.scale(t,t),this.redraw()}redraw(){}}class w extends b{constructor(e,t,s){super(e,t,s),this.rulers=this.createRulers(),this.paths=[],this.rmSettingListener=this.settings.onChange((()=>this.redraw())),this.metricRanges=this.getMetricYRanges(),this.onHoverIndex=()=>{},this.elem.addEventListener("mousemove",(e=>this.onMouseMove(e.pageX))),this.elem.addEventListener("mouseout",(()=>this.clearHover())),window.addEventListener("mouseout",(()=>this.clearHover()))}updateMetrics(e=this.settings.value.easing){let t,s=this.width/this.settings.steps;if(this.ease&&(cancelAnimationFrame(this.ease.raf),s+=this.ease.dx),this.paths=this.createMetricPaths(),!e)return void this.drawGraph();const i=e=>{const a=Math.min(1,(e-t)/200),r=s*(1-a);this.drawGraph(r),1===a?this.ease=void 0:(n.dx=r,n.raf=requestAnimationFrame(i))},n={dx:s,raf:requestAnimationFrame((e=>{t=e,i(e)}))};this.ease=n}dispose(){super.dispose(),this.rmSettingListener(),this.ease&&cancelAnimationFrame(this.ease.raf)}redraw(){this.rulers=this.createRulers(),this.metricRanges=this.getMetricYRanges(),this.updateMetrics(!1)}drawGraph(e=0){if(this.ctx.clearRect(0,0,this.width,this.height),this.ctx.globalAlpha=1,this.ctx.strokeStyle=this.settings.colors.border,this.ctx.stroke(this.rulers),this.ctx.save(),this.ctx.translate(e,0),this.hoveredIndex&&this.settings.enabledMetrics.length){const e=this.width/this.settings.steps,t=this.width-(this.settings.enabledMetrics[0].index-this.hoveredIndex)*e;this.ctx.beginPath(),this.ctx.moveTo(t,0),this.ctx.lineTo(t,this.height),this.ctx.stroke()}this.ctx.globalAlpha=.1;for(const[e,t]of this.paths)this.ctx.fillStyle=t,this.ctx.fill(e);this.ctx.globalAlpha=1;for(const[e,t]of this.paths)this.ctx.strokeStyle=t,this.ctx.stroke(e);this.ctx.restore()}clearHover(){void 0!==this.hoveredIndex&&(this.hoveredIndex=void 0,this.onHoverIndex(),this.ease||this.drawGraph(0))}onMouseMove(e){const{steps:t,enabledMetrics:s}=this.settings;if(!s.length)return;const i=Math.max(0,s[0].index-Math.round((1-e/this.width)*t));i!==this.hoveredIndex&&(this.hoveredIndex=i,this.onHoverIndex(),this.ease||this.drawGraph(0))}createRulers(){const e=new Path2D,t=this.settings.value.splitCharts?this.getMetricYRanges():[[0,this.height]];for(const[s,i]of t){const t=(i-s)/4;let n=s+t;for(let s=0;s<4;s++){const s=Math.floor(n)-.5;e.moveTo(0,s),e.lineTo(this.width,s),n+=t}}return e}getMetricYRanges(){const e=this.settings.enabledMetrics;if(!this.settings.value.splitCharts)return e.map((()=>[0,this.height]));const t=this.height/e.length;return e.map(((s,i)=>[Math.ceil(t*i+(i>0?1.5:0)),Math.floor(t*(i+1)-(i<e.length-1?1.5:0))]))}createMetricPaths(){return this.settings.enabledMetrics.map(((e,t)=>[this.createMetricPath(e,this.metricRanges[t][0],this.metricRanges[t][1]),this.settings.metricColor(e)]))}createMetricPath({maxY:e,metrics:t},s,i){const n=this.width,a=i-.5,r=n/this.settings.steps,o=new Path2D;if(0===t.length)return o.moveTo(0,a),o.lineTo(n,a),o;let l=n;o.moveTo(l,C(s,a,1-t[t.length-1]/e));for(let i=t.length-2;i>=0;i--)l-=r,o.lineTo(l,C(s,a,1-t[i]/e));return o.lineTo(l-r,a),o.lineTo(-r,a),o.lineTo(n,a),o}}const C=(e,t,s)=>e+(t-e)*Math.max(0,Math.min(1,s));class T{constructor(){this.innerMetrics=[],this.width=1,this.maxMetric=1,this.lastIncrements=500,this.index=0}get maxY(){let e=10**Math.ceil(Math.log10(this.maxMetric));return e>2*this.maxMetric&&(e/=2),e>2*this.maxMetric&&(e/=2),e}valueAt(e){return this.innerMetrics[this.innerMetrics.length-(this.index-e)-1]}get metrics(){return this.innerMetrics}get current(){return this.innerMetrics[this.innerMetrics.length-1]??0}reset(e,t){const s=Math.ceil(e/t)+3;this.width=s,t!==this.lastIncrements?(this.maxMetric=1,this.index=0,this.innerMetrics=[],this.lastIncrements=t):this.width>this.innerMetrics.length&&(this.innerMetrics=this.innerMetrics.slice(-this.width))}hasData(){return!!this.innerMetrics.length}setData(e){this.innerMetrics=e,this.index=e.length,this.maxMetric=this.recalcMax()}push(e,t){this.innerMetrics.length===this.width&&this.innerMetrics.shift()===this.maxMetric&&t<this.maxMetric&&(this.maxMetric=this.recalcMax()),this.maxMetric=Math.max(this.maxMetric,t),this.innerMetrics.push(t),this.index++}recalcMax(){let e=1;for(const t of this.innerMetrics)e=Math.max(e,t);return e}}class A extends T{constructor(){super(...arguments),this.lastTimeStamp=-1,this.lastMetric=-1}setData(e){super.setData(e),this.lastTimeStamp=-1}push(e,t){const s=this.lastTimeStamp,i=this.lastMetric;this.lastTimeStamp=e,this.lastMetric=t,-1!==this.lastTimeStamp&&super.push(e,(t-i)/(e-s)*1e3)}}const L=["B","KB","MB","GB","TB"],S=new Intl.NumberFormat(void 0,{maximumSignificantDigits:3}),E=new Intl.NumberFormat(void 0,{notation:"compact"}),D=e=>{let t=0;for(;e>1024&&t<L.length;)e/=1024,t++;return`${S.format(e)} ${L[t]}`},F=new Intl.NumberFormat(void 0,{style:"percent",minimumSignificantDigits:2,maximumSignificantDigits:2}),R=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:2}),I=new Intl.NumberFormat(void 0,{maximumFractionDigits:1});class k extends A{update(e,t){t.cpu?this.push(e,t.cpu.user/1e3/1e3):void 0!==t.TaskDuration&&this.push(e,t.TaskDuration/1e3)}format(e){return(e=Math.max(0,Math.min(1,e)))>=.01?F.format(e):R.format(e)}name(){return"CPU Usage"}short(){return"CPU"}recalcMax(){return 1}}class Z extends T{update(e,t){t.memory?this.push(e,t.memory.heapUsed):void 0!==t.JSHeapUsedSize&&this.push(e,t.JSHeapUsedSize)}format(e){return D(e)}short(){return"Heap"}name(){return"Heap Used"}}class U extends T{update(e,t){t.memory&&this.push(e,t.memory.heapTotal)}format(e){return D(e)}short(){return"Heap Total"}name(){return"Heap Total"}}class z extends T{update(e,t){t.memory&&this.push(e,t.memory.rss)}format(e){return D(e)}short(){return"RSS"}name(){return"Resident Set Size"}}class Y extends T{update(e,t){t.memory&&this.push(e,t.memory.external)}format(e){return D(e)}short(){return"External"}name(){return"External Memory"}}class P extends T{update(e,t){t.memory&&this.push(e,t.memory.arrayBuffers)}format(e){return D(e)}short(){return"ArrayBuffer"}name(){return"ArrayBuffer Memory"}}class q extends T{update(e,t){t.Nodes&&this.push(e,t.Nodes)}format(e){return E.format(e)}short(){return"DOM Nodes"}name(){return"DOM Nodes"}}class H extends A{update(e,t){void 0!==t.LayoutCount&&this.push(e,t.LayoutCount/1e3)}format(e){return E.format(e)}short(){return"Relayouts"}name(){return"DOM Relayouts / s"}}class O extends A{update(e,t){void 0!==t.RecalcStyleCount&&this.push(e,t.RecalcStyleCount/1e3)}format(e){return E.format(e)}short(){return"Restyles"}name(){return"Style Recalcs / s"}}const B=4/3;var G=s(298),Q={};Q.styleTagTransform=u(),Q.setAttributes=l(),Q.insert=r().bind(null,"head"),Q.domAPI=n(),Q.insertStyleElement=h(),t()(G.A,Q);const X=G.A&&G.A.locals?G.A.locals:void 0,W=()=>{const e=String(document.documentElement.getAttribute("style")),t=new RegExp("--vscode-(.*?):(.*?)(;|$)","g"),s={};let i;for(;null!==(i=t.exec(e));){const[,e,t]=i;s[e]=t}return s},_=acquireVsCodeApi(),V=new class{get enabledMetrics(){return this.value.enabledMetrics.map((e=>this.allMetrics[e])).filter(Boolean)}constructor(e){this.api=e,this.changeListeners=[],this.value={pollInterval:1e3,viewDuration:3e4,zoomLevel:0,enabledMetrics:[],splitCharts:!1,easing:!0},this.allMetrics=[new k,new Z,new U,new z,new Y,new P,new q,new H,new O],this.steps=0,this.update(this.value),(e=>{e(W());new MutationObserver((()=>{e(W())})).observe(document.documentElement,{attributeFilter:["style"],childList:!1,subtree:!1})})((e=>{this.colors={background:e["sideBar-background"],foreground:e["sideBar-foreground"]||e.foreground,border:e["tree-indentGuidesStroke"],graphs:[e["charts-red"],e["charts-yellow"],e["charts-blue"],e["charts-orange"],e["charts-purple"],e["charts-green"]]},this.fireChange()}))}metricColor(e){const t=this.colors.graphs;return t[this.allMetrics.indexOf(e)%t.length]}onChange(e){return this.changeListeners.push(e),()=>this.changeListeners=this.changeListeners.filter((t=>t!==e))}setEnabledMetrics(e){(e.length!==this.enabledMetrics.length||e.some((e=>!this.enabledMetrics.includes(e))))&&(this.api.postMessage({type:3,keys:e.map((e=>this.allMetrics.indexOf(e)))}),this.fireChange())}toggleMetric(e){const t=this.enabledMetrics.includes(e)?this.enabledMetrics.filter((t=>t!==e)):this.enabledMetrics.concat(e);this.setEnabledMetrics(t)}update(e){this.value=e,this.steps=(e=>Math.ceil(e.viewDuration/e.pollInterval))(e),this.fireChange()}fireChange(){for(const e of this.changeListeners)e()}}(_),N=new class{get elem(){return this.elements.container}constructor(e,t,s){this.width=e,this.height=t,this.settings=s,this.valElements=[],this.configOpen=!1,this.configHadManualToggle=!1,this.hasAnyData=!1,this.frameCanvas=new w(this.width,this.height,this.settings),this.elements=this.createElements(),this.settingListener=this.settings.onChange((()=>this.applySettings())),this.configurator=new y(this.settings),this.setConfiguratorOpen(e/t<B),this.applySettings(),this.frameCanvas.onHoverIndex=()=>this.updateValueElements()}dispose(){this.settingListener(),this.frameCanvas.dispose()}updateSize(e,t){if(!this.configHadManualToggle){const s=e/t;s<B?this.setConfiguratorOpen(!0):s>1.5555555555555554&&this.setConfiguratorOpen(!1)}let s,i;this.width=e,this.height=t,this.configOpen?e<600?(s=t-this.configurator.elem.getBoundingClientRect().height,i=e):(s=t,i=e-250):(s=t-18,i=e),this.frameCanvas.updateSize(i,s)}updateMetrics(){const{allMetrics:e,enabledMetrics:t}=this.settings;if(!this.hasAnyData){const s=t.filter((e=>e.hasData()));this.settings.setEnabledMetrics(s.length?s:[e[0],e[1]])}this.configurator.updateMetrics(),this.frameCanvas.updateMetrics(),this.updateMaxElements(),void 0===this.frameCanvas.hoveredIndex&&this.updateValueElements(),this.setHasData(this.settings.allMetrics.some((e=>e.hasData())))}updateValueElements(){for(const[e,{val:t}]of this.valElements)if(this.frameCanvas.hoveredIndex){const s=e.valueAt(this.frameCanvas.hoveredIndex)??e.current;t.innerText=e.format(s),this.configurator.updateMetric(e,s)}else t.innerText=e.format(e.current),this.configurator.updateMetric(e,e.current)}updateMaxElements(){for(const[e,{max:t}]of this.valElements)t.innerText=e.format(e.maxY)}setHasData(e){e!==this.hasAnyData&&(this.hasAnyData=e,this.elements.container.classList[e?"remove":"add"](g.noData))}setConfiguratorOpen(e){e!==this.configOpen&&(this.configOpen=e,e?(this.elem.appendChild(this.configurator.elem),this.elem.removeChild(this.elements.labelList),document.body.style.overflowY="auto",this.elements.container.classList.add(g.configOpen)):(this.elem.removeChild(this.configurator.elem),this.elem.appendChild(this.elements.labelList),document.body.style.overflowY="hidden",this.elements.container.classList.remove(g.configOpen)))}createElements(){const e=document.createElement("div");e.classList.add(g.container,g.noData);const t=document.createElement("div");t.style.position="relative",t.appendChild(this.frameCanvas.elem),t.addEventListener("click",(()=>this.toggleConfiguration(!1))),e.appendChild(t);const s=document.createElement("div");s.classList.add(g.noDataText),s.innerText="No data available yet",e.appendChild(s);const i=document.createElement("div");i.classList.add(g.labelList),i.style.height="18px",i.addEventListener("click",(()=>this.toggleConfiguration(!0))),e.appendChild(i);const n=document.createElement("div");n.classList.add(g.timeLeft),t.appendChild(n);const a=document.createElement("div");a.innerText="now",a.classList.add(g.timeRight),t.appendChild(a);const r=document.createElement("div");return r.classList.add(g.maxContainer),t.appendChild(r),this.setSeries(i,r),{container:e,labelList:i,leftTime:n,valueContainer:r}}toggleConfiguration(e=!this.configOpen){e!==this.configOpen&&(this.configHadManualToggle=!0,this.setConfiguratorOpen(e),this.updateSize(this.width,this.height))}applySettings(){const{leftTime:e,labelList:t,valueContainer:s}=this.elements;e.innerText=`${(e=>{if(e<120)return`${I.format(e)}s`;const t=e/60;if(t<120)return`${I.format(t)}m`;const s=t/60;return`${I.format(s)}h`})(this.settings.value.viewDuration/1e3)} ago`,this.setSeries(t,s)}setSeries(e,t){for(const[,{max:e,val:t}]of this.valElements)e.parentElement?.removeChild(e),t.parentElement?.removeChild(t);const s=this.settings.value.splitCharts;t.classList[s?"add":"remove"](g.split),e.innerHTML="",t.innerHTML="",this.valElements=[];for(let s=0;s<this.settings.enabledMetrics.length;s++){const i=this.settings.enabledMetrics[s],n=document.createElement("span");n.style.setProperty("--metric-color",this.settings.metricColor(i)),n.classList.add(g.primary),n.innerText=`${i.name()}: `,e.appendChild(n);const a=document.createElement("span");a.innerText=i.format(i.current),n.appendChild(a);const r=document.createElement("div");r.classList.add(g.max),r.style.top=s/this.settings.enabledMetrics.length*100+"%";const o=document.createElement("span");r.classList.add(g.maxLabel),o.innerText=`${i.short()} `;const l=document.createElement("span");l.innerText=i.format(i.maxY),r.appendChild(o),r.appendChild(l),t.appendChild(r),this.valElements.push([i,{max:l,val:a}])}}}(window.innerWidth,window.innerHeight,V);window.addEventListener("message",(e=>{const t=e.data;switch(t.type){case 1:for(const e of V.allMetrics)e.update(t.data.timestamp,t.data);N.updateMetrics();break;case 0:for(const e of V.allMetrics)e.reset(t.settings.viewDuration,t.settings.pollInterval);V.update(t.settings);break;case 4:for(let e=0;e<t.data.length;e++)V.allMetrics[e].setData(t.data[e]);N.updateMetrics(),J();break;case 5:for(const e of V.allMetrics)e.setData([]);N.updateMetrics(),J()}})),document.body.classList.add(X.body),document.body.appendChild(N.elem);const J=()=>N.updateSize(window.innerWidth,window.innerHeight);new ResizeObserver(J).observe(document.body),function e(){const t=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),s=()=>{setTimeout(J,500),t.removeEventListener("change",s),e()};t.addEventListener("change",s)}()})()})();